!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){"use strict";var t,i;e.fn.fileinputLocales={},e.fn.fileinputThemes={},String.prototype.setTokens=function(e){var t,i,n=this.toString();for(t in e)e.hasOwnProperty(t)&&(i=new RegExp("{"+t+"}","g"),n=n.replace(i,e[t]));return n},t={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",OBJECT_PARAMS:'<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],objUrl:window.URL||window.webkitURL,createObjectURL:function(e){return t.objUrl&&t.objUrl.createObjectURL&&e?t.objUrl.createObjectURL(e):""},revokeObjectURL:function(e){t.objUrl&&t.objUrl.revokeObjectURL&&e&&t.objUrl.revokeObjectURL(e)},compare:function(e,t,i){return void 0!==e&&(i?e===t:e.match(t))},isIE:function(e){var t,i;return"Microsoft Internet Explorer"===navigator.appName&&(10===e?new RegExp("msie\\s"+e,"i").test(navigator.userAgent):((t=document.createElement("div")).innerHTML="\x3c!--[if IE "+e+"]> <i></i> <![endif]--\x3e",i=t.getElementsByTagName("i").length,document.body.appendChild(t),t.parentNode.removeChild(t),i))},canAssignFilesToInput:function(){var e=document.createElement("input");try{return e.type="file",e.files=null,!0}catch(e){return!1}},getDragDropFolders:function(e){var t,i,n=e?e.length:0,o=0;if(n>0&&e[0].webkitGetAsEntry())for(t=0;n>t;t++)(i=e[t].webkitGetAsEntry())&&i.isDirectory&&o++;return o},initModal:function(t){var i=e("body");i.length&&t.appendTo(i)},isEmpty:function(t,i){return null==t||0===t.length||i&&""===e.trim(t)},isArray:function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},ifSet:function(e,t,i){return i=i||"",t&&"object"==typeof t&&e in t?t[e]:i},cleanArray:function(e){return e instanceof Array||(e=[]),e.filter(function(e){return null!=e})},spliceArray:function(t,i,n){var o,a,r=0,s=[];if(!(t instanceof Array))return[];for(a=e.extend(!0,[],t),n&&a.reverse(),o=0;o<a.length;o++)o!==i&&(s[r]=a[o],r++);return n&&s.reverse(),s},getNum:function(e,t){return t=t||0,"number"==typeof e?e:("string"==typeof e&&(e=parseFloat(e)),isNaN(e)?t:e)},hasFileAPISupport:function(){return!(!window.File||!window.FileReader)},hasDragDropSupport:function(){var e=document.createElement("div");return!t.isIE(9)&&(void 0!==e.draggable||void 0!==e.ondragstart&&void 0!==e.ondrop)},hasFileUploadSupport:function(){return t.hasFileAPISupport()&&window.FormData},hasBlobSupport:function(){try{return!!window.Blob&&Boolean(new Blob)}catch(e){return!1}},hasArrayBufferViewSupport:function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}},dataURI2Blob:function(e){var i,n,o,a,r,s,l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,c=t.hasBlobSupport();if(!((c||l)&&window.atob&&window.ArrayBuffer&&window.Uint8Array))return null;for(i=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),n=new ArrayBuffer(i.length),o=new Uint8Array(n),a=0;a<i.length;a+=1)o[a]=i.charCodeAt(a);return r=e.split(",")[0].split(":")[1].split(";")[0],c?new Blob([t.hasArrayBufferViewSupport()?o:n],{type:r}):((s=new l).append(n),s.getBlob(r))},arrayBuffer2String:function(e){if(window.TextDecoder)return new TextDecoder("utf-8").decode(e);var t,i,n,o,a=Array.prototype.slice.apply(new Uint8Array(e)),r="",s=0;for(t=a.length;t>s;)switch(i=a[s++],i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(i);break;case 12:case 13:n=a[s++],r+=String.fromCharCode((31&i)<<6|63&n);break;case 14:n=a[s++],o=a[s++],r+=String.fromCharCode((15&i)<<12|(63&n)<<6|(63&o)<<0)}return r},isHtml:function(e){var t=document.createElement("div");t.innerHTML=e;for(var i=t.childNodes,n=i.length;n--;)if(1===i[n].nodeType)return!0;return!1},isSvg:function(e){return e.match(/^\s*<\?xml/i)&&(e.match(/<!DOCTYPE svg/i)||e.match(/<svg/i))},getMimeType:function(e,t,i){switch(e){case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":return"image/jpeg";case"89504E47":return"image/png";case"47494638":return"image/gif";case"49492a00":return"image/tiff";case"52494646":return"image/webp";case"66747970":return"video/3gp";case"4f676753":return"video/ogg";case"1a45dfa3":return"video/mkv";case"000001ba":case"000001b3":return"video/mpeg";case"3026b275":return"video/wmv";case"25504446":return"application/pdf";case"25215053":return"application/ps";case"504b0304":case"504b0506":case"504b0508":return"application/zip";case"377abcaf":return"application/7z";case"75737461":return"application/tar";case"7801730d":return"application/dmg";default:switch(e.substring(0,6)){case"435753":return"application/x-shockwave-flash";case"494433":return"audio/mp3";case"425a68":return"application/bzip";default:switch(e.substring(0,4)){case"424d":return"image/bmp";case"fffb":return"audio/mp3";case"4d5a":return"application/exe";case"1f9d":case"1fa0":return"application/zip";case"1f8b":return"application/gzip";default:return t&&!t.match(/[^\u0000-\u007f]/)?"application/text-plain":i}}}},addCss:function(e,t){e.removeClass(t).addClass(t)},getElement:function(i,n,o){return t.isEmpty(i)||t.isEmpty(i[n])?o:e(i[n])},uniqId:function(){return Math.round((new Date).getTime())+"_"+Math.round(100*Math.random())},htmlEncode:function(e,t){return void 0===e?t||null:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(t,i){var n=t;return i?(e.each(i,function(e,t){"function"==typeof t&&(t=t()),n=n.split(e).join(t)}),n):n},cleanMemory:function(e){var i=e.is("img")?e.attr("src"):e.find("source").attr("src");t.revokeObjectURL(i)},findFileName:function(e){var t=e.lastIndexOf("/");return-1===t&&(t=e.lastIndexOf("\\")),e.split(e.substring(t,t+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(e){var i=document,n=i.documentElement;n&&e&&!t.checkFullScreen()?n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):i.exitFullscreen?i.exitFullscreen():i.msExitFullscreen?i.msExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen&&i.webkitExitFullscreen()},moveArray:function(t,i,n,o){var a=e.extend(!0,[],t);if(o&&a.reverse(),n>=a.length)for(var r=n-a.length;1+r--;)a.push(void 0);return a.splice(n,0,a.splice(i,1)[0]),o&&a.reverse(),a},cleanZoomCache:function(e){var t=e.closest(".kv-zoom-cache-theme");t.length||(t=e.closest(".kv-zoom-cache")),t.remove()},closeButton:function(e){return'<button type="button" class="'+(e=e?"close "+e:"close")+'" aria-label="Close">\n  <span aria-hidden="true">&times;</span>\n</button>'},getRotation:function(e){switch(e){case 2:return"rotateY(180deg)";case 3:return"rotate(180deg)";case 4:return"rotate(180deg) rotateY(180deg)";case 5:return"rotate(270deg) rotateY(180deg)";case 6:return"rotate(90deg)";case 7:return"rotate(90deg) rotateY(180deg)";case 8:return"rotate(270deg)";default:return""}},setTransform:function(e,t){e&&(e.style.transform=t,e.style.webkitTransform=t,e.style["-moz-transform"]=t,e.style["-ms-transform"]=t,e.style["-o-transform"]=t)},setImageOrientation:function(e,i,n){if(e&&e.length){var o="load.fileinputimageorient";e.off(o).on(o,function(){var o=e.get(0),a=i&&i.length?i.get(0):null,r=o.offsetHeight,s=o.offsetWidth,l=t.getRotation(n);if(e.data("orientation",n),a&&i.data("orientation",n),5>n)return t.setTransform(o,l),void t.setTransform(a,l);var c=Math.atan(s/r),u=Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),d=u?r/Math.cos(Math.PI/2+c)/u:1,h=" scale("+Math.abs(d)+")";t.setTransform(o,l+h),t.setTransform(a,l+h)})}}},(i=function(i,n){var o=this;o.$element=e(i),o.$parent=o.$element.parent(),o._validate()&&(o.isPreviewable=t.hasFileAPISupport(),o.isIE9=t.isIE(9),o.isIE10=t.isIE(10),(o.isPreviewable||o.isIE9)&&(o._init(n),o._listen()),o.$element.removeClass("file-loading"))}).prototype={constructor:i,_cleanup:function(){var e=this;e.reader=null,e.formdata={},e.uploadCount=0,e.uploadStatus={},e.uploadLog=[],e.uploadAsyncCount=0,e.loadedImages=[],e.totalImagesCount=0,e.ajaxRequests=[],e.clearStack(),e.fileBatchCompleted=!0,e.isPreviewable||(e.showPreview=!1),e.isError=!1,e.ajaxAborted=!1,e.cancelling=!1},_init:function(i,n){var o,a,r,s,l=this,c=l.$element;l.options=i,e.each(i,function(e,i){switch(e){case"minFileCount":case"maxFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":l[e]=t.getNum(i);break;default:l[e]=i}}),l.rtl&&(s=l.previewZoomButtonIcons.prev,l.previewZoomButtonIcons.prev=l.previewZoomButtonIcons.next,l.previewZoomButtonIcons.next=s),n||l._cleanup(),l.$form=c.closest("form"),l._initTemplateDefaults(),l.uploadFileAttr=t.isEmpty(c.attr("name"))?"file_data":c.attr("name"),r=l._getLayoutTemplate("progress"),l.progressTemplate=r.replace("{class}",l.progressClass),l.progressCompleteTemplate=r.replace("{class}",l.progressCompleteClass),l.progressErrorTemplate=r.replace("{class}",l.progressErrorClass),l.isDisabled=c.attr("disabled")||c.attr("readonly"),l.isDisabled&&c.attr("disabled",!0),l.isClickable=l.browseOnZoneClick&&l.showPreview&&(l.dropZoneEnabled||!t.isEmpty(l.defaultPreviewContent)),l.isAjaxUpload=t.hasFileUploadSupport()&&!t.isEmpty(l.uploadUrl),l.dropZoneEnabled=t.hasDragDropSupport()&&l.dropZoneEnabled,l.isAjaxUpload||(l.dropZoneEnabled=l.dropZoneEnabled&&t.canAssignFilesToInput()),l.slug="function"==typeof i.slugCallback?i.slugCallback:l._slugDefault,l.mainTemplate=l.showCaption?l._getLayoutTemplate("main1"):l._getLayoutTemplate("main2"),l.captionTemplate=l._getLayoutTemplate("caption"),l.previewGenericTemplate=l._getPreviewTemplate("generic"),!l.imageCanvas&&l.resizeImage&&(l.maxImageWidth||l.maxImageHeight)&&(l.imageCanvas=document.createElement("canvas"),l.imageCanvasContext=l.imageCanvas.getContext("2d")),t.isEmpty(c.attr("id"))&&c.attr("id",t.uniqId()),l.namespace=".fileinput_"+c.attr("id").replace(/-/g,"_"),void 0===l.$container?l.$container=l._createContainer():l._refreshContainer(),a=l.$container,l.$dropZone=a.find(".file-drop-zone"),l.$progress=a.find(".kv-upload-progress"),l.$btnUpload=a.find(".fileinput-upload"),l.$captionContainer=t.getElement(i,"elCaptionContainer",a.find(".file-caption")),l.$caption=t.getElement(i,"elCaptionText",a.find(".file-caption-name")),t.isEmpty(l.msgPlaceholder)||(o=c.attr("multiple")?l.filePlural:l.fileSingle,l.$caption.attr("placeholder",l.msgPlaceholder.replace("{files}",o))),l.$captionIcon=l.$captionContainer.find(".file-caption-icon"),l.$previewContainer=t.getElement(i,"elPreviewContainer",a.find(".file-preview")),l.$preview=t.getElement(i,"elPreviewImage",a.find(".file-preview-thumbnails")),l.$previewStatus=t.getElement(i,"elPreviewStatus",a.find(".file-preview-status")),l.$errorContainer=t.getElement(i,"elErrorContainer",l.$previewContainer.find(".kv-fileinput-error")),l._validateDisabled(),t.isEmpty(l.msgErrorClass)||t.addCss(l.$errorContainer,l.msgErrorClass),n?l._errorsExist()||l.$errorContainer.hide():(l.$errorContainer.hide(),l.previewInitId="preview-"+t.uniqId(),l._initPreviewCache(),l._initPreview(!0),l._initPreviewActions(),l.$parent.hasClass("file-loading")&&(l.$container.insertBefore(l.$parent),l.$parent.remove())),l._setFileDropZoneTitle(),c.attr("disabled")&&l.disable(),l._initZoom(),l.hideThumbnailContent&&t.addCss(l.$preview,"hide-content")},_initTemplateDefaults:function(){var i,n,o,a,r,s,l,c,u,d,h=this;i=t.closeButton("fileinput-remove"),n='<div id="'+t.MODAL_ID+'" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="'+t.MODAL_ID+'Label"></div>',o='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"',u=" {style}",a='<video class="kv-preview-data file-preview-video" controls'+u+'>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</video>\n",r='\x3c!--suppress ALL --\x3e<audio class="kv-preview-data file-preview-audio" controls'+u+'>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</audio>\n",l='<embed class="kv-preview-data file-preview-pdf" src="{data}" type="application/pdf"'+u+">\n",s='<object class="kv-preview-data file-preview-object file-object {typeCss}" data="{data}" type="{type}"'+u+'>\n<param name="movie" value="{caption}" />\n'+t.OBJECT_PARAMS+" "+t.DEFAULT_PREVIEW+"\n</object>\n",c='<div class="kv-preview-data file-preview-other-frame"'+u+">\n"+t.DEFAULT_PREVIEW+"\n</div>\n",d={width:"100%",height:"100%","min-height":"480px"},h._isPdfRendered()&&(l=h.pdfRendererTemplate.replace("{renderer}",h._encodeURI(h.pdfRendererUrl))),h.defaults={layoutTemplates:{main1:'{preview}\n<div class="kv-upload-progress kv-hidden"></div><div class="clearfix"></div>\n<div class="input-group {class}">\n  {caption}\n<div class="input-group-btn input-group-append">\n      {remove}\n      {cancel}\n      {upload}\n      {browse}\n    </div>\n</div>',main2:'{preview}\n<div class="kv-upload-progress kv-hidden"></div>\n<div class="clearfix"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',preview:'<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',close:i,fileIcon:'<i class="glyphicon glyphicon-file"></i>',caption:'<div class="file-caption form-control {class}" tabindex="500">\n  <span class="file-caption-icon"></span>\n  <input class="file-caption-name" onkeydown="return false;" onpaste="return false;">\n</div>',modalMain:n,modal:'<div class="modal-dialog modal-lg{rtl}" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <h5 class="modal-title">{heading}</h5>\n      <span class="kv-zoom-title"></span>\n      <div class="kv-zoom-actions">{toggleheader}{fullscreen}{borderless}{close}</div>\n    </div>\n    <div class="modal-body">\n      <div class="floating-buttons"></div>\n      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n{prev} {next}\n    </div>\n  </div>\n</div>\n',progress:'<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     </div>\n</div>',size:" <samp>({sizeText})</samp>",footer:'<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">\n        <div class="file-caption-info">{caption}</div>\n        <div class="file-size-info">{size}</div>\n    </div>\n    {progress}\n{indicator}\n{actions}\n</div>',indicator:'<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>',actions:'<div class="file-actions">\n    <div class="file-footer-buttons">\n        {download} {upload} {delete} {zoom} {other}    </div>\n</div>\n{drag}\n<div class="clearfix"></div>',actionDelete:'<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n',actionUpload:'<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',actionDownload:'<a class="kv-file-download {downloadClass}" title="{downloadTitle}" href="{downloadUrl}" download="{caption}" target="_blank">{downloadIcon}</a>',actionZoom:'<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',actionDrag:'<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',btnDefault:'<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</button>',btnLink:'<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>',btnBrowse:'<div tabindex="500" class="{css}" {status}>{icon} {label}</div>',zoomCache:'<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>'},previewMarkupTags:{tagBefore1:'<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"><div class="kv-file-content">\n',tagBefore2:'<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}" title="{caption}"><div class="kv-file-content">\n',tagAfter:"</div>{footer}\n</div>\n"},previewContentTemplates:{generic:"{content}\n",html:'<div class="kv-preview-data file-preview-html" title="{caption}" {style}>{data}</div>\n',image:'<img src="{data}" class="file-preview-image kv-preview-data" title="{caption}" alt="{caption}" {style}>\n',text:'<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly {style}>{data}</textarea>\n',office:'<iframe class="kv-preview-data file-preview-office" src="https://view.officeapps.live.com/op/embed.aspx?src={data}" {style}></iframe>',gdocs:'<iframe class="kv-preview-data file-preview-gdocs" src="https://docs.google.com/gview?url={data}&embedded=true" {style}></iframe>',video:a,audio:r,flash:'<embed class="kv-preview-data file-preview-flash" src="{data}" type="application/x-shockwave-flash" {style}>\n',object:s,pdf:l,other:c},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},office:{width:"213px",height:"160px"},gdocs:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"100%",height:"30px"},flash:{width:"213px",height:"160px"},object:{width:"213px",height:"160px"},pdf:{width:"100%",height:"160px"},other:{width:"213px",height:"160px"}},previewSettingsSmall:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"160px"},text:{width:"100%",height:"160px"},office:{width:"100%",height:"160px"},gdocs:{width:"100%",height:"160px"},video:{width:"100%",height:"auto"},audio:{width:"100%",height:"30px"},flash:{width:"100%",height:"auto"},object:{width:"100%",height:"auto"},pdf:{width:"100%",height:"160px"},other:{width:"100%",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:d,text:d,office:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},gdocs:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:d,other:{width:"auto",height:"100%","min-height":"480px"}},mimeTypeAliases:{"video/quicktime":"video/mp4"},fileTypeSettings:{image:function(e,i){return t.compare(e,"image.*")&&!t.compare(e,/(tiff?|wmf)$/i)||t.compare(i,/\.(gif|png|jpe?g)$/i)},html:function(e,i){return t.compare(e,"text/html")||t.compare(i,/\.(htm|html)$/i)},office:function(e,i){return t.compare(e,/(word|excel|powerpoint|office)$/i)||t.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?)$/i)},gdocs:function(e,i){return t.compare(e,/(word|excel|powerpoint|office|iwork-pages|tiff?)$/i)||t.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?|rtf|ods|odt|pages|ai|dxf|ttf|tiff?|wmf|e?ps)$/i)},text:function(e,i){return t.compare(e,"text.*")||t.compare(i,/\.(xml|javascript)$/i)||t.compare(i,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(e,i){return t.compare(e,"video.*")&&(t.compare(e,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||t.compare(i,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(e,i){return t.compare(e,"audio.*")&&(t.compare(i,/(ogg|mp3|mp?g|wav)$/i)||t.compare(i,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(e,i){return t.compare(e,"application/x-shockwave-flash",!0)||t.compare(i,/\.(swf)$/i)},pdf:function(e,i){return t.compare(e,"application/pdf",!0)||t.compare(i,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},fileActionSettings:{showRemove:!0,showUpload:!0,showDownload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",removeErrorClass:"btn btn-sm btn-kv btn-danger",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",uploadTitle:"Upload file",uploadRetryIcon:'<i class="glyphicon glyphicon-repeat"></i>',uploadRetryTitle:"Retry upload",downloadIcon:'<i class="glyphicon glyphicon-download"></i>',downloadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",downloadTitle:"Download file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',zoomClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-move"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-plus-sign text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hourglass text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."}},e.each(h.defaults,function(t,i){return"allowedPreviewTypes"===t?void(void 0===h.allowedPreviewTypes&&(h.allowedPreviewTypes=i)):void(h[t]=e.extend(!0,{},i,h[t]))}),h._initPreviewTemplates()},_initPreviewTemplates:function(){var i,n=this,o=n.previewMarkupTags,a=o.tagAfter;e.each(n.previewContentTemplates,function(e,r){t.isEmpty(n.previewTemplates[e])&&(i=o.tagBefore2,"generic"!==e&&"image"!==e&&"html"!==e&&"text"!==e||(i=o.tagBefore1),n._isPdfRendered()&&"pdf"===e&&(i=i.replace("kv-file-content","kv-file-content kv-pdf-rendered")),n.previewTemplates[e]=i+r+a)})},_initPreviewCache:function(){var i=this;i.previewCache={data:{},init:function(){var e=i.initialPreview;e.length>0&&!t.isArray(e)&&(e=e.split(i.initialPreviewDelimiter)),i.previewCache.data={content:e,config:i.initialPreviewConfig,tags:i.initialPreviewThumbTags}},count:function(){return i.previewCache.data&&i.previewCache.data.content?i.previewCache.data.content.length:0},get:function(n,o){var a,r,s,l,c,u,d,h="init_"+n,p=i.previewCache.data,f=p.config[n],m=p.content[n],v=i.previewInitId+"-"+h,g=t.ifSet("previewAsData",f,i.initialPreviewAsData),b=function(e,n,o,a,r,s,l,c,u){return c=" file-preview-initial "+t.SORT_CSS+(c?" "+c:""),i._generatePreviewTemplate(e,n,o,a,r,!1,null,c,s,l,u)};return m?(o=void 0===o||o,s=t.ifSet("type",f,i.initialPreviewFileType||"generic"),c=t.ifSet("filename",f,t.ifSet("caption",f)),u=t.ifSet("filetype",f,s),l=i.previewCache.footer(n,o,f&&f.size||null),d=t.ifSet("frameClass",f),a=g?b(s,m,c,u,v,l,h,d):b("generic",m,c,u,v,l,h,d,s).setTokens({content:p.content[n]}),p.tags.length&&p.tags[n]&&(a=t.replaceTags(a,p.tags[n])),t.isEmpty(f)||t.isEmpty(f.frameAttr)||((r=e(document.createElement("div")).html(a)).find(".file-preview-initial").attr(f.frameAttr),a=r.html(),r.remove()),a):""},add:function(e,n,o,a){var r,s=i.previewCache.data;return t.isArray(e)||(e=e.split(i.initialPreviewDelimiter)),a?(r=s.content.push(e)-1,s.config[r]=n,s.tags[r]=o):(r=e.length-1,s.content=e,s.config=n,s.tags=o),i.previewCache.data=s,r},set:function(e,n,o,a){var r,s=i.previewCache.data;if(e&&e.length&&(t.isArray(e)||(e=e.split(i.initialPreviewDelimiter)),e.filter(function(e){return null!==e}).length)){if(void 0===s.content&&(s.content=[]),void 0===s.config&&(s.config=[]),void 0===s.tags&&(s.tags=[]),a){for(r=0;r<e.length;r++)e[r]&&s.content.push(e[r]);for(r=0;r<n.length;r++)n[r]&&s.config.push(n[r]);for(r=0;r<o.length;r++)o[r]&&s.tags.push(o[r])}else s.content=e,s.config=n,s.tags=o;i.previewCache.data=s}},unset:function(e){var n=i.previewCache.count(),o=i.reversePreviewOrder;if(n){if(1===n)return i.previewCache.data.content=[],i.previewCache.data.config=[],i.previewCache.data.tags=[],i.initialPreview=[],i.initialPreviewConfig=[],void(i.initialPreviewThumbTags=[]);i.previewCache.data.content=t.spliceArray(i.previewCache.data.content,e,o),i.previewCache.data.config=t.spliceArray(i.previewCache.data.config,e,o),i.previewCache.data.tags=t.spliceArray(i.previewCache.data.tags,e,o)}},out:function(){var e,t,n="",o=i.previewCache.count();if(0===o)return{content:"",caption:""};for(e=0;o>e;e++)t=i.previewCache.get(e),n=i.reversePreviewOrder?t+n:n+t;return{content:n,caption:i._getMsgSelected(o)}},footer:function(e,n,o){var a=i.previewCache.data||{};if(t.isEmpty(a.content))return"";(t.isEmpty(a.config)||t.isEmpty(a.config[e]))&&(a.config[e]={}),n=void 0===n||n;var r,s=a.config[e],l=t.ifSet("caption",s),c=t.ifSet("width",s,"auto"),u=t.ifSet("url",s,!1),d=t.ifSet("key",s,null),h=i.fileActionSettings,p=i.initialPreviewShowDelete||!1,f=s.downloadUrl||i.initialPreviewDownloadUrl||"",m=s.filename||s.caption||"",v=!!f,g=t.ifSet("showRemove",s,t.ifSet("showRemove",h,p)),b=t.ifSet("showDownload",s,t.ifSet("showDownload",h,v)),y=t.ifSet("showZoom",s,t.ifSet("showZoom",h,!0)),w=t.ifSet("showDrag",s,t.ifSet("showDrag",h,!0)),k=!1===u&&n;return b=b&&!1!==s.downloadUrl&&!!f,r=i._renderFileActions(!1,b,g,y,w,k,u,d,!0,f,m),i._getLayoutTemplate("footer").setTokens({progress:i._renderThumbProgress(),actions:r,caption:l,size:i._getSize(o),width:c,indicator:""})}},i.previewCache.init()},_isPdfRendered:function(){var e=this.usePdfRenderer;return("function"==typeof e?e():!!e)&&this.pdfRendererUrl},_handler:function(e,t,i){var n=this.namespace,o=t.split(" ").join(n+" ")+n;e&&e.length&&e.off(o).on(o,i)},_encodeURI:function(e){return this.encodeUrl?encodeURI(e):e},_log:function(e){var t=this.$element.attr("id");t&&(e='"'+t+'": '+e),e="bootstrap-fileinput: "+e,void 0!==window.console.log?window.console.log(e):window.alert(e)},_validate:function(){var e="file"===this.$element.attr("type");return e||this._log('The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.'),e},_errorsExist:function(){var t;return!!this.$errorContainer.find("li").length||((t=e(document.createElement("div")).html(this.$errorContainer.html())).find(".kv-error-close").remove(),t.find("ul").remove(),!!e.trim(t.text()).length)},_errorHandler:function(e,t){var i=this,n=e.target.error;!function(e){i._showError(e.replace("{name}",t))}(n.code===n.NOT_FOUND_ERR?i.msgFileNotFound:n.code===n.SECURITY_ERR?i.msgFileSecured:n.code===n.NOT_READABLE_ERR?i.msgFileNotReadable:n.code===n.ABORT_ERR?i.msgFilePreviewAborted:i.msgFilePreviewError)},_addError:function(e){var t=this,i=t.$errorContainer;e&&i.length&&(i.html(t.errorCloseButton+e),t._handler(i.find(".kv-error-close"),"click",function(){setTimeout(function(){t.showPreview&&!t.getFrames().length&&t.clear(),i.fadeOut("slow")},10)}))},_setValidationError:function(e){e=(e?e+" ":"")+"has-error",this.$container.removeClass(e).addClass("has-error"),t.addCss(this.$captionContainer,"is-invalid")},_resetErrors:function(e){var t=this,i=t.$errorContainer;t.isError=!1,t.$container.removeClass("has-error"),t.$captionContainer.removeClass("is-invalid"),i.html(""),e?i.fadeOut("slow"):i.hide()},_showFolderError:function(e){var t,i=this,n=i.$errorContainer;e&&(i.isAjaxUpload||i._clearFileInput(),t=i.msgFoldersNotAllowed.replace("{n}",e),i._addError(t),i._setValidationError(),n.fadeIn(800),i._raise("filefoldererror",[e,t]))},_showUploadError:function(e,t,i){var n=this,o=n.$errorContainer,a=i||"fileuploaderror",r=t&&t.id?'<li data-file-id="'+t.id+'">'+e+"</li>":"<li>"+e+"</li>";return 0===o.find("ul").length?n._addError("<ul>"+r+"</ul>"):o.find("ul").append(r),o.fadeIn(800),n._raise(a,[t,e]),n._setValidationError("file-input-new"),!0},_showError:function(e,t,i){var n=this,o=n.$errorContainer,a=i||"fileerror";return(t=t||{}).reader=n.reader,n._addError(e),o.fadeIn(800),n._raise(a,[t,e]),n.isAjaxUpload||n._clearFileInput(),n._setValidationError("file-input-new"),n.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(e){var t=this,i=t.minFileCount>1?t.filePlural:t.fileSingle,n=t.msgFilesTooLess.replace("{n}",t.minFileCount).replace("{files}",i),o=t.$errorContainer;t._addError(n),t.isError=!0,t._updateFileDetails(0),o.fadeIn(800),t._raise("fileerror",[e,n]),t._clearFileInput(),t._setValidationError()},_parseError:function(t,i,n,o){var a,r=this,s=e.trim(n+""),l=void 0!==i.responseJSON&&void 0!==i.responseJSON.error?i.responseJSON.error:i.responseText;return r.cancelling&&r.msgUploadAborted&&(s=r.msgUploadAborted),r.showAjaxErrorDetails&&l&&(a=(l=e.trim(l.replace(/\n\s*\n/g,"\n"))).length?"<pre>"+l+"</pre>":"",s+=s?a:l),s||(s=r.msgAjaxError.replace("{operation}",t)),r.cancelling=!1,o?"<b>"+o+": </b>"+s:s},_parseFileType:function(e,i){var n,o,a,r=this.allowedPreviewTypes||[];if("application/text-plain"===e)return"text";for(a=0;a<r.length;a++)if(o=r[a],n=(0,this.fileTypeSettings[o])(e,i)?o:"",!t.isEmpty(n))return n;return"other"},_getPreviewIcon:function(t){var i,n=this,o=null;return t&&t.indexOf(".")>-1&&(i=t.split(".").pop(),n.previewFileIconSettings&&(o=n.previewFileIconSettings[i]||n.previewFileIconSettings[i.toLowerCase()]||null),n.previewFileExtSettings&&e.each(n.previewFileExtSettings,function(e,t){return n.previewFileIconSettings[e]&&t(i)?void(o=n.previewFileIconSettings[e]):void 0})),o},_parseFilePreviewIcon:function(e,t){var i=this,n=i._getPreviewIcon(t)||i.previewFileIcon,o=e;return o.indexOf("{previewFileIcon}")>-1&&(o=o.setTokens({previewFileIconClass:i.previewFileIconClass,previewFileIcon:n})),o},_raise:function(t,i){var n=this,o=e.Event(t);if(void 0!==i?n.$element.trigger(o,i):n.$element.trigger(o),o.isDefaultPrevented()||!1===o.result)return!1;switch(t){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:n.ajaxAborted||(n.ajaxAborted=o.result)}return!0},_listenFullScreen:function(e){var t,i,n=this,o=n.$modal;o&&o.length&&(t=o&&o.find(".btn-fullscreen"),i=o&&o.find(".btn-borderless"),t.length&&i.length&&(t.removeClass("active").attr("aria-pressed","false"),i.removeClass("active").attr("aria-pressed","false"),e?t.addClass("active").attr("aria-pressed","true"):i.addClass("active").attr("aria-pressed","true"),o.hasClass("file-zoom-fullscreen")?n._maximizeZoomDialog():e?n._maximizeZoomDialog():i.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var i=this,n=i.$element,o=i.$form,a=i.$container;i._handler(n,"click",function(e){n.hasClass("file-no-browse")&&(n.data("zoneClicked")?n.data("zoneClicked",!1):e.preventDefault())}),i._handler(n,"change",e.proxy(i._change,i)),i.showBrowse&&i._handler(i.$btnFile,"click",e.proxy(i._browse,i)),i._handler(a.find(".fileinput-remove:not([disabled])"),"click",e.proxy(i.clear,i)),i._handler(a.find(".fileinput-cancel"),"click",e.proxy(i.cancel,i)),i._initDragDrop(),i._handler(o,"reset",e.proxy(i.clear,i)),i.isAjaxUpload||i._handler(o,"submit",e.proxy(i._submitForm,i)),i._handler(i.$container.find(".fileinput-upload"),"click",e.proxy(i._uploadClick,i)),i._handler(e(window),"resize",function(){i._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)}),i._handler(e(document),"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){i._listenFullScreen(t.checkFullScreen())}),i._autoFitContent(),i._initClickable(),i._refreshPreview()},_autoFitContent:function(){var t,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=this,o=400>i?n.previewSettingsSmall||n.defaults.previewSettingsSmall:n.previewSettings||n.defaults.previewSettings;e.each(o,function(e,i){t=".file-preview-frame .file-preview-"+e,n.$preview.find(t+".kv-preview-data,"+t+" .kv-preview-data").css(i)})},_scanDroppedItems:function(e,t,i){i=i||"";var n,o,a,r=this,s=function(e){r._log("Error scanning dropped files!"),r._log(e)};e.isFile?e.file(function(e){t.push(e)},s):e.isDirectory&&(o=e.createReader(),(a=function(){o.readEntries(function(o){if(o&&o.length>0){for(n=0;n<o.length;n++)r._scanDroppedItems(o[n],t,i+e.name+"/");a()}return null},s)})())},_initDragDrop:function(){var t=this,i=t.$dropZone;t.dropZoneEnabled&&t.showPreview&&(t._handler(i,"dragenter dragover",e.proxy(t._zoneDragEnter,t)),t._handler(i,"dragleave",e.proxy(t._zoneDragLeave,t)),t._handler(i,"drop",e.proxy(t._zoneDrop,t)),t._handler(e(document),"dragenter dragover drop",t._zoneDragDropInit))},_zoneDragDropInit:function(e){e.stopPropagation(),e.preventDefault()},_zoneDragEnter:function(i){var n=this,o=i.originalEvent.dataTransfer,a=e.inArray("Files",o.types)>-1;return n._zoneDragDropInit(i),n.isDisabled||!a?(i.originalEvent.dataTransfer.effectAllowed="none",void(i.originalEvent.dataTransfer.dropEffect="none")):void(n._raise("fileDragEnter",{sourceEvent:i,files:o.types.Files})&&t.addCss(n.$dropZone,"file-highlighted"))},_zoneDragLeave:function(e){var t=this;t._zoneDragDropInit(e),t.isDisabled||t._raise("fileDragLeave",{sourceEvent:e})&&t.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(e){var i,n=this,o=n.$element,a=e.originalEvent.dataTransfer,r=a.files,s=a.items,l=t.getDragDropFolders(s),c=function(){n.isAjaxUpload?n._change(e,r):(n.changeTriggered=!0,o.get(0).files=r,setTimeout(function(){n.changeTriggered=!1,o.trigger("change"+n.namespace)},10)),n.$dropZone.removeClass("file-highlighted")};if(e.preventDefault(),!n.isDisabled&&!t.isEmpty(r)&&n._raise("fileDragDrop",{sourceEvent:e,files:r}))if(l>0){if(!n.isAjaxUpload)return void n._showFolderError(l);for(r=[],i=0;i<s.length;i++){var u=s[i].webkitGetAsEntry();u&&n._scanDroppedItems(u,r)}setTimeout(function(){c()},500)}else c()},_uploadClick:function(e){var i,n=this,o=n.$container.find(".fileinput-upload"),a=!o.hasClass("disabled")&&t.isEmpty(o.attr("disabled"));if(!e||!e.isDefaultPrevented()){if(!n.isAjaxUpload)return void(a&&"submit"!==o.attr("type")&&(i=o.closest("form"),i.length&&i.trigger("submit"),e.preventDefault()));e.preventDefault(),a&&n.upload()}},_submitForm:function(){return this._isFileSelectionValid()&&!this._abort({})},_clearPreview:function(){var i=this,n=i.$preview;(i.showUploadedThumbs?i.getFrames(":not(.file-preview-success)"):i.getFrames()).each(function(){var i=e(this);i.remove(),t.cleanZoomCache(n.find("#zoom-"+i.attr("id")))}),i.getFrames().length&&i.showPreview||i._resetUpload(),i._validateDefaultPreview()},_initSortable:function(){var i,n=this,o=n.$preview,a="."+t.SORT_CSS,r=n.reversePreviewOrder;window.KvSortable&&0!==o.find(a).length&&(i={handle:".drag-handle-init",dataIdAttr:"data-preview-id",scroll:!1,draggable:a,onSort:function(i){var o=i.oldIndex,a=i.newIndex,s=0;n.initialPreview=t.moveArray(n.initialPreview,o,a,r),n.initialPreviewConfig=t.moveArray(n.initialPreviewConfig,o,a,r),n.previewCache.init(),n.getFrames(".file-preview-initial").each(function(){e(this).attr("data-fileindex","init_"+s),s++}),n._raise("filesorted",{previewId:e(i.item).attr("id"),oldIndex:o,newIndex:a,stack:n.initialPreviewConfig})}},o.data("kvsortable")&&o.kvsortable("destroy"),e.extend(!0,i,n.fileActionSettings.dragSettings),o.kvsortable(i))},_setPreviewContent:function(e){this.$preview.html(e),this._autoFitContent()},_initPreview:function(e){var i,n=this,o=n.initialCaption||"";return n.previewCache.count()?(i=n.previewCache.out(),o=e&&n.initialCaption?n.initialCaption:i.caption,n._setPreviewContent(i.content),n._setInitThumbAttr(),n._setCaption(o),n._initSortable(),void(t.isEmpty(i.content)||n.$container.removeClass("file-input-new"))):(n._clearPreview(),void(e?n._setCaption(o):n._initCaption()))},_getZoomButton:function(e){var t=this,i=t.previewZoomButtonIcons[e],n=t.previewZoomButtonClasses[e],o=' title="'+(t.previewZoomButtonTitles[e]||"")+'" '+("close"===e?' data-dismiss="modal" aria-hidden="true"':"");return"fullscreen"!==e&&"borderless"!==e&&"toggleheader"!==e||(o+=' data-toggle="button" aria-pressed="false" autocomplete="off"'),'<button type="button" class="'+n+" btn-"+e+'"'+o+">"+i+"</button>"},_getModalContent:function(){var e=this;return e._getLayoutTemplate("modal").setTokens({rtl:e.rtl?" kv-rtl":"",zoomFrameClass:e.frameClass,heading:e.msgZoomModalHeading,prev:e._getZoomButton("prev"),next:e._getZoomButton("next"),toggleheader:e._getZoomButton("toggleheader"),fullscreen:e._getZoomButton("fullscreen"),borderless:e._getZoomButton("borderless"),close:e._getZoomButton("close")})},_listenModalEvent:function(e){var i=this,n=i.$modal;n.on(e+".bs.modal",function(o){var a=n.find(".btn-fullscreen"),r=n.find(".btn-borderless");i._raise("filezoom"+e,function(e){return{sourceEvent:e,previewId:n.data("previewId"),modal:n}}(o)),"shown"===e&&(r.removeClass("active").attr("aria-pressed","false"),a.removeClass("active").attr("aria-pressed","false"),n.hasClass("file-zoom-fullscreen")&&(i._maximizeZoomDialog(),t.checkFullScreen()?a.addClass("active").attr("aria-pressed","true"):r.addClass("active").attr("aria-pressed","true")))})},_initZoom:function(){var i,n=this,o=n._getLayoutTemplate("modalMain"),a="#"+t.MODAL_ID;n.showPreview&&(n.$modal=e(a),n.$modal&&n.$modal.length||(i=e(document.createElement("div")).html(o).insertAfter(n.$container),n.$modal=e(a).insertBefore(i),i.remove()),t.initModal(n.$modal),n.$modal.html(n._getModalContent()),e.each(t.MODAL_EVENTS,function(e,t){n._listenModalEvent(t)}))},_initZoomButtons:function(){var t,i,n=this,o=n.$modal.data("previewId")||"",a=n.getFrames().toArray(),r=a.length,s=n.$modal.find(".btn-prev"),l=n.$modal.find(".btn-next");return a.length<2?(s.hide(),void l.hide()):(s.show(),l.show(),void(r&&(t=e(a[0]),i=e(a[r-1]),s.removeAttr("disabled"),l.removeAttr("disabled"),t.length&&t.attr("id")===o&&s.attr("disabled",!0),i.length&&i.attr("id")===o&&l.attr("disabled",!0))))},_maximizeZoomDialog:function(){var t=this.$modal,i=t.find(".modal-header:visible"),n=t.find(".modal-footer:visible"),o=t.find(".modal-body"),a=e(window).height();t.addClass("file-zoom-fullscreen"),i&&i.length&&(a-=i.outerHeight(!0)),n&&n.length&&(a-=n.outerHeight(!0)),o&&o.length&&(a-=o.outerHeight(!0)-o.height()),t.find(".kv-zoom-body").height(a)},_resizeZoomDialog:function(e){var i=this,n=i.$modal,o=n.find(".btn-fullscreen"),a=n.find(".btn-borderless");if(n.hasClass("file-zoom-fullscreen"))t.toggleFullScreen(!1),e?o.hasClass("active")||(n.removeClass("file-zoom-fullscreen"),i._resizeZoomDialog(!0),a.hasClass("active")&&a.removeClass("active").attr("aria-pressed","false")):o.hasClass("active")?o.removeClass("active").attr("aria-pressed","false"):(n.removeClass("file-zoom-fullscreen"),i.$modal.find(".kv-zoom-body").css("height",i.zoomModalHeight));else{if(!e)return void i._maximizeZoomDialog();t.toggleFullScreen(!0)}n.focus()},_setZoomContent:function(i,n){var o,a,r,s,l,c,u,d,h=this,p=i.attr("id"),f=h.$preview.find("#zoom-"+p),m=h.$modal,v=m.find(".btn-fullscreen"),g=m.find(".btn-borderless"),b=m.find(".btn-toggleheader");a=f.attr("data-template")||"generic",r=(o=f.find(".kv-file-content")).length?o.html():"",s=(i.data("caption")||"")+" "+(i.data("size")||""),m.find(".kv-zoom-title").attr("title",e("<div/>").html(s).text()).html(s),l=m.find(".kv-zoom-body"),m.removeClass("kv-single-content"),n?(d=l.addClass("file-thumb-loading").clone().insertAfter(l),l.html(r).hide(),d.fadeOut("fast",function(){l.fadeIn("fast",function(){l.removeClass("file-thumb-loading")}),d.remove()})):l.html(r),(u=h.previewZoomSettings[a])&&(c=l.find(".kv-preview-data"),t.addCss(c,"file-zoom-detail"),e.each(u,function(e,t){c.css(e,t),(c.attr("width")&&"width"===e||c.attr("height")&&"height"===e)&&c.removeAttr(e)})),m.data("previewId",p),h._handler(m.find(".btn-prev"),"click",function(){h._zoomSlideShow("prev",p)}),h._handler(m.find(".btn-next"),"click",function(){h._zoomSlideShow("next",p)}),h._handler(v,"click",function(){h._resizeZoomDialog(!0)}),h._handler(g,"click",function(){h._resizeZoomDialog(!1)}),h._handler(b,"click",function(){var e,t=m.find(".modal-header"),i=m.find(".modal-body .floating-buttons"),n=t.find(".kv-zoom-actions"),o=function(e){var i=h.$modal.find(".kv-zoom-body"),n=h.zoomModalHeight;m.hasClass("file-zoom-fullscreen")&&(n=i.outerHeight(!0),e||(n-=t.outerHeight(!0))),i.css("height",e?n+e:n)};t.is(":visible")?(e=t.outerHeight(!0),t.slideUp("slow",function(){n.find(".btn").appendTo(i),o(e)})):(i.find(".btn").appendTo(n),t.slideDown("slow",function(){o()})),m.focus()}),h._handler(m,"keydown",function(t){var i=t.which||t.keyCode,n=e(this).find(".btn-prev"),o=e(this).find(".btn-next"),a=e(this).data("previewId"),r=h.rtl?39:37,s=h.rtl?37:39;i===r&&n.length&&!n.attr("disabled")&&h._zoomSlideShow("prev",a),i===s&&o.length&&!o.attr("disabled")&&h._zoomSlideShow("next",a)})},_zoomPreview:function(e){var i,n=this,o=n.$modal;if(!e.length)throw"Cannot zoom to detailed preview!";t.initModal(o),o.html(n._getModalContent()),i=e.closest(t.FRAMES),n._setZoomContent(i),o.modal("show"),n._initZoomButtons()},_zoomSlideShow:function(t,i){var n,o,a,r=this,s=r.$modal.find(".kv-zoom-actions .btn-"+t),l=r.getFrames().toArray(),c=l.length;if(!s.attr("disabled")){for(o=0;c>o;o++)if(e(l[o]).attr("id")===i){a="prev"===t?o-1:o+1;break}0>a||a>=c||!l[a]||((n=e(l[a])).length&&r._setZoomContent(n,!0),r._initZoomButtons(),r._raise("filezoom"+t,{previewId:i,modal:r.$modal}))}},_initZoomButton:function(){var t=this;t.$preview.find(".kv-file-zoom").each(function(){var i=e(this);t._handler(i,"click",function(){t._zoomPreview(i)})})},_inputFileCount:function(){return this.$element.get(0).files.length},_refreshPreview:function(){var e,t=this;t._inputFileCount()&&t.showPreview&&t.isPreviewable&&(t.isAjaxUpload?(e=t.getFileStack(),t.filestack=[],e.length?t._clearFileInput():e=t.$element.get(0).files):e=t.$element.get(0).files,e&&e.length&&(t.readFiles(e),t._setFileDropZoneTitle()))},_clearObjects:function(t){t.find("video audio").each(function(){this.pause(),e(this).remove()}),t.find("img object div").each(function(){e(this).remove()})},_clearFileInput:function(){var t,i,n,o=this.$element;this._inputFileCount()&&(t=o.closest("form"),i=e(document.createElement("form")),n=e(document.createElement("div")),o.before(n),t.length?t.after(i):n.after(i),i.append(o).trigger("reset"),n.before(o).remove(),i.remove())},_resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:!0},e.uploadCount=0,e.uploadStatus={},e.uploadLog=[],e.uploadAsyncCount=0,e.loadedImages=[],e.totalImagesCount=0,e.$btnUpload.removeAttr("disabled"),e._setProgress(0),e.$progress.hide(),e._resetErrors(!1),e.ajaxAborted=!1,e.ajaxRequests=[],e._resetCanvas(),e.cacheInitialPreview={},e.overwriteInitial&&(e.initialPreview=[],e.initialPreviewConfig=[],e.initialPreviewThumbTags=[],e.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){var e=this;e.canvas&&e.imageCanvasContext&&e.imageCanvasContext.clearRect(0,0,e.canvas.width,e.canvas.height)},_hasInitialPreview:function(){return!this.overwriteInitial&&this.previewCache.count()},_resetPreview:function(){var e,t,i=this;i.previewCache.count()?(e=i.previewCache.out(),i._setPreviewContent(e.content),i._setInitThumbAttr(),t=i.initialCaption?i.initialCaption:e.caption,i._setCaption(t)):(i._clearPreview(),i._initCaption()),i.showPreview&&(i._initZoom(),i._initSortable())},_clearDefaultPreview:function(){this.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var e=this;e.showPreview&&!t.isEmpty(e.defaultPreviewContent)&&(e._setPreviewContent('<div class="file-default-preview">'+e.defaultPreviewContent+"</div>"),e.$container.removeClass("file-input-new"),e._initClickable())},_resetPreviewThumbs:function(e){var t,i=this;return e?(i._clearPreview(),void i.clearStack()):void(i._hasInitialPreview()?(t=i.previewCache.out(),i._setPreviewContent(t.content),i._setInitThumbAttr(),i._setCaption(t.caption),i._initPreviewActions()):i._clearPreview())},_getLayoutTemplate:function(e){var i=this,n=i.layoutTemplates[e];return t.isEmpty(i.customLayoutTags)?n:t.replaceTags(n,i.customLayoutTags)},_getPreviewTemplate:function(e){var i=this,n=i.previewTemplates[e];return t.isEmpty(i.customPreviewTags)?n:t.replaceTags(n,i.customPreviewTags)},_getOutData:function(e,t,i){var n=this;return e=e||{},t=t||{},i=i||n.filestack.slice(0)||{},{form:n.formdata,files:i,filenames:n.filenames,filescount:n.getFilesCount(),extra:n._getExtraData(),response:t,reader:n.reader,jqXHR:e}},_getMsgSelected:function(e){var t=this,i=1===e?t.fileSingle:t.filePlural;return e>0?t.msgSelected.replace("{n}",e).replace("{files}",i):t.msgNoFilesSelected},_getFrame:function(t){var i=e("#"+t);return i.length?i:(this._log('Invalid thumb frame with id: "'+t+'".'),null)},_getThumbs:function(e){return e=e||"",this.getFrames(":not(.file-preview-initial)"+e)},_getExtraData:function(e,t){var i=this,n=i.uploadExtraData;return"function"==typeof i.uploadExtraData&&(n=i.uploadExtraData(e,t)),n},_initXhr:function(e,t,i){var n=this;return e.upload&&e.upload.addEventListener("progress",function(e){var o=0,a=e.total,r=e.loaded||e.position;e.lengthComputable&&(o=Math.floor(r/a*100)),t?n._setAsyncUploadStatus(t,o,i):n._setProgress(o)},!1),e},_initAjaxSettings:function(){var t=this;t._ajaxSettings=e.extend(!0,{},t.ajaxSettings),t._ajaxDeleteSettings=e.extend(!0,{},t.ajaxDeleteSettings)},_mergeAjaxCallback:function(e,t,i){var n,o=this,a=o._ajaxSettings,r=o.mergeAjaxCallbacks;"delete"===i&&(a=o._ajaxDeleteSettings,r=o.mergeAjaxDeleteCallbacks),n=a[e],a[e]=r&&"function"==typeof n?"before"===r?function(){n.apply(this,arguments),t.apply(this,arguments)}:function(){t.apply(this,arguments),n.apply(this,arguments)}:t},_ajaxSubmit:function(t,i,n,o,a,r){var s,l,c=this;c._raise("filepreajax",[a,r])&&(c._uploadExtra(a,r),c._initAjaxSettings(),c._mergeAjaxCallback("beforeSend",t),c._mergeAjaxCallback("success",i),c._mergeAjaxCallback("complete",n),c._mergeAjaxCallback("error",o),l=r&&c.uploadUrlThumb?c.uploadUrlThumb:c.uploadUrl,s=e.extend(!0,{},{xhr:function(){var t=e.ajaxSettings.xhr();return c._initXhr(t,a,c.getFileStack().length)},url:c._encodeURI(l),type:"POST",dataType:"json",data:c.formdata,cache:!1,processData:!1,contentType:!1},c._ajaxSettings),c.ajaxRequests.push(e.ajax(s)))},_mergeArray:function(e,i){var n=t.cleanArray(this[e]),o=t.cleanArray(i);this[e]=n.concat(o)},_initUploadSuccess:function(i,n,o){var a,r,s,l,c,u,d,h,p,f=this;f.showPreview&&"object"==typeof i&&!e.isEmptyObject(i)&&void 0!==i.initialPreview&&i.initialPreview.length>0&&(f.hasInitData=!0,u=i.initialPreview||[],d=i.initialPreviewConfig||[],h=i.initialPreviewThumbTags||[],a=void 0===i.append||i.append,u.length>0&&!t.isArray(u)&&(u=u.split(f.initialPreviewDelimiter)),f._mergeArray("initialPreview",u),f._mergeArray("initialPreviewConfig",d),f._mergeArray("initialPreviewThumbTags",h),void 0!==n?o?(p=n.attr("data-fileindex"),f.uploadCache.content[p]=u[0],f.uploadCache.config[p]=d[0]||[],f.uploadCache.tags[p]=h[0]||[],f.uploadCache.append=a):(s=f.previewCache.add(u,d[0],h[0],a),r=f.previewCache.get(s,!1),(c=(l=e(document.createElement("div")).html(r).hide().insertAfter(n)).find(".kv-zoom-cache"))&&c.length&&c.insertAfter(n),n.fadeOut("slow",function(){var e=l.find(".file-preview-frame");e&&e.length&&e.insertBefore(n).fadeIn("slow").css("display:inline-block"),f._initPreviewActions(),f._clearFileInput(),t.cleanZoomCache(f.$preview.find("#zoom-"+n.attr("id"))),n.remove(),l.remove(),f._initSortable()})):(f.previewCache.set(u,d,h,a),f._initPreview(),f._initPreviewActions()))},_initSuccessThumbs:function(){var i=this;i.showPreview&&i._getThumbs(t.FRAMES+".file-preview-success").each(function(){var n=e(this),o=i.$preview,a=n.find(".kv-file-remove");a.removeAttr("disabled"),i._handler(a,"click",function(){var e=n.attr("id"),a=i._raise("filesuccessremove",[e,n.attr("data-fileindex")]);t.cleanMemory(n),!1!==a&&n.fadeOut("slow",function(){t.cleanZoomCache(o.find("#zoom-"+e)),n.remove(),i.getFrames().length||i.reset()})})})},_checkAsyncComplete:function(){var t,i,n=this;for(i=0;i<n.filestack.length;i++)if(n.filestack[i]&&(t=n.previewInitId+"-"+i,-1===e.inArray(t,n.uploadLog)))return!1;return n.uploadAsyncCount===n.uploadLog.length},_uploadExtra:function(t,i){var n=this,o=n._getExtraData(t,i);0!==o.length&&e.each(o,function(e,t){n.formdata.append(e,t)})},_uploadSingle:function(i,n){var o,a,r,s,l,c,u,d,h,p,f,m=this,v=m.getFileStack().length,g=new FormData,b=m.previewInitId+"-"+i,y=m.filestack.length>0||!e.isEmptyObject(m.uploadExtraData),w=e("#"+b).find(".file-thumb-progress"),k={id:b,index:i};m.formdata=g,m.showPreview&&(a=e("#"+b+":not(.file-preview-initial)"),s=a.find(".kv-file-upload"),l=a.find(".kv-file-remove"),w.show()),0===v||!y||s&&s.hasClass("disabled")||m._abort(k)||(f=function(e,t){c||m.updateStack(e,void 0),m.uploadLog.push(t),m._checkAsyncComplete()&&(m.fileBatchCompleted=!0)},r=function(){var e,i,n,o=m.uploadCache,a=0,r=m.cacheInitialPreview;m.fileBatchCompleted&&(r&&r.content&&(a=r.content.length),setTimeout(function(){var s=0===m.getFileStack(!0).length;if(m.showPreview){if(m.previewCache.set(o.content,o.config,o.tags,o.append),a){for(i=0;i<o.content.length;i++)n=i+a,r.content[n]=o.content[i],r.config.length&&(r.config[n]=o.config[i]),r.tags.length&&(r.tags[n]=o.tags[i]);m.initialPreview=t.cleanArray(r.content),m.initialPreviewConfig=t.cleanArray(r.config),m.initialPreviewThumbTags=t.cleanArray(r.tags)}else m.initialPreview=o.content,m.initialPreviewConfig=o.config,m.initialPreviewThumbTags=o.tags;m.cacheInitialPreview={},m.hasInitData&&(m._initPreview(),m._initPreviewActions())}m.unlock(s),s&&m._clearFileInput(),e=m.$preview.find(".file-preview-initial"),m.uploadAsync&&e.length&&(t.addCss(e,t.SORT_CSS),m._initSortable()),m._raise("filebatchuploadcomplete",[m.filestack,m._getExtraData()]),m.uploadCount=0,m.uploadStatus={},m.uploadLog=[],m._setProgress(101),m.ajaxAborted=!1},100))},u=function(r){o=m._getOutData(r),m.fileBatchCompleted=!1,n||(m.ajaxAborted=!1),m.showPreview&&(a.hasClass("file-preview-success")||(m._setThumbStatus(a,"Loading"),t.addCss(a,"file-uploading")),s.attr("disabled",!0),l.attr("disabled",!0)),n||m.lock(),m._raise("filepreupload",[o,b,i]),e.extend(!0,k,o),m._abort(k)&&(r.abort(),n||(m._setThumbStatus(a,"New"),a.removeClass("file-uploading"),s.removeAttr("disabled"),l.removeAttr("disabled"),m.unlock()),m._setProgressCancelled())},d=function(r,l,u){var d=m.showPreview&&a.attr("id")?a.attr("id"):b;o=m._getOutData(u,r),e.extend(!0,k,o),setTimeout(function(){t.isEmpty(r)||t.isEmpty(r.error)?(m.showPreview&&(m._setThumbStatus(a,"Success"),s.hide(),m._initUploadSuccess(r,a,n),m._setProgress(101,w)),m._raise("fileuploaded",[o,d,i]),n?f(i,d):m.updateStack(i,void 0)):(c=!0,m._showUploadError(r.error,k),m._setPreviewError(a,i,m.filestack[i],m.retryErrorUploads),m.retryErrorUploads||s.hide(),n&&f(i,d),m._setProgress(101,e("#"+d).find(".file-thumb-progress"),m.msgUploadError))},100)},h=function(){setTimeout(function(){m.showPreview&&(s.removeAttr("disabled"),l.removeAttr("disabled"),a.removeClass("file-uploading")),n?r():(m.unlock(!1),m._clearFileInput()),m._initSuccessThumbs()},100)},p=function(t,o,r){var l=m.ajaxOperations.uploadThumb,u=m._parseError(l,t,r,n&&m.filestack[i].name?m.filestack[i].name:null);c=!0,setTimeout(function(){n&&f(i,b),m.uploadStatus[b]=100,m._setPreviewError(a,i,m.filestack[i],m.retryErrorUploads),m.retryErrorUploads||s.hide(),e.extend(!0,k,m._getOutData(t)),m._setProgress(101,w,m.msgAjaxProgressError.replace("{operation}",l)),m._setProgress(101,e("#"+b).find(".file-thumb-progress"),m.msgUploadError),m._showUploadError(u,k)},100)},g.append(m.uploadFileAttr,m.filestack[i],m.filenames[i]),g.append("file_id",i),m._ajaxSubmit(u,d,h,p,b,i))},_uploadBatch:function(){var i,n,o,a,r,s=this,l=s.filestack,c=l.length,u=s.filestack.length>0||!e.isEmptyObject(s.uploadExtraData);s.formdata=new FormData,0!==c&&u&&!s._abort({})&&(r=function(){e.each(l,function(e){s.updateStack(e,void 0)}),s._clearFileInput()},i=function(i){s.lock();var n=s._getOutData(i);s.ajaxAborted=!1,s.showPreview&&s._getThumbs().each(function(){var i=e(this),n=i.find(".kv-file-upload"),o=i.find(".kv-file-remove");i.hasClass("file-preview-success")||(s._setThumbStatus(i,"Loading"),t.addCss(i,"file-uploading")),n.attr("disabled",!0),o.attr("disabled",!0)}),s._raise("filebatchpreupload",[n]),s._abort(n)&&(i.abort(),s._getThumbs().each(function(){var t=e(this),i=t.find(".kv-file-upload"),n=t.find(".kv-file-remove");t.hasClass("file-preview-loading")&&(s._setThumbStatus(t,"New"),t.removeClass("file-uploading")),i.removeAttr("disabled"),n.removeAttr("disabled")}),s._setProgressCancelled())},n=function(i,n,o){var a=s._getOutData(o,i),l=0,c=s._getThumbs(":not(.file-preview-success)"),u=t.isEmpty(i)||t.isEmpty(i.errorkeys)?[]:i.errorkeys;t.isEmpty(i)||t.isEmpty(i.error)?(s._raise("filebatchuploadsuccess",[a]),r(),s.showPreview?(c.each(function(){var t=e(this);s._setThumbStatus(t,"Success"),t.removeClass("file-uploading"),t.find(".kv-file-upload").hide().removeAttr("disabled")}),s._initUploadSuccess(i)):s.reset(),s._setProgress(101)):(s.showPreview&&(c.each(function(){var t=e(this),i=t.attr("data-fileindex");t.removeClass("file-uploading"),t.find(".kv-file-upload").removeAttr("disabled"),t.find(".kv-file-remove").removeAttr("disabled"),0===u.length||-1!==e.inArray(l,u)?(s._setPreviewError(t,i,s.filestack[i],s.retryErrorUploads),s.retryErrorUploads||(t.find(".kv-file-upload").hide(),s.updateStack(i,void 0))):(t.find(".kv-file-upload").hide(),s._setThumbStatus(t,"Success"),s.updateStack(i,void 0)),t.hasClass("file-preview-error")&&!s.retryErrorUploads||l++}),s._initUploadSuccess(i)),s._showUploadError(i.error,a,"filebatchuploaderror"),s._setProgress(101,s.$progress,s.msgUploadError))},a=function(){s.unlock(),s._initSuccessThumbs(),s._clearFileInput(),s._raise("filebatchuploadcomplete",[s.filestack,s._getExtraData()])},o=function(t,i,n){var o=s._getOutData(t),a=s.ajaxOperations.uploadBatch,r=s._parseError(a,t,n);s._showUploadError(r,o,"filebatchuploaderror"),s.uploadFileCount=c-1,s.showPreview&&(s._getThumbs().each(function(){var t=e(this),i=t.attr("data-fileindex");t.removeClass("file-uploading"),void 0!==s.filestack[i]&&s._setPreviewError(t)}),s._getThumbs().removeClass("file-uploading"),s._getThumbs(" .kv-file-upload").removeAttr("disabled"),s._getThumbs(" .kv-file-delete").removeAttr("disabled"),s._setProgress(101,s.$progress,s.msgAjaxProgressError.replace("{operation}",a)))},e.each(l,function(e,i){t.isEmpty(l[e])||s.formdata.append(s.uploadFileAttr,i,s.filenames[e])}),s._ajaxSubmit(i,n,a,o))},_uploadExtraOnly:function(){var e,i,n,o,a=this,r={};a.formdata=new FormData,a._abort(r)||(e=function(e){a.lock();var t=a._getOutData(e);a._raise("filebatchpreupload",[t]),a._setProgress(50),r.data=t,r.xhr=e,a._abort(r)&&(e.abort(),a._setProgressCancelled())},i=function(e,i,n){var o=a._getOutData(n,e);t.isEmpty(e)||t.isEmpty(e.error)?(a._raise("filebatchuploadsuccess",[o]),a._clearFileInput(),a._initUploadSuccess(e),a._setProgress(101)):a._showUploadError(e.error,o,"filebatchuploaderror")},n=function(){a.unlock(),a._clearFileInput(),a._raise("filebatchuploadcomplete",[a.filestack,a._getExtraData()])},o=function(e,t,i){var n=a._getOutData(e),o=a.ajaxOperations.uploadExtra,s=a._parseError(o,e,i);r.data=n,a._showUploadError(s,n,"filebatchuploaderror"),a._setProgress(101,a.$progress,a.msgAjaxProgressError.replace("{operation}",o))},a._ajaxSubmit(e,i,n,o))},_deleteFileIndex:function(i){var n=this,o=i.attr("data-fileindex"),a=n.reversePreviewOrder;"init_"===o.substring(0,5)&&(o=parseInt(o.replace("init_","")),n.initialPreview=t.spliceArray(n.initialPreview,o,a),n.initialPreviewConfig=t.spliceArray(n.initialPreviewConfig,o,a),n.initialPreviewThumbTags=t.spliceArray(n.initialPreviewThumbTags,o,a),n.getFrames().each(function(){var t=e(this),i=t.attr("data-fileindex");"init_"===i.substring(0,5)&&((i=parseInt(i.replace("init_","")))>o&&(i--,t.attr("data-fileindex","init_"+i)))}),n.uploadAsync&&(n.cacheInitialPreview=n.getPreview()))},_initFileActions:function(){var i=this,n=i.$preview;i.showPreview&&(i._initZoomButton(),i.getFrames(" .kv-file-remove").each(function(){var o,a,r,s=e(this),l=s.closest(t.FRAMES),c=l.attr("id"),u=l.attr("data-fileindex");i._handler(s,"click",function(){return!(!1===i._raise("filepreremove",[c,u])||!i._validateMinCount())&&(o=l.hasClass("file-preview-error"),t.cleanMemory(l),void l.fadeOut("slow",function(){t.cleanZoomCache(n.find("#zoom-"+c)),i.updateStack(u,void 0),i._clearObjects(l),l.remove(),c&&o&&i.$errorContainer.find('li[data-file-id="'+c+'"]').fadeOut("fast",function(){e(this).remove(),i._errorsExist()||i._resetErrors()}),i._clearFileInput();var s=i.getFileStack(!0),d=i.previewCache.count(),h=s.length,p=i.showPreview&&i.getFrames().length;0!==h||0!==d||p?(r=(a=d+h)>1?i._getMsgSelected(a):s[0]?i._getFileNames()[0]:"",i._setCaption(r)):i.reset(),i._raise("fileremoved",[c,u])}))})}),i.getFrames(" .kv-file-upload").each(function(){var n=e(this);i._handler(n,"click",function(){var e=n.closest(t.FRAMES),o=e.attr("data-fileindex");i.$progress.hide(),e.hasClass("file-preview-error")&&!i.retryErrorUploads||i._uploadSingle(o,!1)})}))},_initPreviewActions:function(){var i=this,n=i.$preview,o=i.deleteExtraData||{},a=t.FRAMES+" .kv-file-remove",r=i.fileActionSettings,s=r.removeClass,l=r.removeErrorClass,c=function(){var e=i.isAjaxUpload?i.previewCache.count():i._inputFileCount();n.find(t.FRAMES).length||e||(i._setCaption(""),i.reset(),i.initialCaption="")};i._initZoomButton(),n.find(a).each(function(){var a,r,u,d=e(this),h=d.data("url")||i.deleteUrl,p=d.data("key");if(!t.isEmpty(h)&&void 0!==p){var f,m,v,g,b=d.closest(t.FRAMES),y=i.previewCache.data,w=b.attr("data-fileindex");w=parseInt(w.replace("init_","")),v=t.isEmpty(y.config)&&t.isEmpty(y.config[w])?null:y.config[w],"function"==typeof(g=t.isEmpty(v)||t.isEmpty(v.extra)?o:v.extra)&&(g=g()),m={id:d.attr("id"),key:p,extra:g},a=function(e){i.ajaxAborted=!1,i._raise("filepredelete",[p,e,g]),i._abort()?e.abort():(d.removeClass(l),t.addCss(b,"file-uploading"),t.addCss(d,"disabled "+s))},r=function(e,o,a){var r,u;return t.isEmpty(e)||t.isEmpty(e.error)?(b.removeClass("file-uploading").addClass("file-deleted"),void b.fadeOut("slow",function(){w=parseInt(b.attr("data-fileindex").replace("init_","")),i.previewCache.unset(w),i._deleteFileIndex(b),r=i.previewCache.count(),u=r>0?i._getMsgSelected(r):"",i._setCaption(u),i._raise("filedeleted",[p,a,g]),t.cleanZoomCache(n.find("#zoom-"+b.attr("id"))),i._clearObjects(b),b.remove(),c()})):(m.jqXHR=a,m.response=e,i._showError(e.error,m,"filedeleteerror"),b.removeClass("file-uploading"),d.removeClass("disabled "+s).addClass(l),void c())},u=function(e,t,n){var o=i.ajaxOperations.deleteThumb,a=i._parseError(o,e,n);m.jqXHR=e,m.response={},i._showError(a,m,"filedeleteerror"),b.removeClass("file-uploading"),d.removeClass("disabled "+s).addClass(l),c()},i._initAjaxSettings(),i._mergeAjaxCallback("beforeSend",a,"delete"),i._mergeAjaxCallback("success",r,"delete"),i._mergeAjaxCallback("error",u,"delete"),f=e.extend(!0,{},{url:i._encodeURI(h),type:"POST",dataType:"json",data:e.extend(!0,{},{key:p},g)},i._ajaxDeleteSettings),i._handler(d,"click",function(){return!!i._validateMinCount()&&(i.ajaxAborted=!1,i._raise("filebeforedelete",[p,g]),void(i.ajaxAborted instanceof Promise?i.ajaxAborted.then(function(t){t||e.ajax(f)}):i.ajaxAborted||e.ajax(f)))})}})},_hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.removeClass("icon-visible")},_showFileIcon:function(){t.addCss(this.$captionContainer,"icon-visible")},_getSize:function(t){var i,n,o,a=parseFloat(t),r=this.fileSizeGetter;return e.isNumeric(t)&&e.isNumeric(a)?("function"==typeof r?o=r(a):0===a?o="0.00 B":(i=Math.floor(Math.log(a)/Math.log(1024)),n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],o=1*(a/Math.pow(1024,i)).toFixed(2)+" "+n[i]),this._getLayoutTemplate("size").replace("{sizeText}",o)):""},_getFileType:function(e){return this.mimeTypeAliases[e]||e},_generatePreviewTemplate:function(i,n,o,a,r,s,l,c,u,d,h){var p,f=this,m=f.slug(o),v="",g="",b=400>(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)?f.previewSettingsSmall[i]||f.defaults.previewSettingsSmall[i]:f.previewSettings[i]||f.defaults.previewSettings[i],y=u||f._renderFileFooter(m,l,"auto",s),w=f._getPreviewIcon(o),k="type-default",x=w&&f.preferIconicPreview,C=w&&f.preferIconicZoomPreview;return b&&e.each(b,function(e,t){g+=e+":"+t+";"}),p=function(n,s,l,u){var p=l?"zoom-"+r:r,v=f._getPreviewTemplate(n),b=(c||"")+" "+u;return f.frameClass&&(b=f.frameClass+" "+b),l&&(b=b.replace(" "+t.SORT_CSS,"")),v=f._parseFilePreviewIcon(v,o),"text"===n&&(s=t.htmlEncode(s)),"object"!==i||a||e.each(f.defaults.fileTypeSettings,function(e,t){"object"!==e&&"other"!==e&&t(o,a)&&(k="type-"+e)}),v.setTokens({previewId:p,caption:m,frameClass:b,type:f._getFileType(a),fileindex:d,typeCss:k,footer:y,data:s,template:h||i,style:g?'style="'+g+'"':""})},d=d||r.slice(r.lastIndexOf("-")+1),f.fileActionSettings.showZoom&&(v=p(C?"other":i,n,!0,"kv-zoom-thumb")),v="\n"+f._getLayoutTemplate("zoomCache").replace("{zoomContent}",v),p(x?"other":i,n,!1,"kv-preview-thumb")+v},_addToPreview:function(e,t){return this.reversePreviewOrder?e.prepend(t):e.append(t)},_previewDefault:function(i,n,o){var a=this,r=a.$preview;if(a.showPreview){var s,l=i?i.name:"",c=i?i.type:"",u=i.size||0,d=a.slug(l),h=!0===o&&!a.isAjaxUpload,p=t.createObjectURL(i);a._clearDefaultPreview(),s=a._generatePreviewTemplate("other",p,l,c,n,h,u),a._addToPreview(r,s),a._setThumbAttr(n,d,u),!0===o&&a.isAjaxUpload&&a._setThumbStatus(e("#"+n),"Error")}},_previewFile:function(e,t,i,n,o,a){if(this.showPreview){var r,s=this,l=t?t.name:"",c=a.type,u=a.name,d=s._parseFileType(c,l),h=s.allowedPreviewTypes,p=s.allowedPreviewMimeTypes,f=s.$preview,m=t.size||0,v=h&&h.indexOf(d)>=0,g=p&&-1!==p.indexOf(c),b="text"===d||"html"===d||"image"===d?i.target.result:o;if("html"===d&&s.purifyHtml&&window.DOMPurify&&(b=window.DOMPurify.sanitize(b)),v||g){r=s._generatePreviewTemplate(d,b,l,c,n,!1,m),s._clearDefaultPreview(),s._addToPreview(f,r);var y=f.find("#"+n+" img");s._validateImageOrientation(y,t,n,u,c,m,b)}else s._previewDefault(t,n);s._setThumbAttr(n,u,m),s._initSortable()}},_setThumbAttr:function(t,i,n){var o=e("#"+t);o.length&&(n=n&&n>0?this._getSize(n):"",o.data({caption:i,size:n}))},_setInitThumbAttr:function(){var e,i,n,o,a=this,r=a.previewCache.data,s=a.previewCache.count();if(0!==s)for(var l=0;s>l;l++)e=r.config[l],o=a.previewInitId+"-init_"+l,i=t.ifSet("caption",e,t.ifSet("filename",e)),n=t.ifSet("size",e),a._setThumbAttr(o,i,n)},_slugDefault:function(e){return t.isEmpty(e)?"":String(e).replace(/[\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_updateFileDetails:function(e){var i=this,n=i.$element,o=i.getFileStack(),a=t.isIE(9)&&t.findFileName(n.val())||n[0].files[0]&&n[0].files[0].name||o.length&&o[0].name||"",r=i.slug(a),s=i.isAjaxUpload?o.length:e,l=i.previewCache.count()+s,c=1===s?r:i._getMsgSelected(l);i.isError?(i.$previewContainer.removeClass("file-thumb-loading"),i.$previewStatus.html(""),i.$captionContainer.removeClass("icon-visible")):i._showFileIcon(),i._setCaption(c,i.isError),i.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&i._raise("fileselect",[e,r]),i.previewCache.count()&&i._initPreviewActions()},_setThumbStatus:function(e,t){var i=this;if(i.showPreview){var n="indicator"+t,o=n+"Title",a="file-preview-"+t.toLowerCase(),r=e.find(".file-upload-indicator"),s=i.fileActionSettings;e.removeClass("file-preview-success file-preview-error file-preview-loading"),"Success"===t&&e.find(".file-drag-handle").remove(),r.html(s[n]),r.attr("title",s[o]),e.addClass(a),"Error"!==t||i.retryErrorUploads||e.find(".kv-file-upload").attr("disabled",!0)}},_setProgressCancelled:function(){var e=this;e._setProgress(101,e.$progress,e.msgCancelled)},_setProgress:function(e,i,n){var o,a=this,r=Math.min(e,100),s=a.progressUploadThreshold,l=100>=e?a.progressTemplate:a.progressCompleteTemplate,c=100>r?a.progressTemplate:n?a.progressErrorTemplate:l;i=i||a.$progress,t.isEmpty(c)||(o=s&&r>s&&100>=e?c.setTokens({percent:s,status:a.msgUploadThreshold}):c.setTokens({percent:r,status:e>100?a.msgUploadEnd:r+"%"}),i.html(o),n&&i.find('[role="progressbar"]').html(n))},_setFileDropZoneTitle:function(){var e,i=this,n=i.$container.find(".file-drop-zone"),o=i.dropZoneTitle;i.isClickable&&(e=t.isEmpty(i.$element.attr("multiple"))?i.fileSingle:i.filePlural,o+=i.dropZoneClickTitle.replace("{files}",e)),n.find("."+i.dropZoneTitleClass).remove(),!i.showPreview||0===n.length||i.getFileStack().length>0||!i.dropZoneEnabled||!i.isAjaxUpload&&i.$element.files||(0===n.find(t.FRAMES).length&&t.isEmpty(i.defaultPreviewContent)&&n.prepend('<div class="'+i.dropZoneTitleClass+'">'+o+"</div>"),i.$container.removeClass("file-input-new"),t.addCss(i.$container,"file-input-ajax-new"))},_setAsyncUploadStatus:function(t,i,n){var o=this,a=0;o._setProgress(i,e("#"+t).find(".file-thumb-progress")),o.uploadStatus[t]=i,e.each(o.uploadStatus,function(e,t){a+=t}),o._setProgress(Math.floor(a/n))},_validateMinCount:function(){var e=this,t=e.isAjaxUpload?e.getFileStack().length:e._inputFileCount();return!(e.validateInitialCount&&e.minFileCount>0&&e._getFileCount(t-1)<e.minFileCount)||(e._noFilesError({}),!1)},_getFileCount:function(e){var t=this;return t.validateInitialCount&&!t.overwriteInitial&&(e+=t.previewCache.count()),e},_getFileId:function(e){var t,i=this.generateFileId;return"function"==typeof i?i(e,event):e?(t=String(e.webkitRelativePath||e.fileName||e.name||null))?e.size+"-"+t.replace(/[^0-9a-zA-Z_-]/gim,""):null:null},_getFileName:function(e){return e&&e.name?this.slug(e.name):void 0},_getFileIds:function(e){return this.fileids.filter(function(t){return e?void 0!==t:null!=t})},_getFileNames:function(e){return this.filenames.filter(function(t){return e?void 0!==t:null!=t})},_setPreviewError:function(e,t,i,n){var o=this;if(void 0!==t&&o.updateStack(t,i),o.showPreview){if(o.removeFromPreviewOnError&&!n)return void e.remove();o._setThumbStatus(e,"Error"),o._refreshUploadButton(e,n)}},_refreshUploadButton:function(e,t){var i=e.find(".kv-file-upload"),n=this.fileActionSettings,o=n.uploadIcon,a=n.uploadTitle;i.length&&(t&&(o=n.uploadRetryIcon,a=n.uploadRetryTitle),i.attr("title",a).html(o))},_checkDimensions:function(e,i,n,o,a,r,s){var l,c,u,d=this,h=d[("Small"===i?"min":"max")+"Image"+r];!t.isEmpty(h)&&n.length&&(u=n[0],c="Width"===r?u.naturalWidth||u.width:u.naturalHeight||u.height,("Small"===i?c>=h:h>=c)||(l=d["msgImage"+r+i].setTokens({name:a,size:h}),d._showUploadError(l,s),d._setPreviewError(o,e,null)))},_getExifObj:function(e){var t=null;try{t=window.piexif?window.piexif.load(e):null}catch(e){t=null}return t||this._log("Error loading the piexif.js library."),t},_validateImageOrientation:function(e,i,n,o,a,r,s){var l,c,u=this;return(c=(l=e.length&&u.autoOrientImage?u._getExifObj(s):null)?l["0th"][piexif.ImageIFD.Orientation]:null)?(t.setImageOrientation(e,u.$preview.find("#zoom-"+n+" img"),c),u._raise("fileimageoriented",{$img:e,file:i}),void u._validateImage(n,o,a,r,s,l)):void u._validateImage(n,o,a,r,s,l)},_validateImage:function(t,i,n,o,a,r){var s,l,c,u=this,d=u.$preview,h=d.find("#"+t),p=h.attr("data-fileindex"),f=h.find("img");i=i||"Untitled",f.one("load",function(){l=h.width(),c=d.width(),l>c&&f.css("width","100%"),s={ind:p,id:t},u._checkDimensions(p,"Small",f,h,i,"Width",s),u._checkDimensions(p,"Small",f,h,i,"Height",s),u.resizeImage||(u._checkDimensions(p,"Large",f,h,i,"Width",s),u._checkDimensions(p,"Large",f,h,i,"Height",s)),u._raise("fileimageloaded",[t]),u.loadedImages.push({ind:p,img:f,thumb:h,pid:t,typ:n,siz:o,validated:!1,imgData:a,exifObj:r}),h.data("exif",r),u._validateAllImages()}).one("error",function(){u._raise("fileimageloaderror",[t])}).each(function(){this.complete?e(this).trigger("load"):this.error&&e(this).trigger("error")})},_validateAllImages:function(){var e,t,i,n=this,o={val:0},a=n.loadedImages.length,r=n.resizeIfSizeMoreThan;if(a===n.totalImagesCount&&(n._raise("fileimagesloaded"),n.resizeImage))for(e=0;e<n.loadedImages.length;e++)(t=n.loadedImages[e]).validated||((i=t.siz)&&i>1e3*r&&n._getResizedImage(t,o,a),n.loadedImages[e].validated=!0)},_getResizedImage:function(i,n,o){var a,r,s,l,c,u,d,h=this,p=e(i.img)[0],f=p.naturalWidth,m=p.naturalHeight,v=h.maxImageWidth||f,g=h.maxImageHeight||m,b=!(!f||!m),y=h.imageCanvas,w=h.imageCanvasContext,k=i.typ,x=i.pid,C=i.ind,_=i.thumb,S=i.exifObj;if(c=function(e,t,i){h.isAjaxUpload?h._showUploadError(e,t,i):h._showError(e,t,i),h._setPreviewError(_,C)},h.filestack[C]&&b&&!(v>=f&&g>=m)||(b&&h.filestack[C]&&h._raise("fileimageresized",[x,C]),n.val++,n.val===o&&h._raise("fileimagesresized"),b)){k=k||h.resizeDefaultImageType,r=f>v,s=m>g,d="width"===h.resizePreference?r?v/f:s?g/m:1:s?g/m:r?v/f:1,h._resetCanvas(),f*=d,m*=d,y.width=f,y.height=m;try{w.drawImage(p,0,0,f,m),l=y.toDataURL(k,h.resizeQuality),S&&(u=window.piexif.dump(S),l=window.piexif.insert(u,l)),a=t.dataURI2Blob(l),h.filestack[C]=a,h._raise("fileimageresized",[x,C]),n.val++,n.val===o&&h._raise("fileimagesresized",[void 0,void 0]),a instanceof Blob||c(h.msgImageResizeError,{id:x,index:C},"fileimageresizeerror")}catch(e){n.val++,n.val===o&&h._raise("fileimagesresized",[void 0,void 0]),c(h.msgImageResizeException.replace("{errors}",e.message),{id:x,index:C},"fileimageresizeexception")}}else c(h.msgImageResizeError,{id:x,index:C},"fileimageresizeerror")},_initBrowse:function(e){var i=this,n=i.$element;i.showBrowse?i.$btnFile=e.find(".btn-file").append(n):(n.appendTo(e).attr("tabindex",-1),t.addCss(n,"file-no-browse"))},_initClickable:function(){var i,n,o=this;o.isClickable&&(i=o.$dropZone,o.isAjaxUpload||(n=o.$preview.find(".file-default-preview")).length&&(i=n),t.addCss(i,"clickable"),i.attr("tabindex",-1),o._handler(i,"click",function(t){var n=e(t.target);e(o.elErrorContainer+":visible").length||n.parents(".file-preview-thumbnails").length&&!n.parents(".file-default-preview").length||(o.$element.data("zoneClicked",!0).trigger("click"),i.blur())}))},_initCaption:function(){var e=this,i=e.initialCaption||"";return e.overwriteInitial||t.isEmpty(i)?(e.$caption.val(""),!1):(e._setCaption(i),!0)},_setCaption:function(i,n){var o,a,r,s,l,c=this,u=c.getFileStack();if(c.$caption.length){if(c.$captionContainer.removeClass("icon-visible"),n)o=e("<div>"+c.msgValidationError+"</div>").text(),l=(s=u.length)?1===s&&u[0]?c._getFileNames()[0]:c._getMsgSelected(s):c._getMsgSelected(c.msgNo),a=t.isEmpty(i)?l:i,r='<span class="'+c.msgValidationErrorClass+'">'+c.msgValidationErrorIcon+"</span>";else{if(t.isEmpty(i))return;a=o=e("<div>"+i+"</div>").text(),r=c._getLayoutTemplate("fileIcon")}c.$captionContainer.addClass("icon-visible"),c.$caption.attr("title",o).val(a),c.$captionIcon.html(r)}},_createContainer:function(){var t=this,i={class:"file-input file-input-new"+(t.rtl?" kv-rtl":"")},n=e(document.createElement("div")).attr(i).html(t._renderMain());return n.insertBefore(t.$element),t._initBrowse(n),t.theme&&n.addClass("theme-"+t.theme),n},_refreshContainer:function(){var e=this,t=e.$container;e.$element.insertAfter(t),t.html(e._renderMain()),e._initBrowse(t),e._validateDisabled()},_validateDisabled:function(){this.$caption.attr({readonly:this.isDisabled})},_renderMain:function(){var e=this,t=e.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",i=e.showClose?e._getLayoutTemplate("close"):"",n=e.showPreview?e._getLayoutTemplate("preview").setTokens({class:e.previewClass,dropClass:t}):"",o=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,a=e.captionTemplate.setTokens({class:o+" kv-fileinput-caption"});return e.mainTemplate.setTokens({class:e.mainClass+(!e.showBrowse&&e.showCaption?" no-browse":""),preview:n,close:i,caption:a,upload:e._renderButton("upload"),remove:e._renderButton("remove"),cancel:e._renderButton("cancel"),browse:e._renderButton("browse")})},_renderButton:function(e){var i=this,n=i._getLayoutTemplate("btnDefault"),o=i[e+"Class"],a=i[e+"Title"],r=i[e+"Icon"],s=i[e+"Label"],l=i.isDisabled?" disabled":"",c="button";switch(e){case"remove":if(!i.showRemove)return"";break;case"cancel":if(!i.showCancel)return"";o+=" kv-hidden";break;case"upload":if(!i.showUpload)return"";i.isAjaxUpload&&!i.isDisabled?n=i._getLayoutTemplate("btnLink").replace("{href}",i.uploadUrl):c="submit";break;case"browse":if(!i.showBrowse)return"";n=i._getLayoutTemplate("btnBrowse");break;default:return""}return o+="browse"===e?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button",t.isEmpty(s)||(s=' <span class="'+i.buttonLabelClass+'">'+s+"</span>"),n.setTokens({type:c,css:o,title:a,status:l,icon:r,label:s})},_renderThumbProgress:function(){return'<div class="file-thumb-progress kv-hidden">'+this.progressTemplate.setTokens({percent:"0",status:this.msgUploadBegin})+"</div>"},_renderFileFooter:function(e,i,n,o){var a,r=this,s=r.fileActionSettings,l=s.showRemove,c=s.showDrag,u=s.showUpload,d=s.showZoom,h=r._getLayoutTemplate("footer"),p=r._getLayoutTemplate("indicator"),f=o?s.indicatorError:s.indicatorNew,m=o?s.indicatorErrorTitle:s.indicatorNewTitle,v=p.setTokens({indicator:f,indicatorTitle:m});return i=r._getSize(i),a=r.isAjaxUpload?h.setTokens({actions:r._renderFileActions(u,!1,l,d,c,!1,!1,!1),caption:e,size:i,width:n,progress:r._renderThumbProgress(),indicator:v}):h.setTokens({actions:r._renderFileActions(!1,!1,!1,d,c,!1,!1,!1),caption:e,size:i,width:n,progress:"",indicator:v}),t.replaceTags(a,r.previewThumbTags)},_renderFileActions:function(e,t,i,n,o,a,r,s,l,c,u){if(!(e||t||i||n||o))return"";var d,h=this,p=!1===r?"":' data-url="'+r+'"',f=!1===s?"":' data-key="'+s+'"',m="",v="",g="",b="",y="",w=h._getLayoutTemplate("actions"),k=h.fileActionSettings,x=h.otherActionButtons.setTokens({dataKey:f,key:s}),C=a?k.removeClass+" disabled":k.removeClass;return i&&(m=h._getLayoutTemplate("actionDelete").setTokens({removeClass:C,removeIcon:k.removeIcon,removeTitle:k.removeTitle,dataUrl:p,dataKey:f,key:s})),e&&(v=h._getLayoutTemplate("actionUpload").setTokens({uploadClass:k.uploadClass,uploadIcon:k.uploadIcon,uploadTitle:k.uploadTitle})),t&&(g=(g=h._getLayoutTemplate("actionDownload").setTokens({downloadClass:k.downloadClass,downloadIcon:k.downloadIcon,downloadTitle:k.downloadTitle,downloadUrl:c||h.initialPreviewDownloadUrl})).setTokens({filename:u,key:s})),n&&(b=h._getLayoutTemplate("actionZoom").setTokens({zoomClass:k.zoomClass,zoomIcon:k.zoomIcon,zoomTitle:k.zoomTitle})),o&&l&&(d="drag-handle-init "+k.dragClass,y=h._getLayoutTemplate("actionDrag").setTokens({dragClass:d,dragTitle:k.dragTitle,dragIcon:k.dragIcon})),w.setTokens({delete:m,upload:v,download:g,zoom:b,drag:y,other:x})},_browse:function(e){var t=this;e&&e.isDefaultPrevented()||!t._raise("filebrowse")||(t.isError&&!t.isAjaxUpload&&t.clear(),t.$captionContainer.focus())},_filterDuplicate:function(e,t,i){var n=this._getFileId(e);n&&i&&i.indexOf(n)>-1||(i||(i=[]),t.push(e),i.push(n))},_change:function(i){var n=this;if(!n.changeTriggered){var o,a,r=n.$element,s=arguments.length>1,l=n.isAjaxUpload,c=[],u=s?arguments[1]:r.get(0).files,d=!l&&t.isEmpty(r.attr("multiple"))?1:n.maxFileCount,h=n.filestack.length,p=t.isEmpty(r.attr("multiple"))&&h>0,f=n._getFileIds(),m=function(t,i,o,a){var r=e.extend(!0,{},n._getOutData({},{},u),{id:o,index:a}),s={id:o,index:a,file:i,files:u};return l?n._showUploadError(t,r):n._showError(t,s)};if(n.reader=null,n._resetUpload(),n._hideFileIcon(),n.dropZoneEnabled&&n.$container.find(".file-drop-zone ."+n.dropZoneTitleClass).remove(),l?e.each(u,function(e,t){n._filterDuplicate(t,c,f)}):(u=i.target&&void 0===i.target.files?i.target.value?[{name:i.target.value.replace(/^.+\\/,"")}]:[]:i.target.files||{},c=u),t.isEmpty(c)||0===c.length)return l||n.clear(),void n._raise("fileselectnone");if(n._resetErrors(),a=c.length,o=n._getFileCount(l?n.getFileStack().length+a:a),d>0&&o>d){if(!n.autoReplace||a>d)return void function(e,t){var i=n.msgFilesTooMany.replace("{m}",t).replace("{n}",e);n.isError=m(i,null,null,null),n.$captionContainer.removeClass("icon-visible"),n._setCaption("",!0),n.$container.removeClass("file-input-new file-input-ajax-new")}(n.autoReplace&&a>d?a:o,d);o>d&&n._resetPreviewThumbs(l)}else!l||p?(n._resetPreviewThumbs(!1),p&&n.clearStack()):!l||0!==h||n.previewCache.count()&&!n.overwriteInitial||n._resetPreviewThumbs(!0);n.isPreviewable?n.readFiles(c):n._updateFileDetails(1)}},_abort:function(t){var i,n=this;return n.ajaxAborted&&"object"==typeof n.ajaxAborted&&void 0!==n.ajaxAborted.message?((i=e.extend(!0,{},n._getOutData(),t)).abortData=n.ajaxAborted.data||{},i.abortMessage=n.ajaxAborted.message,n._setProgress(101,n.$progress,n.msgCancelled),n._showUploadError(n.ajaxAborted.message,i,"filecustomerror"),n.cancel(),!0):!!n.ajaxAborted},_resetFileStack:function(){var i=this,n=0,o=[],a=[],r=[];i._getThumbs().each(function(){var s=e(this),l=s.attr("data-fileindex"),c=i.filestack[l],u=s.attr("id");"-1"!==l&&-1!==l&&(void 0!==c?(o[n]=c,a[n]=i._getFileName(c),r[n]=i._getFileId(c),s.attr({id:i.previewInitId+"-"+n,"data-fileindex":n}),n++):s.attr({id:"uploaded-"+t.uniqId(),"data-fileindex":"-1"}),i.$preview.find("#zoom-"+u).attr({id:"zoom-"+s.attr("id"),"data-fileindex":s.attr("data-fileindex")}))}),i.filestack=o,i.filenames=a,i.fileids=r},_isFileSelectionValid:function(e){var t=this;return e=e||0,t.required&&!t.getFilesCount()?(t.$errorContainer.html(""),t._showUploadError(t.msgFileRequired),!1):!(t.minFileCount>0&&t._getFileCount(e)<t.minFileCount)||(t._noFilesError({}),!1)},clearStack:function(){var e=this;return e.filestack=[],e.filenames=[],e.fileids=[],e.$element},updateStack:function(e,t){var i=this;return i.filestack[e]=t,i.filenames[e]=i._getFileName(t),i.fileids[e]=t&&i._getFileId(t)||null,i.$element},addToStack:function(e){var t=this;return t.filestack.push(e),t.filenames.push(t._getFileName(e)),t.fileids.push(t._getFileId(e)),t.$element},getFileStack:function(e){return this.filestack.filter(function(t){return e?void 0!==t:null!=t})},getFilesCount:function(){var e=this,t=e.isAjaxUpload?e.getFileStack().length:e._inputFileCount();return e._getFileCount(t)},readFiles:function(i){this.reader=new FileReader;var n,o=this,a=o.$element,r=o.$preview,s=o.reader,l=o.$previewContainer,c=o.$previewStatus,u=o.msgLoading,d=o.msgProgress,h=o.previewInitId,p=i.length,f=o.fileTypeSettings,m=o.filestack.length,v=o.allowedFileTypes,g=v?v.length:0,b=o.allowedFileExtensions,y=t.isEmpty(b)?"":b.join(", "),w=o.maxFilePreviewSize&&parseFloat(o.maxFilePreviewSize),k=r.length&&(!w||isNaN(w)),x=function(t,a,r,s){var l,c=e.extend(!0,{},o._getOutData({},{},i),{id:r,index:s}),u={id:r,index:s,file:a,files:i};o._previewDefault(a,r,!0),o.isAjaxUpload?(o.addToStack(void 0),setTimeout(function(){n(s+1)},100)):p=0,o._initFileActions(),(l=e("#"+r)).find(".kv-file-upload").hide(),o.removeFromPreviewOnError&&l.remove(),o.isError=o.isAjaxUpload?o._showUploadError(t,c):o._showError(t,u),o._updateFileDetails(p)};o.loadedImages=[],o.totalImagesCount=0,e.each(i,function(e,t){var i=o.fileTypeSettings.image;i&&i(t.type)&&o.totalImagesCount++}),(n=function(C){if(t.isEmpty(a.attr("multiple"))&&(p=1),C>=p)return o.isAjaxUpload&&o.filestack.length>0?o._raise("filebatchselected",[o.getFileStack()]):o._raise("filebatchselected",[i]),l.removeClass("file-thumb-loading"),void c.html("");var _,S,T,E,A,D,F,P,I,M,O,$,z=h+"-"+(m+C),N=i[C],L=f.text,R=f.image,j=f.html,U=N&&N.name?o.slug(N.name):"",B=(N&&N.size||0)/1e3,H="",V=t.createObjectURL(N),q=0,Y="",W=0,G=function(){var e=d.setTokens({index:C+1,files:p,percent:50,name:U});setTimeout(function(){c.html(e),o._updateFileDetails(p),n(C+1)},100),o._raise("fileloaded",[N,z,C,s])};if(N){if(g>0)for(S=0;g>S;S++)D=v[S],F=o.msgFileTypes[D]||D,Y+=0===S?F:", "+F;if(!1===U)return void n(C+1);if(0===U.length)return T=o.msgInvalidFileName.replace("{name}",t.htmlEncode(N.name,"[unknown]")),void x(T,N,z,C);if(t.isEmpty(b)||(H=new RegExp("\\.("+b.join("|")+")$","i")),_=B.toFixed(2),o.maxFileSize>0&&B>o.maxFileSize)return T=o.msgSizeTooLarge.setTokens({name:U,size:_,maxSize:o.maxFileSize}),void x(T,N,z,C);if(null!==o.minFileSize&&B<=t.getNum(o.minFileSize))return T=o.msgSizeTooSmall.setTokens({name:U,size:_,minSize:o.minFileSize}),void x(T,N,z,C);if(!t.isEmpty(v)&&t.isArray(v)){for(S=0;S<v.length;S+=1)E=v[S],q+=(P=f[E])&&"function"==typeof P&&P(N.type,N.name)?1:0;if(0===q)return T=o.msgInvalidFileType.setTokens({name:U,types:Y}),void x(T,N,z,C)}if(0===q&&!t.isEmpty(b)&&t.isArray(b)&&!t.isEmpty(H)&&(A=t.compare(U,H),0===(q+=t.isEmpty(A)?0:A.length)))return T=o.msgInvalidFileExtension.setTokens({name:U,extensions:y}),void x(T,N,z,C);if(!o.showPreview)return o.isAjaxUpload&&o.addToStack(N),setTimeout(function(){n(C+1),o._updateFileDetails(p)},100),void o._raise("fileloaded",[N,z,C,s]);if(!k&&B>w)return o.addToStack(N),l.addClass("file-thumb-loading"),o._previewDefault(N,z),o._initFileActions(),o._updateFileDetails(p),void n(C+1);r.length&&void 0!==FileReader?(I=L(N.type,U),M=j(N.type,U),O=R(N.type,U),c.html(u.replace("{index}",C+1).replace("{files}",p)),l.addClass("file-thumb-loading"),s.onerror=function(e){o._errorHandler(e,U)},s.onload=function(i){var n,a,r,l,c,u,d=[];if(a={name:U,type:N.type},e.each(f,function(e,t){"object"!==e&&"other"!==e&&"function"==typeof t&&t(N.type,U)&&W++}),0===W){for(r=new Uint8Array(i.target.result),S=0;S<r.length;S++)l=r[S].toString(16),d.push(l);if(n=d.join("").toLowerCase().substring(0,8),u=t.getMimeType(n,"",""),t.isEmpty(u)&&(c=t.arrayBuffer2String(s.result),u=t.isSvg(c)?"image/svg+xml":t.getMimeType(n,c,N.type)),a={name:U,type:u},I=L(u,""),M=j(u,""),O=R(u,""),($=I||M)||O)return void function(e){var t=new FileReader;t.onerror=function(e){o._errorHandler(e,U)},t.onload=function(e){o._previewFile(C,N,e,z,V,a),o._initFileActions(),G()},e?t.readAsText(N,o.textEncoding):t.readAsDataURL(N)}($)}o._previewFile(C,N,i,z,V,a),o._initFileActions(),G()},s.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100,i=Math.ceil(t);T=d.setTokens({index:C+1,files:p,percent:i,name:U}),setTimeout(function(){c.html(T)},100)}},I||M?s.readAsText(N,o.textEncoding):O?s.readAsDataURL(N):s.readAsArrayBuffer(N)):(o._previewDefault(N,z),setTimeout(function(){n(C+1),o._updateFileDetails(p)},100),o._raise("fileloaded",[N,z,C,s])),o.addToStack(N)}})(0),o._updateFileDetails(p,!1)},lock:function(){var e=this;return e._resetErrors(),e.disable(),e.showRemove&&e.$container.find(".fileinput-remove").hide(),e.showCancel&&e.$container.find(".fileinput-cancel").show(),e._raise("filelock",[e.filestack,e._getExtraData()]),e.$element},unlock:function(e){var t=this;return void 0===e&&(e=!0),t.enable(),t.showCancel&&t.$container.find(".fileinput-cancel").hide(),t.showRemove&&t.$container.find(".fileinput-remove").show(),e&&t._resetFileStack(),t._raise("fileunlock",[t.filestack,t._getExtraData()]),t.$element},cancel:function(){var t,i=this,n=i.ajaxRequests,o=n.length;if(o>0)for(t=0;o>t;t+=1)i.cancelling=!0,n[t].abort();return i._setProgressCancelled(),i._getThumbs().each(function(){var t=e(this),n=t.attr("data-fileindex");t.removeClass("file-uploading"),void 0!==i.filestack[n]&&(t.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),t.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),i.unlock()}),i.$element},clear:function(){var i,n=this;if(n._raise("fileclear"))return n.$btnUpload.removeAttr("disabled"),n._getThumbs().find("video,audio,img").each(function(){t.cleanMemory(e(this))}),n._clearFileInput(),n._resetUpload(),n.clearStack(),n._resetErrors(!0),n._hasInitialPreview()?(n._showFileIcon(),n._resetPreview(),n._initPreviewActions(),n.$container.removeClass("file-input-new")):(n._getThumbs().each(function(){n._clearObjects(e(this))}),n.isAjaxUpload&&(n.previewCache.data={}),n.$preview.html(""),i=!n.overwriteInitial&&n.initialCaption.length>0?n.initialCaption:"",n.$caption.attr("title","").val(i),t.addCss(n.$container,"file-input-new"),n._validateDefaultPreview()),0===n.$container.find(t.FRAMES).length&&(n._initCaption()||n.$captionContainer.removeClass("icon-visible")),n._hideFileIcon(),n._raise("filecleared"),n.$captionContainer.focus(),n._setFileDropZoneTitle(),n.$element},reset:function(){var e=this;if(e._raise("filereset"))return e._resetPreview(),e.$container.find(".fileinput-filename").text(""),t.addCss(e.$container,"file-input-new"),(e.getFrames().length||e.dropZoneEnabled)&&e.$container.removeClass("file-input-new"),e.clearStack(),e.formdata={},e._setFileDropZoneTitle(),e.$element},disable:function(){var e=this;return e.isDisabled=!0,e._raise("filedisabled"),e.$element.attr("disabled","disabled"),e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),t.addCss(e.$container.find(".btn-file"),"disabled"),e._initDragDrop(),e.$element},enable:function(){var e=this;return e.isDisabled=!1,e._raise("fileenabled"),e.$element.removeAttr("disabled"),e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),e.$container.find(".btn-file").removeClass("disabled"),e._initDragDrop(),e.$element},upload:function(){var i,n,o,a=this,r=a.getFileStack().length,s=!e.isEmptyObject(a._getExtraData());if(a.isAjaxUpload&&!a.isDisabled&&a._isFileSelectionValid(r)){if(a._resetUpload(),0===r&&!s)return void a._showUploadError(a.msgUploadEmpty);if(a.$progress.show(),a.uploadCount=0,a.uploadStatus={},a.uploadLog=[],a.lock(),a._setProgress(2),0===r&&s)return void a._uploadExtraOnly();if(o=a.filestack.length,a.hasInitData=!1,!a.uploadAsync)return a._uploadBatch(),a.$element;for(n=a._getOutData(),a._raise("filebatchpreupload",[n]),a.fileBatchCompleted=!1,a.uploadCache={content:[],config:[],tags:[],append:!0},a.uploadAsyncCount=a.getFileStack().length,i=0;o>i;i++)a.uploadCache.content[i]=null,a.uploadCache.config[i]=null,a.uploadCache.tags[i]=null;for(a.$preview.find(".file-preview-initial").removeClass(t.SORT_CSS),a._initSortable(),a.cacheInitialPreview=a.getPreview(),i=0;o>i;i++)a.filestack[i]&&a._uploadSingle(i,!0)}},destroy:function(){var t=this,i=t.$form,n=t.$container,o=t.$element,a=t.namespace;return e(document).off(a),e(window).off(a),i&&i.length&&i.off(a),t.isAjaxUpload&&t._clearFileInput(),t._cleanup(),t._initPreviewCache(),o.insertBefore(n).off(a).removeData(),n.off().remove(),o},refresh:function(i){var n=this,o=n.$element;return i="object"!=typeof i||t.isEmpty(i)?n.options:e.extend(!0,{},n.options,i),n._init(i,!0),n._listen(),o},zoom:function(e){var i=this,n=i._getFrame(e),o=i.$modal;n&&(t.initModal(o),o.html(i._getModalContent()),i._setZoomContent(n),o.modal("show"),i._initZoomButtons())},getExif:function(e){var t=this._getFrame(e);return t&&t.data("exif")||null},getFrames:function(i){var n;return i=i||"",n=this.$preview.find(t.FRAMES+i),this.reversePreviewOrder&&(n=e(n.get().reverse())),n},getPreview:function(){var e=this;return{content:e.initialPreview,config:e.initialPreviewConfig,tags:e.initialPreviewThumbTags}}},e.fn.fileinput=function(n){if(t.hasFileAPISupport()||t.isIE(9)){var o=Array.apply(null,arguments),a=[];switch(o.shift(),this.each(function(){var r,s=e(this),l=s.data("fileinput"),c="object"==typeof n&&n,u=c.theme||s.data("theme"),d={},h={},p=c.language||s.data("language")||e.fn.fileinput.defaults.language||"en";l||(u&&(h=e.fn.fileinputThemes[u]||{}),"en"===p||t.isEmpty(e.fn.fileinputLocales[p])||(d=e.fn.fileinputLocales[p]||{}),r=e.extend(!0,{},e.fn.fileinput.defaults,h,e.fn.fileinputLocales.en,d,c,s.data()),l=new i(this,r),s.data("fileinput",l)),"string"==typeof n&&a.push(l[n].apply(l,o))}),a.length){case 0:return this;case 1:return a[0];default:return a}}},e.fn.fileinput.defaults={language:"en",showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,showClose:!0,showUploadedThumbs:!0,browseOnZoneClick:!1,autoReplace:!1,autoOrientImage:!1,required:!1,rtl:!1,hideThumbnailContent:!1,encodeUrl:!0,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,initialPreviewDownloadUrl:"",removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-sm btn-kv btn-default btn-outline-secondary",fullscreen:"btn btn-sm btn-kv btn-default btn-outline-secondary",borderless:"btn btn-sm btn-kv btn-default btn-outline-secondary",close:"btn btn-sm btn-kv btn-default btn-outline-secondary"},previewTemplates:{},previewContentTemplates:{},preferIconicPreview:!1,preferIconicZoomPreview:!1,allowedPreviewTypes:void 0,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default btn-secondary",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default btn-secondary",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default btn-secondary",uploadUrl:null,uploadUrlThumb:null,uploadAsync:!0,uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar bg-success progress-bar-success",progressErrorClass:"progress-bar bg-danger progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:t.closeButton("kv-error-close"),slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0,mergeAjaxCallbacks:!1,mergeAjaxDeleteCallbacks:!1,retryErrorUploads:!0,reversePreviewOrder:!1},e.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgPlaceholder:"Select {files}...",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadEmpty:"No valid data available for upload.",msgUploadError:"Error",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"},usePdfRenderer:function(){var e=!!window.MSInputMethodContext&&!!document.documentMode;return!!navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/i)||e},pdfRendererUrl:"",pdfRendererTemplate:'<iframe class="kv-preview-data file-preview-pdf" src="{renderer}?file={data}" {style}></iframe>'},e.fn.fileinput.Constructor=i,e(document).ready(function(){var t=e("input.file[type=file]");t.length&&t.fileinput()})});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Emitter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=this._callbacks[e];if(t){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(var a=0,r=r=t;;){if(a>=r.length)break;r[a++].apply(this,n)}}return this}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var i=this._callbacks[e];if(!i)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var n=0;n<i.length;n++){if(i[n]===t){i.splice(n,1);break}}return this}}]),e}(),Dropzone=function(e){function t(e,i){_classCallCheck(this,t);var n,o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=void 0;if(o.element=e,o.version=t.version,o.defaultOptions.previewTemplate=o.defaultOptions.previewTemplate.replace(/\n*/g,""),o.clickableElements=[],o.listeners=[],o.files=[],"string"==typeof o.element&&(o.element=document.querySelector(o.element)),!o.element||null==o.element.nodeType)throw new Error("Invalid dropzone element.");if(o.element.dropzone)throw new Error("Dropzone already attached.");t.instances.push(o),o.element.dropzone=o;var r,s=null!=(n=t.optionsForElement(o.element))?n:{};if(o.options=t.extend({},o.defaultOptions,s,null!=i?i:{}),o.options.forceFallback||!t.isBrowserSupported())return r=o.options.fallback.call(o),_possibleConstructorReturn(o,r);if(null==o.options.url&&(o.options.url=o.element.getAttribute("action")),!o.options.url)throw new Error("No URL provided.");if(o.options.acceptedFiles&&o.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(o.options.uploadMultiple&&o.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return o.options.acceptedMimeTypes&&(o.options.acceptedFiles=o.options.acceptedMimeTypes,delete o.options.acceptedMimeTypes),null!=o.options.renameFilename&&(o.options.renameFile=function(e){return o.options.renameFilename.call(o,e.name,e)}),o.options.method=o.options.method.toUpperCase(),(a=o.getExistingFallback())&&a.parentNode&&a.parentNode.removeChild(a),!1!==o.options.previewsContainer&&(o.options.previewsContainer?o.previewsContainer=t.getElement(o.options.previewsContainer,"previewsContainer"):o.previewsContainer=o.element),o.options.clickable&&(!0===o.options.clickable?o.clickableElements=[o.element]:o.clickableElements=t.getElements(o.options.clickable,"clickable")),o.init(),o}return _inherits(t,Emitter),_createClass(t,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,i){if(i)return{dzuuid:i.file.upload.uuid,dzchunkindex:i.index,dztotalfilesize:i.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:i.file.upload.totalChunkCount,dzchunkbyteoffset:i.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var i=0,n=n=this.element.getElementsByTagName("div");;){if(i>=n.length)break;var o=n[i++];if(/(^| )dz-message($| )/.test(o.className)){e=o,o.className="dz-message";break}}e||(e=t.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var a=e.getElementsByTagName("span")[0];return a&&(null!=a.textContent?a.textContent=this.options.dictFallbackMessage:null!=a.innerText&&(a.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,i,n){var o={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},a=e.width/e.height;null==t&&null==i?(t=o.srcWidth,i=o.srcHeight):null==t?t=i*a:null==i&&(i=t/a);var r=(t=Math.min(t,o.srcWidth))/(i=Math.min(i,o.srcHeight));if(o.srcWidth>t||o.srcHeight>i)if("crop"===n)a>r?(o.srcHeight=e.height,o.srcWidth=o.srcHeight*r):(o.srcWidth=e.width,o.srcHeight=o.srcWidth/r);else{if("contain"!==n)throw new Error("Unknown resizeMethod '"+n+"'");a>r?i=t/a:t=i*a}return o.srcX=(e.width-o.srcWidth)/2,o.srcY=(e.height-o.srcHeight)/2,o.trgWidth=t,o.trgHeight=i,o},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var i=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=t.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);for(var n=0,o=o=e.previewElement.querySelectorAll("[data-dz-name]");;){if(n>=o.length)break;var a=o[n++];a.textContent=e.name}for(var r=0,s=s=e.previewElement.querySelectorAll("[data-dz-size]");!(r>=s.length);)(a=s[r++]).innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink));for(var l=function(n){return n.preventDefault(),n.stopPropagation(),e.status===t.UPLOADING?t.confirm(i.options.dictCancelUploadConfirmation,function(){return i.removeFile(e)}):i.options.dictRemoveFileConfirmation?t.confirm(i.options.dictRemoveFileConfirmation,function(){return i.removeFile(e)}):i.removeFile(e)},c=0,u=u=e.previewElement.querySelectorAll("[data-dz-remove]");;){if(c>=u.length)break;u[c++].addEventListener("click",l)}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(var i=0,n=n=e.previewElement.querySelectorAll("[data-dz-thumbnail]");;){if(i>=n.length)break;var o=n[i++];o.alt=e.name,o.src=t}return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error);for(var i=0,n=n=e.previewElement.querySelectorAll("[data-dz-errormessage]");;){if(i>=n.length)break;n[i++].textContent=t}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,i){if(e.previewElement)for(var n=0,o=o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]");;){if(n>=o.length)break;var a=o[n++];"PROGRESS"===a.nodeName?a.value=t:a.style.width=t+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var o=0,a=a=i;;){if(o>=a.length)break;var r=a[o++];for(var s in r){var l=r[s];e[s]=l}}return e}}]),_createClass(t,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function(e){return this.files.filter(function(t){return t.status===e}).map(function(e){return e})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(t.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(t.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(t.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(e){return e.status===t.UPLOADING||e.status===t.QUEUED}).map(function(e){return e})}},{key:"init",value:function(){var e=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length){!function i(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null===e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!==e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!==e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",t.getElement(e.options.hiddenInputContainer,"hiddenInputContainer").appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t=e.hiddenFileInput.files;if(t.length)for(var n=0,o=o=t;!(n>=o.length);){var a=o[n++];e.addFile(a)}return e.emit("addedfiles",t),i()})}()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(var i=0,n=n=this.events;;){if(i>=n.length)break;var o=n[i++];this.on(o,this.options[o])}this.on("uploadprogress",function(){return e.updateTotalUploadProgress()}),this.on("removedfile",function(){return e.updateTotalUploadProgress()}),this.on("canceled",function(t){return e.emit("complete",t)}),this.on("complete",function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)});var a=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return e.emit("dragstart",t)},dragenter:function(t){return a(t),e.emit("dragenter",t)},dragover:function(t){var i=void 0;try{i=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",a(t),e.emit("dragover",t)},dragleave:function(t){return e.emit("dragleave",t)},drop:function(t){return a(t),e.drop(t)},dragend:function(t){return e.emit("dragend",t)}}}],this.clickableElements.forEach(function(i){return e.listeners.push({element:i,events:{click:function(n){return(i!==e.element||n.target===e.element||t.elementInside(n.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e=void 0,t=0,i=0;if(this.getActiveFiles().length){for(var n=0,o=o=this.getActiveFiles();;){if(n>=o.length)break;var a=o[n++];t+=a.upload.bytesSent,i+=a.upload.total}e=100*t/i}else e=100;return this.emit("totaluploadprogress",e,i,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e,i=void 0;if(e=this.getExistingFallback())return e;var n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var o=t.createElement(n);return"FORM"!==this.element.tagName?(i=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(o):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=i?i:o}},{key:"getExistingFallback",value:function(){for(var e=function(e){for(var t=0,i=i=e;;){if(t>=i.length)break;var n=i[t++];if(/(^| )fallback($| )/.test(n.className))return n}},t=["div","form"],i=0;i<t.length;i++){var n,o=t[i];if(n=e(this.element.getElementsByTagName(o)))return n}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var i in e.events){var n=e.events[i];t.push(e.element.addEventListener(i,n,!1))}return t}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var i in e.events){var n=e.events[i];t.push(e.element.removeEventListener(i,n,!1))}return t}()})}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(t){return e.cancelUpload(t)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,i="b";if(e>0){for(var n=["tb","gb","mb","kb","b"],o=0;o<n.length;o++){var a=n[o];if(e>=Math.pow(this.options.filesizeBase,4-o)/10){t=e/Math.pow(this.options.filesizeBase,4-o),i=a;break}}t=Math.round(10*t)/10}return"<strong>"+t+"</strong> "+this.options.dictFileSizeUnits[i]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],i=0;i<e.dataTransfer.files.length;i++)t[i]=e.dataTransfer.files[i];if(this.emit("addedfiles",t),t.length){var n=e.dataTransfer.items;n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)}}}},{key:"paste",value:function(e){if(null!=__guard__(null!=e?e.clipboardData:void 0,function(e){return e.items})){this.emit("paste",e);var t=e.clipboardData.items;return t.length?this._addFilesFromItems(t):void 0}}},{key:"handleFiles",value:function(e){for(var t=0,i=i=e;;){if(t>=i.length)break;var n=i[t++];this.addFile(n)}}},{key:"_addFilesFromItems",value:function(e){var t=this;return function(){for(var i=[],n=0,o=o=e;;){if(n>=o.length)break;var a,r=o[n++];null!=r.webkitGetAsEntry&&(a=r.webkitGetAsEntry())?a.isFile?i.push(t.addFile(r.getAsFile())):a.isDirectory?i.push(t._addFilesFromDirectory(a,a.name)):i.push(void 0):null!=r.getAsFile&&(null==r.kind||"file"===r.kind)?i.push(t.addFile(r.getAsFile())):i.push(void 0)}return i}()}},{key:"_addFilesFromDirectory",value:function(e,t){var i=this,n=e.createReader(),o=function(e){return __guardMethod__(console,"log",function(t){return t.log(e)})};return function e(){return n.readEntries(function(n){if(n.length>0){for(var o=0,a=a=n;!(o>=a.length);){var r=a[o++];r.isFile?r.file(function(e){if(!i.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=t+"/"+e.name,i.addFile(e)}):r.isDirectory&&i._addFilesFromDirectory(r,t+"/"+r.name)}e()}return null},o)}()}},{key:"accept",value:function(e,i){return this.options.maxFilesize&&e.size>1024*this.options.maxFilesize*1024?i(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(i(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,i):i(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var i=this;return e.upload={uuid:t.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e),chunked:this.options.chunking&&(this.options.forceChunking||e.size>this.options.chunkSize),totalChunkCount:Math.ceil(e.size/this.options.chunkSize)},this.files.push(e),e.status=t.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return t?(e.accepted=!1,i._errorProcessing([e],t)):(e.accepted=!0,i.options.autoQueue&&i.enqueueFile(e)),i._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(e){for(var t=0,i=i=e;;){if(t>=i.length)break;var n=i[t++];this.enqueueFile(n)}return null}},{key:"enqueueFile",value:function(e){var i=this;if(e.status!==t.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=t.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return i.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(i){return e.emit("thumbnail",t,i),e._processingThumbnail=!1,e._processThumbnailQueue()})}}},{key:"removeFile",value:function(e){if(e.status===t.UPLOADING&&this.cancelUpload(e),this.files=without(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);for(var i=0,n=n=this.files.slice();;){if(i>=n.length)break;var o=n[i++];(o.status!==t.UPLOADING||e)&&this.removeFile(o)}return null}},{key:"resizeImage",value:function(e,i,n,o,a){var r=this;return this.createThumbnail(e,i,n,o,!0,function(i,n){if(null==n)return a(e);var o=r.options.resizeMimeType;null==o&&(o=e.type);var s=n.toDataURL(o,r.options.resizeQuality);return"image/jpeg"!==o&&"image/jpg"!==o||(s=ExifRestore.restore(e.dataURL,s)),a(t.dataURItoBlob(s))})}},{key:"createThumbnail",value:function(e,t,i,n,o,a){var r=this,s=new FileReader;return s.onload=function(){if(e.dataURL=s.result,"image/svg+xml"!==e.type)return r.createThumbnailFromUrl(e,t,i,n,o,a);null!=a&&a(s.result)},s.readAsDataURL(e)}},{key:"createThumbnailFromUrl",value:function(e,t,i,n,o,a,r){var s=this,l=document.createElement("img");return r&&(l.crossOrigin=r),l.onload=function(){var r=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&o&&(r=function(e){return EXIF.getData(l,function(){return e(EXIF.getTag(this,"Orientation"))})}),r(function(o){e.width=l.width,e.height=l.height;var r=s.options.resize.call(s,e,t,i,n),c=document.createElement("canvas"),u=c.getContext("2d");switch(c.width=r.trgWidth,c.height=r.trgHeight,o>4&&(c.width=r.trgHeight,c.height=r.trgWidth),o){case 2:u.translate(c.width,0),u.scale(-1,1);break;case 3:u.translate(c.width,c.height),u.rotate(Math.PI);break;case 4:u.translate(0,c.height),u.scale(1,-1);break;case 5:u.rotate(.5*Math.PI),u.scale(1,-1);break;case 6:u.rotate(.5*Math.PI),u.translate(0,-c.width);break;case 7:u.rotate(.5*Math.PI),u.translate(c.height,-c.width),u.scale(-1,1);break;case 8:u.rotate(-.5*Math.PI),u.translate(-c.height,0)}drawImageIOSFix(u,l,null!=r.srcX?r.srcX:0,null!=r.srcY?r.srcY:0,r.srcWidth,r.srcHeight,null!=r.trgX?r.trgX:0,null!=r.trgY?r.trgY:0,r.trgWidth,r.trgHeight);var d=c.toDataURL("image/png");if(null!=a)return a(d,c)})},null!=a&&(l.onerror=a),l.src=e.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,i=t;if(!(t>=e)){var n=this.getQueuedFiles();if(n.length>0){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-t));for(;i<e;){if(!n.length)return;this.processFile(n.shift()),i++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){for(var i=0,n=n=e;;){if(i>=n.length)break;var o=n[i++];o.processing=!0,o.status=t.UPLOADING,this.emit("processing",o)}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter(function(t){return t.xhr===e}).map(function(e){return e})}},{key:"cancelUpload",value:function(e){if(e.status===t.UPLOADING){for(var i=this._getFilesWithXhr(e.xhr),n=0,o=o=i;;){if(n>=o.length)break;o[n++].status=t.CANCELED}void 0!==e.xhr&&e.xhr.abort();for(var a=0,r=r=i;;){if(a>=r.length)break;var s=r[a++];this.emit("canceled",s)}this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else e.status!==t.ADDED&&e.status!==t.QUEUED||(e.status=t.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"==typeof e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.apply(this,i)}return e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(e){var i=this;this._transformFiles(e,function(n){if(e[0].upload.chunked){var o=e[0],a=n[0];o.upload.chunks=[];var r=function(){for(var n=0;void 0!==o.upload.chunks[n];)n++;if(!(n>=o.upload.totalChunkCount)){0;var r=n*i.options.chunkSize,s=Math.min(r+i.options.chunkSize,o.size),l={name:i._getParamName(0),data:a.webkitSlice?a.webkitSlice(r,s):a.slice(r,s),filename:o.upload.filename,chunkIndex:n};o.upload.chunks[n]={file:o,index:n,dataBlock:l,status:t.UPLOADING,progress:0,retries:0},i._uploadData(e,[l])}};if(o.upload.finishedChunkUpload=function(n){var a=!0;n.status=t.SUCCESS,n.dataBlock=null,n.xhr=null;for(var s=0;s<o.upload.totalChunkCount;s++){if(void 0===o.upload.chunks[s])return r();o.upload.chunks[s].status!==t.SUCCESS&&(a=!1)}a&&i.options.chunksUploaded(o,function(){i._finished(e,"",null)})},i.options.parallelChunkUploads)for(var s=0;s<o.upload.totalChunkCount;s++)r();else r()}else{for(var l=[],c=0;c<e.length;c++)l[c]={name:i._getParamName(c),data:n[c],filename:e[c].upload.filename};i._uploadData(e,l)}})}},{key:"_getChunk",value:function(e,t){for(var i=0;i<e.upload.totalChunkCount;i++)if(void 0!==e.upload.chunks[i]&&e.upload.chunks[i].xhr===t)return e.upload.chunks[i]}},{key:"_uploadData",value:function(e,i){for(var n=this,o=new XMLHttpRequest,a=0,r=r=e;;){if(a>=r.length)break;r[a++].xhr=o}e[0].upload.chunked&&(e[0].upload.chunks[i[0].chunkIndex].xhr=o);var s=this.resolveOption(this.options.method,e),l=this.resolveOption(this.options.url,e);o.open(s,l,!0),o.timeout=this.resolveOption(this.options.timeout,e),o.withCredentials=!!this.options.withCredentials,o.onload=function(t){n._finishedUploading(e,o,t)},o.onerror=function(){n._handleUploadError(e,o)},(null!=o.upload?o.upload:o).onprogress=function(t){return n._updateFilesUploadProgress(e,o,t)};var c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var u in this.options.headers&&t.extend(c,this.options.headers),c){var d=c[u];d&&o.setRequestHeader(u,d)}var h=new FormData;if(this.options.params){var p=this.options.params;for(var f in"function"==typeof p&&(p=p.call(this,e,o,e[0].upload.chunked?this._getChunk(e[0],o):null)),p){var m=p[f];h.append(f,m)}}for(var v=0,g=g=e;;){if(v>=g.length)break;var b=g[v++];this.emit("sending",b,o,h)}this.options.uploadMultiple&&this.emit("sendingmultiple",e,o,h),this._addFormElementData(h);for(var y=0;y<i.length;y++){var w=i[y];h.append(w.name,w.data,w.filename)}this.submitRequest(o,h,e)}},{key:"_transformFiles",value:function(e,t){for(var i=this,n=[],o=0,a=function(a){i.options.transformFile.call(i,e[a],function(i){n[a]=i,++o===e.length&&t(n)})},r=0;r<e.length;r++)a(r)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName)for(var t=0,i=i=this.element.querySelectorAll("input, textarea, select, button");;){if(t>=i.length)break;var n=i[t++],o=n.getAttribute("name"),a=n.getAttribute("type");if(a&&(a=a.toLowerCase()),null!=o)if("SELECT"===n.tagName&&n.hasAttribute("multiple"))for(var r=0,s=s=n.options;;){if(r>=s.length)break;var l=s[r++];l.selected&&e.append(o,l.value)}else(!a||"checkbox"!==a&&"radio"!==a||n.checked)&&e.append(o,n.value)}}},{key:"_updateFilesUploadProgress",value:function(e,t,i){var n=void 0;if(void 0!==i){if(n=100*i.loaded/i.total,e[0].upload.chunked){var o=e[0],a=this._getChunk(o,t);a.progress=n,a.total=i.total,a.bytesSent=i.loaded;o.upload.progress=0,o.upload.total=0,o.upload.bytesSent=0;for(var r=0;r<o.upload.totalChunkCount;r++)void 0!==o.upload.chunks[r]&&void 0!==o.upload.chunks[r].progress&&(o.upload.progress+=o.upload.chunks[r].progress,o.upload.total+=o.upload.chunks[r].total,o.upload.bytesSent+=o.upload.chunks[r].bytesSent);o.upload.progress=o.upload.progress/o.upload.totalChunkCount}else for(var s=0,l=l=e;;){if(s>=l.length)break;var c=l[s++];c.upload.progress=n,c.upload.total=i.total,c.upload.bytesSent=i.loaded}for(var u=0,d=d=e;;){if(u>=d.length)break;var h=d[u++];this.emit("uploadprogress",h,h.upload.progress,h.upload.bytesSent)}}else{var p=!0;n=100;for(var f=0,m=m=e;;){if(f>=m.length)break;var v=m[f++];100===v.upload.progress&&v.upload.bytesSent===v.upload.total||(p=!1),v.upload.progress=n,v.upload.bytesSent=v.upload.total}if(p)return;for(var g=0,b=b=e;;){if(g>=b.length)break;var y=b[g++];this.emit("uploadprogress",y,n,y.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(e,i,n){var o=void 0;if(e[0].status!==t.CANCELED&&4===i.readyState){if("arraybuffer"!==i.responseType&&"blob"!==i.responseType&&(o=i.responseText,i.getResponseHeader("content-type")&&~i.getResponseHeader("content-type").indexOf("application/json")))try{o=JSON.parse(o)}catch(e){n=e,o="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=i.status&&i.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],i)):this._finished(e,o,n):this._handleUploadError(e,i,o)}}},{key:"_handleUploadError",value:function(e,i,n){if(e[0].status!==t.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var o=this._getChunk(e[0],i);if(o.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[o.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var a=0,r=r=e;;){if(a>=r.length)break;r[a++];this._errorProcessing(e,n||this.options.dictResponseError.replace("{{statusCode}}",i.status),i)}}}},{key:"submitRequest",value:function(e,t,i){e.send(t)}},{key:"_finished",value:function(e,i,n){for(var o=0,a=a=e;;){if(o>=a.length)break;var r=a[o++];r.status=t.SUCCESS,this.emit("success",r,i,n),this.emit("complete",r)}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,i,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,i,n){for(var o=0,a=a=e;;){if(o>=a.length)break;var r=a[o++];r.status=t.ERROR,this.emit("error",r,i,n),this.emit("complete",r)}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,i,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),t}();Dropzone.initClass(),Dropzone.version="5.5.1",Dropzone.options={},Dropzone.optionsForElement=function(e){return e.getAttribute("id")?Dropzone.options[camelize(e.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var e=void 0;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function(t){return function(){for(var i=[],n=0,o=o=t;;){if(n>=o.length)break;var a=o[n++];/(^| )dropzone($| )/.test(a.className)?i.push(e.push(a)):i.push(void 0)}return i}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){for(var t=[],i=0,n=n=e;;){if(i>=n.length)break;var o=n[i++];!1!==Dropzone.optionsForElement(o)?t.push(new Dropzone(o)):t.push(void 0)}return t}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var t=0,i=i=Dropzone.blacklistedBrowsers;;){if(t>=i.length)break;i[t++].test(navigator.userAgent)&&(e=!1)}else e=!1;else e=!1;return e},Dropzone.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),a=0,r=t.length,s=0<=r;s?a<=r:a>=r;s?a++:a--)o[a]=t.charCodeAt(a);return new Blob([n],{type:i})};var without=function(e,t){return e.filter(function(e){return e!==t}).map(function(e){return e})},camelize=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};Dropzone.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},Dropzone.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},Dropzone.getElement=function(e,t){var i=void 0;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType&&(i=e),null==i)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},Dropzone.getElements=function(e,t){var i=void 0,n=void 0;if(e instanceof Array){n=[];try{for(var o=0,a=a=e;!(o>=a.length);)i=a[o++],n.push(this.getElement(i,t))}catch(e){n=null}}else if("string"==typeof e){n=[];for(var r=0,s=s=document.querySelectorAll(e);!(r>=s.length);)i=s[r++],n.push(i)}else null!=e.nodeType&&(n=[e]);if(null==n||!n.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},Dropzone.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},Dropzone.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");for(var i=e.type,n=i.replace(/\/.*$/,""),o=0,a=a=t;;){if(o>=a.length)break;var r=a[o++];if("."===(r=r.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(r.toLowerCase(),e.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(n===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new Dropzone(this,e)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(e){e.naturalWidth;var t=e.naturalHeight,i=document.createElement("canvas");i.width=1,i.height=t;var n=i.getContext("2d");n.drawImage(e,0,0);for(var o=n.getImageData(1,0,1,t).data,a=0,r=t,s=t;s>a;){0===o[4*(s-1)+3]?r=s:a=s,s=r+a>>1}var l=s/t;return 0===l?1:l},drawImageIOSFix=function(e,t,i,n,o,a,r,s,l,c){var u=detectVerticalSquash(t);return e.drawImage(t,i,n,o,a,r,s,l,c/u)},ExifRestore=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",i=void 0,n=void 0,o="",a=void 0,r=void 0,s=void 0,l="",c=0;a=(i=e[c++])>>2,r=(3&i)<<4|(n=e[c++])>>4,s=(15&n)<<2|(o=e[c++])>>6,l=63&o,isNaN(n)?s=l=64:isNaN(o)&&(l=64),t=t+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(l),i=n=o="",a=r=s=l="",c<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var i=this.decode64(e.replace("data:image/jpeg;base64,","")),n=this.slice2Segments(i),o=this.exifManipulation(t,n);return"data:image/jpeg;base64,"+this.encode64(o)}},{key:"exifManipulation",value:function(e,t){var i=this.getExifArray(t),n=this.insertExif(e,i);return new Uint8Array(n)}},{key:"getExifArray",value:function(e){for(var t=void 0,i=0;i<e.length;){if(255===(t=e[i])[0]&225===t[1])return t;i++}return[]}},{key:"insertExif",value:function(e,t){var i=e.replace("data:image/jpeg;base64,",""),n=this.decode64(i),o=n.indexOf(255,3),a=n.slice(0,o),r=n.slice(o),s=a;return s=(s=s.concat(t)).concat(r)}},{key:"slice2Segments",value:function(e){for(var t=0,i=[];;){if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{var n=t+(256*e[t+2]+e[t+3])+2,o=e.slice(t,n);i.push(o),t=n}if(t>e.length)break}return i}},{key:"decode64",value:function(e){var t=void 0,i=void 0,n="",o=void 0,a=void 0,r="",s=0,l=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(s++))<<2|(o=this.KEY_STR.indexOf(e.charAt(s++)))>>4,i=(15&o)<<4|(a=this.KEY_STR.indexOf(e.charAt(s++)))>>2,n=(3&a)<<6|(r=this.KEY_STR.indexOf(e.charAt(s++))),l.push(t),64!==a&&l.push(i),64!==r&&l.push(n),t=i=n="",o=a=r="",s<e.length;);return l}}]),e}();ExifRestore.initClass();var contentLoaded=function(e,t){var i=!1,n=!0,o=e.document,a=o.documentElement,r=o.addEventListener?"addEventListener":"attachEvent",s=o.addEventListener?"removeEventListener":"detachEvent",l=o.addEventListener?"":"on",c=function n(a){if("readystatechange"!==a.type||"complete"===o.readyState)return("load"===a.type?e:o)[s](l+a.type,n,!1),!i&&(i=!0)?t.call(e,a.type||a):void 0};if("complete"!==o.readyState){if(o.createEventObject&&a.doScroll){try{n=!e.frameElement}catch(e){}n&&function e(){try{a.doScroll("left")}catch(t){return void setTimeout(e,50)}return c("poll")}()}return o[r](l+"DOMContentLoaded",c,!1),o[r](l+"readystatechange",c,!1),e[r](l+"load",c,!1)}};function __guard__(e,t){return null!=e?t(e):void 0}function __guardMethod__(e,t,i){return null!=e&&"function"==typeof e[t]?i(e,t):void 0}Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t={exports:{}},i=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){o(this,e)}return i(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=this._callbacks[e];if(t){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];var a=t,r=Array.isArray(a),s=0;for(a=r?a:a[Symbol.iterator]();;){var l;if(r){if(s>=a.length)break;l=a[s++]}else{if((s=a.next()).done)break;l=s.value}l.apply(this,n)}}return this}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var i=this._callbacks[e];if(!i)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var n=0;n<i.length;n++){if(i[n]===t){i.splice(n,1);break}}return this}}]),e}(),r=function(e){function t(e,i){o(this,t);var a,r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),s=void 0;if(r.element=e,r.version=t.version,r.defaultOptions.previewTemplate=r.defaultOptions.previewTemplate.replace(/\n*/g,""),r.clickableElements=[],r.listeners=[],r.files=[],"string"==typeof r.element&&(r.element=document.querySelector(r.element)),!r.element||null==r.element.nodeType)throw new Error("Invalid dropzone element.");if(r.element.dropzone)throw new Error("Dropzone already attached.");t.instances.push(r),r.element.dropzone=r;var l,c=null!=(a=t.optionsForElement(r.element))?a:{};if(r.options=t.extend({},r.defaultOptions,c,null!=i?i:{}),r.options.forceFallback||!t.isBrowserSupported())return l=r.options.fallback.call(r),n(r,l);if(null==r.options.url&&(r.options.url=r.element.getAttribute("action")),!r.options.url)throw new Error("No URL provided.");if(r.options.acceptedFiles&&r.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(r.options.uploadMultiple&&r.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return r.options.acceptedMimeTypes&&(r.options.acceptedFiles=r.options.acceptedMimeTypes,delete r.options.acceptedMimeTypes),null!=r.options.renameFilename&&(r.options.renameFile=function(e){return r.options.renameFilename.call(r,e.name,e)}),r.options.method=r.options.method.toUpperCase(),(s=r.getExistingFallback())&&s.parentNode&&s.parentNode.removeChild(s),!1!==r.options.previewsContainer&&(r.options.previewsContainer?r.previewsContainer=t.getElement(r.options.previewsContainer,"previewsContainer"):r.previewsContainer=r.element),r.options.clickable&&(!0===r.options.clickable?r.clickableElements=[r.element]:r.clickableElements=t.getElements(r.options.clickable,"clickable")),r.init(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a),i(t,null,[{key:"initClass",value:function(){this.prototype.Emitter=a,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,i){if(i)return{dzuuid:i.file.upload.uuid,dzchunkindex:i.index,dztotalfilesize:i.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:i.file.upload.totalChunkCount,dzchunkbyteoffset:i.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e=void 0;this.element.className=this.element.className+" dz-browser-not-supported";var i=this.element.getElementsByTagName("div"),n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var a;if(n){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}var r=a;if(/(^| )dz-message($| )/.test(r.className)){e=r,r.className="dz-message";break}}e||(e=t.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var s=e.getElementsByTagName("span")[0];return s&&(null!=s.textContent?s.textContent=this.options.dictFallbackMessage:null!=s.innerText&&(s.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,i,n){var o={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},a=e.width/e.height;null==t&&null==i?(t=o.srcWidth,i=o.srcHeight):null==t?t=i*a:null==i&&(i=t/a);var r=(t=Math.min(t,o.srcWidth))/(i=Math.min(i,o.srcHeight));if(o.srcWidth>t||o.srcHeight>i)if("crop"===n)a>r?(o.srcHeight=e.height,o.srcWidth=o.srcHeight*r):(o.srcWidth=e.width,o.srcHeight=o.srcWidth/r);else{if("contain"!==n)throw new Error("Unknown resizeMethod '"+n+"'");a>r?i=t/a:t=i*a}return o.srcX=(e.width-o.srcWidth)/2,o.srcY=(e.height-o.srcHeight)/2,o.trgWidth=t,o.trgHeight=i,o},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var i=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=t.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);var n=e.previewElement.querySelectorAll("[data-dz-name]"),o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var r;if(o){if(a>=n.length)break;r=n[a++]}else{if((a=n.next()).done)break;r=a.value}var s=r;s.textContent=e.name}var l=e.previewElement.querySelectorAll("[data-dz-size]"),c=Array.isArray(l),u=0;for(l=c?l:l[Symbol.iterator]();;){if(c){if(u>=l.length)break;s=l[u++]}else{if((u=l.next()).done)break;s=u.value}s.innerHTML=this.filesize(e.size)}this.options.addRemoveLinks&&(e._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink));var d=function(n){return n.preventDefault(),n.stopPropagation(),e.status===t.UPLOADING?t.confirm(i.options.dictCancelUploadConfirmation,function(){return i.removeFile(e)}):i.options.dictRemoveFileConfirmation?t.confirm(i.options.dictRemoveFileConfirmation,function(){return i.removeFile(e)}):i.removeFile(e)},h=e.previewElement.querySelectorAll("[data-dz-remove]"),p=Array.isArray(h),f=0;for(h=p?h:h[Symbol.iterator]();;){var m;if(p){if(f>=h.length)break;m=h[f++]}else{if((f=h.next()).done)break;m=f.value}m.addEventListener("click",d)}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");var i=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var a;if(n){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}var r=a;r.alt=e.name,r.src=t}return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error);var i=e.previewElement.querySelectorAll("[data-dz-errormessage]"),n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var a;if(n){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}a.textContent=t}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,i){if(e.previewElement){var n=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var r;if(o){if(a>=n.length)break;r=n[a++]}else{if((a=n.next()).done)break;r=a.value}var s=r;"PROGRESS"===s.nodeName?s.value=t:s.style.width=t+"%"}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var o=i,a=Array.isArray(o),r=0;for(o=a?o:o[Symbol.iterator]();;){var s;if(a){if(r>=o.length)break;s=o[r++]}else{if((r=o.next()).done)break;s=r.value}var l=s;for(var c in l){var u=l[c];e[c]=u}}return e}}]),i(t,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function(e){return this.files.filter(function(t){return t.status===e}).map(function(e){return e})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(t.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(t.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(t.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(e){return e.status===t.UPLOADING||e.status===t.QUEUED}).map(function(e){return e})}},{key:"init",value:function(){var e=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length){!function i(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null===e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!==e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!==e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",t.getElement(e.options.hiddenInputContainer,"hiddenInputContainer").appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t=e.hiddenFileInput.files;if(t.length){var n=t,o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var r;if(o){if(a>=n.length)break;r=n[a++]}else{if((a=n.next()).done)break;r=a.value}var s=r;e.addFile(s)}}return e.emit("addedfiles",t),i()})}()}this.URL=null!==window.URL?window.URL:window.webkitURL;var i=this.events,n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var a;if(n){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}var r=a;this.on(r,this.options[r])}this.on("uploadprogress",function(){return e.updateTotalUploadProgress()}),this.on("removedfile",function(){return e.updateTotalUploadProgress()}),this.on("canceled",function(t){return e.emit("complete",t)}),this.on("complete",function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)});var s=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return e.emit("dragstart",t)},dragenter:function(t){return s(t),e.emit("dragenter",t)},dragover:function(t){var i=void 0;try{i=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",s(t),e.emit("dragover",t)},dragleave:function(t){return e.emit("dragleave",t)},drop:function(t){return s(t),e.drop(t)},dragend:function(t){return e.emit("dragend",t)}}}],this.clickableElements.forEach(function(i){return e.listeners.push({element:i,events:{click:function(n){return(i!==e.element||n.target===e.element||t.elementInside(n.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e=void 0,t=0,i=0;if(this.getActiveFiles().length){var n=this.getActiveFiles(),o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var r;if(o){if(a>=n.length)break;r=n[a++]}else{if((a=n.next()).done)break;r=a.value}var s=r;t+=s.upload.bytesSent,i+=s.upload.total}e=100*t/i}else e=100;return this.emit("totaluploadprogress",e,i,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e,i=void 0;if(e=this.getExistingFallback())return e;var n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var o=t.createElement(n);return"FORM"!==this.element.tagName?(i=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(o):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=i?i:o}},{key:"getExistingFallback",value:function(){for(var e=function(e){var t=e,i=Array.isArray(t),n=0;for(t=i?t:t[Symbol.iterator]();;){var o;if(i){if(n>=t.length)break;o=t[n++]}else{if((n=t.next()).done)break;o=n.value}var a=o;if(/(^| )fallback($| )/.test(a.className))return a}},t=["div","form"],i=0;i<t.length;i++){var n,o=t[i];if(n=e(this.element.getElementsByTagName(o)))return n}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var i in e.events){var n=e.events[i];t.push(e.element.addEventListener(i,n,!1))}return t}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var i in e.events){var n=e.events[i];t.push(e.element.removeEventListener(i,n,!1))}return t}()})}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(t){return e.cancelUpload(t)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,i="b";if(e>0){for(var n=["tb","gb","mb","kb","b"],o=0;o<n.length;o++){var a=n[o];if(e>=Math.pow(this.options.filesizeBase,4-o)/10){t=e/Math.pow(this.options.filesizeBase,4-o),i=a;break}}t=Math.round(10*t)/10}return"<strong>"+t+"</strong> "+this.options.dictFileSizeUnits[i]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],i=0;i<e.dataTransfer.files.length;i++)t[i]=e.dataTransfer.files[i];if(this.emit("addedfiles",t),t.length){var n=e.dataTransfer.items;n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)}}}},{key:"paste",value:function(e){if(null!=(t=null!=e?e.clipboardData:void 0,i=function(e){return e.items},null!=t?i(t):void 0)){var t,i;this.emit("paste",e);var n=e.clipboardData.items;return n.length?this._addFilesFromItems(n):void 0}}},{key:"handleFiles",value:function(e){var t=e,i=Array.isArray(t),n=0;for(t=i?t:t[Symbol.iterator]();;){var o;if(i){if(n>=t.length)break;o=t[n++]}else{if((n=t.next()).done)break;o=n.value}var a=o;this.addFile(a)}}},{key:"_addFilesFromItems",value:function(e){var t=this;return function(){var i=[],n=e,o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var r;if(o){if(a>=n.length)break;r=n[a++]}else{if((a=n.next()).done)break;r=a.value}var s,l=r;null!=l.webkitGetAsEntry&&(s=l.webkitGetAsEntry())?s.isFile?i.push(t.addFile(l.getAsFile())):s.isDirectory?i.push(t._addFilesFromDirectory(s,s.name)):i.push(void 0):null!=l.getAsFile&&(null==l.kind||"file"===l.kind)?i.push(t.addFile(l.getAsFile())):i.push(void 0)}return i}()}},{key:"_addFilesFromDirectory",value:function(e,t){var i=this,n=e.createReader(),o=function(e){return t=console,i="log",n=function(t){return t.log(e)},null!=t&&"function"==typeof t[i]?n(t,i):void 0;var t,i,n};return function e(){return n.readEntries(function(n){if(n.length>0){var o=n,a=Array.isArray(o),r=0;for(o=a?o:o[Symbol.iterator]();;){var s;if(a){if(r>=o.length)break;s=o[r++]}else{if((r=o.next()).done)break;s=r.value}var l=s;l.isFile?l.file(function(e){if(!i.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=t+"/"+e.name,i.addFile(e)}):l.isDirectory&&i._addFilesFromDirectory(l,t+"/"+l.name)}e()}return null},o)}()}},{key:"accept",value:function(e,i){return this.options.maxFilesize&&e.size>1024*this.options.maxFilesize*1024?i(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(i(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,i):i(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var i=this;return e.upload={uuid:t.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e),chunked:this.options.chunking&&(this.options.forceChunking||e.size>this.options.chunkSize),totalChunkCount:Math.ceil(e.size/this.options.chunkSize)},this.files.push(e),e.status=t.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return t?(e.accepted=!1,i._errorProcessing([e],t)):(e.accepted=!0,i.options.autoQueue&&i.enqueueFile(e)),i._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(e){var t=e,i=Array.isArray(t),n=0;for(t=i?t:t[Symbol.iterator]();;){var o;if(i){if(n>=t.length)break;o=t[n++]}else{if((n=t.next()).done)break;o=n.value}var a=o;this.enqueueFile(a)}return null}},{key:"enqueueFile",value:function(e){var i=this;if(e.status!==t.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=t.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return i.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(i){return e.emit("thumbnail",t,i),e._processingThumbnail=!1,e._processThumbnailQueue()})}}},{key:"removeFile",value:function(e){if(e.status===t.UPLOADING&&this.cancelUpload(e),this.files=s(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);var i=this.files.slice(),n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var a;if(n){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}var r=a;(r.status!==t.UPLOADING||e)&&this.removeFile(r)}return null}},{key:"resizeImage",value:function(e,i,n,o,a){var r=this;return this.createThumbnail(e,i,n,o,!0,function(i,n){if(null==n)return a(e);var o=r.options.resizeMimeType;null==o&&(o=e.type);var s=n.toDataURL(o,r.options.resizeQuality);return"image/jpeg"!==o&&"image/jpg"!==o||(s=u.restore(e.dataURL,s)),a(t.dataURItoBlob(s))})}},{key:"createThumbnail",value:function(e,t,i,n,o,a){var r=this,s=new FileReader;return s.onload=function(){if(e.dataURL=s.result,"image/svg+xml"!==e.type)return r.createThumbnailFromUrl(e,t,i,n,o,a);null!=a&&a(s.result)},s.readAsDataURL(e)}},{key:"createThumbnailFromUrl",value:function(e,t,i,n,o,a,r){var s=this,l=document.createElement("img");return r&&(l.crossOrigin=r),l.onload=function(){var r=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&o&&(r=function(e){return EXIF.getData(l,function(){return e(EXIF.getTag(this,"Orientation"))})}),r(function(o){e.width=l.width,e.height=l.height;var r=s.options.resize.call(s,e,t,i,n),u=document.createElement("canvas"),d=u.getContext("2d");switch(u.width=r.trgWidth,u.height=r.trgHeight,o>4&&(u.width=r.trgHeight,u.height=r.trgWidth),o){case 2:d.translate(u.width,0),d.scale(-1,1);break;case 3:d.translate(u.width,u.height),d.rotate(Math.PI);break;case 4:d.translate(0,u.height),d.scale(1,-1);break;case 5:d.rotate(.5*Math.PI),d.scale(1,-1);break;case 6:d.rotate(.5*Math.PI),d.translate(0,-u.width);break;case 7:d.rotate(.5*Math.PI),d.translate(u.height,-u.width),d.scale(-1,1);break;case 8:d.rotate(-.5*Math.PI),d.translate(-u.height,0)}c(d,l,null!=r.srcX?r.srcX:0,null!=r.srcY?r.srcY:0,r.srcWidth,r.srcHeight,null!=r.trgX?r.trgX:0,null!=r.trgY?r.trgY:0,r.trgWidth,r.trgHeight);var h=u.toDataURL("image/png");if(null!=a)return a(h,u)})},null!=a&&(l.onerror=a),l.src=e.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,i=t;if(!(t>=e)){var n=this.getQueuedFiles();if(n.length>0){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-t));for(;i<e;){if(!n.length)return;this.processFile(n.shift()),i++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){var i=e,n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var a;if(n){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}var r=a;r.processing=!0,r.status=t.UPLOADING,this.emit("processing",r)}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter(function(t){return t.xhr===e}).map(function(e){return e})}},{key:"cancelUpload",value:function(e){if(e.status===t.UPLOADING){var i=this._getFilesWithXhr(e.xhr),n=i,o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var r;if(o){if(a>=n.length)break;r=n[a++]}else{if((a=n.next()).done)break;r=a.value}r.status=t.CANCELED}void 0!==e.xhr&&e.xhr.abort();var s=i,l=Array.isArray(s),c=0;for(s=l?s:s[Symbol.iterator]();;){var u;if(l){if(c>=s.length)break;u=s[c++]}else{if((c=s.next()).done)break;u=c.value}var d=u;this.emit("canceled",d)}this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else e.status!==t.ADDED&&e.status!==t.QUEUED||(e.status=t.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"==typeof e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.apply(this,i)}return e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(e){var i=this;this._transformFiles(e,function(n){if(e[0].upload.chunked){var o=e[0],a=n[0];o.upload.chunks=[];var r=function(){for(var n=0;void 0!==o.upload.chunks[n];)n++;if(!(n>=o.upload.totalChunkCount)){0;var r=n*i.options.chunkSize,s=Math.min(r+i.options.chunkSize,o.size),l={name:i._getParamName(0),data:a.webkitSlice?a.webkitSlice(r,s):a.slice(r,s),filename:o.upload.filename,chunkIndex:n};o.upload.chunks[n]={file:o,index:n,dataBlock:l,status:t.UPLOADING,progress:0,retries:0},i._uploadData(e,[l])}};if(o.upload.finishedChunkUpload=function(n){var a=!0;n.status=t.SUCCESS,n.dataBlock=null,n.xhr=null;for(var s=0;s<o.upload.totalChunkCount;s++){if(void 0===o.upload.chunks[s])return r();o.upload.chunks[s].status!==t.SUCCESS&&(a=!1)}a&&i.options.chunksUploaded(o,function(){i._finished(e,"",null)})},i.options.parallelChunkUploads)for(var s=0;s<o.upload.totalChunkCount;s++)r();else r()}else{for(var l=[],c=0;c<e.length;c++)l[c]={name:i._getParamName(c),data:n[c],filename:e[c].upload.filename};i._uploadData(e,l)}})}},{key:"_getChunk",value:function(e,t){for(var i=0;i<e.upload.totalChunkCount;i++)if(void 0!==e.upload.chunks[i]&&e.upload.chunks[i].xhr===t)return e.upload.chunks[i]}},{key:"_uploadData",value:function(e,i){var n=this,o=new XMLHttpRequest,a=e,r=Array.isArray(a),s=0;for(a=r?a:a[Symbol.iterator]();;){var l;if(r){if(s>=a.length)break;l=a[s++]}else{if((s=a.next()).done)break;l=s.value}l.xhr=o}e[0].upload.chunked&&(e[0].upload.chunks[i[0].chunkIndex].xhr=o);var c=this.resolveOption(this.options.method,e),u=this.resolveOption(this.options.url,e);o.open(c,u,!0),o.timeout=this.resolveOption(this.options.timeout,e),o.withCredentials=!!this.options.withCredentials,o.onload=function(t){n._finishedUploading(e,o,t)},o.onerror=function(){n._handleUploadError(e,o)},(null!=o.upload?o.upload:o).onprogress=function(t){return n._updateFilesUploadProgress(e,o,t)};var d={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var h in this.options.headers&&t.extend(d,this.options.headers),d){var p=d[h];p&&o.setRequestHeader(h,p)}var f=new FormData;if(this.options.params){var m=this.options.params;for(var v in"function"==typeof m&&(m=m.call(this,e,o,e[0].upload.chunked?this._getChunk(e[0],o):null)),m){var g=m[v];f.append(v,g)}}var b=e,y=Array.isArray(b),w=0;for(b=y?b:b[Symbol.iterator]();;){var k;if(y){if(w>=b.length)break;k=b[w++]}else{if((w=b.next()).done)break;k=w.value}var x=k;this.emit("sending",x,o,f)}this.options.uploadMultiple&&this.emit("sendingmultiple",e,o,f),this._addFormElementData(f);for(var C=0;C<i.length;C++){var _=i[C];f.append(_.name,_.data,_.filename)}this.submitRequest(o,f,e)}},{key:"_transformFiles",value:function(e,t){for(var i=this,n=[],o=0,a=function(a){i.options.transformFile.call(i,e[a],function(i){n[a]=i,++o===e.length&&t(n)})},r=0;r<e.length;r++)a(r)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName){var t=this.element.querySelectorAll("input, textarea, select, button"),i=Array.isArray(t),n=0;for(t=i?t:t[Symbol.iterator]();;){var o;if(i){if(n>=t.length)break;o=t[n++]}else{if((n=t.next()).done)break;o=n.value}var a=o,r=a.getAttribute("name"),s=a.getAttribute("type");if(s&&(s=s.toLowerCase()),null!=r)if("SELECT"===a.tagName&&a.hasAttribute("multiple")){var l=a.options,c=Array.isArray(l),u=0;for(l=c?l:l[Symbol.iterator]();;){var d;if(c){if(u>=l.length)break;d=l[u++]}else{if((u=l.next()).done)break;d=u.value}var h=d;h.selected&&e.append(r,h.value)}}else(!s||"checkbox"!==s&&"radio"!==s||a.checked)&&e.append(r,a.value)}}}},{key:"_updateFilesUploadProgress",value:function(e,t,i){var n=void 0;if(void 0!==i){if(n=100*i.loaded/i.total,e[0].upload.chunked){var o=e[0],a=this._getChunk(o,t);a.progress=n,a.total=i.total,a.bytesSent=i.loaded;o.upload.progress=0,o.upload.total=0,o.upload.bytesSent=0;for(var r=0;r<o.upload.totalChunkCount;r++)void 0!==o.upload.chunks[r]&&void 0!==o.upload.chunks[r].progress&&(o.upload.progress+=o.upload.chunks[r].progress,o.upload.total+=o.upload.chunks[r].total,o.upload.bytesSent+=o.upload.chunks[r].bytesSent);o.upload.progress=o.upload.progress/o.upload.totalChunkCount}else{var s=e,l=Array.isArray(s),c=0;for(s=l?s:s[Symbol.iterator]();;){var u;if(l){if(c>=s.length)break;u=s[c++]}else{if((c=s.next()).done)break;u=c.value}var d=u;d.upload.progress=n,d.upload.total=i.total,d.upload.bytesSent=i.loaded}}var h=e,p=Array.isArray(h),f=0;for(h=p?h:h[Symbol.iterator]();;){var m;if(p){if(f>=h.length)break;m=h[f++]}else{if((f=h.next()).done)break;m=f.value}var v=m;this.emit("uploadprogress",v,v.upload.progress,v.upload.bytesSent)}}else{var g=!0;n=100;var b=e,y=Array.isArray(b),w=0;for(b=y?b:b[Symbol.iterator]();;){var k;if(y){if(w>=b.length)break;k=b[w++]}else{if((w=b.next()).done)break;k=w.value}var x=k;100===x.upload.progress&&x.upload.bytesSent===x.upload.total||(g=!1),x.upload.progress=n,x.upload.bytesSent=x.upload.total}if(g)return;var C=e,_=Array.isArray(C),S=0;for(C=_?C:C[Symbol.iterator]();;){var T;if(_){if(S>=C.length)break;T=C[S++]}else{if((S=C.next()).done)break;T=S.value}var E=T;this.emit("uploadprogress",E,n,E.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(e,i,n){var o=void 0;if(e[0].status!==t.CANCELED&&4===i.readyState){if("arraybuffer"!==i.responseType&&"blob"!==i.responseType&&(o=i.responseText,i.getResponseHeader("content-type")&&~i.getResponseHeader("content-type").indexOf("application/json")))try{o=JSON.parse(o)}catch(e){n=e,o="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=i.status&&i.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],i)):this._finished(e,o,n):this._handleUploadError(e,i,o)}}},{key:"_handleUploadError",value:function(e,i,n){if(e[0].status!==t.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var o=this._getChunk(e[0],i);if(o.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[o.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}var a=e,r=Array.isArray(a),s=0;for(a=r?a:a[Symbol.iterator]();;){if(r){if(s>=a.length)break;a[s++]}else{if((s=a.next()).done)break;s.value}this._errorProcessing(e,n||this.options.dictResponseError.replace("{{statusCode}}",i.status),i)}}}},{key:"submitRequest",value:function(e,t,i){e.send(t)}},{key:"_finished",value:function(e,i,n){var o=e,a=Array.isArray(o),r=0;for(o=a?o:o[Symbol.iterator]();;){var s;if(a){if(r>=o.length)break;s=o[r++]}else{if((r=o.next()).done)break;s=r.value}var l=s;l.status=t.SUCCESS,this.emit("success",l,i,n),this.emit("complete",l)}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,i,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,i,n){var o=e,a=Array.isArray(o),r=0;for(o=a?o:o[Symbol.iterator]();;){var s;if(a){if(r>=o.length)break;s=o[r++]}else{if((r=o.next()).done)break;s=r.value}var l=s;l.status=t.ERROR,this.emit("error",l,i,n),this.emit("complete",l)}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,i,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),t}();r.initClass(),r.version="5.5.1",r.options={},r.optionsForElement=function(e){return e.getAttribute("id")?r.options[l(e.getAttribute("id"))]:void 0},r.instances=[],r.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},r.autoDiscover=!0,r.discover=function(){var e=void 0;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function(t){return function(){var i=[],n=t,o=Array.isArray(n),a=0;for(n=o?n:n[Symbol.iterator]();;){var r;if(o){if(a>=n.length)break;r=n[a++]}else{if((a=n.next()).done)break;r=a.value}var s=r;/(^| )dropzone($| )/.test(s.className)?i.push(e.push(s)):i.push(void 0)}return i}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){var t=[],i=e,n=Array.isArray(i),o=0;for(i=n?i:i[Symbol.iterator]();;){var a;if(n){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}var s=a;!1!==r.optionsForElement(s)?t.push(new r(s)):t.push(void 0)}return t}()},r.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],r.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){var t=r.blacklistedBrowsers,i=Array.isArray(t),n=0;for(t=i?t:t[Symbol.iterator]();;){var o;if(i){if(n>=t.length)break;o=t[n++]}else{if((n=t.next()).done)break;o=n.value}o.test(navigator.userAgent)&&(e=!1)}}else e=!1;else e=!1;return e},r.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),a=0,r=t.length,s=0<=r;s?a<=r:a>=r;s?a++:a--)o[a]=t.charCodeAt(a);return new Blob([n],{type:i})};var s=function(e,t){return e.filter(function(e){return e!==t}).map(function(e){return e})},l=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};r.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},r.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},r.getElement=function(e,t){var i=void 0;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType&&(i=e),null==i)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},r.getElements=function(e,t){var i=void 0,n=void 0;if(e instanceof Array){n=[];try{var o=e,a=Array.isArray(o),r=0;for(o=a?o:o[Symbol.iterator]();;){if(a){if(r>=o.length)break;i=o[r++]}else{if((r=o.next()).done)break;i=r.value}n.push(this.getElement(i,t))}}catch(e){n=null}}else if("string"==typeof e){n=[];var s=document.querySelectorAll(e),l=Array.isArray(s),c=0;for(s=l?s:s[Symbol.iterator]();;){if(l){if(c>=s.length)break;i=s[c++]}else{if((c=s.next()).done)break;i=c.value}n.push(i)}}else null!=e.nodeType&&(n=[e]);if(null==n||!n.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},r.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},r.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");var i=e.type,n=i.replace(/\/.*$/,""),o=t,a=Array.isArray(o),r=0;for(o=a?o:o[Symbol.iterator]();;){var s;if(a){if(r>=o.length)break;s=o[r++]}else{if((r=o.next()).done)break;s=r.value}var l=s;if("."===(l=l.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(l.toLowerCase(),e.name.length-l.length))return!0}else if(/\/\*$/.test(l)){if(n===l.replace(/\/.*$/,""))return!0}else if(i===l)return!0}return!1},null!=e&&(e.fn.dropzone=function(e){return this.each(function(){return new r(this,e)})}),null!=t?t.exports=r:window.Dropzone=r,r.ADDED="added",r.QUEUED="queued",r.ACCEPTED=r.QUEUED,r.UPLOADING="uploading",r.PROCESSING=r.UPLOADING,r.CANCELED="canceled",r.ERROR="error",r.SUCCESS="success";var c=function(e,t,i,n,o,a,r,s,l,c){var u=function(e){e.naturalWidth;var t=e.naturalHeight,i=document.createElement("canvas");i.width=1,i.height=t;var n=i.getContext("2d");n.drawImage(e,0,0);for(var o=n.getImageData(1,0,1,t).data,a=0,r=t,s=t;s>a;)0===o[4*(s-1)+3]?r=s:a=s,s=r+a>>1;var l=s/t;return 0===l?1:l}(t);return e.drawImage(t,i,n,o,a,r,s,l,c/u)},u=function(){function e(){o(this,e)}return i(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",i=void 0,n=void 0,o="",a=void 0,r=void 0,s=void 0,l="",c=0;a=(i=e[c++])>>2,r=(3&i)<<4|(n=e[c++])>>4,s=(15&n)<<2|(o=e[c++])>>6,l=63&o,isNaN(n)?s=l=64:isNaN(o)&&(l=64),t=t+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(l),i=n=o="",a=r=s=l="",c<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var i=this.decode64(e.replace("data:image/jpeg;base64,","")),n=this.slice2Segments(i),o=this.exifManipulation(t,n);return"data:image/jpeg;base64,"+this.encode64(o)}},{key:"exifManipulation",value:function(e,t){var i=this.getExifArray(t),n=this.insertExif(e,i);return new Uint8Array(n)}},{key:"getExifArray",value:function(e){for(var t=void 0,i=0;i<e.length;){if(255===(t=e[i])[0]&225===t[1])return t;i++}return[]}},{key:"insertExif",value:function(e,t){var i=e.replace("data:image/jpeg;base64,",""),n=this.decode64(i),o=n.indexOf(255,3),a=n.slice(0,o),r=n.slice(o),s=a;return s=(s=s.concat(t)).concat(r)}},{key:"slice2Segments",value:function(e){for(var t=0,i=[];;){if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{var n=t+(256*e[t+2]+e[t+3])+2,o=e.slice(t,n);i.push(o),t=n}if(t>e.length)break}return i}},{key:"decode64",value:function(e){var t=void 0,i=void 0,n="",o=void 0,a=void 0,r="",s=0,l=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(s++))<<2|(o=this.KEY_STR.indexOf(e.charAt(s++)))>>4,i=(15&o)<<4|(a=this.KEY_STR.indexOf(e.charAt(s++)))>>2,n=(3&a)<<6|(r=this.KEY_STR.indexOf(e.charAt(s++))),l.push(t),64!==a&&l.push(i),64!==r&&l.push(n),t=i=n="",o=a=r="",s<e.length;);return l}}]),e}();u.initClass();return r._autoDiscoverFunction=function(){if(r.autoDiscover)return r.discover()},function(e,t){var i=!1,n=!0,o=e.document,a=o.documentElement,r=o.addEventListener?"addEventListener":"attachEvent",s=o.addEventListener?"removeEventListener":"detachEvent",l=o.addEventListener?"":"on",c=function n(a){if("readystatechange"!==a.type||"complete"===o.readyState)return("load"===a.type?e:o)[s](l+a.type,n,!1),!i&&(i=!0)?t.call(e,a.type||a):void 0};if("complete"!==o.readyState){if(o.createEventObject&&a.doScroll){try{n=!e.frameElement}catch(e){}n&&function e(){try{a.doScroll("left")}catch(t){return void setTimeout(e,50)}return c("poll")}()}o[r](l+"DOMContentLoaded",c,!1),o[r](l+"readystatechange",c,!1),e[r](l+"load",c,!1)}}(window,r._autoDiscoverFunction),t.exports}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.persianDate=t():e.persianDate=t()}(this,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=8)}([function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=i(4).durationUnit,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"toPersianDigit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toString().replace(/\d+/g,function(e){var i=[],n=[],o=void 0,a=void 0;for(o=0;o<e.length;o+=1)i.push(e.charCodeAt(o));for(a=0;a<i.length;a+=1)n.push(String.fromCharCode(i[a]+(t&&!0===t?1584:1728)));return n.join("")})}},{key:"leftZeroFill",value:function(e,t){for(var i=e+"";i.length<t;)i="0"+i;return i}},{key:"normalizeDuration",value:function(){var e=void 0,t=void 0;return"string"==typeof arguments[0]?(e=arguments[0],t=arguments[1]):(t=arguments[0],e=arguments[1]),o.year.indexOf(e)>-1?e="year":o.month.indexOf(e)>-1?e="month":o.day.indexOf(e)>-1?e="day":o.hour.indexOf(e)>-1?e="hour":o.minute.indexOf(e)>-1?e="minute":o.second.indexOf(e)>-1?e="second":o.millisecond.indexOf(e)>-1&&(e="millisecond"),{unit:e,value:t}}},{key:"absRound",value:function(e){return e<0?Math.ceil(e):Math.floor(e)}},{key:"absFloor",value:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)}}]),e}();e.exports=a},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=i(10),a=i(2),r=i(0),s=i(5),l=(new r).toPersianDigit,c=(new r).leftZeroFill,u=(new r).normalizeDuration,d=i(7),h=i(6),p=function(){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.calendarType=t.calendarType,this.localType=t.localType,this.leapYearMode=t.leapYearMode,this.algorithms=new a(this),this.version="1.0.5",this._utcMode=!1,"fa"!==this.localType?this.formatPersian=!1:this.formatPersian="_default",this.setup(e),this.ON=this.algorithms.ON,this}return n(t,[{key:"setup",value:function(e){if(o.isDate(e))this._gDateToCalculators(e);else if(o.isArray(e))this.algorithmsCalc([e[0],e[1]?e[1]:1,e[2]?e[2]:1,e[3],e[4],e[5],e[6]?e[6]:0]);else if(o.isNumber(e)){var i=new Date(e);this._gDateToCalculators(i)}else if(e instanceof t)this.algorithmsCalc([e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]);else if(e&&"/Date("===e.substring(0,6)){var n=new Date(parseInt(e.substr(6)));this._gDateToCalculators(n)}else{var a=new Date;this._gDateToCalculators(a)}}},{key:"_getSyncedClass",value:function(e){return new(t.toCalendar(this.calendarType).toLocale(this.localType).toLeapYearMode(this.leapYearMode))(e)}},{key:"_gDateToCalculators",value:function(e){this.algorithms.calcGregorian([e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()])}},{key:"rangeName",value:function(){var e=this.calendarType;return"fa"===this.localType?"persian"===e?d.persian:d.gregorian:"persian"===e?h.persian:h.gregorian}},{key:"toLeapYearMode",value:function(e){return this.leapYearMode=e,"astronomical"===e&&"persian"==this.calendarType?this.leapYearMode="astronomical":"algorithmic"===e&&"persian"==this.calendarType&&(this.leapYearMode="algorithmic"),this.algorithms.updateFromGregorian(),this}},{key:"toCalendar",value:function(e){return this.calendarType=e,this.algorithms.updateFromGregorian(),this}},{key:"toLocale",value:function(e){return this.localType=e,"fa"!==this.localType?this.formatPersian=!1:this.formatPersian="_default",this}},{key:"_locale",value:function(){var e=this.calendarType;return"fa"===this.localType?"persian"===e?d.persian:d.gregorian:"persian"===e?h.persian:h.gregorian}},{key:"_weekName",value:function(e){return this._locale().weekdays[e-1]}},{key:"_weekNameShort",value:function(e){return this._locale().weekdaysShort[e-1]}},{key:"_weekNameMin",value:function(e){return this._locale().weekdaysMin[e-1]}},{key:"_dayName",value:function(e){return this._locale().persianDaysName[e-1]}},{key:"_monthName",value:function(e){return this._locale().months[e-1]}},{key:"_monthNameShort",value:function(e){return this._locale().monthsShort[e-1]}},{key:"isPersianDate",value:function(e){return e instanceof t}},{key:"clone",value:function(){return this._getSyncedClass(this.ON.gDate)}},{key:"algorithmsCalc",value:function(e){return this.isPersianDate(e)&&(e=[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]),"persian"===this.calendarType&&"algorithmic"==this.leapYearMode?this.algorithms.calcPersian(e):"persian"===this.calendarType&&"astronomical"==this.leapYearMode?this.algorithms.calcPersiana(e):"gregorian"===this.calendarType?(e[1]=e[1]-1,this.algorithms.calcGregorian(e)):void 0}},{key:"calendar",value:function(){var e=void 0;return"persian"==this.calendarType?"astronomical"==this.leapYearMode?e="persianAstro":"algorithmic"==this.leapYearMode&&(e="persianAlgo"):e="gregorian",this.ON[e]}},{key:"duration",value:function(e,t){return new s(e,t)}},{key:"isDuration",value:function(e){return e instanceof s}},{key:"years",value:function(e){return this.year(e)}},{key:"year",value:function(e){return e||0===e?(this.algorithmsCalc([e,this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]),this):this.calendar().year}},{key:"month",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),e,this.date()]),this):this.calendar().month+1}},{key:"days",value:function(){return this.day()}},{key:"day",value:function(){return this.calendar().weekday}},{key:"dates",value:function(e){return this.date(e)}},{key:"date",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),this.month(),e]),this):this.calendar().day}},{key:"hour",value:function(e){return this.hours(e)}},{key:"hours",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),this.month(),this.date(),e]),this):this.ON.gDate.getHours()}},{key:"minute",value:function(e){return this.minutes(e)}},{key:"minutes",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),this.month(),this.date(),this.hour(),e]),this):this.ON.gDate.getMinutes()}},{key:"second",value:function(e){return this.seconds(e)}},{key:"seconds",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),this.month(),this.date(),this.hour(),this.minute(),e]),this):this.ON.gDate.getSeconds()}},{key:"millisecond",value:function(e){return this.milliseconds(e)}},{key:"milliseconds",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),e]),this):this.ON.gregorian.millisecond}},{key:"unix",value:function(e){var t=void 0;if(e)return this._getSyncedClass(1e3*e);var i=this.ON.gDate.valueOf().toString();return t=i.substring(0,i.length-3),parseInt(t)}},{key:"valueOf",value:function(){return this.ON.gDate.valueOf()}},{key:"getFirstWeekDayOfMonth",value:function(e,t){return this._getSyncedClass([e,t,1]).day()}},{key:"diff",value:function(e,t,i){var n=e,o=this.ON.gDate-n.toDate()-0,a=this.year()-n.year(),r=this.month()-n.month(),s=-1*(this.date()-n.date()),l=void 0;return(l="months"===t||"month"===t?12*a+r+s/30:"years"===t||"year"===t?a+(r+s/30)/12:"seconds"===t||"second"===t?o/1e3:"minutes"===t||"minute"===t?o/6e4:"hours"===t||"hour"===t?o/36e5:"days"===t||"day"===t?o/864e5:"weeks"===t||"week"===t?o/6048e5:o)<0&&(l*=-1),i?l:Math.round(l)}},{key:"startOf",value:function(e){var i=t.toCalendar(this.calendarType).toLocale(this.localType);switch(e){case"years":case"year":return new i([this.year(),1,1]);case"months":case"month":return new i([this.year(),this.month(),1]);case"days":case"day":return new i([this.year(),this.month(),this.date(),0,0,0]);case"hours":case"hour":return new i([this.year(),this.month(),this.date(),this.hours(),0,0]);case"minutes":case"minute":return new i([this.year(),this.month(),this.date(),this.hours(),this.minutes(),0]);case"seconds":case"second":return new i([this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds()]);case"weeks":case"week":return new i([this.year(),this.month(),this.date()-(this.calendar().weekday-1)]);default:return this.clone()}}},{key:"endOf",value:function(e){var i=t.toCalendar(this.calendarType).toLocale(this.localType);switch(e){case"years":case"year":var n=this.isLeapYear()?30:29;return new i([this.year(),12,n,23,59,59]);case"months":case"month":var o=this.daysInMonth(this.year(),this.month());return new i([this.year(),this.month(),o,23,59,59]);case"days":case"day":return new i([this.year(),this.month(),this.date(),23,59,59]);case"hours":case"hour":return new i([this.year(),this.month(),this.date(),this.hours(),59,59]);case"minutes":case"minute":return new i([this.year(),this.month(),this.date(),this.hours(),this.minutes(),59]);case"seconds":case"second":return new i([this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds()]);case"weeks":case"week":var a=this.calendar().weekday;return new i([this.year(),this.month(),this.date()+(7-a)]);default:return this.clone()}}},{key:"sod",value:function(){return this.startOf("day")}},{key:"eod",value:function(){return this.endOf("day")}},{key:"zone",value:function(e){return e||0===e?(this.ON.zone=e,this):this.ON.zone}},{key:"local",value:function(){var e=void 0;if(this._utcMode){var i=new Date(this.toDate()).getTimezoneOffset(),n=60*i*1e3;e=i<0?this.valueOf()-n:this.valueOf()+n,this.toCalendar(t.calendarType);var o=new Date(e);return this._gDateToCalculators(o),this._utcMode=!1,this.zone(i),this}return this}},{key:"utc",value:function(e){var t=void 0;if(e)return this._getSyncedClass(e).utc();if(this._utcMode)return this;var i=60*this.zone()*1e3;t=this.zone()<0?this.valueOf()+i:this.valueOf()-i;var n=new Date(t),o=this._getSyncedClass(n);return this.algorithmsCalc(o),this._utcMode=!0,this.zone(0),this}},{key:"isUtc",value:function(){return this._utcMode}},{key:"isDST",value:function(){var e=this.month(),t=this.date();return 1==e&&t>1||6==e&&t<31||e<6&&e>=2}},{key:"isLeapYear",value:function(e){return void 0===e&&(e=this.year()),"persian"==this.calendarType&&"algorithmic"===this.leapYearMode?this.algorithms.leap_persian(e):"persian"==this.calendarType&&"astronomical"===this.leapYearMode?this.algorithms.leap_persiana(e):"gregorian"==this.calendarType?this.algorithms.leap_gregorian(e):void 0}},{key:"daysInMonth",value:function(e,t){var i=e||this.year(),n=t||this.month();return"persian"===this.calendarType?n<1||n>12?0:n<7?31:n<12?30:this.isLeapYear(i)?30:29:"gregorian"===this.calendarType?new Date(i,n,0).getDate():void 0}},{key:"toDate",value:function(){return this.ON.gDate}},{key:"toArray",value:function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]}},{key:"formatNumber",value:function(){var t=void 0;return"_default"===this.formatPersian?t=void 0!==e&&void 0!==e.exports?!1!==this.formatPersian:!1!==window.formatPersian:!0===this.formatPersian?t=!0:!1===this.formatPersian?t=!1:Error('Invalid Config "formatPersian" !!'),t}},{key:"format",value:function(e){var t=this,i=/([[^[]*])|(\\)?(Mo|MM?M?M?|Do|DD?D?D?|dddddd?|ddddd?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|X|LT|ll?l?l?|LL?L?L?)/g,n={year:t.year(),month:t.month(),hour:t.hours(),minute:t.minutes(),second:t.seconds(),date:t.date(),timezone:t.zone(),unix:t.unix()},o=t.formatNumber(),a=function(e){return o?l(e):e};function r(e){switch(e){case"a":return o?n.hour>=12?" ":" ":n.hour>=12?"PM":"AM";case"H":return a(n.hour);case"HH":return a(c(n.hour,2));case"h":return a(n.hour%12);case"hh":return a(c(n.hour%12,2));case"m":case"mm":return a(c(n.minute,2));case"s":return a(n.second);case"ss":return a(c(n.second,2));case"D":return a(c(n.date));case"DD":return a(c(n.date,2));case"DDD":var i=t.startOf("year");return a(c(t.diff(i,"days"),3));case"DDDD":var r=t.startOf("year");return a(c(t.diff(r,"days"),3));case"d":return a(t.calendar().weekday);case"ddd":return t._weekNameShort(t.calendar().weekday);case"dddd":return t._weekName(t.calendar().weekday);case"ddddd":return t._dayName(t.calendar().day);case"dddddd":return t._weekNameMin(t.calendar().weekday);case"w":var s=t.startOf("year"),l=parseInt(t.diff(s,"days")/7)+1;return a(l);case"ww":var u=t.startOf("year"),d=c(parseInt(t.diff(u,"days")/7)+1,2);return a(d);case"M":return a(n.month);case"MM":return a(c(n.month,2));case"MMM":return t._monthNameShort(n.month);case"MMMM":return t._monthName(n.month);case"YY":var h=n.year.toString().split("");return a(h[2]+h[3]);case"YYYY":return a(n.year);case"Z":var p="+",f=Math.round(n.timezone/60),m=n.timezone%60;m<0&&(m*=-1),f<0&&(p="-",f*=-1);var v=p+c(f,2)+":"+c(m,2);return a(v);case"ZZ":var g="+",b=Math.round(n.timezone/60),y=n.timezone%60;y<0&&(y*=-1),b<0&&(g="-",b*=-1);var w=g+c(b,2)+""+c(y,2);return a(w);case"X":return t.unix();case"LT":return t.format("H:m a");case"L":return t.format("YYYY/MM/DD");case"l":return t.format("YYYY/M/D");case"LL":return t.format("MMMM DD YYYY");case"ll":return t.format("MMM DD YYYY");case"LLL":return t.format("MMMM YYYY DD   H:m  a");case"lll":return t.format("MMM YYYY DD   H:m  a");case"LLLL":return t.format("dddd D MMMM YYYY  H:m  a");case"llll":return t.format("ddd D MMM YYYY  H:m  a")}}if(e)return e.replace(i,r);return"YYYY-MM-DD HH:mm:ss a".replace(i,r)}},{key:"add",value:function(e,t){var i=new s(e,t)._data,n=u(e,t).unit;if(t=u(e,t).value,"year"===n||"month"===n){if(i.years>0){var o=this.year()+i.years;this.year(o)}if(i.months>0){var a=this.date(),r=this.month()+i.months,l=this.daysInMonth(this.year(),r);a>=l&&(a=l),this.date(a),this.month(r)}}if("day"===n){var c=this.hour(),d=this.valueOf()+24*t*60*60*1e3;return this.unix(d/1e3).hour(c)}if("hour"===n){var h=this.valueOf()+60*t*60*1e3;return this.unix(h/1e3)}if("minute"===n){var p=this.valueOf()+60*t*1e3;return this.unix(p/1e3)}if("second"===n){var f=this.valueOf()+1e3*t;return this.unix(f/1e3)}if("millisecond"===n){var m=this.valueOf()+t;return this.unix(m/1e3)}return this._getSyncedClass(this.valueOf())}},{key:"subtract",value:function(e,t){var i=new s(e,t)._data,n=u(e,t).unit;if(t=u(e,t).value,"year"===n||"month"===n){if(i.years>0){var o=this.year()-i.years;this.year(o)}if(i.months>0){var a=this.date(),r=this.month()-i.months;this.month(r);var l=this.daysInMonth(this.year(),this.month());a>l&&(a=l),this.date(a)}}if("day"===n){var c=this.hour(),d=this.valueOf()-24*t*60*60*1e3;return this.unix(d/1e3).hour(c)}if("hour"===n){var h=this.valueOf()-60*t*60*1e3;return this.unix(h/1e3)}if("minute"===n){var p=this.valueOf()-60*t*1e3;return this.unix(p/1e3)}if("second"===n){var f=this.valueOf()-1e3*t;return this.unix(f/1e3)}if("millisecond"===n){var m=this.valueOf()-t;return this.unix(m/1e3)}return this._getSyncedClass(this.valueOf())}},{key:"isSameDay",value:function(e){return this&&e&&this.date()==e.date()&&this.year()==e.year()&&this.month()==e.month()}},{key:"isSameMonth",value:function(e){return this&&e&&this.year()==this.year()&&this.month()==e.month()}}],[{key:"rangeName",value:function(){var e=t,i=e.calendarType;return"fa"===e.localType?"persian"===i?d.persian:d.gregorian:"persian"===i?h.persian:h.gregorian}},{key:"toLeapYearMode",value:function(e){var i=t;return i.leapYearMode=e,i}},{key:"toCalendar",value:function(e){var i=t;return i.calendarType=e,i}},{key:"toLocale",value:function(e){var i=t;return i.localType=e,"fa"!==i.localType?i.formatPersian=!1:i.formatPersian="_default",i}},{key:"isPersianDate",value:function(e){return e instanceof t}},{key:"duration",value:function(e,t){return new s(e,t)}},{key:"isDuration",value:function(e){return e instanceof s}},{key:"unix",value:function(e){return e?new t(1e3*e):(new t).unix()}},{key:"getFirstWeekDayOfMonth",value:function(e,i){return new t([e,i,1]).day()}},{key:"utc",value:function(e){return e?new t(e).utc():(new t).utc()}},{key:"isSameDay",value:function(e,t){return e&&t&&e.date()==t.date()&&e.year()==t.year()&&e.month()==t.month()}},{key:"isSameMonth",value:function(e,t){return e&&t&&e.year()==t.year()&&e.month()==t.month()}}]),t}();e.exports=p},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=i(3),a=i(9),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.ASTRO=new o,this.ON=new a,this.J0000=1721424.5,this.J1970=2440587.5,this.JMJD=2400000.5,this.NormLeap=[!1,!0],this.GREGORIAN_EPOCH=1721425.5,this.PERSIAN_EPOCH=1948320.5}return n(e,[{key:"leap_gregorian",value:function(e){return e%4==0&&!(e%100==0&&e%400!=0)}},{key:"gregorian_to_jd",value:function(e,t,i){return this.GREGORIAN_EPOCH-1+365*(e-1)+Math.floor((e-1)/4)+-Math.floor((e-1)/100)+Math.floor((e-1)/400)+Math.floor((367*t-362)/12+(t<=2?0:this.leap_gregorian(e)?-1:-2)+i)}},{key:"jd_to_gregorian",value:function(e){var t,i,n,o,a,r,s,l,c,u,d,h,p=void 0;return i=(t=Math.floor(e-.5)+.5)-this.GREGORIAN_EPOCH,n=Math.floor(i/146097),o=this.ASTRO.mod(i,146097),a=Math.floor(o/36524),r=this.ASTRO.mod(o,36524),s=Math.floor(r/1461),l=this.ASTRO.mod(r,1461),p=400*n+100*a+4*s+(c=Math.floor(l/365)),4!==a&&4!==c&&p++,u=t-this.gregorian_to_jd(p,1,1),d=t<this.gregorian_to_jd(p,3,1)?0:this.leap_gregorian(p)?1:2,[p,h=Math.floor((12*(u+d)+373)/367),t-this.gregorian_to_jd(p,h,1)+1]}},{key:"tehran_equinox",value:function(e){var t;return 52.5/360,(t=this.ASTRO.equinox(e,0))-this.ASTRO.deltat(e)/86400+this.ASTRO.equationOfTime(t)+52.5/360}},{key:"tehran_equinox_jd",value:function(e){var t;return t=this.tehran_equinox(e),Math.floor(t)}},{key:"persiana_year",value:function(e){var t=this.jd_to_gregorian(e)[0]-2,i=void 0,n=void 0;for(i=this.tehran_equinox_jd(t);i>e;)t--,i=this.tehran_equinox_jd(t);for(n=i-1;!(i<=e&&e<n);)i=n,t++,n=this.tehran_equinox_jd(t);return[Math.round((i-this.PERSIAN_EPOCH)/this.ASTRO.TropicalYear)+1,i]}},{key:"jd_to_persiana",value:function(e){var t,i,n,o,a;return e=Math.floor(e)+.5,t=(n=this.persiana_year(e))[0],o=n[1],Math.floor((e-o)/30)+1,[t,i=(a=Math.floor(e)-this.persiana_to_jd(t,1,1)+1)<=186?Math.ceil(a/31):Math.ceil((a-6)/30),Math.floor(e)-this.persiana_to_jd(t,i,1)+1]}},{key:"persiana_to_jd",value:function(e,t,i){var n=void 0,o=void 0;for(o=this.PERSIAN_EPOCH-1+this.ASTRO.TropicalYear*(e-1-1),n=[e-1,0];n[0]<e;)o=(n=this.persiana_year(o))[1]+(this.ASTRO.TropicalYear+2);return n[1]+(t<=7?31*(t-1):30*(t-1)+6)+(i-1)}},{key:"leap_persiana",value:function(e){return this.persiana_to_jd(e+1,1,1)-this.persiana_to_jd(e,1,1)>365}},{key:"leap_persian",value:function(e){return 682*((e-(e>0?474:473))%2820+474+38)%2816<682}},{key:"persian_to_jd",value:function(e,t,i){var n,o;return n=e-(e>=0?474:473),o=474+this.ASTRO.mod(n,2820),i+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*o-110)/2816)+365*(o-1)+1029983*Math.floor(n/2820)+(this.PERSIAN_EPOCH-1)}},{key:"jd_to_persian",value:function(e){var t,i,n,o,a,r=void 0,s=void 0,l=void 0,c=void 0;return i=(e=Math.floor(e)+.5)-this.persian_to_jd(475,1,1),n=Math.floor(i/1029983),1029982===(o=this.ASTRO.mod(i,1029983))?s=2820:(l=Math.floor(o/366),c=this.ASTRO.mod(o,366),s=Math.floor((2134*l+2816*c+2815)/1028522)+l+1),(r=s+2820*n+474)<=0&&r--,[r,t=(a=e-this.persian_to_jd(r,1,1)+1)<=186?Math.ceil(a/31):Math.ceil((a-6)/30),e-this.persian_to_jd(r,t,1)+1]}},{key:"gWeekDayToPersian",value:function(e){return e+2===8?1:e+2===7?7:e+2}},{key:"updateFromGregorian",value:function(){var e,t,i,n,o,a=void 0,r=void 0;t=this.ON.gregorian.year,i=this.ON.gregorian.month,n=this.ON.gregorian.day,this.ON.gDate=new Date(t,i,n,this.ON.gregorian.hour,this.ON.gregorian.minute,this.ON.gregorian.second,this.ON.gregorian.millisecond),!1===this.parent._utcMode&&(this.ON.zone=this.ON.gDate.getTimezoneOffset()),this.ON.gregorian.year=this.ON.gDate.getFullYear(),this.ON.gregorian.month=this.ON.gDate.getMonth(),this.ON.gregorian.day=this.ON.gDate.getDate(),e=this.gregorian_to_jd(t,i+1,n)+Math.floor(.5)/86400,this.ON.julianday=e,this.ON.modifiedjulianday=e-this.JMJD,a=this.ASTRO.jwday(e),this.ON.gregorian.weekday=a+1,this.ON.gregorian.leap=this.NormLeap[this.leap_gregorian(t)?1:0],a=this.ASTRO.jwday(e),"persian"==this.parent.calendarType&&"algorithmic"==this.parent.leapYearMode&&(r=this.jd_to_persian(e),this.ON.persian.year=r[0],this.ON.persian.month=r[1]-1,this.ON.persian.day=r[2],this.ON.persian.weekday=this.gWeekDayToPersian(a),this.ON.persian.leap=this.NormLeap[this.leap_persian(r[0])?1:0]),"persian"==this.parent.calendarType&&"astronomical"==this.parent.leapYearMode&&(r=this.jd_to_persiana(e),this.ON.persianAstro.year=r[0],this.ON.persianAstro.month=r[1]-1,this.ON.persianAstro.day=r[2],this.ON.persianAstro.weekday=this.gWeekDayToPersian(a),this.ON.persianAstro.leap=this.NormLeap[this.leap_persiana(r[0])?1:0]),null!==this.ON.gregserial.day&&(this.ON.gregserial.day=e-this.J0000),o=864e5*(e-this.J1970),this.ON.unixtime=Math.round(o/1e3)}},{key:"calcGregorian",value:function(e){(e[0]||0===e[0])&&(this.ON.gregorian.year=e[0]),(e[1]||0===e[1])&&(this.ON.gregorian.month=e[1]),(e[2]||0===e[2])&&(this.ON.gregorian.day=e[2]),(e[3]||0===e[3])&&(this.ON.gregorian.hour=e[3]),(e[4]||0===e[4])&&(this.ON.gregorian.minute=e[4]),(e[5]||0===e[5])&&(this.ON.gregorian.second=e[5]),(e[6]||0===e[6])&&(this.ON.gregorian.millisecond=e[6]),this.updateFromGregorian()}},{key:"calcJulian",value:function(){var e,t;e=this.ON.julianday,t=this.jd_to_gregorian(e),this.ON.gregorian.year=t[0],this.ON.gregorian.month=t[1]-1,this.ON.gregorian.day=t[2],this.updateFromGregorian()}},{key:"setJulian",value:function(e){this.ON.julianday=e,this.calcJulian()}},{key:"calcPersian",value:function(e){e[0]&&(this.ON.persian.year=e[0]),e[1]&&(this.ON.persian.month=e[1]),e[2]&&(this.ON.persian.day=e[2]),e[3]&&(this.ON.gregorian.hour=e[3]),e[4]&&(this.ON.gregorian.minute=e[4]),e[5]&&(this.ON.gregorian.second=e[5]),e[6]&&(this.ON.gregorian.millisecond=e[6]),this.setJulian(this.persian_to_jd(this.ON.persian.year,this.ON.persian.month,this.ON.persian.day))}},{key:"calcPersiana",value:function(e){e[0]&&(this.ON.persianAstro.year=e[0]),e[1]&&(this.ON.persianAstro.month=e[1]),e[2]&&(this.ON.persianAstro.day=e[2]),e[3]&&(this.ON.gregorian.hour=e[3]),e[4]&&(this.ON.gregorian.minute=e[4]),e[5]&&(this.ON.gregorian.second=e[5]),e[6]&&(this.ON.gregorian.millisecond=e[6]),this.setJulian(this.persiana_to_jd(this.ON.persianAstro.year,this.ON.persianAstro.month,this.ON.persianAstro.day+.5))}}]),e}();e.exports=r},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.J2000=2451545,this.JulianCentury=36525,this.JulianMillennium=10*this.JulianCentury,this.TropicalYear=365.24219878,this.oterms=[-4680.93,-1.55,1999.25,-51.38,-249.67,-39.05,7.12,27.87,5.79,2.45],this.nutArgMult=[0,0,0,0,1,-2,0,0,2,2,0,0,0,2,2,0,0,0,0,2,0,1,0,0,0,0,0,1,0,0,-2,1,0,2,2,0,0,0,2,1,0,0,1,2,2,-2,-1,0,2,2,-2,0,1,0,0,-2,0,0,2,1,0,0,-1,2,2,2,0,0,0,0,0,0,1,0,1,2,0,-1,2,2,0,0,-1,0,1,0,0,1,2,1,-2,0,2,0,0,0,0,-2,2,1,2,0,0,2,2,0,0,2,2,2,0,0,2,0,0,-2,0,1,2,2,0,0,0,2,0,-2,0,0,2,0,0,0,-1,2,1,0,2,0,0,0,2,0,-1,0,1,-2,2,0,2,2,0,1,0,0,1,-2,0,1,0,1,0,-1,0,0,1,0,0,2,-2,0,2,0,-1,2,1,2,0,1,2,2,0,1,0,2,2,-2,1,1,0,0,0,-1,0,2,2,2,0,0,2,1,2,0,1,0,0,-2,0,2,2,2,-2,0,1,2,1,2,0,-2,0,1,2,0,0,0,1,0,-1,1,0,0,-2,-1,0,2,1,-2,0,0,0,1,0,0,2,2,1,-2,0,2,0,1,-2,1,0,2,1,0,0,1,-2,0,-1,0,1,0,0,-2,1,0,0,0,1,0,0,0,0,0,0,1,2,0,-1,-1,1,0,0,0,1,1,0,0,0,-1,1,2,2,2,-1,-1,2,2,0,0,-2,2,2,0,0,3,2,2,2,-1,0,2,2],this.nutArgCoeff=[-171996,-1742,92095,89,-13187,-16,5736,-31,-2274,-2,977,-5,2062,2,-895,5,1426,-34,54,-1,712,1,-7,0,-517,12,224,-6,-386,-4,200,0,-301,0,129,-1,217,-5,-95,3,-158,0,0,0,129,1,-70,0,123,0,-53,0,63,0,0,0,63,1,-33,0,-59,0,26,0,-58,-1,32,0,-51,0,27,0,48,0,0,0,46,0,-24,0,-38,0,16,0,-31,0,13,0,29,0,0,0,29,0,-12,0,26,0,0,0,-22,0,0,0,21,0,-10,0,17,-1,0,0,16,0,-8,0,-16,1,7,0,-15,0,9,0,-13,0,7,0,-12,0,6,0,11,0,0,0,-10,0,5,0,-8,0,3,0,7,0,-3,0,-7,0,0,0,-7,0,3,0,-7,0,3,0,6,0,0,0,6,0,-3,0,6,0,-3,0,-6,0,3,0,-6,0,3,0,5,0,0,0,-5,0,3,0,-5,0,3,0,-5,0,3,0,4,0,0,0,4,0,0,0,4,0,0,0,-4,0,0,0,-4,0,0,0,-4,0,0,0,3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0],this.deltaTtab=[121,112,103,95,88,82,77,72,68,63,60,56,53,51,48,46,44,42,40,38,35,33,31,29,26,24,22,20,18,16,14,12,11,10,9,8,7,7,7,7,7,7,8,8,9,9,9,9,9,10,10,10,10,10,10,10,10,11,11,11,11,11,12,12,12,12,13,13,13,14,14,14,14,15,15,15,15,15,16,16,16,16,16,16,16,16,15,15,14,13,13.1,12.5,12.2,12,12,12,12,12,12,11.9,11.6,11,10.2,9.2,8.2,7.1,6.2,5.6,5.4,5.3,5.4,5.6,5.9,6.2,6.5,6.8,7.1,7.3,7.5,7.6,7.7,7.3,6.2,5.2,2.7,1.4,-1.2,-2.8,-3.8,-4.8,-5.5,-5.3,-5.6,-5.7,-5.9,-6,-6.3,-6.5,-6.2,-4.7,-2.8,-.1,2.6,5.3,7.7,10.4,13.3,16,18.2,20.2,21.1,22.4,23.5,23.8,24.3,24,23.9,23.9,23.7,24,24.3,25.3,26.2,27.3,28.2,29.1,30,30.7,31.4,32.2,33.1,34,35,36.5,38.3,40.2,42.2,44.5,46.5,48.5,50.5,52.2,53.8,54.9,55.8,56.9,58.3,60,61.6,63,65,66.6],this.EquinoxpTerms=[485,324.96,1934.136,203,337.23,32964.467,199,342.08,20.186,182,27.85,445267.112,156,73.14,45036.886,136,171.52,22518.443,77,222.54,65928.934,74,296.72,3034.906,70,243.58,9037.513,58,119.81,33718.147,52,297.17,150.678,50,21.02,2281.226,45,247.54,29929.562,44,325.15,31555.956,29,60.93,4443.417,18,155.12,67555.328,17,288.79,4562.452,16,198.04,62894.029,14,199.76,31436.921,12,95.39,14577.848,12,287.11,31931.756,12,320.81,34777.259,9,227.73,1222.114,8,15.45,16859.074],this.JDE0tab1000=[new Array(1721139.29189,365242.1374,.06134,.00111,-71e-5),new Array(1721233.25401,365241.72562,-.05323,.00907,25e-5),new Array(1721325.70455,365242.49558,-.11677,-.00297,74e-5),new Array(1721414.39987,365242.88257,-.00769,-.00933,-6e-5)],this.JDE0tab2000=[new Array(2451623.80984,365242.37404,.05169,-.00411,-57e-5),new Array(2451716.56767,365241.62603,.00325,.00888,-3e-4),new Array(2451810.21715,365242.01767,-.11575,.00337,78e-5),new Array(2451900.05952,365242.74049,-.06223,-.00823,32e-5)]}return n(e,[{key:"dtr",value:function(e){return e*Math.PI/180}},{key:"rtd",value:function(e){return 180*e/Math.PI}},{key:"fixangle",value:function(e){return e-360*Math.floor(e/360)}},{key:"fixangr",value:function(e){return e-2*Math.PI*Math.floor(e/(2*Math.PI))}},{key:"dsin",value:function(e){return Math.sin(this.dtr(e))}},{key:"dcos",value:function(e){return Math.cos(this.dtr(e))}},{key:"mod",value:function(e,t){return e-t*Math.floor(e/t)}},{key:"jwday",value:function(e){return this.mod(Math.floor(e+1.5),7)}},{key:"obliqeq",value:function(e){var t,i,n,o;if(n=i=(e-this.J2000)/(100*this.JulianCentury),t=23.43929111111111,Math.abs(i)<1)for(o=0;o<10;o++)t+=this.oterms[o]/3600*n,n*=i;return t}},{key:"nutation",value:function(e){var t,i,n,o,a,r,s=(e-2451545)/36525,l=[],c=0,u=0;for(o=s*(n=s*s),l[0]=this.dtr(297.850363+445267.11148*s-.0019142*n+o/189474),l[1]=this.dtr(357.52772+35999.05034*s-1603e-7*n-o/3e5),l[2]=this.dtr(134.96298+477198.867398*s+.0086972*n+o/56250),l[3]=this.dtr(93.27191+483202.017538*s-.0036825*n+o/327270),l[4]=this.dtr(125.04452-1934.136261*s+.0020708*n+o/45e4),t=0;t<5;t++)l[t]=this.fixangr(l[t]);for(a=s/10,t=0;t<63;t++){for(r=0,i=0;i<5;i++)0!==this.nutArgMult[5*t+i]&&(r+=this.nutArgMult[5*t+i]*l[i]);c+=(this.nutArgCoeff[4*t+0]+this.nutArgCoeff[4*t+1]*a)*Math.sin(r),u+=(this.nutArgCoeff[4*t+2]+this.nutArgCoeff[4*t+3]*a)*Math.cos(r)}return[c/36e6,u/36e6]}},{key:"deltat",value:function(e){var t,i,n,o;return e>=1620&&e<=2e3?(i=(e-1620)/2-(n=Math.floor((e-1620)/2)),t=this.deltaTtab[n]+(this.deltaTtab[n+1]-this.deltaTtab[n])*i):(o=(e-2e3)/100,e<948?t=2177+497*o+44.1*o*o:(t=102+102*o+25.3*o*o,e>2e3&&e<2100&&(t+=.37*(e-2100)))),t}},{key:"equinox",value:function(e,t){var i,n,o,a,r=void 0,s=void 0,l=void 0,c=void 0,u=void 0;for(e<1e3?(l=this.JDE0tab1000,u=e/1e3):(l=this.JDE0tab2000,u=(e-2e3)/1e3),a=35999.373*(o=((n=l[t][0]+l[t][1]*u+l[t][2]*u*u+l[t][3]*u*u*u+l[t][4]*u*u*u*u)-2451545)/36525)-2.47,i=1+.0334*this.dcos(a)+7e-4*this.dcos(2*a),c=0,r=s=0;r<24;r++)c+=this.EquinoxpTerms[s]*this.dcos(this.EquinoxpTerms[s+1]+this.EquinoxpTerms[s+2]*o),s+=3;return n+1e-5*c/i}},{key:"sunpos",value:function(e){var t,i,n,o,a,r,s,l,c,u,d,h,p=void 0,f=void 0,m=void 0,v=void 0;return p=280.46646+36000.76983*(t=(e-this.J2000)/this.JulianCentury)+3032e-7*(i=t*t),p=this.fixangle(p),f=357.52911+35999.05029*t+-1537e-7*i,f=this.fixangle(f),n=.016708634+-42037e-9*t+-1.267e-7*i,a=p+(o=(1.914602+-.004817*t+-14e-6*i)*this.dsin(f)+(.019993-101e-6*t)*this.dsin(2*f)+289e-6*this.dsin(3*f)),r=f+o,s=1.000001018*(1-n*n)/(1+n*this.dcos(r)),l=125.04-1934.136*t,c=a+-.00569+-.00478*this.dsin(l),u=(d=this.obliqeq(e))+.00256*this.dcos(l),m=this.rtd(Math.atan2(this.dcos(d)*this.dsin(a),this.dcos(a))),m=this.fixangle(m),h=this.rtd(Math.asin(this.dsin(d)*this.dsin(a))),v=this.rtd(Math.atan2(this.dcos(u)*this.dsin(c),this.dcos(c))),[p,f,n,o,a,r,s,c,m,h,v=this.fixangle(v),this.rtd(Math.asin(this.dsin(u)*this.dsin(c)))]}},{key:"equationOfTime",value:function(e){var t,i,n,o,a=void 0,r=void 0;return r=280.4664567+360007.6982779*(o=(e-this.J2000)/this.JulianMillennium)+.03032028*o*o+o*o*o/49931+-o*o*o*o/15300+-o*o*o*o*o/2e6,r=this.fixangle(r),t=this.sunpos(e)[10],i=this.nutation(e)[0],n=this.obliqeq(e)+this.nutation(e)[1],a=r+-.0057183+-t+i*this.dcos(n),a-=20*Math.floor(a/20),a/=1440}}]),e}();e.exports=o},function(e,t,i){"use strict";e.exports={durationUnit:{year:["y","years","year"],month:["M","months","month"],day:["d","days","day"],hour:["h","hours","hour"],minute:["m","minutes","minute"],second:["s","second","seconds"],millisecond:["ms","milliseconds","millisecond"],week:["w","","weeks","week"]}}},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=i(0),a=(new o).normalizeDuration,r=(new o).absRound,s=(new o).absFloor,l=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n,o={},l=this._data={},c=a(t,i);o[c.unit]=c.value,n=o.milliseconds||o.millisecond||o.ms||0;var u=o.years||o.year||o.y||0,d=o.months||o.month||o.M||0,h=o.weeks||o.w||o.week||0,p=o.days||o.d||o.day||0,f=o.hours||o.hour||o.h||0,m=o.minutes||o.minute||o.m||0,v=o.seconds||o.second||o.s||0;return this._milliseconds=n+1e3*v+6e4*m+36e5*f,this._days=p+7*h,this._months=d+12*u,l.milliseconds=n%1e3,v+=s(n/1e3),l.seconds=v%60,m+=r(v/60),l.minutes=m%60,f+=r(m/60),l.hours=f%24,p+=r(f/24),p+=7*h,l.days=p%30,d+=r(p/30),l.months=d%12,u+=r(d/12),l.years=u,this}return n(e,[{key:"valueOf",value:function(){return this._milliseconds+864e5*this._days+2592e6*this._months}}]),e}();e.exports=l},function(e,t,i){"use strict";e.exports={gregorian:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"]},persian:{months:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],monthsShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Dey","Bah","Esf"],weekdays:["Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],persianDaysName:["Urmazd","Bahman","Ordibehesht","Shahrivar","Sepandarmaz","Khurdad","Amordad","Dey-be-azar","Azar","Aban","Khorshid","Mah","Tir","Gush","Dey-be-mehr","Mehr","Sorush","Rashn","Farvardin","Bahram","Ram","Bad","Dey-be-din","Din","Ord","Ashtad","Asman","Zamyad","Mantre-sepand","Anaram","Ziadi"]}}},function(e,t,i){"use strict";e.exports={gregorian:{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_")},persian:{months:["","","","","","","","","","","",""],monthsShort:["","","","","","","","","","","",""],weekdays:["","",""," "," ","",""],weekdaysShort:["","","","","","",""],weekdaysMin:["","","","","","",""],persianDaysName:["","","","","","","","  ","","","","","","","  ","","","","","","","","  ","","","","",""," ","",""]}}},function(e,t,i){"use strict";var n=i(1);n.calendarType="persian",n.leapYearMode="astronomical",n.localType="fa",e.exports=n},function(e,t,i){"use strict";e.exports=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gDate=null,this.modifiedjulianday=0,this.julianday=0,this.gregserial={day:0},this.zone=0,this.gregorian={year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,weekday:0,unix:0,leap:0},this.juliancalendar={year:0,month:0,day:0,leap:0,weekday:0},this.islamic={year:0,month:0,day:0,leap:0,weekday:0},this.persianAlgo=this.persian={year:0,month:0,day:0,leap:0,weekday:0},this.persianAstro={year:0,month:0,day:0,leap:0,weekday:0},this.isoweek={year:0,week:0,day:0},this.isoday={year:0,day:0}}},function(e,t,i){"use strict";e.exports={isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isNumber:function(e){return"number"==typeof e},isDate:function(e){return e instanceof Date}}}])}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.persianDatepicker=t():e.persianDatepicker=t()}(this,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=5)}([function(e,t,i){"use strict";var n,o,a={debounce:function(e,t,i){var n;return function(){var o=this,a=arguments,r=i&&!n;clearTimeout(n),n=setTimeout(function(){n=null,i||e.apply(o,a)},t),r&&e.apply(o,a)}},log:function(e){console.log(e)},isMobile:(o=!1,n=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(o=!0),o),debug:function(e,t){window.persianDatepickerDebug&&(e.constructor.name?console.log("Debug: "+e.constructor.name+" : "+t):console.log("Debug: "+t))},delay:function(e,t){clearTimeout(window.datepickerTimer),window.datepickerTimer=setTimeout(e,t)}};e.exports=a},function(e,t,i){"use strict";e.exports='\n<div id="plotId" class="datepicker-plot-area {{cssClass}}">\n    {{#navigator.enabled}}\n        <div data-navigator class="datepicker-navigator">\n            <div class="pwt-btn pwt-btn-next">{{navigator.text.btnNextText}}</div>\n            <div class="pwt-btn pwt-btn-switch">{{navigator.switch.text}}</div>\n            <div class="pwt-btn pwt-btn-prev">{{navigator.text.btnPrevText}}</div>\n        </div>\n    {{/navigator.enabled}}\n    <div class="datepicker-grid-view" >\n    {{#days.enabled}}\n        {{#days.viewMode}}\n        <div class="datepicker-day-view" >    \n            <div class="month-grid-box">\n                <div class="header">\n                    <div class="title"></div>\n                    <div class="header-row">\n                        {{#weekdays.list}}\n                            <div class="header-row-cell">{{.}}</div>\n                        {{/weekdays.list}}\n                    </div>\n                </div>    \n                <table cellspacing="0" class="table-days">\n                    <tbody>\n                        {{#days.list}}\n                           \n                            <tr>\n                                {{#.}}\n                                    {{#enabled}}\n                                        <td data-date="{{dataDate}}" data-unix="{{dataUnix}}" >\n                                            <span  class="{{#otherMonth}}other-month{{/otherMonth}}">{{title}}</span>\n                                            {{#altCalendarShowHint}}\n                                            <i  class="alter-calendar-day">{{alterCalTitle}}</i>\n                                            {{/altCalendarShowHint}}\n                                        </td>\n                                    {{/enabled}}\n                                    {{^enabled}}\n                                        <td data-date="{{dataDate}}" data-unix="{{dataUnix}}" class="disabled">\n                                            <span class="{{#otherMonth}}other-month{{/otherMonth}}">{{title}}</span>\n                                            {{#altCalendarShowHint}}\n                                            <i  class="alter-calendar-day">{{alterCalTitle}}</i>\n                                            {{/altCalendarShowHint}}\n                                        </td>\n                                    {{/enabled}}\n                                    \n                                {{/.}}\n                            </tr>\n                        {{/days.list}}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        {{/days.viewMode}}\n    {{/days.enabled}}\n    \n    {{#month.enabled}}\n        {{#month.viewMode}}\n            <div class="datepicker-month-view">\n                {{#month.list}}\n                    {{#enabled}}               \n                        <div data-month="{{dataMonth}}" class="month-item {{#selected}}selected{{/selected}}">{{title}}</small></div>\n                    {{/enabled}}\n                    {{^enabled}}               \n                        <div data-month="{{dataMonth}}" class="month-item month-item-disable {{#selected}}selected{{/selected}}">{{title}}</small></div>\n                    {{/enabled}}\n                {{/month.list}}\n            </div>\n        {{/month.viewMode}}\n    {{/month.enabled}}\n    \n    {{#year.enabled }}\n        {{#year.viewMode }}\n            <div class="datepicker-year-view" >\n                {{#year.list}}\n                    {{#enabled}}\n                        <div data-year="{{dataYear}}" class="year-item {{#selected}}selected{{/selected}}">{{title}}</div>\n                    {{/enabled}}\n                    {{^enabled}}\n                        <div data-year="{{dataYear}}" class="year-item year-item-disable {{#selected}}selected{{/selected}}">{{title}}</div>\n                    {{/enabled}}                    \n                {{/year.list}}\n            </div>\n        {{/year.viewMode }}\n    {{/year.enabled }}\n    \n    </div>\n    {{#time}}\n    {{#enabled}}\n    <div class="datepicker-time-view">\n        {{#hour.enabled}}\n            <div class="hour time-segment" data-time-key="hour">\n                <div class="up-btn" data-time-key="hour"></div>\n                <input disabled value="{{hour.title}}" type="text" placeholder="hour" class="hour-input">\n                <div class="down-btn" data-time-key="hour"></div>                    \n            </div>       \n            <div class="divider">\n                <span>:</span>\n            </div>\n        {{/hour.enabled}}\n        {{#minute.enabled}}\n            <div class="minute time-segment" data-time-key="minute" >\n                <div class="up-btn" data-time-key="minute"></div>\n                <input disabled value="{{minute.title}}" type="text" placeholder="minute" class="minute-input">\n                <div class="down-btn" data-time-key="minute"></div>\n            </div>        \n            <div class="divider second-divider">\n                <span>:</span>\n            </div>\n        {{/minute.enabled}}\n        {{#second.enabled}}\n            <div class="second time-segment" data-time-key="second"  >\n                <div class="up-btn" data-time-key="second" ></div>\n                <input disabled value="{{second.title}}"  type="text" placeholder="second" class="second-input">\n                <div class="down-btn" data-time-key="second" ></div>\n            </div>\n            <div class="divider meridian-divider"></div>\n            <div class="divider meridian-divider"></div>\n        {{/second.enabled}}\n        {{#meridian.enabled}}\n            <div class="meridian time-segment" data-time-key="meridian" >\n                <div class="up-btn" data-time-key="meridian"></div>\n                <input disabled value="{{meridian.title}}" type="text" class="meridian-input">\n                <div class="down-btn" data-time-key="meridian"></div>\n            </div>\n        {{/meridian.enabled}}\n    </div>\n    {{/enabled}}\n    {{/time}}\n    \n    {{#toolbox}}\n    {{#enabled}}\n    <div class="toolbox">\n        {{#toolbox.submitButton.enabled}}\n            <div class="pwt-btn-submit">{{submitButtonText}}</div>\n        {{/toolbox.submitButton.enabled}}        \n        {{#toolbox.todayButton.enabled}}\n            <div class="pwt-btn-today">{{todayButtonText}}</div>\n        {{/toolbox.todayButton.enabled}}        \n        {{#toolbox.calendarSwitch.enabled}}\n            <div class="pwt-btn-calendar">{{calendarSwitchText}}</div>\n        {{/toolbox.calendarSwitch.enabled}}\n    </div>\n    {{/enabled}}\n    {{^enabled}}\n        {{#onlyTimePicker}}\n        <div class="toolbox">\n            <div class="pwt-btn-submit">{{submitButtonText}}</div>\n        </div>\n        {{/onlyTimePicker}}\n    {{/enabled}}\n    {{/toolbox}}\n</div>\n'},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=i(11),a=i(12),r=i(13),s=i(6),l=i(3),c=i(7),u=i(8),d=i(10),h=function(){function e(t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.components(t,i)}return n(e,[{key:"components",value:function(e,t){return this.initialUnix=null,this.inputElement=e,this.options=new u(t,this),this.PersianDate=new d(this),this.state=new o(this),this.api=new l(this),this.input=new s(this,e),this.view=new r(this),this.toolbox=new a(this),this.updateInput=function(e){this.input.update(e)},this.state.setViewDateTime("unix",this.input.getOnInitState()),this.state.setSelectedDateTime("unix",this.input.getOnInitState()),this.view.render(),this.navigator=new c(this),this.api}}]),e}();e.exports=h},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t}return n(e,[{key:"show",value:function(){return this.model.view.show(),this.model.options.onShow(this.model),this.model}},{key:"getState",value:function(){return this.model.state}},{key:"hide",value:function(){return this.model.view.hide(),this.model.options.onHide(this.model),this.model}},{key:"toggle",value:function(){return this.model.view.toggle(),this.model.options.onToggle(this.model),this.model}},{key:"destroy",value:function(){this.model&&(this.model.view.destroy(),this.model.options.onDestroy(this.model),delete this.model)}},{key:"setDate",value:function(e){return this.model.state.setSelectedDateTime("unix",e),this.model.state.setViewDateTime("unix",e),this.model.state.setSelectedDateTime("unix",e),this.model.view.render(this.view),this.model.options.onSet(e),this.model}},{key:"options",get:function(){return this.model.options},set:function(e){var t=$.extend(!0,this.model.options,e);this.model.view.destroy(),this.model.components(this.model.inputElement,t)}}]),e}();e.exports=o},function(e,t,i){"use strict";var n=i(0),o={calendarType:"persian",calendar:{persian:{locale:"fa",showHint:!1,leapYearMode:"algorithmic"},gregorian:{locale:"en",showHint:!1}},responsive:!0,inline:!1,initialValue:!0,initialValueType:"gregorian",persianDigit:!0,viewMode:"day",format:"LLLL",formatter:function(e){return this.model.PersianDate.date(e).format(this.format)},altField:!1,altFormat:"unix",altFieldFormatter:function(e){var t=this.altFormat.toLowerCase();return"gregorian"===t||"g"===t?new Date(e):"unix"===t||"u"===t?e:this.model.PersianDate.date(e).format(this.altFormat)},minDate:null,maxDate:null,navigator:{enabled:!0,scroll:{enabled:!0},text:{btnNextText:"<",btnPrevText:">"},onNext:function(e){n.debug(e,"Event: onNext")},onPrev:function(e){n.debug(e,"Event: onPrev")},onSwitch:function(e){n.debug(e,"dayPicker Event: onSwitch")}},toolbox:{enabled:!0,text:{btnToday:""},submitButton:{enabled:n.isMobile,text:{fa:"",en:"submit"},onSubmit:function(e){n.debug(e,"dayPicker Event: onSubmit")}},todayButton:{enabled:!0,text:{fa:"",en:"today"},onToday:function(e){n.debug(e,"dayPicker Event: onToday")}},calendarSwitch:{enabled:!0,format:"MMMM",onSwitch:function(e){n.debug(e,"dayPicker Event: onSwitch")}},onToday:function(e){n.debug(e,"dayPicker Event: onToday")}},onlyTimePicker:!1,onlySelectOnDate:!0,checkDate:function(){return!0},checkMonth:function(){return!0},checkYear:function(){return!0},timePicker:{enabled:!1,step:1,hour:{enabled:!0,step:null},minute:{enabled:!0,step:null},second:{enabled:!0,step:null},meridian:{enabled:!1}},dayPicker:{enabled:!0,titleFormat:"YYYY MMMM",titleFormatter:function(e,t){return this.model.PersianDate.date([e,t]).format(this.model.options.dayPicker.titleFormat)},onSelect:function(e){n.debug(this,"dayPicker Event: onSelect : "+e)}},monthPicker:{enabled:!0,titleFormat:"YYYY",titleFormatter:function(e){return this.model.PersianDate.date(e).format(this.model.options.monthPicker.titleFormat)},onSelect:function(e){n.debug(this,"monthPicker Event: onSelect : "+e)}},yearPicker:{enabled:!0,titleFormat:"YYYY",titleFormatter:function(e){var t=12*parseInt(e/12,10),i=this.model.PersianDate.date([t]),n=this.model.PersianDate.date([t+11]);return i.format(this.model.options.yearPicker.titleFormat)+"-"+n.format(this.model.options.yearPicker.titleFormat)},onSelect:function(e){n.debug(this,"yearPicker Event: onSelect : "+e)}},onSelect:function(e){n.debug(this,"datepicker Event: onSelect : "+e)},onSet:function(e){n.debug(this,"datepicker Event: onSet : "+e)},position:"auto",onShow:function(e){n.debug(e,"Event: onShow ")},onHide:function(e){n.debug(e,"Event: onHide ")},onToggle:function(e){n.debug(e,"Event: onToggle ")},onDestroy:function(e){n.debug(e,"Event: onDestroy ")},autoClose:!1,template:null,observer:!1,inputDelay:800};e.exports=o},function(e,t,i){"use strict";var n,o=i(2);(n=jQuery).fn.persianDatepicker=n.fn.pDatepicker=function(e){var t=Array.prototype.slice.call(arguments),i=this;return this||n.error("Invalid selector"),n(this).each(function(){var a=t.concat([]),r=n(this).data("datepicker"),s=null;r&&"string"==typeof a[0]?(s=a[0],r[s](a[0])):i.pDatePicker=new o(this,e)}),n(this).data("datepicker",i.pDatePicker),i.pDatePicker}},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=i(0),a=i(9),r=function(){function e(t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this._firstUpdate=!0,this.elem=i,this.model.options.observer&&this.observe(),this.addInitialClass(),this.initialUnix=null,0==this.model.options.inline&&this._attachInputElementEvents(),this}return n(e,[{key:"addInitialClass",value:function(){$(this.elem).addClass("pwt-datepicker-input-element")}},{key:"parseInput",value:function(e){var t=new a;if(void 0!==t.parse(e)){var i=this.model.PersianDate.date(t.parse(e)).valueOf();this.model.state.setSelectedDateTime("unix",i),this.model.state.setViewDateTime("unix",i),this.model.view.render()}}},{key:"observe",value:function(){var e=this;$(e.elem).bind("paste",function(t){o.delay(function(){e.parseInput(t.target.value)},60)});var t=void 0,i=e.model.options.inputDelay,n=!1,a=[17,91];$(document).keydown(function(e){$.inArray(e.keyCode,a)>0&&(n=!0)}).keyup(function(e){$.inArray(e.keyCode,a)>0&&(n=!1)}),$(e.elem).bind("keyup",function(o){var r=$(this),s=!1;(8===o.keyCode||o.keyCode<105&&o.keyCode>96||o.keyCode<58&&o.keyCode>47||n&&(86==o.keyCode||$.inArray(o.keyCode,a)>0))&&(s=!0),s&&(clearTimeout(t),t=setTimeout(function(){!function(t){e.parseInput(t.val())}(r)},i))}),$(e.elem).on("keydown",function(){clearTimeout(t)})}},{key:"_attachInputElementEvents",value:function(){var e=this,t=function t(i){$(i.target).is(e.elem)||$(i.target).is(e.model.view.$container)||0!=$(i.target).closest("#"+e.model.view.$container.attr("id")).length||$(i.target).is($(e.elem).children())||(e.model.api.hide(),$("body").unbind("click",t))};$(this.elem).on("focus click",o.debounce(function(i){return e.model.api.show(),!1===e.model.state.ui.isInline&&$("body").unbind("click",t).bind("click",t),o.isMobile&&$(this).blur(),i.stopPropagation(),!1},200)),$(this.elem).on("keydown",o.debounce(function(t){if(9===t.which)return e.model.api.hide(),!1},200))}},{key:"getInputPosition",value:function(){return $(this.elem).offset()}},{key:"getInputSize",value:function(){return{width:$(this.elem).outerWidth(),height:$(this.elem).outerHeight()}}},{key:"_updateAltField",value:function(e){var t=this.model.options.altFieldFormatter(e);$(this.model.options.altField).val(t)}},{key:"_updateInputField",value:function(e){var t=this.model.options.formatter(e);$(this.elem).val()!=t&&$(this.elem).val(t)}},{key:"update",value:function(e){0==this.model.options.initialValue&&this._firstUpdate?this._firstUpdate=!1:(this._updateInputField(e),this._updateAltField(e))}},{key:"getOnInitState",value:function(){var e=null,t=$(this.elem),i=void 0;if((i="INPUT"===t[0].nodeName?t[0].getAttribute("value"):t.data("date"))&&i.match("^([0-1][0-9]|2[0-3]):([0-5][0-9])(?::([0-5][0-9]))?$")){var n=i.split(":"),o=new Date;o.setHours(n[0]),o.setMinutes(n[1]),n[2]?o.setSeconds(n[2]):o.setSeconds(0),this.initialUnix=o.valueOf()}else{if("persian"===this.model.options.initialValueType&&i){var r=new a,s=new persianDate(r.parse(i)).valueOf();e=new Date(s).valueOf()}else"unix"===this.model.options.initialValueType&&i?e=parseInt(i):i&&(e=new Date(i).valueOf());this.initialUnix=e&&"undefined"!=e?e:(new Date).valueOf()}return this.initialUnix}}]),e}();e.exports=r},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=i(14),a=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.liveAttach(),this._attachEvents(),this}return n(e,[{key:"liveAttach",value:function(){if(this.model.options.navigator.scroll.enabled){var e=this,t=$("#"+e.model.view.id+" .datepicker-grid-view")[0];o(t).wheel(function(t,i){i>0?e.model.state.navigate("next"):e.model.state.navigate("prev"),e.model.view.render(),t.preventDefault()}),this.model.options.timePicker.enabled&&$("#"+e.model.view.id+" .time-segment").each(function(){o(this).wheel(function(t,i){var n=$(t.target),o=n.data("time-key")?n.data("time-key"):n.parents("[data-time-key]").data("time-key");o&&(i>0?e.timeUp(o):e.timeDown(o)),e.model.view.render(),t.preventDefault()})})}}},{key:"timeUp",value:function(e){if(null!=this.model.options.timePicker[e]){var t=void 0,i=void 0,n=this;"meridian"==e?(t=12,i="PM"==this.model.state.view.meridian?this.model.PersianDate.date(this.model.state.selected.unixDate).add("hour",t).valueOf():this.model.PersianDate.date(this.model.state.selected.unixDate).subtract("hour",t).valueOf(),this.model.state.meridianToggle()):(t=this.model.options.timePicker[e].step,i=this.model.PersianDate.date(this.model.state.selected.unixDate).add(e,t).valueOf()),this.model.state.setViewDateTime("unix",i),this.model.state.setSelectedDateTime("unix",i),this.model.view.renderTimePartial(),clearTimeout(this.scrollDelayTimeDown),this.scrollDelayTimeUp=setTimeout(function(){n.model.view.markSelectedDay()},300)}}},{key:"timeDown",value:function(e){if(null!=this.model.options.timePicker[e]){var t=void 0,i=void 0,n=this;"meridian"==e?(t=12,i="AM"==this.model.state.view.meridian?this.model.PersianDate.date(this.model.state.selected.unixDate).add("hour",t).valueOf():this.model.PersianDate.date(this.model.state.selected.unixDate).subtract("hour",t).valueOf(),this.model.state.meridianToggle()):(t=this.model.options.timePicker[e].step,i=this.model.PersianDate.date(this.model.state.selected.unixDate).subtract(e,t).valueOf()),this.model.state.setViewDateTime("unix",i),this.model.state.setSelectedDateTime("unix",i),this.model.view.renderTimePartial(),clearTimeout(this.scrollDelayTimeDown),this.scrollDelayTimeDown=setTimeout(function(){n.model.view.markSelectedDay()},300)}}},{key:"_attachEvents",value:function(){var e=this;this.model.options.navigator.enabled&&$(document).on("click","#"+e.model.view.id+" .pwt-btn",function(){$(this).is(".pwt-btn-next")?(e.model.state.navigate("next"),e.model.view.render(),e.model.options.navigator.onNext(e.model)):$(this).is(".pwt-btn-switch")?(e.model.state.switchViewMode(),e.model.view.render(),e.model.options.navigator.onSwitch(e.model)):$(this).is(".pwt-btn-prev")&&(e.model.state.navigate("prev"),e.model.view.render(),e.model.options.navigator.onPrev(e.model))}),this.model.options.timePicker.enabled&&($(document).on("click","#"+e.model.view.id+" .up-btn",function(){var t=$(this).data("time-key");e.timeUp(t),e.model.options.onSelect(e.model.state.selected.unixDate)}),$(document).on("click","#"+e.model.view.id+" .down-btn",function(){var t=$(this).data("time-key");e.timeDown(t),e.model.options.onSelect(e.model.state.selected.unixDate)})),this.model.options.dayPicker.enabled&&$(document).on("click","#"+e.model.view.id+" .datepicker-day-view td:not(.disabled)",function(){var t=$(this).data("unix"),i=void 0;e.model.state.setSelectedDateTime("unix",t),i=e.model.state.selected.month!==e.model.state.view.month,e.model.state.setViewDateTime("unix",e.model.state.selected.unixDate),e.model.options.autoClose&&(e.model.view.hide(),e.model.options.onHide(e)),i?e.model.view.render():e.model.view.markSelectedDay(),e.model.options.dayPicker.onSelect(t),e.model.options.onSelect(t)}),this.model.options.monthPicker.enabled&&$(document).on("click","#"+e.model.view.id+" .datepicker-month-view .month-item:not(.month-item-disable)",function(){var t=$(this).data("month");e.model.state.switchViewModeTo("day"),e.model.options.onlySelectOnDate||(e.model.state.setSelectedDateTime("month",t),e.model.options.autoClose&&(e.model.view.hide(),e.model.options.onHide(e))),e.model.state.setViewDateTime("month",t),e.model.view.render(),e.model.options.monthPicker.onSelect(t),e.model.options.onSelect(e.model.state.selected.unixDate)}),this.model.options.yearPicker.enabled&&$(document).on("click","#"+e.model.view.id+" .datepicker-year-view .year-item:not(.year-item-disable)",function(){var t=$(this).data("year");e.model.state.switchViewModeTo("month"),e.model.options.onlySelectOnDate||(e.model.state.setSelectedDateTime("year",t),e.model.options.autoClose&&(e.model.view.hide(),e.model.options.onHide(e))),e.model.state.setViewDateTime("year",t),e.model.view.render(),e.model.options.yearPicker.onSelect(t),e.model.options.onSelect(e.model.state.selected.unixDate)})}}]),e}();e.exports=a},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=i(4),a=i(1),r=function(){function e(t,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=i,this._compatibility($.extend(!0,this,o,t))}return n(e,[{key:"_compatibility",value:function(e){e.inline&&(e.toolbox.submitButton.enabled=!1),e.template||(e.template=a),persianDate.toCalendar(e.calendarType),persianDate.toLocale(e.calendar[e.calendarType].locale),e.onlyTimePicker&&(e.dayPicker.enabled=!1,e.monthPicker.enabled=!1,e.yearPicker.enabled=!1,e.navigator.enabled=!1,e.toolbox.enabled=!1,e.timePicker.enabled=!0),null===e.timePicker.hour.step&&(e.timePicker.hour.step=e.timePicker.step),null===e.timePicker.minute.step&&(e.timePicker.minute.step=e.timePicker.step),null===e.timePicker.second.step&&(e.timePicker.second.step=e.timePicker.step),!1===e.dayPicker.enabled&&(e.onlySelectOnDate=!1),e._viewModeList=[],e.dayPicker.enabled&&e._viewModeList.push("day"),e.monthPicker.enabled&&e._viewModeList.push("month"),e.yearPicker.enabled&&e._viewModeList.push("year")}}]),e}();e.exports=r},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pattern={iso:/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\.[0-9]+)?(Z)?$/g,jalali:/^[1-4]\d{3}(\/|-|\.)((0?[1-6](\/|-|\.)((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))(\/|-|\.)(30|([1-2][0-9])|(0?[1-9]))))$/g}}return n(e,[{key:"parse",value:function(e){var t=new RegExp(this.pattern.iso),i=new RegExp(this.pattern.jalali);return String.prototype.toEnglishDigits=function(){var e="".charCodeAt(0);return this.replace(/[-]/g,function(t){return t.charCodeAt(0)-e})},e=e.toEnglishDigits(),i.test(e)?e.split(/\/|-|\,|\./).map(Number):t.test(e)?e.split(/\/|-|\,|\:|\T|\Z/g).map(Number):void 0}}]),e}();e.exports=o},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.model.options.calendar_=this.model.options.calendarType,this.model.options.locale_=this.model.options.calendar[this.model.options.calendarType].locale,this}return n(e,[{key:"date",value:function(e){window.inspdCount||0===window.inspdCount?window.inspdCount++:window.inspdCount=0;var t=void 0;return t=persianDate.toCalendar(this.model.options.calendar_),this.model.options.calendar[this.model.options.calendarType].leapYearMode&&t.toLeapYearMode(this.model.options.calendar[this.model.options.calendarType].leapYearMode),new t(e).toLocale(this.model.options.locale_)}}]),e}();e.exports=o},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this.filetredDate=this.model.options.minDate||this.model.options.maxDate,this.viewModeList=this.model.options._viewModeList,this.viewMode=this.viewModeList.indexOf(t.options.viewMode)>0?t.options.viewMode:this.viewModeList[0],this.viewModeIndex=this.viewModeList.indexOf(t.options.viewMode)>0?this.viewModeList.indexOf(t.options.viewMode):0,this.filterDate={start:{year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0},end:{year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0}},this.view={year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0,dateObject:null,meridian:"AM"},this.selected={year:0,month:0,date:0,hour:0,hour12:0,minute:0,second:0,unixDate:0,dateObject:null},this.ui={isOpen:!1,isInline:this.model.options.inline},this._setFilterDate(this.model.options.minDate,this.model.options.maxDate),this}return n(e,[{key:"_setFilterDate",value:function(e,t){e||(e=-2e15),t||(t=2e15);var i=this.model.PersianDate.date(e);this.filterDate.start.unixDate=e,this.filterDate.start.hour=i.hour(),this.filterDate.start.minute=i.minute(),this.filterDate.start.second=i.second(),this.filterDate.start.month=i.month(),this.filterDate.start.date=i.date(),this.filterDate.start.year=i.year();var n=this.model.PersianDate.date(t);this.filterDate.end.unixDate=t,this.filterDate.end.hour=n.hour(),this.filterDate.end.minute=n.minute(),this.filterDate.end.second=n.second(),this.filterDate.end.month=n.month(),this.filterDate.end.date=n.date(),this.filterDate.end.year=n.year()}},{key:"navigate",value:function(e){if("next"==e){if("year"==this.viewMode&&this.setViewDateTime("year",this.view.year+12),"month"==this.viewMode){var t=this.view.year+1;0===t&&(t=1),this.setViewDateTime("year",t)}if("day"==this.viewMode){var i=this.view.year+1;0===i&&(i=1),this.view.month+1==13?(this.setViewDateTime("year",i),this.setViewDateTime("month",1)):this.setViewDateTime("month",this.view.month+1)}}else{if("year"==this.viewMode&&this.setViewDateTime("year",this.view.year-12),"month"==this.viewMode){var n=this.view.year-1;0===n&&(n=-1),this.setViewDateTime("year",n)}if("day"==this.viewMode)if(this.view.month-1<=0){var o=this.view.year-1;0===o&&(o=-1),this.setViewDateTime("year",o),this.setViewDateTime("month",12)}else this.setViewDateTime("month",this.view.month-1)}}},{key:"switchViewMode",value:function(){return this.viewModeIndex=this.viewModeIndex+1>=this.viewModeList.length?0:this.viewModeIndex+1,this.viewMode=this.viewModeList[this.viewModeIndex]?this.viewModeList[this.viewModeIndex]:this.viewModeList[0],this._setViewDateTimeUnix(),this}},{key:"switchViewModeTo",value:function(e){this.viewModeList.indexOf(e)>=0&&(this.viewMode=e,this.viewModeIndex=this.viewModeList.indexOf(e))}},{key:"setSelectedDateTime",value:function(e,t){switch(e){case"unix":this.selected.unixDate=t;var i=this.model.PersianDate.date(t);this.selected.year=i.year(),this.selected.month=i.month(),this.selected.date=i.date(),this.selected.hour=i.hour(),this.selected.hour12=i.format("hh"),this.selected.minute=i.minute(),this.selected.second=i.second();break;case"year":this.selected.year=t;break;case"month":this.selected.month=t;break;case"date":this.selected.date=t;break;case"hour":this.selected.hour=t;break;case"minute":this.selected.minute=t;break;case"second":this.selected.second=t}return this._updateSelectedUnix(),this}},{key:"_updateSelectedUnix",value:function(){return this.selected.dateObject=this.model.PersianDate.date([this.selected.year,this.selected.month,this.selected.date,this.view.hour,this.view.minute,this.view.second]),this.selected.unixDate=this.selected.dateObject.valueOf(),this.model.updateInput(this.selected.unixDate),this}},{key:"_setViewDateTimeUnix",value:function(){return this.view.dateObject=this.model.PersianDate.date([this.view.year,this.view.month,this.view.date,this.view.hour,this.view.minute,this.view.second]),this.view.year=this.view.dateObject.year(),this.view.month=this.view.dateObject.month(),this.view.date=this.view.dateObject.date(),this.view.hour=this.view.dateObject.hour(),this.view.hour12=this.view.dateObject.format("hh"),this.view.minute=this.view.dateObject.minute(),this.view.second=this.view.dateObject.second(),this.view.unixDate=this.view.dateObject.valueOf(),this}},{key:"setViewDateTime",value:function(e,t){switch(e){case"unix":var i=this.model.PersianDate.date(t);this.view.year=i.year(),this.view.month=i.month(),this.view.date=i.date(),this.view.hour=i.hour(),this.view.minute=i.minute(),this.view.second=i.second();break;case"year":this.view.year=t;break;case"month":this.view.month=t;break;case"date":this.view.date=t;break;case"hour":this.view.hour=t;break;case"minute":this.view.minute=t;break;case"second":this.view.second=t}return this._setViewDateTimeUnix(),this}},{key:"meridianToggle",value:function(){"AM"===this.view.meridian?this.view.meridian="PM":"PM"===this.view.meridian&&(this.view.meridian="AM")}}]),e}();e.exports=o},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t,this._attachEvents(),this}return n(e,[{key:"_toggleCalendartype",value:function(){"persian"==this.model.options.calendar_?(this.model.options.calendar_="gregorian",this.model.options.locale_=this.model.options.calendar.gregorian.locale):(this.model.options.calendar_="persian",this.model.options.locale_=this.model.options.calendar.persian.locale)}},{key:"_attachEvents",value:function(){var e=this;$(document).on("click","#"+e.model.view.id+" .pwt-btn-today",function(){e.model.state.setSelectedDateTime("unix",(new Date).valueOf()),e.model.state.setViewDateTime("unix",(new Date).valueOf()),e.model.view.reRender(),e.model.options.toolbox.onToday(e.model),e.model.options.toolbox.todayButton.onToday(e.model)}),$(document).on("click","#"+e.model.view.id+" .pwt-btn-calendar",function(){e._toggleCalendartype(),e.model.state.setSelectedDateTime("unix",e.model.state.selected.unixDate),e.model.state.setViewDateTime("unix",e.model.state.view.unixDate),e.model.view.render(),e.model.options.toolbox.calendarSwitch.onSwitch(e.model)}),$(document).on("click","#"+e.model.view.id+" .pwt-btn-submit",function(){e.model.view.hide(),e.model.options.toolbox.submitButton.onSubmit(e.model),e.model.options.onHide(this)})}}]),e}();e.exports=o},function(e,t,i){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=i(1),r=i(0),s=i(15),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.yearsViewCount=12,this.model=t,this.rendered=null,this.$container=null,this.id="persianDateInstance-"+parseInt(1e3*Math.random(100));return this.model.state.ui.isInline?this.$container=$('<div  id="'+this.id+'" class="datepicker-container-inline"></div>').appendTo(this.model.inputElement):(this.$container=$('<div  id="'+this.id+'" class="datepicker-container"></div>').appendTo("body"),this.hide(),this.setPickerBoxPosition(),this.addCompatibilityClass()),this}return o(e,[{key:"addCompatibilityClass",value:function(){r.isMobile&&this.model.options.responsive&&this.$container.addClass("pwt-mobile-view")}},{key:"destroy",value:function(){this.$container.remove()}},{key:"setPickerBoxPosition",value:function(){var e=this.model.input.getInputPosition(),t=this.model.input.getInputSize();if(r.isMobile&&this.model.options.responsive)return!1;"auto"===this.model.options.position?this.$container.css({left:e.left+"px",top:t.height+e.top+"px"}):this.$container.css({left:this.model.options.position[1]+e.left+"px",top:this.model.options.position[0]+e.top+"px"})}},{key:"show",value:function(){this.$container.removeClass("pwt-hide"),this.setPickerBoxPosition()}},{key:"hide",value:function(){this.$container.addClass("pwt-hide")}},{key:"toggle",value:function(){this.$container.toggleClass("pwt-hide")}},{key:"_getNavSwitchText",value:function(e){var t=void 0;return"day"==this.model.state.viewMode?t=this.model.options.dayPicker.titleFormatter.call(this,e.year,e.month):"month"==this.model.state.viewMode?t=this.model.options.monthPicker.titleFormatter.call(this,e.dateObject.valueOf()):"year"==this.model.state.viewMode&&(t=this.model.options.yearPicker.titleFormatter.call(this,e.year)),t}},{key:"checkYearAccess",value:function(e){if(this.model.state.filetredDate){var t=this.model.state.filterDate.start.year,i=this.model.state.filterDate.end.year;if(t&&e<t)return!1;if(i&&e>i)return!1}return this.model.options.checkYear(e)}},{key:"_getYearViewModel",value:function(e){var t=this,i=this.model.options.yearPicker.enabled;if(!i)return{enabled:!1};var n=[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(Array(this.yearsViewCount).keys())).map(function(i){return i+parseInt(e.year/t.yearsViewCount)*t.yearsViewCount}),o=[],a=this.model.PersianDate.date(),r=!0,s=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value;a.year([d]),o.push({title:a.format("YYYY"),enabled:this.checkYearAccess(d),dataYear:d,selected:this.model.state.selected.year==d})}}catch(e){s=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(s)throw l}}return{enabled:i,viewMode:"year"==this.model.state.viewMode,list:o}}},{key:"checkMonthAccess",value:function(e){e+=1;var t=this.model.state.view.year;if(this.model.state.filetredDate){var i=this.model.state.filterDate.start.month,n=this.model.state.filterDate.end.month,o=this.model.state.filterDate.start.year,a=this.model.state.filterDate.end.year;if(i&&n&&(t==a&&e>n||t>a)||t==o&&e<i||t<o)return!1;if(n&&(t==a&&e>n||t>a))return!1;if(i&&(t==o&&e<i||t<o))return!1}return this.model.options.checkMonth(e,t)}},{key:"_getMonthViewModel",value:function(){var e=this.model.options.monthPicker.enabled;if(!e)return{enabled:!1};var t=[],i=!0,o=!1,a=void 0;try{for(var r,s=this.model.PersianDate.date().rangeName().months.entries()[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var l=n(r.value,2),c=l[0],u=l[1];t.push({title:u,enabled:this.checkMonthAccess(c),year:this.model.state.view.year,dataMonth:c+1,selected:this.model.state.selected.year==this.model.state.view.year&&this.model.state.selected.month==c+1})}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return{enabled:e,viewMode:"month"==this.model.state.viewMode,list:t}}},{key:"checkDayAccess",value:function(e){if(this.minDate=this.model.options.minDate,this.maxDate=this.model.options.maxDate,this.model.state.filetredDate)if(this.minDate&&this.maxDate){if(this.minDate=this.model.PersianDate.date(this.minDate).startOf("day").valueOf(),this.maxDate=this.model.PersianDate.date(this.maxDate).endOf("day").valueOf(),!(e>=this.minDate&&e<=this.maxDate))return!1}else if(this.minDate){if(this.minDate=this.model.PersianDate.date(this.minDate).startOf("day").valueOf(),e<=this.minDate)return!1}else if(this.maxDate&&(this.maxDate=this.model.PersianDate.date(this.maxDate).endOf("day").valueOf(),e>=this.maxDate))return!1;return this.model.options.checkDate(e)}},{key:"_getDayViewModel",value:function(){if("day"!=this.model.state.viewMode)return[];var e=this.model.options.dayPicker.enabled;if(!e)return{enabled:!1};var t=this.model.state.view.month,i=this.model.state.view.year,o=this.model.PersianDate.date(),a=o.daysInMonth(i,t),r=o.getFirstWeekDayOfMonth(i,t)-1,s=[],l=0,c=0,u=this._getAnotherCalendar(),d=this.model.PersianDate.date(),h=!0,p=!1,f=void 0;try{for(var m,v=[["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"]].entries()[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var g=n(m.value,2),b=g[0],y=g[1];s[b]=[];var w=!0,k=!1,x=void 0;try{for(var C,_=y.entries()[Symbol.iterator]();!(w=(C=_.next()).done);w=!0){var S=n(C.value,1)[0],T=void 0,E=void 0;0===b&&S<r?(T=d.unix(this.model.state.view.dateObject.startOf("month").valueOf()/1e3).subtract("days",r-S),E=!0):0===b&&S>=r||b<=5&&l<a?(l+=1,T=d.year(this.model.state.view.year).month(this.model.state.view.month).date(l),E=!1):(c+=1,T=d.unix(this.model.state.view.dateObject.endOf("month").valueOf()/1e3).add("days",c),E=!0),s[b].push({title:T.format("D"),alterCalTitle:new persianDate(T.valueOf()).toCalendar(u[0]).toLocale(u[1]).format("D"),dataDate:[T.year(),T.month(),T.date()].join(","),dataUnix:T.valueOf(),otherMonth:E,enabled:this.checkDayAccess(T.valueOf())})}}catch(e){k=!0,x=e}finally{try{!w&&_.return&&_.return()}finally{if(k)throw x}}}}catch(e){p=!0,f=e}finally{try{!h&&v.return&&v.return()}finally{if(p)throw f}}return{enabled:e,viewMode:"day"==this.model.state.viewMode,list:s}}},{key:"markSelectedDay",value:function(){var e=this.model.state.selected;this.$container.find(".table-days td").each(function(){$(this).data("date")==[e.year,e.month,e.date].join(",")?$(this).addClass("selected"):$(this).removeClass("selected")})}},{key:"markToday",value:function(){var e=new persianDate;this.$container.find(".table-days td").each(function(){$(this).data("date")==[e.year(),e.month(),e.date()].join(",")?$(this).addClass("today"):$(this).removeClass("today")})}},{key:"_getTimeViewModel",value:function(){var e=this.model.options.timePicker.enabled;if(!e)return{enabled:!1};return{enabled:e,hour:{title:this.model.options.timePicker.meridian.enabled?this.model.state.view.dateObject.format("hh"):this.model.state.view.dateObject.format("HH"),enabled:this.model.options.timePicker.hour.enabled},minute:{title:this.model.state.view.dateObject.format("mm"),enabled:this.model.options.timePicker.minute.enabled},second:{title:this.model.state.view.dateObject.format("ss"),enabled:this.model.options.timePicker.second.enabled},meridian:{title:this.model.state.view.dateObject.format("a"),enabled:this.model.options.timePicker.meridian.enabled}}}},{key:"_getWeekViewModel",value:function(){return{enabled:!0,list:this.model.PersianDate.date().rangeName().weekdaysMin}}},{key:"getCssClass",value:function(){return[this.model.state.ui.isInline?"datepicker-plot-area-inline-view":"",this.model.options.timePicker.meridian.enabled?"":"datepicker-state-no-meridian",this.model.options.onlyTimePicker?"datepicker-state-only-time":"",this.model.options.timePicker.second.enabled?"":"datepicker-state-no-second","gregorian"==this.model.options.calendar_?"datepicker-gregorian":"datepicker-persian"].join(" ")}},{key:"getViewModel",value:function(e){var t=this._getAnotherCalendar();return{plotId:"",navigator:{enabled:this.model.options.navigator.enabled,switch:{enabled:!0,text:this._getNavSwitchText(e)},text:this.model.options.navigator.text},selected:this.model.state.selected,time:this._getTimeViewModel(e),days:this._getDayViewModel(e),weekdays:this._getWeekViewModel(e),month:this._getMonthViewModel(e),year:this._getYearViewModel(e),toolbox:this.model.options.toolbox,cssClass:this.getCssClass(),onlyTimePicker:this.model.options.onlyTimePicker,altCalendarShowHint:this.model.options.calendar[t[0]].showHint,calendarSwitchText:this.model.state.view.dateObject.toCalendar(t[0]).toLocale(t[1]).format(this.model.options.toolbox.calendarSwitch.format),todayButtonText:this._getButtonText().todayButtontext,submitButtonText:this._getButtonText().submitButtonText}}},{key:"_getButtonText",value:function(){var e={};return"fa"==this.model.options.locale_?(e.todayButtontext=this.model.options.toolbox.todayButton.text.fa,e.submitButtonText=this.model.options.toolbox.submitButton.text.fa):"en"==this.model.options.locale_&&(e.todayButtontext=this.model.options.toolbox.todayButton.text.en,e.submitButtonText=this.model.options.toolbox.submitButton.text.en),e}},{key:"_getAnotherCalendar",value:function(){var e=void 0,t=void 0;return"persian"==this.model.options.calendar_?(e="gregorian",t=this.model.options.calendar.gregorian.locale):(e="persian",t=this.model.options.calendar.persian.locale),[e,t]}},{key:"renderTimePartial",value:function(){var e=this._getTimeViewModel(this.model.state.view);this.$container.find('[data-time-key="hour"] input').val(e.hour.title),this.$container.find('[data-time-key="minute"] input').val(e.minute.title),this.$container.find('[data-time-key="second"] input').val(e.second.title),this.$container.find('[data-time-key="meridian"] input').val(e.meridian.title)}},{key:"render",value:function(e){e||(e=this.model.state.view),r.debug(this,"render"),s.parse(a),this.rendered=$(s.render(this.model.options.template,this.getViewModel(e))),this.$container.empty().append(this.rendered),this.markSelectedDay(),this.markToday(),this.afterRender()}},{key:"reRender",value:function(){var e=this.model.state.view;this.render(e)}},{key:"afterRender",value:function(){this.model.navigator&&this.model.navigator.liveAttach()}}]),e}();e.exports=l},function(e,t,i){!function(t,i){"use strict";var n,o,a=function(e){return new a.Instance(e)};a.SUPPORT="wheel",a.ADD_EVENT="addEventListener",a.REMOVE_EVENT="removeEventListener",a.PREFIX="",a.READY=!1,a.Instance=function(e){return a.READY||(a.normalise.browser(),a.READY=!0),this.element=e,this.handlers=[],this},a.Instance.prototype={wheel:function(e,t){return a.event.add(this,a.SUPPORT,e,t),"DOMMouseScroll"===a.SUPPORT&&a.event.add(this,"MozMousePixelScroll",e,t),this},unwheel:function(e,t){return void 0===e&&(e=this.handlers.slice(-1)[0])&&(e=e.original),a.event.remove(this,a.SUPPORT,e,t),"DOMMouseScroll"===a.SUPPORT&&a.event.remove(this,"MozMousePixelScroll",e,t),this}},a.event={add:function(e,i,n,o){var r=n;n=function(e){e||(e=t.event);var i=a.normalise.event(e),n=a.normalise.delta(e);return r(i,n[0],n[1],n[2])},e.element[a.ADD_EVENT](a.PREFIX+i,n,o||!1),e.handlers.push({original:r,normalised:n})},remove:function(e,t,i,n){for(var o,r=i,s={},l=0,c=e.handlers.length;l<c;++l)s[e.handlers[l].original]=e.handlers[l];for(var u in i=(o=s[r]).normalised,e.element[a.REMOVE_EVENT](a.PREFIX+t,i,n||!1),e.handlers)if(e.handlers[u]==o){e.handlers.splice(u,1);break}}},a.normalise={browser:function(){"onwheel"in i||i.documentMode>=9||(a.SUPPORT=void 0!==i.onmousewheel?"mousewheel":"DOMMouseScroll"),t.addEventListener||(a.ADD_EVENT="attachEvent",a.REMOVE_EVENT="detachEvent",a.PREFIX="on")},event:function(e){var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===e.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){e.stopPropagation?e.stopPropagation():e.cancelBubble=!1}};return e.wheelDelta&&(t.deltaY=-.025*e.wheelDelta),e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX),e.detail&&(t.deltaY=e.detail),t},delta:function(e){var t,i,a,r=0,s=0,l=0;return e.deltaY&&(r=l=-1*e.deltaY),e.deltaX&&(r=-1*(s=e.deltaX)),e.wheelDelta&&(r=e.wheelDelta),e.wheelDeltaY&&(l=e.wheelDeltaY),e.wheelDeltaX&&(s=-1*e.wheelDeltaX),e.detail&&(r=-1*e.detail),0===r?[0,0,0]:(t=Math.abs(r),(!n||t<n)&&(n=t),i=Math.max(Math.abs(l),Math.abs(s)),(!o||i<o)&&(o=i),a=r>0?"floor":"ceil",[r=Math[a](r/n),s=Math[a](s/o),l=Math[a](l/o)])}},"function"==typeof t.define&&t.define.amd?t.define("hamster",[],function(){return a}):e.exports=a}(window,window.document)},function(e,t,i){var n,o,a,r;r=function(e){var t=Object.prototype.toString,i=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(e){return"function"==typeof e}function o(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var r=RegExp.prototype.test,s=/\S/;function l(e){return!function(e,t){return r.call(e,t)}(s,e)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},u=/\s*/,d=/\s+/,h=/\s*=/,p=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function m(e){this.string=e,this.tail=e,this.pos=0}function v(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function g(){this.cache={}}m.prototype.eos=function(){return""===this.tail},m.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},m.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},v.prototype.push=function(e){return new v(e,this)},v.prototype.lookup=function(e){var t,i,o,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var s,l,c,u=this,d=!1;u;){if(e.indexOf(".")>0)for(s=u.view,l=e.split("."),c=0;null!=s&&c<l.length;)c===l.length-1&&(d=a(s,l[c])||(i=s,o=l[c],null!=i&&"object"!=typeof i&&i.hasOwnProperty&&i.hasOwnProperty(o))),s=s[l[c++]];else s=u.view[e],d=a(u.view,e);if(d){t=s;break}u=u.parent}r[e]=t}return n(t)&&(t=t.call(this.view)),t},g.prototype.clearCache=function(){this.cache={}},g.prototype.parse=function(t,n){var a=this.cache,r=t+":"+(n||e.tags).join(":"),s=a[r];return null==s&&(s=a[r]=function(t,n){if(!t)return[];var a,r,s,c=[],v=[],g=[],b=!1,y=!1;function w(){if(b&&!y)for(;g.length;)delete v[g.pop()];else g=[];b=!1,y=!1}function k(e){if("string"==typeof e&&(e=e.split(d,2)),!i(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(o(e[0])+"\\s*"),r=new RegExp("\\s*"+o(e[1])),s=new RegExp("\\s*"+o("}"+e[1]))}k(n||e.tags);for(var x,C,_,S,T,E,A=new m(t);!A.eos();){if(x=A.pos,_=A.scanUntil(a))for(var D=0,F=_.length;D<F;++D)l(S=_.charAt(D))?g.push(v.length):y=!0,v.push(["text",S,x,x+1]),x+=1,"\n"===S&&w();if(!A.scan(a))break;if(b=!0,C=A.scan(f)||"name",A.scan(u),"="===C?(_=A.scanUntil(h),A.scan(h),A.scanUntil(r)):"{"===C?(_=A.scanUntil(s),A.scan(p),A.scanUntil(r),C="&"):_=A.scanUntil(r),!A.scan(r))throw new Error("Unclosed tag at "+A.pos);if(T=[C,_,x,A.pos],v.push(T),"#"===C||"^"===C)c.push(T);else if("/"===C){if(!(E=c.pop()))throw new Error('Unopened section "'+_+'" at '+x);if(E[1]!==_)throw new Error('Unclosed section "'+E[1]+'" at '+x)}else"name"===C||"{"===C||"&"===C?y=!0:"="===C&&k(_)}if(E=c.pop())throw new Error('Unclosed section "'+E[1]+'" at '+A.pos);return function(e){for(var t,i=[],n=i,o=[],a=0,r=e.length;a<r;++a)switch((t=e[a])[0]){case"#":case"^":n.push(t),o.push(t),n=t[4]=[];break;case"/":o.pop()[5]=t[2],n=o.length>0?o[o.length-1][4]:i;break;default:n.push(t)}return i}(function(e){for(var t,i,n=[],o=0,a=e.length;o<a;++o)(t=e[o])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(n.push(t),i=t));return n}(v))}(t,n)),s},g.prototype.render=function(e,t,i,n){var o=this.parse(e,n),a=t instanceof v?t:new v(t);return this.renderTokens(o,a,i,e,n)},g.prototype.renderTokens=function(e,t,i,n,o){for(var a,r,s,l="",c=0,u=e.length;c<u;++c)s=void 0,"#"===(r=(a=e[c])[0])?s=this.renderSection(a,t,i,n):"^"===r?s=this.renderInverted(a,t,i,n):">"===r?s=this.renderPartial(a,t,i,o):"&"===r?s=this.unescapedValue(a,t):"name"===r?s=this.escapedValue(a,t):"text"===r&&(s=this.rawValue(a)),void 0!==s&&(l+=s);return l},g.prototype.renderSection=function(e,t,o,a){var r=this,s="",l=t.lookup(e[1]);if(l){if(i(l))for(var c=0,u=l.length;c<u;++c)s+=this.renderTokens(e[4],t.push(l[c]),o,a);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],t.push(l),o,a);else if(n(l)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(t.view,a.slice(e[3],e[5]),function(e){return r.render(e,t,o)}))&&(s+=l)}else s+=this.renderTokens(e[4],t,o,a);return s}},g.prototype.renderInverted=function(e,t,n,o){var a=t.lookup(e[1]);if(!a||i(a)&&0===a.length)return this.renderTokens(e[4],t,n,o)},g.prototype.renderPartial=function(e,t,i,o){if(i){var a=n(i)?i(e[1]):i[e[1]];return null!=a?this.renderTokens(this.parse(a,o),t,i,a):void 0}},g.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},g.prototype.escapedValue=function(t,i){var n=i.lookup(t[1]);if(null!=n)return e.escape(n)},g.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="3.0.1",e.tags=["{{","}}"];var b=new g;return e.clearCache=function(){return b.clearCache()},e.parse=function(e,t){return b.parse(e,t)},e.render=function(e,t,n,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(i(a=e)?"array":typeof a)+'" was given as the first argument for mustache#render(template, view, partials)');var a;return b.render(e,t,n,o)},e.to_html=function(t,i,o,a){var r=e.render(t,i,o);if(!n(a))return r;a(r)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return c[e]})},e.Scanner=m,e.Context=v,e.Writer=g,e},"object"==typeof t&&t&&"string"!=typeof t.nodeName?r(t):(o=[t],void 0===(a="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=a))}])}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t=function(){function t(e,t,i,n){this.markup=e,this.children=t,this.options=i,this.callback=n}return t.prototype.render=function(t){var i=e(this.markup);if(this.options&&this.options.contents&&i.html(this.options.contents),this.options&&this.options.className&&i.addClass(this.options.className),this.options&&this.options.data&&e.each(this.options.data,function(e,t){i.attr("data-"+e,t)}),this.options&&this.options.click&&i.on("click",this.options.click),this.children){var n=i.find(".note-children-container");this.children.forEach(function(e){e.render(n.length?n:i)})}return this.callback&&this.callback(i,this.options),this.options&&this.options.callback&&this.options.callback(i),t&&t.append(i),i},t}(),i=function(i,n){return function(){var o="object"==typeof arguments[1]?arguments[1]:arguments[0],a=e.isArray(arguments[0])?arguments[0]:[];return o&&o.children&&(a=o.children),new t(i,a,o,n)}},n=i('<div class="note-editor note-frame panel panel-default"/>'),o=i('<div class="note-toolbar panel-heading" role="toolbar"></div></div>'),a=i('<div class="note-editing-area"/>'),r=i('<textarea class="note-codable" role="textbox" aria-multiline="true"/>'),s=i('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'),l=i(['<output class="note-status-output" aria-live="polite"/>','<div class="note-statusbar" role="status">','  <div class="note-resizebar" role="seperator" aria-orientation="horizontal" aria-label="Resize">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),c=i('<div class="note-editor"/>'),u=i(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>','<output class="note-status-output" aria-live="polite"/>'].join("")),d=i('<div class="note-btn-group btn-group">'),h=i('<ul class="dropdown-menu" role="list">',function(t,i){var n=e.isArray(i.items)?i.items.map(function(e){var t="string"==typeof e?e:e.value||"",n=i.template?i.template(e):e,o="object"==typeof e?e.option:void 0;return'<li role="listitem" aria-label="'+e+'"><a href="#" data-value="'+t+'"'+(void 0!==o?' data-option="'+o+'"':"")+">"+n+"</a></li>"}).join(""):i.items;t.html(n).attr({"aria-label":i.title})}),p=i('<ul class="dropdown-menu note-check" role="list">',function(t,i){var n=e.isArray(i.items)?i.items.map(function(e){var t="string"==typeof e?e:e.value||"",n=i.template?i.template(e):e;return'<li role="listitem" aria-label="'+e+'"><a href="#" data-value="'+t+'">'+b(i.checkClassName)+" "+n+"</a></li>"}).join(""):i.items;t.html(n).attr({"aria-label":i.title})}),f=i('<div class="note-color-palette"/>',function(e,t){for(var i=[],n=0,o=t.colors.length;n<o;n++){for(var a=t.eventName,r=t.colors[n],s=t.colorsName[n],l=[],c=0,u=r.length;c<u;c++){var d=r[c],h=s[c];l.push(['<button type="button" class="note-color-btn"','style="background-color:',d,'" ','data-event="',a,'" ','data-value="',d,'" ','title="',h,'" ','aria-label="',h,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}i.push('<div class="note-color-row">'+l.join("")+"</div>")}e.html(i.join("")),t.tooltip&&e.find(".note-color-btn").tooltip({container:t.container,trigger:"hover",placement:"bottom"})}),m=i('<div class="modal" aria-hidden="false" tabindex="-1" role="dialog"/>',function(e,t){t.fade&&e.addClass("fade"),e.attr({"aria-label":t.title}),e.html(['<div class="modal-dialog">','  <div class="modal-content">',t.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button>      <h4 class="modal-title">'+t.title+"</h4>    </div>":"",'    <div class="modal-body">'+t.body+"</div>",t.footer?'    <div class="modal-footer">'+t.footer+"</div>":"","  </div>","</div>"].join(""))}),v=i(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(e,t){var i=void 0!==t.direction?t.direction:"bottom";e.addClass(i),t.hideArrow&&e.find(".arrow").hide()}),g=i('<div class="checkbox"></div>',function(e,t){e.html(["<label"+(t.id?' for="'+t.id+'"':"")+">",' <input role="checkbox" type="checkbox"'+(t.id?' id="'+t.id+'"':""),t.checked?" checked":"",' aria-checked="'+(t.checked?"true":"false")+'"/>',t.text?t.text:"","</label>"].join(""))}),b=function(e,t){return"<"+(t=t||"i")+' class="'+e+'"/>'},y={editor:n,toolbar:o,editingArea:a,codable:r,editable:s,statusbar:l,airEditor:c,airEditable:u,buttonGroup:d,dropdown:h,dropdownButtonContents:function(e,t){return e+" "+b(t.icons.caret,"span")},dropdownCheck:p,palette:f,dialog:m,popover:v,checkbox:g,icon:b,options:{},button:function(e,t){return i('<button type="button" class="note-btn btn btn-default btn-sm" role="button" tabindex="-1">',function(e,t){t&&t.tooltip&&e.attr({title:t.tooltip,"aria-label":t.tooltip}).tooltip({container:void 0!==t.container?t.container:"body",trigger:"hover",placement:"bottom"})})(e,t)},toggleBtn:function(e,t){e.toggleClass("disabled",!t),e.attr("disabled",!t)},toggleBtnActive:function(e,t){e.toggleClass("active",t)},onDialogShown:function(e,t){e.one("shown.bs.modal",t)},onDialogHidden:function(e,t){e.one("hidden.bs.modal",t)},showDialog:function(e){e.modal("show")},hideDialog:function(e){e.modal("hide")},createLayout:function(e,t){var i=(t.airMode?y.airEditor([y.editingArea([y.airEditable()])]):y.editor([y.toolbar(),y.editingArea([y.codable(),y.editable()]),y.statusbar()])).render();return i.insertAfter(e),{note:e,editor:i,toolbar:i.find(".note-toolbar"),editingArea:i.find(".note-editing-area"),editable:i.find(".note-editable"),codable:i.find(".note-codable"),statusbar:i.find(".note-statusbar")}},removeLayout:function(e,t){e.html(t.editable.html()),t.editor.remove(),e.show()}},w=0,k={eq:function(e){return function(t){return e===t}},eq2:function(e,t){return e===t},peq2:function(e){return function(t,i){return t[e]===i[e]}},ok:function(){return!0},fail:function(){return!1},self:function(e){return e},not:function(e){return function(){return!e.apply(e,arguments)}},and:function(e,t){return function(i){return e(i)&&t(i)}},invoke:function(e,t){return function(){return e[t].apply(e,arguments)}},uniqueId:function(e){var t=++w+"";return e?e+t:t},rect2bnd:function(e){var t=$(document);return{top:e.top+t.scrollTop(),left:e.left+t.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}},invertObject:function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t},namespaceToCamel:function(e,t){return(t=t||"")+e.split(".").map(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).join("")},debounce:function(e,t,i){var n;return function(){var o=this,a=arguments,r=i&&!n;clearTimeout(n),n=setTimeout(function(){n=null,i||e.apply(o,a)},t),r&&e.apply(o,a)}}};function x(e){return e[0]}function C(e){return e[e.length-1]}function _(e){return e.slice(1)}function S(t,i){return e.inArray(i,t)}function T(e,t){return-1!==S(e,t)}var E,A={head:x,last:C,initial:function(e){return e.slice(0,e.length-1)},tail:_,prev:function(e,t){var i=S(e,t);return-1===i?null:e[i-1]},next:function(e,t){var i=S(e,t);return-1===i?null:e[i+1]},find:function(e,t){for(var i=0,n=e.length;i<n;i++){var o=e[i];if(t(o))return o}},contains:T,all:function(e,t){for(var i=0,n=e.length;i<n;i++)if(!t(e[i]))return!1;return!0},sum:function(e,t){return t=t||k.self,e.reduce(function(e,i){return e+t(i)},0)},from:function(e){for(var t=[],i=e.length,n=-1;++n<i;)t[n]=e[n];return t},isEmpty:function(e){return!e||!e.length},clusterBy:function(e,t){return e.length?_(e).reduce(function(e,i){var n=C(e);return t(C(n),i)?n[n.length]=i:e[e.length]=[i],e},[[x(e)]]):[]},compact:function(e){for(var t=[],i=0,n=e.length;i<n;i++)e[i]&&t.push(e[i]);return t},unique:function(e){for(var t=[],i=0,n=e.length;i<n;i++)T(t,e[i])||t.push(e[i]);return t}},D="function"==typeof define&&define.amd,F=navigator.userAgent,P=/MSIE|Trident/i.test(F);if(P){var I=/MSIE (\d+[.]\d+)/.exec(F);I&&(E=parseFloat(I[1])),(I=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(F))&&(E=parseFloat(I[1]))}var M=/Edge\/\d+/.test(F),O=!!window.CodeMirror;if(!O&&D)if("function"==typeof __webpack_require__)try{require.resolve("codemirror"),O=!0}catch(n){}else if("undefined"!=typeof require)if(void 0!==require.resolve)try{require.resolve("codemirror"),O=!0}catch(n){}else void 0!==require.specified&&(O=require.specified("codemirror"));var z="ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints,N=P||M?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",L={isMac:-1<navigator.appVersion.indexOf("Mac"),isMSIE:P,isEdge:M,isFF:!M&&/firefox/i.test(F),isPhantom:/PhantomJS/i.test(F),isWebkit:!M&&/webkit/i.test(F),isChrome:!M&&/chrome/i.test(F),isSafari:!M&&/safari/i.test(F),browserVersion:E,jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:D,isSupportTouch:z,hasCodeMirror:O,isFontInstalled:function(t){var i="Comic Sans MS"===t?"Courier New":"Comic Sans MS",n=e("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),o=n.css("fontFamily",i).width(),a=n.css("fontFamily",t+","+i).width();return n.remove(),o!==a},isW3CRangeSupport:!!document.createRange,inputEventName:N},R=String.fromCharCode(160);function j(t){return t&&e(t).hasClass("note-editable")}function U(e){return e=e.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===e}}function B(e){return e&&3===e.nodeType}function H(e){return e&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^VIDEO|^EMBED/.test(e.nodeName.toUpperCase())}function V(e){return!j(e)&&e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())}var q=U("PRE"),Y=U("LI"),W=U("TABLE"),G=U("DATA");function Z(e){return!(ee(e)||K(e)||Q(e)||V(e)||W(e)||X(e)||G(e))}function K(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())}var Q=U("HR");function J(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())}var X=U("BLOCKQUOTE");function ee(e){return J(e)||X(e)||j(e)}var te=U("A"),ie=U("BODY"),ne=L.isMSIE&&L.browserVersion<11?"&nbsp;":"<br>";function oe(e){return B(e)?e.nodeValue.length:e?e.childNodes.length:0}function ae(e){var t=oe(e);return 0===t||!B(e)&&1===t&&e.innerHTML===ne||!(!A.all(e.childNodes,B)||""!==e.innerHTML)}function re(e){H(e)||oe(e)||(e.innerHTML=ne)}function se(e,t){for(;e;){if(t(e))return e;if(j(e))break;e=e.parentNode}return null}function le(e,t){t=t||k.fail;var i=[];return se(e,function(e){return j(e)||i.push(e),t(e)}),i}function ce(e,t){t=t||k.fail;for(var i=[];e&&!t(e);)i.push(e),e=e.nextSibling;return i}function ue(e,t){var i=t.nextSibling,n=t.parentNode;return i?n.insertBefore(e,i):n.appendChild(e),e}function de(t,i){return e.each(i,function(e,i){t.appendChild(i)}),t}function he(e){return 0===e.offset}function pe(e){return e.offset===oe(e.node)}function fe(e){return he(e)||pe(e)}function me(e,t){for(;e&&e!==t;){if(0!==ge(e))return!1;e=e.parentNode}return!0}function ve(e,t){if(!t)return!1;for(;e&&e!==t;){if(ge(e)!==oe(e.parentNode)-1)return!1;e=e.parentNode}return!0}function ge(e){for(var t=0;e=e.previousSibling;)t+=1;return t}function be(e){return!!(e&&e.childNodes&&e.childNodes.length)}function ye(e,t){var i,n;if(0===e.offset){if(j(e.node))return null;i=e.node.parentNode,n=ge(e.node)}else n=be(e.node)?oe(i=e.node.childNodes[e.offset-1]):(i=e.node,t?0:e.offset-1);return{node:i,offset:n}}function we(e,t){var i,n;if(oe(e.node)===e.offset){if(j(e.node))return null;i=e.node.parentNode,n=ge(e.node)+1}else n=be(e.node)?(i=e.node.childNodes[e.offset],0):(i=e.node,t?oe(e.node):e.offset+1);return{node:i,offset:n}}function ke(e,t){return e.node===t.node&&e.offset===t.offset}function xe(e,t){var i=t&&t.isSkipPaddingBlankHTML,n=t&&t.isNotSplitEdgePoint,o=t&&t.isDiscardEmptySplits;if(o&&(i=!0),fe(e)&&(B(e.node)||n)){if(he(e))return e.node;if(pe(e))return e.node.nextSibling}if(B(e.node))return e.node.splitText(e.offset);var a=e.node.childNodes[e.offset],r=ue(e.node.cloneNode(!1),e.node);return de(r,ce(a)),i||(re(e.node),re(r)),o&&(ae(e.node)&&Se(e.node),ae(r))?(Se(r),e.node.nextSibling):r}function Ce(e,t,i){var n=le(t.node,k.eq(e));return n.length?1===n.length?xe(t,i):n.reduce(function(e,n){return e===t.node&&(e=xe(t,i)),xe({node:n,offset:e?ge(e):oe(n)},i)}):null}function _e(e){return document.createElement(e)}function Se(e,t){if(e&&e.parentNode){if(e.removeNode)return e.removeNode(t);var i=e.parentNode;if(!t){for(var n=[],o=0,a=e.childNodes.length;o<a;o++)n.push(e.childNodes[o]);for(o=0,a=n.length;o<a;o++)i.insertBefore(n[o],e)}i.removeChild(e)}}var Te=U("TEXTAREA");function Ee(e,t){var i=Te(e[0])?e.val():e.html();return t?i.replace(/[\n\r]/g,""):i}var Ae={NBSP_CHAR:R,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:ne,emptyPara:"<p>"+ne+"</p>",makePredByNodeName:U,isEditable:j,isControlSizing:function(t){return t&&e(t).hasClass("note-control-sizing")},isText:B,isElement:function(e){return e&&1===e.nodeType},isVoid:H,isPara:V,isPurePara:function(e){return V(e)&&!Y(e)},isHeading:function(e){return e&&/^H[1-7]/.test(e.nodeName.toUpperCase())},isInline:Z,isBlock:k.not(Z),isBodyInline:function(e){return Z(e)&&!se(e,V)},isBody:ie,isParaInline:function(e){return Z(e)&&!!se(e,V)},isPre:q,isList:K,isTable:W,isData:G,isCell:J,isBlockquote:X,isBodyContainer:ee,isAnchor:te,isDiv:U("DIV"),isLi:Y,isBR:U("BR"),isSpan:U("SPAN"),isB:U("B"),isU:U("U"),isS:U("S"),isI:U("I"),isImg:U("IMG"),isTextarea:Te,isEmpty:ae,isEmptyAnchor:k.and(te,ae),isClosestSibling:function(e,t){return e.nextSibling===t||e.previousSibling===t},withClosestSiblings:function(e,t){t=t||k.ok;var i=[];return e.previousSibling&&t(e.previousSibling)&&i.push(e.previousSibling),i.push(e),e.nextSibling&&t(e.nextSibling)&&i.push(e.nextSibling),i},nodeLength:oe,isLeftEdgePoint:he,isRightEdgePoint:pe,isEdgePoint:fe,isLeftEdgeOf:me,isRightEdgeOf:ve,isLeftEdgePointOf:function(e,t){return he(e)&&me(e.node,t)},isRightEdgePointOf:function(e,t){return pe(e)&&ve(e.node,t)},prevPoint:ye,nextPoint:we,isSamePoint:ke,isVisiblePoint:function(e){if(B(e.node)||!be(e.node)||ae(e.node))return!0;var t=e.node.childNodes[e.offset-1],i=e.node.childNodes[e.offset];return!(t&&!H(t)||i&&!H(i))},prevPointUntil:function(e,t){for(;e;){if(t(e))return e;e=ye(e)}return null},nextPointUntil:function(e,t){for(;e;){if(t(e))return e;e=we(e)}return null},isCharPoint:function(e){if(!B(e.node))return!1;var t=e.node.nodeValue.charAt(e.offset-1);return t&&" "!==t&&t!==R},walkPoint:function(e,t,i,n){for(var o=e;o&&(i(o),!ke(o,t));)o=we(o,n&&e.node!==o.node&&t.node!==o.node)},ancestor:se,singleChildAncestor:function(e,t){for(e=e.parentNode;e&&1===oe(e);){if(t(e))return e;if(j(e))break;e=e.parentNode}return null},listAncestor:le,lastAncestor:function(e,t){var i=le(e);return A.last(i.filter(t))},listNext:ce,listPrev:function(e,t){t=t||k.fail;for(var i=[];e&&!t(e);)i.push(e),e=e.previousSibling;return i},listDescendant:function(e,t){var i=[];return t=t||k.ok,function n(o){e!==o&&t(o)&&i.push(o);for(var a=0,r=o.childNodes.length;a<r;a++)n(o.childNodes[a])}(e),i},commonAncestor:function(t,i){for(var n=le(t),o=i;o;o=o.parentNode)if(-1<e.inArray(o,n))return o;return null},wrap:function(t,i){var n=t.parentNode,o=e("<"+i+">")[0];return n.insertBefore(o,t),o.appendChild(t),o},insertAfter:ue,appendChildNodes:de,position:ge,hasChildren:be,makeOffsetPath:function(e,t){return le(t,k.eq(e)).map(ge).reverse()},fromOffsetPath:function(e,t){for(var i=e,n=0,o=t.length;n<o;n++)i=i.childNodes.length<=t[n]?i.childNodes[i.childNodes.length-1]:i.childNodes[t[n]];return i},splitTree:Ce,splitPoint:function(e,t){var i,n,o=t?V:ee,a=le(e.node,o),r=A.last(a)||e.node;n=o(r)?(i=a[a.length-2],r):(i=r).parentNode;var s=i&&Ce(i,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});return s||n!==e.node||(s=e.node.childNodes[e.offset]),{rightNode:s,container:n}},create:_e,createText:function(e){return document.createTextNode(e)},remove:Se,removeWhile:function(e,t){for(;e&&!j(e)&&t(e);){var i=e.parentNode;Se(e),e=i}},replace:function(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase())return e;var i=_e(t);return e.style.cssText&&(i.style.cssText=e.style.cssText),de(i,A.from(e.childNodes)),ue(i,e),Se(e),i},html:function(t,i){var n=Ee(t);return i&&(n=n.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,function(e,t,i){i=i.toUpperCase();var n=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!t,o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return e+(n||o?"\n":"")}),n=e.trim(n)),n},value:Ee,posFromPlaceholder:function(t){var i=e(t),n=i.offset(),o=i.outerHeight(!0);return{left:n.left,top:n.top+o}},attachEvents:function(e,t){Object.keys(t).forEach(function(i){e.on(i,t[i])})},detachEvents:function(e,t){Object.keys(t).forEach(function(i){e.off(i,t[i])})},isCustomStyleTag:function(e){return e&&!B(e)&&A.contains(e.classList,"note-styletag")}};function De(e,t){var i,n,o=e.parentElement(),a=document.body.createTextRange(),r=A.from(o.childNodes);for(i=0;i<r.length;i++)if(!Ae.isText(r[i])){if(a.moveToElementText(r[i]),0<=a.compareEndPoints("StartToStart",e))break;n=r[i]}if(0!==i&&Ae.isText(r[i-1])){var s=document.body.createTextRange(),l=null;s.moveToElementText(n||o),s.collapse(!n),l=n?n.nextSibling:o.firstChild;var c=e.duplicate();c.setEndPoint("StartToStart",s);for(var u=c.text.replace(/[\r\n]/g,"").length;u>l.nodeValue.length&&l.nextSibling;)u-=l.nodeValue.length,l=l.nextSibling;l.nodeValue,t&&l.nextSibling&&Ae.isText(l.nextSibling)&&u===l.nodeValue.length&&(u-=l.nodeValue.length,l=l.nextSibling),o=l,i=u}return{cont:o,offset:i}}function Fe(e){var t=function(e,i){var n,o;if(Ae.isText(e)){var a=Ae.listPrev(e,k.not(Ae.isText)),r=A.last(a).previousSibling;n=r||e.parentNode,i+=A.sum(A.tail(a),Ae.nodeLength),o=!r}else{if(n=e.childNodes[i]||e,Ae.isText(n))return t(n,0);i=0,o=!1}return{node:n,collapseToStart:o,offset:i}},i=document.body.createTextRange(),n=t(e.node,e.offset);return i.moveToElementText(n.node),i.collapse(n.collapseToStart),i.moveStart("character",n.offset),i}var Pe=function(){function t(e,t,i,n){this.sc=e,this.so=t,this.ec=i,this.eo=n,this.isOnEditable=this.makeIsOn(Ae.isEditable),this.isOnList=this.makeIsOn(Ae.isList),this.isOnAnchor=this.makeIsOn(Ae.isAnchor),this.isOnCell=this.makeIsOn(Ae.isCell),this.isOnData=this.makeIsOn(Ae.isData)}return t.prototype.nativeRange=function(){if(L.isW3CRangeSupport){var e=document.createRange();return e.setStart(this.sc,this.so),e.setEnd(this.ec,this.eo),e}var t=Fe({node:this.sc,offset:this.so});return t.setEndPoint("EndToEnd",Fe({node:this.ec,offset:this.eo})),t},t.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}},t.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}},t.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}},t.prototype.select=function(){var e=this.nativeRange();if(L.isW3CRangeSupport){var t=document.getSelection();0<t.rangeCount&&t.removeAllRanges(),t.addRange(e)}else e.select();return this},t.prototype.scrollIntoView=function(t){var i=e(t).height();return t.scrollTop+i<this.sc.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+i-this.sc.offsetTop)),this},t.prototype.normalize=function(){var e=function(e,t){if(Ae.isVisiblePoint(e)&&!Ae.isEdgePoint(e)||Ae.isVisiblePoint(e)&&Ae.isRightEdgePoint(e)&&!t||Ae.isVisiblePoint(e)&&Ae.isLeftEdgePoint(e)&&t||Ae.isVisiblePoint(e)&&Ae.isBlock(e.node)&&Ae.isEmpty(e.node))return e;var i=Ae.ancestor(e.node,Ae.isBlock);if((Ae.isLeftEdgePointOf(e,i)||Ae.isVoid(Ae.prevPoint(e).node))&&!t||(Ae.isRightEdgePointOf(e,i)||Ae.isVoid(Ae.nextPoint(e).node))&&t){if(Ae.isVisiblePoint(e))return e;t=!t}return(t?Ae.nextPointUntil(Ae.nextPoint(e),Ae.isVisiblePoint):Ae.prevPointUntil(Ae.prevPoint(e),Ae.isVisiblePoint))||e},i=e(this.getEndPoint(),!1),n=this.isCollapsed()?i:e(this.getStartPoint(),!0);return new t(n.node,n.offset,i.node,i.offset)},t.prototype.nodes=function(e,t){e=e||k.ok;var i=t&&t.includeAncestor,n=t&&t.fullyContains,o=this.getStartPoint(),a=this.getEndPoint(),r=[],s=[];return Ae.walkPoint(o,a,function(t){var o;Ae.isEditable(t.node)||(n?(Ae.isLeftEdgePoint(t)&&s.push(t.node),Ae.isRightEdgePoint(t)&&A.contains(s,t.node)&&(o=t.node)):o=i?Ae.ancestor(t.node,e):t.node,o&&e(o)&&r.push(o))},!0),A.unique(r)},t.prototype.commonAncestor=function(){return Ae.commonAncestor(this.sc,this.ec)},t.prototype.expand=function(e){var i=Ae.ancestor(this.sc,e),n=Ae.ancestor(this.ec,e);if(!i&&!n)return new t(this.sc,this.so,this.ec,this.eo);var o=this.getPoints();return i&&(o.sc=i,o.so=0),n&&(o.ec=n,o.eo=Ae.nodeLength(n)),new t(o.sc,o.so,o.ec,o.eo)},t.prototype.collapse=function(e){return e?new t(this.sc,this.so,this.sc,this.so):new t(this.ec,this.eo,this.ec,this.eo)},t.prototype.splitText=function(){var e=this.sc===this.ec,i=this.getPoints();return Ae.isText(this.ec)&&!Ae.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),Ae.isText(this.sc)&&!Ae.isEdgePoint(this.getStartPoint())&&(i.sc=this.sc.splitText(this.so),i.so=0,e&&(i.ec=i.sc,i.eo=this.eo-this.so)),new t(i.sc,i.so,i.ec,i.eo)},t.prototype.deleteContents=function(){if(this.isCollapsed())return this;var i=this.splitText(),n=i.nodes(null,{fullyContains:!0}),o=Ae.prevPointUntil(i.getStartPoint(),function(e){return!A.contains(n,e.node)}),a=[];return e.each(n,function(e,t){var i=t.parentNode;o.node!==i&&1===Ae.nodeLength(i)&&a.push(i),Ae.remove(t,!1)}),e.each(a,function(e,t){Ae.remove(t,!1)}),new t(o.node,o.offset,o.node,o.offset).normalize()},t.prototype.makeIsOn=function(e){return function(){var t=Ae.ancestor(this.sc,e);return!!t&&t===Ae.ancestor(this.ec,e)}},t.prototype.isLeftEdgeOf=function(e){if(!Ae.isLeftEdgePoint(this.getStartPoint()))return!1;var t=Ae.ancestor(this.sc,e);return t&&Ae.isLeftEdgeOf(this.sc,t)},t.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo},t.prototype.wrapBodyInlineWithPara=function(){if(Ae.isBodyContainer(this.sc)&&Ae.isEmpty(this.sc))return this.sc.innerHTML=Ae.emptyPara,new t(this.sc.firstChild,0,this.sc.firstChild,0);var e,i=this.normalize();if(Ae.isParaInline(this.sc)||Ae.isPara(this.sc))return i;if(Ae.isInline(i.sc)){var n=Ae.listAncestor(i.sc,k.not(Ae.isInline));e=A.last(n),Ae.isInline(e)||(e=n[n.length-2]||i.sc.childNodes[i.so])}else e=i.sc.childNodes[0<i.so?i.so-1:0];var o=Ae.listPrev(e,Ae.isParaInline).reverse();if((o=o.concat(Ae.listNext(e.nextSibling,Ae.isParaInline))).length){var a=Ae.wrap(A.head(o),"p");Ae.appendChildNodes(a,A.tail(o))}return this.normalize()},t.prototype.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents(),i=Ae.splitPoint(t.getStartPoint(),Ae.isInline(e));return i.rightNode?i.rightNode.parentNode.insertBefore(e,i.rightNode):i.container.appendChild(e),e},t.prototype.pasteHTML=function(t){var i=e("<div></div>").html(t)[0],n=A.from(i.childNodes),o=this.wrapBodyInlineWithPara().deleteContents();return 0<o.so&&(n=n.reverse()),n=n.map(function(e){return o.insertNode(e)}),0<o.so&&(n=n.reverse()),n},t.prototype.toString=function(){var e=this.nativeRange();return L.isW3CRangeSupport?e.toString():e.text},t.prototype.getWordRange=function(e){var i=this.getEndPoint();if(!Ae.isCharPoint(i))return this;var n=Ae.prevPointUntil(i,function(e){return!Ae.isCharPoint(e)});return e&&(i=Ae.nextPointUntil(i,function(e){return!Ae.isCharPoint(e)})),new t(n.node,n.offset,i.node,i.offset)},t.prototype.bookmark=function(e){return{s:{path:Ae.makeOffsetPath(e,this.sc),offset:this.so},e:{path:Ae.makeOffsetPath(e,this.ec),offset:this.eo}}},t.prototype.paraBookmark=function(e){return{s:{path:A.tail(Ae.makeOffsetPath(A.head(e),this.sc)),offset:this.so},e:{path:A.tail(Ae.makeOffsetPath(A.last(e),this.ec)),offset:this.eo}}},t.prototype.getClientRects=function(){return this.nativeRange().getClientRects()},t}(),Ie={create:function(e,t,i,n){if(4===arguments.length)return new Pe(e,t,i,n);if(2===arguments.length)return new Pe(i=e,n=t,i,n);var o=this.createFromSelection();return o||1!==arguments.length?o:(o=this.createFromNode(e)).collapse(Ae.emptyPara===e.innerHTML)},createFromSelection:function(){var e,t,i,n;if(L.isW3CRangeSupport){var o=document.getSelection();if(!o||0===o.rangeCount)return null;if(Ae.isBody(o.anchorNode))return null;var a=o.getRangeAt(0);e=a.startContainer,t=a.startOffset,i=a.endContainer,n=a.endOffset}else{var r=document.selection.createRange(),s=r.duplicate();s.collapse(!1);var l=r;l.collapse(!0);var c=De(l,!0),u=De(s,!1);Ae.isText(c.node)&&Ae.isLeftEdgePoint(c)&&Ae.isTextNode(u.node)&&Ae.isRightEdgePoint(u)&&u.node.nextSibling===c.node&&(c=u),e=c.cont,t=c.offset,i=u.cont,n=u.offset}return new Pe(e,t,i,n)},createFromNode:function(e){var t=e,i=0,n=e,o=Ae.nodeLength(n);return Ae.isVoid(t)&&(i=Ae.listPrev(t).length-1,t=t.parentNode),Ae.isBR(n)?(o=Ae.listPrev(n).length-1,n=n.parentNode):Ae.isVoid(n)&&(o=Ae.listPrev(n).length,n=n.parentNode),this.create(t,i,n,o)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(!0)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse()},createFromBookmark:function(e,t){var i=Ae.fromOffsetPath(e,t.s.path),n=t.s.offset,o=Ae.fromOffsetPath(e,t.e.path),a=t.e.offset;return new Pe(i,n,o,a)},createFromParaBookmark:function(e,t){var i=e.s.offset,n=e.e.offset,o=Ae.fromOffsetPath(A.head(t),e.s.path),a=Ae.fromOffsetPath(A.last(t),e.e.path);return new Pe(o,i,a,n)}};e.summernote=e.summernote||{lang:{}},e.extend(e.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default",cpSelect:"Select"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var Me={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221},Oe={isEdit:function(e){return A.contains([Me.BACKSPACE,Me.TAB,Me.ENTER,Me.SPACE,Me.DELETE],e)},isMove:function(e){return A.contains([Me.LEFT,Me.UP,Me.RIGHT,Me.DOWN],e)},nameFromCode:k.invertObject(Me),code:Me},$e=function(){function e(e){this.stack=[],this.stackOffset=-1,this.$editable=e,this.editable=e[0]}return e.prototype.makeSnapshot=function(){var e=Ie.create(this.editable);return{contents:this.$editable.html(),bookmark:e?e.bookmark(this.editable):{s:{path:[],offset:0},e:{path:[],offset:0}}}},e.prototype.applySnapshot=function(e){null!==e.contents&&this.$editable.html(e.contents),null!==e.bookmark&&Ie.createFromBookmark(this.editable,e.bookmark).select()},e.prototype.rewind=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])},e.prototype.commit=function(){this.stack=[],this.stackOffset=-1,this.recordUndo()},e.prototype.reset=function(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()},e.prototype.undo=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),0<this.stackOffset&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))},e.prototype.redo=function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))},e.prototype.recordUndo=function(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot())},e}(),ze=function(){function t(){}return t.prototype.jQueryCSS=function(t,i){if(L.jqueryVersion<1.9){var n={};return e.each(i,function(e,i){n[i]=t.css(i)}),n}return t.css(i)},t.prototype.fromNode=function(e){var t=this.jQueryCSS(e,["font-family","font-size","text-align","list-style-type","line-height"])||{};return t["font-size"]=parseInt(t["font-size"],10),t},t.prototype.stylePara=function(t,i){e.each(t.nodes(Ae.isPara,{includeAncestor:!0}),function(t,n){e(n).css(i)})},t.prototype.styleNodes=function(t,i){t=t.splitText();var n=i&&i.nodeName||"SPAN",o=!(!i||!i.expandClosestSibling),a=!(!i||!i.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(Ae.create(n))];var r=Ae.makePredByNodeName(n),s=t.nodes(Ae.isText,{fullyContains:!0}).map(function(e){return Ae.singleChildAncestor(e,r)||Ae.wrap(e,n)});if(o){if(a){var l=t.nodes();r=k.and(r,function(e){return A.contains(l,e)})}return s.map(function(t){var i=Ae.withClosestSiblings(t,r),n=A.head(i),o=A.tail(i);return e.each(o,function(e,t){Ae.appendChildNodes(n,t.childNodes),Ae.remove(t)}),A.head(i)})}return s},t.prototype.current=function(t){var i=e(Ae.isElement(t.sc)?t.sc:t.sc.parentNode),n=this.fromNode(i);try{n=e.extend(n,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||n["font-family"]})}catch(t){}if(t.isOnList()){var o=-1<e.inArray(n["list-style-type"],["circle","disc","disc-leading-zero","square"]);n["list-style"]=o?"unordered":"ordered"}else n["list-style"]="none";var a=Ae.ancestor(t.sc,Ae.isPara);if(a&&a.style["line-height"])n["line-height"]=a.style.lineHeight;else{var r=parseInt(n["line-height"],10)/parseInt(n["font-size"],10);n["line-height"]=r.toFixed(1)}return n.anchor=t.isOnAnchor()&&Ae.ancestor(t.sc,Ae.isAnchor),n.ancestors=Ae.listAncestor(t.sc,Ae.isEditable),n.range=t,n},t}(),Ne=function(){function t(){}return t.prototype.insertOrderedList=function(e){this.toggleList("OL",e)},t.prototype.insertUnorderedList=function(e){this.toggleList("UL",e)},t.prototype.indent=function(t){var i=this,n=Ie.create(t).wrapBodyInlineWithPara(),o=n.nodes(Ae.isPara,{includeAncestor:!0}),a=A.clusterBy(o,k.peq2("parentNode"));e.each(a,function(t,n){var o=A.head(n);if(Ae.isLi(o)){var a=i.findList(o.previousSibling);a?n.map(function(e){return a.appendChild(e)}):(i.wrapList(n,o.parentNode.nodeName),n.map(function(e){return e.parentNode}).map(function(e){return i.appendToPrevious(e)}))}else e.each(n,function(t,i){e(i).css("marginLeft",function(e,t){return(parseInt(t,10)||0)+25})})}),n.select()},t.prototype.outdent=function(t){var i=this,n=Ie.create(t).wrapBodyInlineWithPara(),o=n.nodes(Ae.isPara,{includeAncestor:!0}),a=A.clusterBy(o,k.peq2("parentNode"));e.each(a,function(t,n){var o=A.head(n);Ae.isLi(o)?i.releaseList([n]):e.each(n,function(t,i){e(i).css("marginLeft",function(e,t){return 25<(t=parseInt(t,10)||0)?t-25:""})})}),n.select()},t.prototype.toggleList=function(t,i){var n=this,o=Ie.create(i).wrapBodyInlineWithPara(),a=o.nodes(Ae.isPara,{includeAncestor:!0}),r=o.paraBookmark(a),s=A.clusterBy(a,k.peq2("parentNode"));if(A.find(a,Ae.isPurePara)){var l=[];e.each(s,function(e,i){l=l.concat(n.wrapList(i,t))}),a=l}else{var c=o.nodes(Ae.isList,{includeAncestor:!0}).filter(function(i){return!e.nodeName(i,t)});c.length?e.each(c,function(e,i){Ae.replace(i,t)}):a=this.releaseList(s,!0)}Ie.createFromParaBookmark(r,a).select()},t.prototype.wrapList=function(e,t){var i=A.head(e),n=A.last(e),o=Ae.isList(i.previousSibling)&&i.previousSibling,a=Ae.isList(n.nextSibling)&&n.nextSibling,r=o||Ae.insertAfter(Ae.create(t||"UL"),n);return e=e.map(function(e){return Ae.isPurePara(e)?Ae.replace(e,"LI"):e}),Ae.appendChildNodes(r,e),a&&(Ae.appendChildNodes(r,A.from(a.childNodes)),Ae.remove(a)),e},t.prototype.releaseList=function(t,i){var n=this,o=[];return e.each(t,function(t,a){var r=A.head(a),s=A.last(a),l=i?Ae.lastAncestor(r,Ae.isList):r.parentNode,c=l.parentNode;if("LI"===l.parentNode.nodeName)a.map(function(e){var t=n.findNextSiblings(e);c.nextSibling?c.parentNode.insertBefore(e,c.nextSibling):c.parentNode.appendChild(e),t.length&&(n.wrapList(t,l.nodeName),e.appendChild(t[0].parentNode))}),0===l.children.length&&c.removeChild(l),0===c.childNodes.length&&c.parentNode.removeChild(c);else{var u=1<l.childNodes.length?Ae.splitTree(l,{node:s.parentNode,offset:Ae.position(s)+1},{isSkipPaddingBlankHTML:!0}):null,d=Ae.splitTree(l,{node:r.parentNode,offset:Ae.position(r)},{isSkipPaddingBlankHTML:!0});a=i?Ae.listDescendant(d,Ae.isLi):A.from(d.childNodes).filter(Ae.isLi),!i&&Ae.isList(l.parentNode)||(a=a.map(function(e){return Ae.replace(e,"P")})),e.each(A.from(a).reverse(),function(e,t){Ae.insertAfter(t,l)});var h=A.compact([l,d,u]);e.each(h,function(t,i){var n=[i].concat(Ae.listDescendant(i,Ae.isList));e.each(n.reverse(),function(e,t){Ae.nodeLength(t)||Ae.remove(t,!0)})})}o=o.concat(a)}),o},t.prototype.appendToPrevious=function(e){return e.previousSibling?Ae.appendChildNodes(e.previousSibling,[e]):this.wrapList([e],"LI")},t.prototype.findList=function(e){return e?A.find(e.children,function(e){return-1<["OL","UL"].indexOf(e.nodeName)}):null},t.prototype.findNextSiblings=function(e){for(var t=[];e.nextSibling;)t.push(e.nextSibling),e=e.nextSibling;return t},t}(),Le=function(){function t(e){this.bullet=new Ne,this.options=e.options}return t.prototype.insertTab=function(e,t){var i=Ae.createText(new Array(t+1).join(Ae.NBSP_CHAR));(e=e.deleteContents()).insertNode(i,!0),(e=Ie.create(i,t)).select()},t.prototype.insertParagraph=function(t,i){i=(i=(i=i||Ie.create(t)).deleteContents()).wrapBodyInlineWithPara();var n,o=Ae.ancestor(i.sc,Ae.isPara);if(o){if(Ae.isEmpty(o)&&Ae.isLi(o))return void this.bullet.toggleList(o.parentNode.nodeName);var a=null;if(1===this.options.blockquoteBreakingLevel?a=Ae.ancestor(o,Ae.isBlockquote):2===this.options.blockquoteBreakingLevel&&(a=Ae.lastAncestor(o,Ae.isBlockquote)),a){n=e(Ae.emptyPara)[0],Ae.isRightEdgePoint(i.getStartPoint())&&Ae.isBR(i.sc.nextSibling)&&e(i.sc.nextSibling).remove();var r=Ae.splitTree(a,i.getStartPoint(),{isDiscardEmptySplits:!0});r?r.parentNode.insertBefore(n,r):Ae.insertAfter(n,a)}else{n=Ae.splitTree(o,i.getStartPoint());var s=Ae.listDescendant(o,Ae.isEmptyAnchor);s=s.concat(Ae.listDescendant(n,Ae.isEmptyAnchor)),e.each(s,function(e,t){Ae.remove(t)}),(Ae.isHeading(n)||Ae.isPre(n)||Ae.isCustomStyleTag(n))&&Ae.isEmpty(n)&&(n=Ae.replace(n,"p"))}}else{var l=i.sc.childNodes[i.so];n=e(Ae.emptyPara)[0],l?i.sc.insertBefore(n,l):i.sc.appendChild(n)}Ie.create(n,0).normalize().select().scrollIntoView(t)},t}(),Re=function(e,t,i,n){var o={colPos:0,rowPos:0},a=[],r=[];function s(e,t,i,n,o,r,s){var l={baseRow:i,baseCell:n,isRowSpan:o,isColSpan:r,isVirtual:s};a[e]||(a[e]=[]),a[e][t]=l}function l(e,t){if(!a[e])return t;if(!a[e][t])return t;for(var i=t;a[e][i];)if(i++,!a[e][i])return i}function c(e,t){var i=l(e.rowIndex,t.cellIndex),n=1<t.colSpan,a=1<t.rowSpan,r=e.rowIndex===o.rowPos&&t.cellIndex===o.colPos;s(e.rowIndex,i,e,t,a,n,!1);var c=t.attributes.rowSpan?parseInt(t.attributes.rowSpan.value,10):0;if(1<c)for(var d=1;d<c;d++){var h=e.rowIndex+d;u(h,i,t,r),s(h,i,e,t,!0,n,!0)}var p=t.attributes.colSpan?parseInt(t.attributes.colSpan.value,10):0;if(1<p)for(var f=1;f<p;f++){var m=l(e.rowIndex,i+f);u(e.rowIndex,m,t,r),s(e.rowIndex,m,e,t,a,!0,!0)}}function u(e,t,i,n){e===o.rowPos&&o.colPos>=i.cellIndex&&i.cellIndex<=t&&!n&&o.colPos++}function d(e){switch(t){case Re.where.Column:if(e.isColSpan)return Re.resultAction.SubtractSpanCount;break;case Re.where.Row:if(!e.isVirtual&&e.isRowSpan)return Re.resultAction.AddCell;if(e.isRowSpan)return Re.resultAction.SubtractSpanCount}return Re.resultAction.RemoveCell}function h(e){switch(t){case Re.where.Column:if(e.isColSpan)return Re.resultAction.SumSpanCount;if(e.isRowSpan&&e.isVirtual)return Re.resultAction.Ignore;break;case Re.where.Row:if(e.isRowSpan)return Re.resultAction.SumSpanCount;if(e.isColSpan&&e.isVirtual)return Re.resultAction.Ignore}return Re.resultAction.AddCell}this.getActionList=function(){for(var e,n,s,l=t===Re.where.Row?o.rowPos:-1,c=t===Re.where.Column?o.colPos:-1,u=0,p=!0;p;){var f=0<=l?l:u,m=0<=c?c:u,v=a[f];if(!v)return p=!1,r;var g=v[m];if(!g)return p=!1,r;var b=Re.resultAction.Ignore;switch(i){case Re.requestAction.Add:b=h(g);break;case Re.requestAction.Delete:b=d(g)}r.push((e=b,n=f,s=m,{baseCell:g.baseCell,action:e,virtualTable:{rowIndex:n,cellIndex:s}})),u++}return r},e&&e.tagName&&("td"===e.tagName.toLowerCase()||"th"===e.tagName.toLowerCase())?(o.colPos=e.cellIndex,e.parentElement&&e.parentElement.tagName&&"tr"===e.parentElement.tagName.toLowerCase()?o.rowPos=e.parentElement.rowIndex:console.error("Impossible to identify start Row point.",e)):console.error("Impossible to identify start Cell point.",e),function(){for(var e=n.rows,t=0;t<e.length;t++)for(var i=e[t].cells,o=0;o<i.length;o++)c(e[t],i[o])}()};Re.where={Row:0,Column:1},Re.requestAction={Add:0,Delete:1},Re.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var je,Ue=function(){function t(){}return t.prototype.tab=function(e,t){var i=Ae.ancestor(e.commonAncestor(),Ae.isCell),n=Ae.ancestor(i,Ae.isTable),o=Ae.listDescendant(n,Ae.isCell),a=A[t?"prev":"next"](o,i);a&&Ie.create(a,0).select()},t.prototype.addRow=function(t,i){for(var n=Ae.ancestor(t.commonAncestor(),Ae.isCell),o=e(n).closest("tr"),a=this.recoverAttributes(o),r=e("<tr"+a+"></tr>"),s=new Re(n,Re.where.Row,Re.requestAction.Add,e(o).closest("table")[0]).getActionList(),l=0;l<s.length;l++){var c=s[l],u=this.recoverAttributes(c.baseCell);switch(c.action){case Re.resultAction.AddCell:r.append("<td"+u+">"+Ae.blank+"</td>");break;case Re.resultAction.SumSpanCount:if("top"===i&&(c.baseCell.parent?c.baseCell.closest("tr").rowIndex:0)<=o[0].rowIndex){var d=e("<div></div>").append(e("<td"+u+">"+Ae.blank+"</td>").removeAttr("rowspan")).html();r.append(d);break}var h=parseInt(c.baseCell.rowSpan,10);h++,c.baseCell.setAttribute("rowSpan",h)}}if("top"===i)o.before(r);else{if(1<n.rowSpan){var p=o[0].rowIndex+(n.rowSpan-2);return void e(e(o).parent().find("tr")[p]).after(e(r))}o.after(r)}},t.prototype.addCol=function(t,i){var n=Ae.ancestor(t.commonAncestor(),Ae.isCell),o=e(n).closest("tr");e(o).siblings().push(o);for(var a=new Re(n,Re.where.Column,Re.requestAction.Add,e(o).closest("table")[0]).getActionList(),r=0;r<a.length;r++){var s=a[r],l=this.recoverAttributes(s.baseCell);switch(s.action){case Re.resultAction.AddCell:"right"===i?e(s.baseCell).after("<td"+l+">"+Ae.blank+"</td>"):e(s.baseCell).before("<td"+l+">"+Ae.blank+"</td>");break;case Re.resultAction.SumSpanCount:if("right"===i){var c=parseInt(s.baseCell.colSpan,10);c++,s.baseCell.setAttribute("colSpan",c)}else e(s.baseCell).before("<td"+l+">"+Ae.blank+"</td>")}}},t.prototype.recoverAttributes=function(e){var t="";if(!e)return t;for(var i=e.attributes||[],n=0;n<i.length;n++)"id"!==i[n].name.toLowerCase()&&i[n].specified&&(t+=" "+i[n].name+"='"+i[n].value+"'");return t},t.prototype.deleteRow=function(t){for(var i=Ae.ancestor(t.commonAncestor(),Ae.isCell),n=e(i).closest("tr"),o=n.children("td, th").index(e(i)),a=n[0].rowIndex,r=new Re(i,Re.where.Row,Re.requestAction.Delete,e(n).closest("table")[0]).getActionList(),s=0;s<r.length;s++)if(r[s]){var l=r[s].baseCell,c=r[s].virtualTable,u=l.rowSpan&&1<l.rowSpan,d=u?parseInt(l.rowSpan,10):0;switch(r[s].action){case Re.resultAction.Ignore:continue;case Re.resultAction.AddCell:var h=n.next("tr")[0];if(!h)continue;var p=n[0].cells[o];u&&(2<d?(d--,h.insertBefore(p,h.cells[o]),h.cells[o].setAttribute("rowSpan",d),h.cells[o].innerHTML=""):2===d&&(h.insertBefore(p,h.cells[o]),h.cells[o].removeAttribute("rowSpan"),h.cells[o].innerHTML=""));continue;case Re.resultAction.SubtractSpanCount:u&&(2<d?(d--,l.setAttribute("rowSpan",d),c.rowIndex!==a&&l.cellIndex===o&&(l.innerHTML="")):2===d&&(l.removeAttribute("rowSpan"),c.rowIndex!==a&&l.cellIndex===o&&(l.innerHTML="")));continue;case Re.resultAction.RemoveCell:continue}}n.remove()},t.prototype.deleteCol=function(t){for(var i=Ae.ancestor(t.commonAncestor(),Ae.isCell),n=e(i).closest("tr"),o=n.children("td, th").index(e(i)),a=new Re(i,Re.where.Column,Re.requestAction.Delete,e(n).closest("table")[0]).getActionList(),r=0;r<a.length;r++)if(a[r])switch(a[r].action){case Re.resultAction.Ignore:continue;case Re.resultAction.SubtractSpanCount:var s=a[r].baseCell;if(s.colSpan&&1<s.colSpan){var l=s.colSpan?parseInt(s.colSpan,10):0;2<l?(l--,s.setAttribute("colSpan",l),s.cellIndex===o&&(s.innerHTML="")):2===l&&(s.removeAttribute("colSpan"),s.cellIndex===o&&(s.innerHTML=""))}continue;case Re.resultAction.RemoveCell:Ae.remove(a[r].baseCell,!0);continue}},t.prototype.createTable=function(t,i,n){for(var o,a=[],r=0;r<t;r++)a.push("<td>"+Ae.blank+"</td>");o=a.join("");for(var s,l=[],c=0;c<i;c++)l.push("<tr>"+o+"</tr>");s=l.join("");var u=e("<table>"+s+"</table>");return n&&n.tableClassName&&u.addClass(n.tableClassName),u[0]},t.prototype.deleteTable=function(t){var i=Ae.ancestor(t.commonAncestor(),Ae.isCell);e(i).closest("table").remove()},t}(),Be=function(){function t(t){var i=this;this.context=t,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.lastRange=null,this.style=new ze,this.table=new Ue,this.typing=new Le(t),this.bullet=new Ne,this.history=new $e(this.$editable),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName);for(var n=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"],o=0,a=n.length;o<a;o++)this[n[o]]=function(e){return function(t){i.beforeCommand(),document.execCommand(e,!1,t),i.afterCommand(!0)}}(n[o]),this.context.memo("help."+n[o],this.lang.help[n[o]]);for(this.fontName=this.wrapCommand(function(e){return i.fontStyling("font-family","'"+e+"'")}),this.fontSize=this.wrapCommand(function(e){return i.fontStyling("font-size",e+"px")}),o=1;o<=6;o++)this["formatH"+o]=function(e){return function(){i.formatBlock("H"+e)}}(o),this.context.memo("help.formatH"+o,this.lang.help["formatH"+o]);this.insertParagraph=this.wrapCommand(function(){i.typing.insertParagraph(i.editable)}),this.insertOrderedList=this.wrapCommand(function(){i.bullet.insertOrderedList(i.editable)}),this.insertUnorderedList=this.wrapCommand(function(){i.bullet.insertUnorderedList(i.editable)}),this.indent=this.wrapCommand(function(){i.bullet.indent(i.editable)}),this.outdent=this.wrapCommand(function(){i.bullet.outdent(i.editable)}),this.insertNode=this.wrapCommand(function(t){i.isLimited(e(t).text().length)||(i.createRange().insertNode(t),Ie.createFromNodeAfter(t).select())}),this.insertText=this.wrapCommand(function(e){if(!i.isLimited(e.length)){var t=i.createRange().insertNode(Ae.createText(e));Ie.create(t,Ae.nodeLength(t)).select()}}),this.pasteHTML=this.wrapCommand(function(e){if(!i.isLimited(e.length)){var t=i.createRange().pasteHTML(e);Ie.createFromNodeAfter(A.last(t)).select()}}),this.formatBlock=this.wrapCommand(function(e,t){var n=i.options.callbacks.onApplyCustomStyle;n?n.call(i,t,i.context,i.onFormatBlock):i.onFormatBlock(e,t)}),this.insertHorizontalRule=this.wrapCommand(function(){var e=i.createRange().insertNode(Ae.create("HR"));e.nextSibling&&Ie.create(e.nextSibling,0).normalize().select()}),this.lineHeight=this.wrapCommand(function(e){i.style.stylePara(i.createRange(),{lineHeight:e})}),this.createLink=this.wrapCommand(function(t){var n=t.url,o=t.text,a=t.isNewWindow,r=t.range||i.createRange(),s=o.length-r.toString().length;if(!(0<s&&i.isLimited(s))){var l=r.toString()!==o;"string"==typeof n&&(n=n.trim()),i.options.onCreateLink?n=i.options.onCreateLink(n):/^\.?\/(.*)/.test(n)||(n=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(n)?n:"http://"+n);var c=[];if(l){var u=(r=r.deleteContents()).insertNode(e("<A>"+o+"</A>")[0]);c.push(u)}else c=i.style.styleNodes(r,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});e.each(c,function(t,i){e(i).attr("href",n),a?e(i).attr("target","_blank"):e(i).removeAttr("target")});var d=Ie.createFromNodeBefore(A.head(c)).getStartPoint(),h=Ie.createFromNodeAfter(A.last(c)).getEndPoint();Ie.create(d.node,d.offset,h.node,h.offset).select()}}),this.color=this.wrapCommand(function(e){var t=e.foreColor,i=e.backColor;t&&document.execCommand("foreColor",!1,t),i&&document.execCommand("backColor",!1,i)}),this.foreColor=this.wrapCommand(function(e){document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,e)}),this.insertTable=this.wrapCommand(function(e){var t=e.split("x");i.createRange().deleteContents().insertNode(i.table.createTable(t[0],t[1],i.options))}),this.removeMedia=this.wrapCommand(function(){var t=e(i.restoreTarget()).parent();t.parent("figure").length?t.parent("figure").remove():t=e(i.restoreTarget()).detach(),i.context.triggerEvent("media.delete",t,i.$editable)}),this.floatMe=this.wrapCommand(function(t){var n=e(i.restoreTarget());n.toggleClass("note-float-left","left"===t),n.toggleClass("note-float-right","right"===t),n.css("float",t)}),this.resize=this.wrapCommand(function(t){e(i.restoreTarget()).css({width:100*t+"%",height:""})})}return t.prototype.initialize=function(){var e=this;this.$editable.on("keydown",function(t){if(t.keyCode===Oe.code.ENTER&&e.context.triggerEvent("enter",t),e.context.triggerEvent("keydown",t),t.isDefaultPrevented()||(e.options.shortcuts?e.handleKeyMap(t):e.preventDefaultEditableShortCuts(t)),e.isLimited(1,t))return!1}).on("keyup",function(t){e.context.triggerEvent("keyup",t)}).on("focus",function(t){e.context.triggerEvent("focus",t)}).on("blur",function(t){e.context.triggerEvent("blur",t)}).on("mousedown",function(t){e.context.triggerEvent("mousedown",t)}).on("mouseup",function(t){e.context.triggerEvent("mouseup",t)}).on("scroll",function(t){e.context.triggerEvent("scroll",t)}).on("paste",function(t){e.context.triggerEvent("paste",t)}),this.$editable.html(Ae.html(this.$note)||Ae.emptyPara),this.$editable.on(L.inputEventName,k.debounce(function(){e.context.triggerEvent("change",e.$editable.html())},10)),this.$editor.on("focusin",function(t){e.context.triggerEvent("focusin",t)}).on("focusout",function(t){e.context.triggerEvent("focusout",t)}),this.options.airMode||(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight)),this.history.recordUndo()},t.prototype.destroy=function(){this.$editable.off()},t.prototype.handleKeyMap=function(e){var t=this.options.keyMap[L.isMac?"mac":"pc"],i=[];e.metaKey&&i.push("CMD"),e.ctrlKey&&!e.altKey&&i.push("CTRL"),e.shiftKey&&i.push("SHIFT");var n=Oe.nameFromCode[e.keyCode];n&&i.push(n);var o=t[i.join("+")];o?!1!==this.context.invoke(o)&&e.preventDefault():Oe.isEdit(e.keyCode)&&this.afterCommand()},t.prototype.preventDefaultEditableShortCuts=function(e){(e.ctrlKey||e.metaKey)&&A.contains([66,73,85],e.keyCode)&&e.preventDefault()},t.prototype.isLimited=function(e,t){return e=e||0,(void 0===t||!(Oe.isMove(t.keyCode)||t.ctrlKey||t.metaKey||A.contains([Oe.code.BACKSPACE,Oe.code.DELETE],t.keyCode)))&&0<this.options.maxTextLength&&this.$editable.text().length+e>=this.options.maxTextLength},t.prototype.createRange=function(){return this.focus(),Ie.create(this.editable)},t.prototype.saveRange=function(e){this.lastRange=this.createRange(),e&&this.lastRange.collapse().select()},t.prototype.restoreRange=function(){this.lastRange&&(this.lastRange.select(),this.focus())},t.prototype.saveTarget=function(e){this.$editable.data("target",e)},t.prototype.clearTarget=function(){this.$editable.removeData("target")},t.prototype.restoreTarget=function(){return this.$editable.data("target")},t.prototype.currentStyle=function(){var e=Ie.create();return e&&(e=e.normalize()),e?this.style.current(e):this.style.fromNode(this.$editable)},t.prototype.styleFromNode=function(e){return this.style.fromNode(e)},t.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.undo(),this.context.triggerEvent("change",this.$editable.html())},t.prototype.commit=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.commit(),this.context.triggerEvent("change",this.$editable.html())},t.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.redo(),this.context.triggerEvent("change",this.$editable.html())},t.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.focus()},t.prototype.afterCommand=function(e){this.normalizeContent(),this.history.recordUndo(),e||this.context.triggerEvent("change",this.$editable.html())},t.prototype.tab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell())this.table.tab(e);else{if(0===this.options.tabSize)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(e,this.options.tabSize),this.afterCommand())}},t.prototype.untab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell())this.table.tab(e,!0);else if(0===this.options.tabSize)return!1},t.prototype.wrapCommand=function(e){return function(){this.beforeCommand(),e.apply(this,arguments),this.afterCommand()}},t.prototype.insertImage=function(t,i){var n,o=this;return(n=t,e.Deferred(function(t){var i=e("<img>");i.one("load",function(){i.off("error abort"),t.resolve(i)}).one("error abort",function(){i.off("load").detach(),t.reject(i)}).css({display:"none"}).appendTo(document.body).attr("src",n)}).promise()).then(function(e){o.beforeCommand(),"function"==typeof i?i(e):("string"==typeof i&&e.attr("data-filename",i),e.css("width",Math.min(o.$editable.width(),e.width()))),e.show(),Ie.create(o.editable).insertNode(e[0]),Ie.createFromNodeAfter(e[0]).select(),o.afterCommand()}).fail(function(e){o.context.triggerEvent("image.upload.error",e)})},t.prototype.insertImagesAsDataURL=function(t){var i=this;e.each(t,function(t,n){var o,a=n.name;i.options.maximumImageFileSize&&i.options.maximumImageFileSize<n.size?i.context.triggerEvent("image.upload.error",i.lang.image.maximumFileSizeError):(o=n,e.Deferred(function(t){e.extend(new FileReader,{onload:function(e){var i=e.target.result;t.resolve(i)},onerror:function(e){t.reject(e)}}).readAsDataURL(o)}).promise()).then(function(e){return i.insertImage(e,a)}).fail(function(){i.context.triggerEvent("image.upload.error")})})},t.prototype.getSelectedText=function(){var e=this.createRange();return e.isOnAnchor()&&(e=Ie.createFromNode(Ae.ancestor(e.sc,Ae.isAnchor))),e.toString()},t.prototype.onFormatBlock=function(t,i){if(t=L.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t),i&&i.length){var n=i[0].className||"";if(n){var o=this.createRange();e([o.sc,o.ec]).closest(t).addClass(n)}}},t.prototype.formatPara=function(){this.formatBlock("P")},t.prototype.fontStyling=function(t,i){var n=this.createRange();if(n){var o=this.style.styleNodes(n);if(e(o).css(t,i),n.isCollapsed()){var a=A.head(o);a&&!Ae.nodeLength(a)&&(a.innerHTML=Ae.ZERO_WIDTH_NBSP_CHAR,Ie.createFromNodeAfter(a.firstChild).select(),this.$editable.data("bogus",a))}}},t.prototype.unlink=function(){var e=this.createRange();if(e.isOnAnchor()){var t=Ae.ancestor(e.sc,Ae.isAnchor);(e=Ie.createFromNode(t)).select(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}},t.prototype.getLinkInfo=function(){var t=this.createRange().expand(Ae.isAnchor),i=e(A.head(t.nodes(Ae.isAnchor))),n={range:t,text:t.toString(),url:i.length?i.attr("href"):""};return i.length&&(n.isNewWindow="_blank"===i.attr("target")),n},t.prototype.addRow=function(e){var t=this.createRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.addRow(t,e),this.afterCommand())},t.prototype.addCol=function(e){var t=this.createRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.addCol(t,e),this.afterCommand())},t.prototype.deleteRow=function(){var e=this.createRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(e),this.afterCommand())},t.prototype.deleteCol=function(){var e=this.createRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(e),this.afterCommand())},t.prototype.deleteTable=function(){var e=this.createRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(e),this.afterCommand())},t.prototype.resizeTo=function(e,t,i){var n;if(i){var o=e.y/e.x,a=t.data("ratio");n={width:o<a?e.x:e.y/a,height:o<a?e.x*a:e.y}}else n={width:e.x,height:e.y};t.css(n)},t.prototype.hasFocus=function(){return this.$editable.is(":focus")},t.prototype.focus=function(){this.hasFocus()||this.$editable.focus()},t.prototype.isEmpty=function(){return Ae.isEmpty(this.$editable[0])||Ae.emptyPara===this.$editable.html()},t.prototype.empty=function(){this.context.invoke("code",Ae.emptyPara)},t.prototype.normalizeContent=function(){this.$editable[0].normalize()},t}(),He=function(){function e(e){this.context=e,this.$editable=e.layoutInfo.editable}return e.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))},e.prototype.pasteByEvent=function(e){var t=e.originalEvent.clipboardData;if(t&&t.items&&t.items.length){var i=1<t.items.length?t.items[1]:A.head(t.items);"file"===i.kind&&-1!==i.type.indexOf("image/")&&this.context.invoke("editor.insertImagesOrCallback",[i.getAsFile()]),this.context.invoke("editor.afterCommand")}},e}(),Ve=function(){function t(t){this.context=t,this.$eventListener=e(document),this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.options=t.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=e(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(this.$editor)}return t.prototype.initialize=function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(e){e.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()},t.prototype.attachDragAndDropEvent=function(){var t=this,i=e(),n=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(e){var o=t.context.invoke("codeview.isActivated"),a=0<t.$editor.width()&&0<t.$editor.height();o||i.length||!a||(t.$editor.addClass("dragover"),t.$dropzone.width(t.$editor.width()),t.$dropzone.height(t.$editor.height()),n.text(t.lang.image.dragImageHere)),i=i.add(e.target)},this.documentEventHandlers.onDragleave=function(e){(i=i.not(e.target)).length||t.$editor.removeClass("dragover")},this.documentEventHandlers.onDrop=function(){i=e(),t.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",function(){t.$dropzone.addClass("hover"),n.text(t.lang.image.dropImage)}).on("dragleave",function(){t.$dropzone.removeClass("hover"),n.text(t.lang.image.dragImageHere)}),this.$dropzone.on("drop",function(i){var n=i.originalEvent.dataTransfer;i.preventDefault(),n&&n.files&&n.files.length?(t.$editable.focus(),t.context.invoke("editor.insertImagesOrCallback",n.files)):e.each(n.types,function(i,o){var a=n.getData(o);-1<o.toLowerCase().indexOf("text")?t.context.invoke("editor.pasteHTML",a):e(a).each(function(e,i){t.context.invoke("editor.insertNode",i)})})}).on("dragover",!1)},t.prototype.destroy=function(){var e=this;Object.keys(this.documentEventHandlers).forEach(function(t){e.$eventListener.off(t.substr(2).toLowerCase(),e.documentEventHandlers[t])}),this.documentEventHandlers={}},t}();L.hasCodeMirror&&(L.isSupportAmd?require(["codemirror"],function(e){je=e}):je=window.CodeMirror);var qe=function(){function e(e){this.context=e,this.$editor=e.layoutInfo.editor,this.$editable=e.layoutInfo.editable,this.$codable=e.layoutInfo.codable,this.options=e.options}return e.prototype.sync=function(){this.isActivated()&&L.hasCodeMirror&&this.$codable.data("cmEditor").save()},e.prototype.isActivated=function(){return this.$editor.hasClass("codeview")},e.prototype.toggle=function(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")},e.prototype.activate=function(){var e=this;if(this.$codable.val(Ae.html(this.$editable,this.options.prettifyHtml)),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.focus(),L.hasCodeMirror){var t=je.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var i=new je.TernServer(this.options.codemirror.tern);t.ternServer=i,t.on("cursorActivity",function(e){i.updateArgHints(e)})}t.on("blur",function(i){e.context.triggerEvent("blur.codeview",t.getValue(),i)}),t.setSize(null,this.$editable.outerHeight()),this.$codable.data("cmEditor",t)}else this.$codable.on("blur",function(t){e.context.triggerEvent("blur.codeview",e.$codable.val(),t)})},e.prototype.deactivate=function(){if(L.hasCodeMirror){var e=this.$codable.data("cmEditor");this.$codable.val(e.getValue()),e.toTextArea()}var t=Ae.value(this.$codable,this.options.prettifyHtml)||Ae.emptyPara,i=this.$editable.html()!==t;this.$editable.html(t),this.$editable.height(this.options.height?this.$codable.height():"auto"),this.$editor.removeClass("codeview"),i&&this.context.triggerEvent("change",this.$editable.html(),this.$editable),this.$editable.focus(),this.context.invoke("toolbar.updateCodeview",!1)},e.prototype.destroy=function(){this.isActivated()&&this.deactivate()},e}(),Ye=function(){function t(t){this.$document=e(document),this.$statusbar=t.layoutInfo.statusbar,this.$editable=t.layoutInfo.editable,this.options=t.options}return t.prototype.initialize=function(){var e=this;this.options.airMode||this.options.disableResizeEditor?this.destroy():this.$statusbar.on("mousedown",function(t){t.preventDefault(),t.stopPropagation();var i=e.$editable.offset().top-e.$document.scrollTop(),n=function(t){var n=t.clientY-(i+24);n=0<e.options.minheight?Math.max(n,e.options.minheight):n,n=0<e.options.maxHeight?Math.min(n,e.options.maxHeight):n,e.$editable.height(n)};e.$document.on("mousemove",n).one("mouseup",function(){e.$document.off("mousemove",n)})})},t.prototype.destroy=function(){this.$statusbar.off(),this.$statusbar.addClass("locked")},t}(),We=function(){function t(t){var i=this;this.context=t,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.$window=e(window),this.$scrollbar=e("html, body"),this.onResize=function(){i.resizeTo({h:i.$window.height()-i.$toolbar.outerHeight()})}}return t.prototype.resizeTo=function(e){this.$editable.css("height",e.h),this.$codable.css("height",e.h),this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,e.h)},t.prototype.toggle=function(){this.$editor.toggleClass("fullscreen"),this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight")),this.$editable.css("maxHeight",""),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow","hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight")),this.$scrollbar.css("overflow","visible")),this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())},t.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")},t}(),Ge=function(){function t(t){var i=this;this.context=t,this.$document=e(document),this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":function(e,t){i.update(t.target)&&t.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){i.update()},"summernote.disable":function(){i.hide()},"summernote.codeview.toggled":function(){i.update()}}}return t.prototype.initialize=function(){var t=this;this.$handle=e(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",function(e){if(Ae.isControlSizing(e.target)){e.preventDefault(),e.stopPropagation();var i=t.$handle.find(".note-control-selection").data("target"),n=i.offset(),o=t.$document.scrollTop(),a=function(e){t.context.invoke("editor.resizeTo",{x:e.clientX-n.left,y:e.clientY-(n.top-o)},i,!e.shiftKey),t.update(i[0])};t.$document.on("mousemove",a).one("mouseup",function(e){e.preventDefault(),t.$document.off("mousemove",a),t.context.invoke("editor.afterCommand")}),i.data("ratio")||i.data("ratio",i.height()/i.width())}}),this.$handle.on("wheel",function(e){e.preventDefault(),t.update()})},t.prototype.destroy=function(){this.$handle.remove()},t.prototype.update=function(t){if(this.context.isDisabled())return!1;var i=Ae.isImg(t),n=this.$handle.find(".note-control-selection");if(this.context.invoke("imagePopover.update",t),i){var o=e(t),a=o.position(),r={left:a.left+parseInt(o.css("marginLeft"),10),top:a.top+parseInt(o.css("marginTop"),10)},s={w:o.outerWidth(!1),h:o.outerHeight(!1)};n.css({display:"block",left:r.left,top:r.top,width:s.w,height:s.h}).data("target",o);var l=new Image;l.src=o.attr("src");var c=s.w+"x"+s.h+" ("+this.lang.image.original+": "+l.width+"x"+l.height+")";n.find(".note-control-selection-info").text(c),this.context.invoke("editor.saveTarget",t)}else this.hide();return i},t.prototype.hide=function(){this.context.invoke("editor.clearTarget"),this.$handle.children().hide()},t}(),Ze=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,Ke=function(){function t(e){var t=this;this.context=e,this.events={"summernote.keyup":function(e,i){i.isDefaultPrevented()||t.handleKeyup(i)},"summernote.keydown":function(e,i){t.handleKeydown(i)}}}return t.prototype.initialize=function(){this.lastWordRange=null},t.prototype.destroy=function(){this.lastWordRange=null},t.prototype.replace=function(){if(this.lastWordRange){var t=this.lastWordRange.toString(),i=t.match(Ze);if(i&&(i[1]||i[2])){var n=i[1]?t:"http://"+t,o=e("<a />").html(t).attr("href",n)[0];this.context.options.linkTargetBlank&&e(o).attr("target","_blank"),this.lastWordRange.insertNode(o),this.lastWordRange=null,this.context.invoke("editor.focus")}}},t.prototype.handleKeydown=function(e){if(A.contains([Oe.code.ENTER,Oe.code.SPACE],e.keyCode)){var t=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=t}},t.prototype.handleKeyup=function(e){A.contains([Oe.code.ENTER,Oe.code.SPACE],e.keyCode)&&this.replace()},t}(),Qe=function(){function e(e){var t=this;this.$note=e.layoutInfo.note,this.events={"summernote.change":function(){t.$note.val(e.invoke("code"))}}}return e.prototype.shouldInitialize=function(){return Ae.isTextarea(this.$note[0])},e}(),Je=function(){function t(e){var t=this;this.context=e,this.$editingArea=e.layoutInfo.editingArea,this.options=e.options,this.events={"summernote.init summernote.change":function(){t.update()},"summernote.codeview.toggled":function(){t.update()}}}return t.prototype.shouldInitialize=function(){return!!this.options.placeholder},t.prototype.initialize=function(){var t=this;this.$placeholder=e('<div class="note-placeholder">'),this.$placeholder.on("click",function(){t.context.invoke("focus")}).html(this.options.placeholder).prependTo(this.$editingArea),this.update()},t.prototype.destroy=function(){this.$placeholder.remove()},t.prototype.update=function(){var e=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(e)},t}(),Xe=function(){function t(t){this.ui=e.summernote.ui,this.context=t,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.lang=this.options.langInfo,this.invertedKeyMap=k.invertObject(this.options.keyMap[L.isMac?"mac":"pc"])}return t.prototype.representShortcut=function(e){var t=this.invertedKeyMap[e];return this.options.shortcuts&&t?(L.isMac&&(t=t.replace("CMD","").replace("SHIFT",""))," ("+(t=t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"):""},t.prototype.button=function(e){return!this.options.tooltip&&e.tooltip&&delete e.tooltip,e.container=this.options.container,this.ui.button(e)},t.prototype.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}},t.prototype.destroy=function(){delete this.fontInstalledMap},t.prototype.isFontInstalled=function(e){return this.fontInstalledMap.hasOwnProperty(e)||(this.fontInstalledMap[e]=L.isFontInstalled(e)||A.contains(this.options.fontNamesIgnoreCheck,e)),this.fontInstalledMap[e]},t.prototype.isFontDeservedToAdd=function(t){return""!==(t=t.toLowerCase())&&this.isFontInstalled(t)&&-1===e.inArray(t,["sans-serif","serif","monospace","cursive","fantasy"])},t.prototype.colorPalette=function(t,i,n,o){var a=this;return this.ui.buttonGroup({className:"note-color "+t,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:i,click:function(t){var i=e(t.currentTarget);n&&o?a.context.invoke("editor.color",{backColor:i.attr("data-backColor"),foreColor:i.attr("data-foreColor")}):n?a.context.invoke("editor.color",{backColor:i.attr("data-backColor")}):o&&a.context.invoke("editor.color",{foreColor:i.attr("data-foreColor")})},callback:function(e){var t=e.find(".note-recent-color");n&&(t.css("background-color","#FFFF00"),e.attr("data-backColor","#FFFF00")),o||t.css("color","transparent")}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(n?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',this.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="backColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="backColorPicker" class="note-btn note-color-select-btn" value="#FFFF00" data-event="backColorPalette">',"  </div>",'  <div class="note-holder-custom" id="backColorPalette" data-event="backColor"/>',"</div>"].join(""):"")+(o?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',this.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="foreColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="foreColorPicker" class="note-btn note-color-select-btn" value="#000000" data-event="foreColorPalette">','  <div class="note-holder-custom" id="foreColorPalette" data-event="foreColor"/>',"</div>"].join(""):""),callback:function(t){t.find(".note-holder").each(function(t,i){var n=e(i);n.append(a.ui.palette({colors:a.options.colors,colorsName:a.options.colorsName,eventName:n.data("event"),container:a.options.container,tooltip:a.options.tooltip}).render())});var i=[["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]];t.find(".note-holder-custom").each(function(t,n){var o=e(n);o.append(a.ui.palette({colors:i,colorsName:i,eventName:o.data("event"),container:a.options.container,tooltip:a.options.tooltip}).render())}),t.find("input[type=color]").each(function(i,n){e(n).change(function(){var i=t.find("#"+e(this).data("event")).find(".note-color-btn").first(),n=this.value.toUpperCase();i.css("background-color",n).attr("aria-label",n).attr("data-value",n).attr("data-original-title",n),i.click()})})},click:function(i){i.stopPropagation();var n=e("."+t),o=e(i.target),r=o.data("event"),s=o.attr("data-value");if("openPalette"===r){var l=n.find("#"+s),c=e(n.find("#"+l.data("event")).find(".note-color-row")[0]),u=c.find(".note-color-btn").last().detach(),d=l.val();u.css("background-color",d).attr("aria-label",d).attr("data-value",d).attr("data-original-title",d),c.prepend(u),l.click()}else if(A.contains(["backColor","foreColor"],r)){var h="backColor"===r?"background-color":"color",p=o.closest(".note-color").find(".note-recent-color"),f=o.closest(".note-color").find(".note-current-color-button");p.css(h,s),f.attr("data-"+r,s),a.context.invoke("editor."+r,s)}}})]}).render()},t.prototype.addToolbarButtons=function(){var t=this;this.context.memo("button.style",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.magic),t.options),tooltip:t.lang.style.style,data:{toggle:"dropdown"}}),t.ui.dropdown({className:"dropdown-style",items:t.options.styleTags,title:t.lang.style.style,template:function(e){"string"==typeof e&&(e={tag:e,title:t.lang.style.hasOwnProperty(e)?t.lang.style[e]:e});var i=e.tag,n=e.title;return"<"+i+(e.style?' style="'+e.style+'" ':"")+(e.className?' class="'+e.className+'"':"")+">"+n+"</"+i+">"},click:t.context.createInvokeHandler("editor.formatBlock")})]).render()});for(var i=function(e,i){var o=n.options.styleTags[e];n.context.memo("button.style."+o,function(){return t.button({className:"note-btn-style-"+o,contents:'<div data-value="'+o+'">'+o.toUpperCase()+"</div>",tooltip:t.lang.style[o],click:t.context.createInvokeHandler("editor.formatBlock")}).render()})},n=this,o=0,a=this.options.styleTags.length;o<a;o++)i(o);this.context.memo("button.bold",function(){return t.button({className:"note-btn-bold",contents:t.ui.icon(t.options.icons.bold),tooltip:t.lang.font.bold+t.representShortcut("bold"),click:t.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()}),this.context.memo("button.italic",function(){return t.button({className:"note-btn-italic",contents:t.ui.icon(t.options.icons.italic),tooltip:t.lang.font.italic+t.representShortcut("italic"),click:t.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()}),this.context.memo("button.underline",function(){return t.button({className:"note-btn-underline",contents:t.ui.icon(t.options.icons.underline),tooltip:t.lang.font.underline+t.representShortcut("underline"),click:t.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()}),this.context.memo("button.clear",function(){return t.button({contents:t.ui.icon(t.options.icons.eraser),tooltip:t.lang.font.clear+t.representShortcut("removeFormat"),click:t.context.createInvokeHandler("editor.removeFormat")}).render()}),this.context.memo("button.strikethrough",function(){return t.button({className:"note-btn-strikethrough",contents:t.ui.icon(t.options.icons.strikethrough),tooltip:t.lang.font.strikethrough+t.representShortcut("strikethrough"),click:t.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()}),this.context.memo("button.superscript",function(){return t.button({className:"note-btn-superscript",contents:t.ui.icon(t.options.icons.superscript),tooltip:t.lang.font.superscript,click:t.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()}),this.context.memo("button.subscript",function(){return t.button({className:"note-btn-subscript",contents:t.ui.icon(t.options.icons.subscript),tooltip:t.lang.font.subscript,click:t.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()}),this.context.memo("button.fontname",function(){var i=t.context.invoke("editor.currentStyle");return e.each(i["font-family"].split(","),function(i,n){n=n.trim().replace(/['"]+/g,""),t.isFontDeservedToAdd(n)&&-1===e.inArray(n,t.options.fontNames)&&t.options.fontNames.push(n)}),t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontname"/>',t.options),tooltip:t.lang.font.name,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:t.options.icons.menuCheck,items:t.options.fontNames.filter(t.isFontInstalled.bind(t)),title:t.lang.font.name,template:function(e){return"<span style=\"font-family: '"+e+"'\">"+e+"</span>"},click:t.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()}),this.context.memo("button.fontsize",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',t.options),tooltip:t.lang.font.size,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:t.options.icons.menuCheck,items:t.options.fontSizes,title:t.lang.font.size,click:t.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()}),this.context.memo("button.color",function(){return t.colorPalette("note-color-all",t.lang.color.recent,!0,!0)}),this.context.memo("button.forecolor",function(){return t.colorPalette("note-color-fore",t.lang.color.foreground,!1,!0)}),this.context.memo("button.backcolor",function(){return t.colorPalette("note-color-back",t.lang.color.background,!0,!1)}),this.context.memo("button.ul",function(){return t.button({contents:t.ui.icon(t.options.icons.unorderedlist),tooltip:t.lang.lists.unordered+t.representShortcut("insertUnorderedList"),click:t.context.createInvokeHandler("editor.insertUnorderedList")}).render()}),this.context.memo("button.ol",function(){return t.button({contents:t.ui.icon(t.options.icons.orderedlist),tooltip:t.lang.lists.ordered+t.representShortcut("insertOrderedList"),click:t.context.createInvokeHandler("editor.insertOrderedList")}).render()});var r=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),s=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),l=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),c=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),u=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),d=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",k.invoke(r,"render")),this.context.memo("button.justifyCenter",k.invoke(s,"render")),this.context.memo("button.justifyRight",k.invoke(l,"render")),this.context.memo("button.justifyFull",k.invoke(c,"render")),this.context.memo("button.outdent",k.invoke(u,"render")),this.context.memo("button.indent",k.invoke(d,"render")),this.context.memo("button.paragraph",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.alignLeft),t.options),tooltip:t.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),t.ui.dropdown([t.ui.buttonGroup({className:"note-align",children:[r,s,l,c]}),t.ui.buttonGroup({className:"note-list",children:[u,d]})])]).render()}),this.context.memo("button.height",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.textHeight),t.options),tooltip:t.lang.font.height,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({items:t.options.lineHeights,checkClassName:t.options.icons.menuCheck,className:"dropdown-line-height",title:t.lang.font.height,click:t.context.createInvokeHandler("editor.lineHeight")})]).render()}),this.context.memo("button.table",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.table),t.options),tooltip:t.lang.table.table,data:{toggle:"dropdown"}}),t.ui.dropdown({title:t.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(e){e.find(".note-dimension-picker-mousecatcher").css({width:t.options.insertTableMaxSize.col+"em",height:t.options.insertTableMaxSize.row+"em"}).mousedown(t.context.createInvokeHandler("editor.insertTable")).on("mousemove",t.tableMoveHandler.bind(t))}}).render()}),this.context.memo("button.link",function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.link+t.representShortcut("linkDialog.show"),click:t.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.picture",function(){return t.button({contents:t.ui.icon(t.options.icons.picture),tooltip:t.lang.image.image,click:t.context.createInvokeHandler("imageDialog.show")}).render()}),this.context.memo("button.video",function(){return t.button({contents:t.ui.icon(t.options.icons.video),tooltip:t.lang.video.video,click:t.context.createInvokeHandler("videoDialog.show")}).render()}),this.context.memo("button.hr",function(){return t.button({contents:t.ui.icon(t.options.icons.minus),tooltip:t.lang.hr.insert+t.representShortcut("insertHorizontalRule"),click:t.context.createInvokeHandler("editor.insertHorizontalRule")}).render()}),this.context.memo("button.fullscreen",function(){return t.button({className:"btn-fullscreen",contents:t.ui.icon(t.options.icons.arrowsAlt),tooltip:t.lang.options.fullscreen,click:t.context.createInvokeHandler("fullscreen.toggle")}).render()}),this.context.memo("button.codeview",function(){return t.button({className:"btn-codeview",contents:t.ui.icon(t.options.icons.code),tooltip:t.lang.options.codeview,click:t.context.createInvokeHandler("codeview.toggle")}).render()}),this.context.memo("button.redo",function(){return t.button({contents:t.ui.icon(t.options.icons.redo),tooltip:t.lang.history.redo+t.representShortcut("redo"),click:t.context.createInvokeHandler("editor.redo")}).render()}),this.context.memo("button.undo",function(){return t.button({contents:t.ui.icon(t.options.icons.undo),tooltip:t.lang.history.undo+t.representShortcut("undo"),click:t.context.createInvokeHandler("editor.undo")}).render()}),this.context.memo("button.help",function(){return t.button({contents:t.ui.icon(t.options.icons.question),tooltip:t.lang.options.help,click:t.context.createInvokeHandler("helpDialog.show")}).render()})},t.prototype.addImagePopoverButtons=function(){var e=this;this.context.memo("button.imageSize100",function(){return e.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:e.lang.image.resizeFull,click:e.context.createInvokeHandler("editor.resize","1")}).render()}),this.context.memo("button.imageSize50",function(){return e.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:e.lang.image.resizeHalf,click:e.context.createInvokeHandler("editor.resize","0.5")}).render()}),this.context.memo("button.imageSize25",function(){return e.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:e.lang.image.resizeQuarter,click:e.context.createInvokeHandler("editor.resize","0.25")}).render()}),this.context.memo("button.floatLeft",function(){return e.button({contents:e.ui.icon(e.options.icons.alignLeft),tooltip:e.lang.image.floatLeft,click:e.context.createInvokeHandler("editor.floatMe","left")}).render()}),this.context.memo("button.floatRight",function(){return e.button({contents:e.ui.icon(e.options.icons.alignRight),tooltip:e.lang.image.floatRight,click:e.context.createInvokeHandler("editor.floatMe","right")}).render()}),this.context.memo("button.floatNone",function(){return e.button({contents:e.ui.icon(e.options.icons.alignJustify),tooltip:e.lang.image.floatNone,click:e.context.createInvokeHandler("editor.floatMe","none")}).render()}),this.context.memo("button.removeMedia",function(){return e.button({contents:e.ui.icon(e.options.icons.trash),tooltip:e.lang.image.remove,click:e.context.createInvokeHandler("editor.removeMedia")}).render()})},t.prototype.addLinkPopoverButtons=function(){var e=this;this.context.memo("button.linkDialogShow",function(){return e.button({contents:e.ui.icon(e.options.icons.link),tooltip:e.lang.link.edit,click:e.context.createInvokeHandler("linkDialog.show")}).render()}),this.context.memo("button.unlink",function(){return e.button({contents:e.ui.icon(e.options.icons.unlink),tooltip:e.lang.link.unlink,click:e.context.createInvokeHandler("editor.unlink")}).render()})},t.prototype.addTablePopoverButtons=function(){var e=this;this.context.memo("button.addRowUp",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowAbove),tooltip:e.lang.table.addRowAbove,click:e.context.createInvokeHandler("editor.addRow","top")}).render()}),this.context.memo("button.addRowDown",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowBelow),tooltip:e.lang.table.addRowBelow,click:e.context.createInvokeHandler("editor.addRow","bottom")}).render()}),this.context.memo("button.addColLeft",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colBefore),tooltip:e.lang.table.addColLeft,click:e.context.createInvokeHandler("editor.addCol","left")}).render()}),this.context.memo("button.addColRight",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colAfter),tooltip:e.lang.table.addColRight,click:e.context.createInvokeHandler("editor.addCol","right")}).render()}),this.context.memo("button.deleteRow",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowRemove),tooltip:e.lang.table.delRow,click:e.context.createInvokeHandler("editor.deleteRow")}).render()}),this.context.memo("button.deleteCol",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colRemove),tooltip:e.lang.table.delCol,click:e.context.createInvokeHandler("editor.deleteCol")}).render()}),this.context.memo("button.deleteTable",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.trash),tooltip:e.lang.table.delTable,click:e.context.createInvokeHandler("editor.deleteTable")}).render()})},t.prototype.build=function(t,i){for(var n=0,o=i.length;n<o;n++){for(var a=i[n],r=e.isArray(a)?a[0]:a,s=e.isArray(a)?1===a.length?[a[0]]:a[1]:[a],l=this.ui.buttonGroup({className:"note-"+r}).render(),c=0,u=s.length;c<u;c++){var d=this.context.memo("button."+s[c]);d&&l.append("function"==typeof d?d(this.context):d)}l.appendTo(t)}},t.prototype.updateCurrentStyle=function(t){var i=this,n=t||this.$toolbar,o=this.context.invoke("editor.currentStyle");if(this.updateBtnStates(n,{".note-btn-bold":function(){return"bold"===o["font-bold"]},".note-btn-italic":function(){return"italic"===o["font-italic"]},".note-btn-underline":function(){return"underline"===o["font-underline"]},".note-btn-subscript":function(){return"subscript"===o["font-subscript"]},".note-btn-superscript":function(){return"superscript"===o["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===o["font-strikethrough"]}}),o["font-family"]){var a=o["font-family"].split(",").map(function(e){return e.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),r=A.find(a,this.isFontInstalled.bind(this));n.find(".dropdown-fontname a").each(function(t,i){var n=e(i),o=n.data("value")+""==r+"";n.toggleClass("checked",o)}),n.find(".note-current-fontname").text(r).css("font-family",r)}if(o["font-size"]){var s=o["font-size"];n.find(".dropdown-fontsize a").each(function(t,i){var n=e(i),o=n.data("value")+""==s+"";n.toggleClass("checked",o)}),n.find(".note-current-fontsize").text(s)}if(o["line-height"]){var l=o["line-height"];n.find(".dropdown-line-height li a").each(function(t,n){var o=e(n).data("value")+""==l+"";i.className=o?"checked":""})}},t.prototype.updateBtnStates=function(t,i){var n=this;e.each(i,function(e,i){n.ui.toggleBtnActive(t.find(e),i())})},t.prototype.tableMoveHandler=function(t){var i,n=e(t.target.parentNode),o=n.next(),a=n.find(".note-dimension-picker-mousecatcher"),r=n.find(".note-dimension-picker-highlighted"),s=n.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var l=e(t.target).offset();i={x:t.pageX-l.left,y:t.pageY-l.top}}else i={x:t.offsetX,y:t.offsetY};var c=Math.ceil(i.x/18)||1,u=Math.ceil(i.y/18)||1;r.css({width:c+"em",height:u+"em"}),a.data("value",c+"x"+u),3<c&&c<this.options.insertTableMaxSize.col&&s.css({width:c+1+"em"}),3<u&&u<this.options.insertTableMaxSize.row&&s.css({height:u+1+"em"}),o.html(c+" x "+u)},t}(),et=function(){function t(t){this.context=t,this.$window=e(window),this.$document=e(document),this.ui=e.summernote.ui,this.$note=t.layoutInfo.note,this.$editor=t.layoutInfo.editor,this.$toolbar=t.layoutInfo.toolbar,this.options=t.options,this.followScroll=this.followScroll.bind(this)}return t.prototype.shouldInitialize=function(){return!this.options.airMode},t.prototype.initialize=function(){var e=this;this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){e.context.invoke("buttons.updateCurrentStyle")}),this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar&&this.$window.on("scroll resize",this.followScroll)},t.prototype.destroy=function(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)},t.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen"))return!1;var t=this.$toolbar.parent(".note-toolbar-wrapper"),i=this.$editor.outerHeight(),n=this.$editor.width(),o=this.$toolbar.height();t.css({height:o});var a=0;this.options.otherStaticBar&&(a=e(this.options.otherStaticBar).outerHeight());var r=this.$document.scrollTop(),s=this.$editor.offset().top;s-a<r&&r<s+i-a-o?this.$toolbar.css({position:"fixed",top:a,width:n}):this.$toolbar.css({position:"relative",top:0,width:"100%"})},t.prototype.changeContainer=function(e){e?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer)},t.prototype.updateFullscreen=function(e){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),e),this.changeContainer(e)},t.prototype.updateCodeview=function(e){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),e),e?this.deactivate():this.activate()},t.prototype.activate=function(e){var t=this.$toolbar.find("button");e||(t=t.not(".btn-codeview")),this.ui.toggleBtn(t,!0)},t.prototype.deactivate=function(e){var t=this.$toolbar.find("button");e||(t=t.not(".btn-codeview")),this.ui.toggleBtn(t,!1)},t}(),tt=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo,t.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}return t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,i=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control note-input" type="text" />',"</div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"</div>",this.options.disableLinkTarget?"":e("<div/>").append(this.ui.checkbox({className:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html()].join(""),n='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-link-btn" value="'+this.lang.link.insert+'" disabled>';this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:i,footer:n}).render().appendTo(t)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){e.keyCode===Oe.code.ENTER&&(e.preventDefault(),t.trigger("click"))})},t.prototype.toggleLinkBtn=function(e,t,i){this.ui.toggleBtn(e,t.val()&&i.val())},t.prototype.showLinkDialog=function(t){var i=this;return e.Deferred(function(e){var n=i.$dialog.find(".note-link-text"),o=i.$dialog.find(".note-link-url"),a=i.$dialog.find(".note-link-btn"),r=i.$dialog.find(".sn-checkbox-open-in-new-window input[type=checkbox]");i.ui.onDialogShown(i.$dialog,function(){i.context.triggerEvent("dialog.shown"),t.url||(t.url=t.text),n.val(t.text);var s=function(){i.toggleLinkBtn(a,n,o),t.text=n.val()};n.on("input",s).on("paste",function(){setTimeout(s,0)});var l=function(){i.toggleLinkBtn(a,n,o),t.text||n.val(o.val())};o.on("input",l).on("paste",function(){setTimeout(l,0)}).val(t.url),L.isSupportTouch||o.trigger("focus"),i.toggleLinkBtn(a,n,o),i.bindEnterKey(o,a),i.bindEnterKey(n,a);var c=void 0!==t.isNewWindow?t.isNewWindow:i.context.options.linkTargetBlank;r.prop("checked",c),a.one("click",function(a){a.preventDefault(),e.resolve({range:t.range,url:o.val(),text:n.val(),isNewWindow:r.is(":checked")}),i.ui.hideDialog(i.$dialog)})}),i.ui.onDialogHidden(i.$dialog,function(){n.off("input paste keypress"),o.off("input paste keypress"),a.off("click"),"pending"===e.state()&&e.reject()}),i.ui.showDialog(i.$dialog)}).promise()},t.prototype.show=function(){var e=this,t=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange"),this.showLinkDialog(t).then(function(t){e.context.invoke("editor.restoreRange"),e.context.invoke("editor.createLink",t)}).fail(function(){e.context.invoke("editor.restoreRange")})},t}(),it=function(){function t(t){var i=this;this.context=t,this.ui=e.summernote.ui,this.options=t.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){i.update()},"summernote.disable summernote.dialog.shown":function(){i.hide()}}}return t.prototype.shouldInitialize=function(){return!A.isEmpty(this.options.popover.link)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(e){e.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",e,this.options.popover.link)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(){if(this.context.invoke("editor.hasFocus")){var t=this.context.invoke("editor.createRange");if(t.isCollapsed()&&t.isOnAnchor()){var i=Ae.ancestor(t.sc,Ae.isAnchor),n=e(i).attr("href");this.$popover.find("a").attr("href",n).html(n);var o=Ae.posFromPlaceholder(i);this.$popover.css({display:"block",left:o.left,top:o.top})}else this.hide()}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),nt=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor,t="";if(this.options.maximumImageFileSize){var i=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),n=1*(this.options.maximumImageFileSize/Math.pow(1024,i)).toFixed(2)+" "+" KMGTP"[i]+"B";t="<small>"+this.lang.image.maximumFileSize+" : "+n+"</small>"}var o=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input class="note-image-input note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',t,"</div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"</div>"].join(""),a='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-image-btn" value="'+this.lang.image.insert+'" disabled>';this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:o,footer:a}).render().appendTo(e)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){e.keyCode===Oe.code.ENTER&&(e.preventDefault(),t.trigger("click"))})},t.prototype.show=function(){var e=this;this.context.invoke("editor.saveRange"),this.showImageDialog().then(function(t){e.ui.hideDialog(e.$dialog),e.context.invoke("editor.restoreRange"),"string"==typeof t?e.options.callbacks.onImageLinkInsert?e.context.triggerEvent("image.link.insert",t):e.context.invoke("editor.insertImage",t):e.options.callbacks.onImageUpload?e.context.triggerEvent("image.upload",t):e.context.invoke("editor.insertImagesAsDataURL",t)}).fail(function(){e.context.invoke("editor.restoreRange")})},t.prototype.showImageDialog=function(){var t=this;return e.Deferred(function(e){var i=t.$dialog.find(".note-image-input"),n=t.$dialog.find(".note-image-url"),o=t.$dialog.find(".note-image-btn");t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown"),i.replaceWith(i.clone().on("change",function(t){e.resolve(t.target.files||t.target.value)}).val("")),o.click(function(t){t.preventDefault(),e.resolve(n.val())}),n.on("keyup paste",function(){var e=n.val();t.ui.toggleBtn(o,e)}).val(""),L.isSupportTouch||n.trigger("focus"),t.bindEnterKey(n,o)}),t.ui.onDialogHidden(t.$dialog,function(){i.off("change"),n.off("keyup paste keypress"),o.off("click"),"pending"===e.state()&&e.reject()}),t.ui.showDialog(t.$dialog)})},t}(),ot=function(){function t(t){var i=this;this.context=t,this.ui=e.summernote.ui,this.editable=t.layoutInfo.editable[0],this.options=t.options,this.events={"summernote.disable":function(){i.hide()}}}return t.prototype.shouldInitialize=function(){return!A.isEmpty(this.options.popover.image)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",e,this.options.popover.image)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(e){if(Ae.isImg(e)){var t=Ae.posFromPlaceholder(e),i=Ae.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?event.pageX-20:t.left,top:this.options.popatmouse?event.pageY:Math.min(t.top,i.top)})}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),at=function(){function t(t){var i=this;this.context=t,this.ui=e.summernote.ui,this.options=t.options,this.events={"summernote.mousedown":function(e,t){i.update(t.target)},"summernote.keyup summernote.scroll summernote.change":function(){i.update()},"summernote.disable":function(){i.hide()}}}return t.prototype.shouldInitialize=function(){return!A.isEmpty(this.options.popover.table)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",e,this.options.popover.table),L.isFF&&document.execCommand("enableInlineTableEditing",!1,!1)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(e){if(this.context.isDisabled())return!1;var t=Ae.isCell(e);if(t){var i=Ae.posFromPlaceholder(e);this.$popover.css({display:"block",left:i.left,top:i.top})}else this.hide();return t},t.prototype.hide=function(){this.$popover.hide()},t}(),rt=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor,t=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"</div>"].join(""),i='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-video-btn" value="'+this.lang.video.insert+'" disabled>';this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:t,footer:i}).render().appendTo(e)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){e.keyCode===Oe.code.ENTER&&(e.preventDefault(),t.trigger("click"))})},t.prototype.createVideoNode=function(t){var i,n=t.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/),o=t.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),a=t.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),r=t.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/),s=t.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),l=t.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),c=t.match(/\/\/v\.qq\.com.*?vid=(.+)/),u=t.match(/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/),d=t.match(/^.+.(mp4|m4v)$/),h=t.match(/^.+.(ogg|ogv)$/),p=t.match(/^.+.(webm)$/);if(n&&11===n[1].length){var f=n[1],m=0;if(void 0!==n[2]){var v=n[2].match(/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/);if(v)for(var g=[3600,60,1],b=0,y=g.length;b<y;b++)m+=void 0!==v[b+1]?g[b]*parseInt(v[b+1],10):0}i=e("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+f+(0<m?"?start="+m:"")).attr("width","640").attr("height","360")}else if(o&&o[0].length)i=e("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+o[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(a&&a[0].length)i=e("<iframe>").attr("frameborder",0).attr("src",a[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(r&&r[3].length)i=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+r[3]).attr("width","640").attr("height","360");else if(s&&s[2].length)i=e("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+s[2]).attr("width","640").attr("height","360");else if(l&&l[1].length)i=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+l[1]);else if(c&&c[1].length||u&&u[2].length){var w=c&&c[1].length?c[1]:u[2];i=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+w+"&amp;auto=0")}else{if(!(d||h||p))return!1;i=e("<video controls>").attr("src",t).attr("width","640").attr("height","360")}return i.addClass("note-video-clip"),i[0]},t.prototype.show=function(){var e=this,t=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange"),this.showVideoDialog(t).then(function(t){e.ui.hideDialog(e.$dialog),e.context.invoke("editor.restoreRange");var i=e.createVideoNode(t);i&&e.context.invoke("editor.insertNode",i)}).fail(function(){e.context.invoke("editor.restoreRange")})},t.prototype.showVideoDialog=function(t){var i=this;return e.Deferred(function(e){var n=i.$dialog.find(".note-video-url"),o=i.$dialog.find(".note-video-btn");i.ui.onDialogShown(i.$dialog,function(){i.context.triggerEvent("dialog.shown"),n.val(t).on("input",function(){i.ui.toggleBtn(o,n.val())}),L.isSupportTouch||n.trigger("focus"),o.click(function(t){t.preventDefault(),e.resolve(n.val())}),i.bindEnterKey(n,o)}),i.ui.onDialogHidden(i.$dialog,function(){n.off("input"),o.off("click"),"pending"===e.state()&&e.reject()}),i.ui.showDialog(i.$dialog)})},t}(),st=function(){function t(t){this.context=t,this.ui=e.summernote.ui,this.$body=e(document.body),this.$editor=t.layoutInfo.editor,this.options=t.options,this.lang=this.options.langInfo}return t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor,t=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.11</a>  ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a>  ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:t,callback:function(e){e.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(e)},t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},t.prototype.createShortcutList=function(){var t=this,i=this.options.keyMap[L.isMac?"mac":"pc"];return Object.keys(i).map(function(n){var o=i[n],a=e('<div><div class="help-list-item"/></div>');return a.append(e("<label><kbd>"+n+"</kdb></label>").css({width:180,"margin-right":10})).append(e("<span/>").html(t.context.memo("help."+o)||o)),a.html()}).join("")},t.prototype.showHelpDialog=function(){var t=this;return e.Deferred(function(e){t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown"),e.resolve()}),t.ui.showDialog(t.$dialog)}).promise()},t.prototype.show=function(){var e=this;this.context.invoke("editor.saveRange"),this.showHelpDialog().then(function(){e.context.invoke("editor.restoreRange")})},t}(),lt=function(){function t(t){var i=this;this.context=t,this.ui=e.summernote.ui,this.options=t.options,this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){i.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){i.hide()},"summernote.focusout":function(e,t){L.isFF||t.relatedTarget&&Ae.ancestor(t.relatedTarget,k.eq(i.$popover[0]))||i.hide()}}}return t.prototype.shouldInitialize=function(){return this.options.airMode&&!A.isEmpty(this.options.popover.air)},t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content");this.context.invoke("buttons.build",e,this.options.popover.air)},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.update=function(){var e=this.context.invoke("editor.currentStyle");if(e.range&&!e.range.isCollapsed()){var t=A.last(e.range.getClientRects());if(t){var i=k.rect2bnd(t);this.$popover.css({display:"block",left:Math.max(i.left+i.width/2,0)-20,top:i.top+i.height}),this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}else this.hide()},t.prototype.hide=function(){this.$popover.hide()},t}(),ct=function(){function t(t){var i=this;this.context=t,this.ui=e.summernote.ui,this.$editable=t.layoutInfo.editable,this.options=t.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=e.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":function(e,t){t.isDefaultPrevented()||i.handleKeyup(t)},"summernote.keydown":function(e,t){i.handleKeydown(t)},"summernote.disable summernote.dialog.shown":function(){i.hide()}}}return t.prototype.shouldInitialize=function(){return 0<this.hints.length},t.prototype.initialize=function(){var t=this;this.lastWordRange=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",function(i){t.$content.find(".active").removeClass("active"),e(i.currentTarget).addClass("active"),t.replace()})},t.prototype.destroy=function(){this.$popover.remove()},t.prototype.selectItem=function(e){this.$content.find(".active").removeClass("active"),e.addClass("active"),this.$content[0].scrollTop=e[0].offsetTop-this.$content.innerHeight()/2},t.prototype.moveDown=function(){var e=this.$content.find(".note-hint-item.active"),t=e.next();if(t.length)this.selectItem(t);else{var i=e.parent().next();i.length||(i=this.$content.find(".note-hint-group").first()),this.selectItem(i.find(".note-hint-item").first())}},t.prototype.moveUp=function(){var e=this.$content.find(".note-hint-item.active"),t=e.prev();if(t.length)this.selectItem(t);else{var i=e.parent().prev();i.length||(i=this.$content.find(".note-hint-group").last()),this.selectItem(i.find(".note-hint-item").last())}},t.prototype.replace=function(){var e=this.$content.find(".note-hint-item.active");if(e.length){var t=this.nodeFromItem(e);this.lastWordRange.insertNode(t),Ie.createFromNode(t).collapse().select(),this.lastWordRange=null,this.hide(),this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]),this.context.invoke("editor.focus")}},t.prototype.nodeFromItem=function(e){var t=this.hints[e.data("index")],i=e.data("item"),n=t.content?t.content(i):i;return"string"==typeof n&&(n=Ae.createText(n)),n},t.prototype.createItemTemplates=function(t,i){var n=this.hints[t];return i.map(function(i,o){var a=e('<div class="note-hint-item"/>');return a.append(n.template?n.template(i):i+""),a.data({index:t,item:i}),a})},t.prototype.handleKeydown=function(e){this.$popover.is(":visible")&&(e.keyCode===Oe.code.ENTER?(e.preventDefault(),this.replace()):e.keyCode===Oe.code.UP?(e.preventDefault(),this.moveUp()):e.keyCode===Oe.code.DOWN&&(e.preventDefault(),this.moveDown()))},t.prototype.searchKeyword=function(e,t,i){var n=this.hints[e];if(n&&n.match.test(t)&&n.search){var o=n.match.exec(t);n.search(o[1],i)}else i()},t.prototype.createGroup=function(t,i){var n=this,o=e('<div class="note-hint-group note-hint-group-'+t+'"/>');return this.searchKeyword(t,i,function(e){(e=e||[]).length&&(o.html(n.createItemTemplates(t,e)),n.show())}),o},t.prototype.handleKeyup=function(e){var t=this;if(!A.contains([Oe.code.ENTER,Oe.code.UP,Oe.code.DOWN],e.keyCode)){var i=this.context.invoke("editor.createRange").getWordRange(),n=i.toString();if(this.hints.length&&n){this.$content.empty();var o=k.rect2bnd(A.last(i.getClientRects()));o&&(this.$popover.hide(),this.lastWordRange=i,this.hints.forEach(function(e,i){e.match.test(n)&&t.createGroup(i,n).appendTo(t.$content)}),this.$content.find(".note-hint-item:first").addClass("active"),"top"===this.direction?this.$popover.css({left:o.left,top:o.top-this.$popover.outerHeight()-5}):this.$popover.css({left:o.left,top:o.top+o.height+5}))}else this.hide()}},t.prototype.show=function(){this.$popover.show()},t.prototype.hide=function(){this.$popover.hide()},t}(),ut=function(){function t(t,i){this.ui=e.summernote.ui,this.$note=t,this.memos={},this.modules={},this.layoutInfo={},this.options=i,this.initialize()}return t.prototype.initialize=function(){return this.layoutInfo=this.ui.createLayout(this.$note,this.options),this._initialize(),this.$note.hide(),this},t.prototype.destroy=function(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)},t.prototype.reset=function(){var e=this.isDisabled();this.code(Ae.emptyPara),this._destroy(),this._initialize(),e&&this.disable()},t.prototype._initialize=function(){var t=this,i=e.extend({},this.options.buttons);Object.keys(i).forEach(function(e){t.memo("button."+e,i[e])});var n=e.extend({},this.options.modules,e.summernote.plugins||{});Object.keys(n).forEach(function(e){t.module(e,n[e],!0)}),Object.keys(this.modules).forEach(function(e){t.initializeModule(e)})},t.prototype._destroy=function(){var e=this;Object.keys(this.modules).reverse().forEach(function(t){e.removeModule(t)}),Object.keys(this.memos).forEach(function(t){e.removeMemo(t)}),this.triggerEvent("destroy",this)},t.prototype.code=function(e){var t=this.invoke("codeview.isActivated");if(void 0===e)return this.invoke("codeview.sync"),t?this.layoutInfo.codable.val():this.layoutInfo.editable.html();t?this.layoutInfo.codable.val(e):this.layoutInfo.editable.html(e),this.$note.val(e),this.triggerEvent("change",e)},t.prototype.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},t.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1)},t.prototype.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)},t.prototype.triggerEvent=function(){var e=A.head(arguments),t=A.tail(A.from(arguments)),i=this.options.callbacks[k.namespaceToCamel(e,"on")];i&&i.apply(this.$note[0],t),this.$note.trigger("summernote."+e,t)},t.prototype.initializeModule=function(e){var t=this.modules[e];t.shouldInitialize=t.shouldInitialize||k.ok,t.shouldInitialize()&&(t.initialize&&t.initialize(),t.events&&Ae.attachEvents(this.$note,t.events))},t.prototype.module=function(e,t,i){if(1===arguments.length)return this.modules[e];this.modules[e]=new t(this),i||this.initializeModule(e)},t.prototype.removeModule=function(e){var t=this.modules[e];t.shouldInitialize()&&(t.events&&Ae.detachEvents(this.$note,t.events),t.destroy&&t.destroy()),delete this.modules[e]},t.prototype.memo=function(e,t){if(1===arguments.length)return this.memos[e];this.memos[e]=t},t.prototype.removeMemo=function(e){this.memos[e]&&this.memos[e].destroy&&this.memos[e].destroy(),delete this.memos[e]},t.prototype.createInvokeHandlerAndUpdateState=function(e,t){var i=this;return function(n){i.createInvokeHandler(e,t)(n),i.invoke("buttons.updateCurrentStyle")}},t.prototype.createInvokeHandler=function(t,i){var n=this;return function(o){o.preventDefault();var a=e(o.target);n.invoke(t,i||a.closest("[data-value]").data("value"),a)}},t.prototype.invoke=function(){var e=A.head(arguments),t=A.tail(A.from(arguments)),i=e.split("."),n=1<i.length,o=n&&A.head(i),a=n?A.last(i):A.head(i),r=this.modules[o||"editor"];return!o&&this[a]?this[a].apply(this,t):r&&r[a]&&r.shouldInitialize()?r[a].apply(r,t):void 0},t}();e.fn.extend({summernote:function(){var t=e.type(A.head(arguments)),i="string"===t,n="object"===t,o=e.extend({},e.summernote.options,n?A.head(arguments):{});o.langInfo=e.extend(!0,{},e.summernote.lang["en-US"],e.summernote.lang[o.lang]),o.icons=e.extend(!0,{},e.summernote.options.icons,o.icons),o.tooltip="auto"===o.tooltip?!L.isSupportTouch:o.tooltip,this.each(function(t,i){var n=e(i);if(!n.data("summernote")){var a=new ut(n,o);n.data("summernote",a),n.data("summernote").triggerEvent("init",a.layoutInfo)}});var a=this.first();if(a.length){var r=a.data("summernote");if(i)return r.invoke.apply(r,A.from(arguments));o.focus&&r.invoke("editor.focus")}return this}}),e.summernote=e.extend(e.summernote,{version:"0.8.11",ui:y,dom:Ae,range:Ie,plugins:{},options:{modules:{editor:Be,clipboard:He,dropzone:Ve,codeview:qe,statusbar:Ye,fullscreen:We,handle:Ge,hintPopover:ct,autoLink:Ke,autoSync:Qe,placeholder:Je,buttons:Xe,toolbar:et,linkDialog:tt,linkPopover:it,imageDialog:nt,imagePopover:ot,tablePopover:at,videoDialog:rt,helpDialog:st,airPopover:lt},buttons:{},lang:"en-US",followingToolbar:!0,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,blockquoteBreakingLevel:2,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onBlurCodeview:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null,onImageLinkInsert:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})}),("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)})(["jquery"],function(e){return function(){function t(t,i){return t||(t=r()),(l=e("#"+t.containerId)).length?l:(i&&(l=function(t){return(l=e("<div/>").attr("id",t.containerId).addClass(t.positionClass)).appendTo(e(t.target)),l}(t)),l)}function i(t){for(var i=l.children(),o=i.length-1;o>=0;o--)n(e(i[o]),t)}function n(t,i,n){var o=!(!n||!n.force)&&n.force;return!(!t||!o&&0!==e(":focus",t).length||(t[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){s(t)}}),0))}function o(e){c&&c(e)}function a(i){function n(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function a(t){var i=t&&!1!==f.closeMethod?f.closeMethod:f.hideMethod,n=t&&!1!==f.closeDuration?f.closeDuration:f.hideDuration,a=t&&!1!==f.closeEasing?f.closeEasing:f.hideEasing;if(!e(":focus",g).length||t)return clearTimeout(x.intervalId),g[i]({duration:n,easing:a,complete:function(){s(g),clearTimeout(v),f.onHidden&&"hidden"!==C.state&&f.onHidden(),C.state="hidden",C.endTime=new Date,o(C)}})}function c(){(f.timeOut>0||f.extendedTimeOut>0)&&(v=setTimeout(a,f.extendedTimeOut),x.maxHideTime=parseFloat(f.extendedTimeOut),x.hideEta=(new Date).getTime()+x.maxHideTime)}function h(){clearTimeout(v),x.hideEta=0,g.stop(!0,!0)[f.showMethod]({duration:f.showDuration,easing:f.showEasing})}function p(){var e=(x.hideEta-(new Date).getTime())/x.maxHideTime*100;w.width(e+"%")}var f=r(),m=i.iconClass||f.iconClass;if(void 0!==i.optionsOverride&&(f=e.extend(f,i.optionsOverride),m=i.optionsOverride.iconClass||m),!function(e,t){if(e.preventDuplicates){if(t.message===u)return!0;u=t.message}return!1}(f,i)){d++,l=t(f,!0);var v=null,g=e("<div/>"),b=e("<div/>"),y=e("<div/>"),w=e("<div/>"),k=e(f.closeHtml),x={intervalId:null,hideEta:null,maxHideTime:null},C={toastId:d,state:"visible",startTime:new Date,options:f,map:i};return i.iconClass&&g.addClass(f.toastClass).addClass(m),function(){if(i.title){var e=i.title;f.escapeHtml&&(e=n(i.title)),b.append(e).addClass(f.titleClass),g.append(b)}}(),function(){if(i.message){var e=i.message;f.escapeHtml&&(e=n(i.message)),y.append(e).addClass(f.messageClass),g.append(y)}}(),f.closeButton&&(k.addClass(f.closeClass).attr("role","button"),g.prepend(k)),f.progressBar&&(w.addClass(f.progressClass),g.prepend(w)),f.rtl&&g.addClass("rtl"),f.newestOnTop?l.prepend(g):l.append(g),function(){var e="";switch(i.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}g.attr("aria-live",e)}(),g.hide(),g[f.showMethod]({duration:f.showDuration,easing:f.showEasing,complete:f.onShown}),f.timeOut>0&&(v=setTimeout(a,f.timeOut),x.maxHideTime=parseFloat(f.timeOut),x.hideEta=(new Date).getTime()+x.maxHideTime,f.progressBar&&(x.intervalId=setInterval(p,10))),f.closeOnHover&&g.hover(h,c),!f.onclick&&f.tapToDismiss&&g.click(a),f.closeButton&&k&&k.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),f.onCloseClick&&f.onCloseClick(e),a(!0)}),f.onclick&&g.click(function(e){f.onclick(e),a()}),o(C),f.debug&&console&&console.log(C),g}}function r(){return e.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},p.options)}function s(e){l||(l=t()),e.is(":visible")||(e.remove(),e=null,0===l.children().length&&(l.remove(),u=void 0))}var l,c,u,d=0,h={error:"error",info:"info",success:"success",warning:"warning"},p={clear:function(e,o){var a=r();l||t(a),n(e,a,o)||i(a)},remove:function(i){var n=r();return l||t(n),i&&0===e(":focus",i).length?void s(i):void(l.children().length&&l.remove())},error:function(e,t,i){return a({type:h.error,iconClass:r().iconClasses.error,message:e,optionsOverride:i,title:t})},getContainer:t,info:function(e,t,i){return a({type:h.info,iconClass:r().iconClasses.info,message:e,optionsOverride:i,title:t})},options:{},subscribe:function(e){c=e},success:function(e,t,i){return a({type:h.success,iconClass:r().iconClasses.success,message:e,optionsOverride:i,title:t})},version:"2.1.4",warning:function(e,t,i){return a({type:h.warning,iconClass:r().iconClasses.warning,message:e,optionsOverride:i,title:t})}};return p}()}),function(e){function t(e,t,o){var a=e[0],r=/er/.test(o)?_indeterminate:/bl/.test(o)?p:d,s=o==_update?{checked:a[d],disabled:a[p],indeterminate:"true"==e.attr(_indeterminate)||"false"==e.attr(_determinate)}:a[r];if(/^(ch|di|in)/.test(o)&&!s)i(e,r);else if(/^(un|en|de)/.test(o)&&s)n(e,r);else if(o==_update)for(var l in s)s[l]?i(e,l,!0):n(e,l,!0);else t&&"toggle"!=o||(t||e[_callback]("ifClicked"),s?a[_type]!==u&&n(e,r):i(e,r))}function i(t,i,o){var f=t[0],m=t.parent(),v=i==d,g=i==_indeterminate,b=i==p,y=g?_determinate:v?h:"enabled",w=a(t,y+r(f[_type])),k=a(t,i+r(f[_type]));if(!0!==f[i]){if(!o&&i==d&&f[_type]==u&&f.name){var x=t.closest("form"),C='input[name="'+f.name+'"]';(C=x.length?x.find(C):e(C)).each(function(){this!==f&&e(this).data(l)&&n(e(this),i)})}g?(f[i]=!0,f[d]&&n(t,d,"force")):(o||(f[i]=!0),v&&f[_indeterminate]&&n(t,_indeterminate,!1)),s(t,v,i,o)}f[p]&&a(t,_cursor,!0)&&m.find("."+c).css(_cursor,"default"),m[_add](k||a(t,i)||""),m.attr("role")&&!g&&m.attr("aria-"+(b?p:d),"true"),m[_remove](w||a(t,y)||"")}function n(e,t,i){var n=e[0],o=e.parent(),l=t==d,u=t==_indeterminate,f=t==p,m=u?_determinate:l?h:"enabled",v=a(e,m+r(n[_type])),g=a(e,t+r(n[_type]));!1!==n[t]&&(!u&&i&&"force"!=i||(n[t]=!1),s(e,l,m,i)),!n[p]&&a(e,_cursor,!0)&&o.find("."+c).css(_cursor,"pointer"),o[_remove](g||a(e,t)||""),o.attr("role")&&!u&&o.attr("aria-"+(f?p:d),"false"),o[_add](v||a(e,m)||"")}function o(t,i){t.data(l)&&(t.parent().html(t.attr("style",t.data(l).s||"")),i&&t[_callback](i),t.off(".i").unwrap(),e(_label+'[for="'+t[0].id+'"]').add(t.closest(_label)).off(".i"))}function a(e,t,i){if(e.data(l))return e.data(l).o[t+(i?"":"Class")]}function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e,t,i,n){n||(t&&e[_callback]("ifToggled"),e[_callback]("ifChanged")[_callback]("if"+r(i)))}var l="iCheck",c=l+"-helper",u="radio",d="checked",h="un"+d,p="disabled";_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent),e.fn[l]=function(a,r){var s='input[type="checkbox"], input[type="'+u+'"]',h=e(),f=function(t){t.each(function(){var t=e(this);h=t.is(s)?h.add(t):h.add(t.find(s))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(a))return a=a.toLowerCase(),f(this),h.each(function(){var i=e(this);"destroy"==a?o(i,"ifDestroyed"):t(i,!0,a),e.isFunction(r)&&r()});if("object"!=typeof a&&a)return this;var m=e.extend({checkedClass:d,disabledClass:p,indeterminateClass:_indeterminate,labelHover:!0},a),v=m.handle,g=m.hoverClass||"hover",b=m.focusClass||"focus",y=m.activeClass||"active",w=!!m.labelHover,k=m.labelHoverClass||"hover",x=0|(""+m.increaseArea).replace("%","");return"checkbox"!=v&&v!=u||(s='input[type="'+v+'"]'),-50>x&&(x=-50),f(this),h.each(function(){var a=e(this);o(a);var r=this,s=r.id,h={position:"absolute",top:f=-x+"%",left:f,display:"block",width:h=100+2*x+"%",height:h,margin:0,padding:0,background:"#fff",border:0,opacity:0},f=_mobile?{position:"absolute",visibility:"hidden"}:x?h:{position:"absolute",opacity:0},v="checkbox"==r[_type]?m.checkboxClass||"icheckbox":m.radioClass||"i"+u,C=e(_label+'[for="'+s+'"]').add(a.closest(_label)),_=!!m.aria,S=l+"-"+Math.random().toString(36).substr(2,6),T='<div class="'+v+'" '+(_?'role="'+r[_type]+'" ':"");_&&C.each(function(){T+='aria-labelledby="',this.id?T+=this.id:(this.id=S,T+=S),T+='"'}),T=a.wrap(T+"/>")[_callback]("ifCreated").parent().append(m.insert),h=e('<ins class="'+c+'"/>').css(h).appendTo(T),a.data(l,{o:m,s:a.attr("style")}).css(f),m.inheritClass&&T[_add](r.className||""),m.inheritID&&s&&T.attr("id",l+"-"+s),"static"==T.css("position")&&T.css("position","relative"),t(a,!0,_update),C.length&&C.on(_click+".i mouseover.i mouseout.i "+_touch,function(i){var n=i[_type],o=e(this);if(!r[p]){if(n==_click){if(e(i.target).is("a"))return;t(a,!1,!0)}else w&&(/ut|nd/.test(n)?(T[_remove](g),o[_remove](k)):(T[_add](g),o[_add](k)));if(!_mobile)return!1;i.stopPropagation()}}),a.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(e){var t=e[_type];return e=e.keyCode,t!=_click&&("keydown"==t&&32==e?(r[_type]==u&&r[d]||(r[d]?n(a,d):i(a,d)),!1):void("keyup"==t&&r[_type]==u?!r[d]&&i(a,d):/us|ur/.test(t)&&T["blur"==t?_remove:_add](b)))}),h.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(e){var i=e[_type],n=/wn|up/.test(i)?y:g;if(!r[p]){if(i==_click?t(a,!1,!0):(/wn|er|in/.test(i)?T[_add](n):T[_remove](n+" "+y),C.length&&w&&n==g&&C[/ut|nd/.test(i)?_remove:_add](k)),!_mobile)return!1;e.stopPropagation()}})})}}(window.jQuery||window.Zepto),function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i(1),i(6),i(7);var n=r(i(2)),o=r(i(3)),a=r(i(4));function r(e){return e&&e.__esModule?e:{default:e}}o.default===a.default&&i(8),window.Inputmask=n.default},function(e,t,i){"use strict";var n,o,a;"function"==typeof Symbol&&Symbol.iterator;o=[i(2)],void 0===(a="function"==typeof(n=function(e){return e.extendDefinitions({A:{validator:"[A-Za-z--]",casing:"upper"},"&":{validator:"[0-9A-Za-z--]",casing:"upper"},"#":{validator:"[0-9A-Fa-f]",casing:"upper"}}),e.extendAliases({cssunit:{regex:"[+-]?[0-9]+\\.?([0-9]+)?(px|em|rem|ex|%|in|cm|mm|pt|pc)"},url:{regex:"(https?|ftp)//.*",autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(e,t,i,n,o){return i-1>-1&&"."!==t.buffer[i-1]?(e=t.buffer[i-1]+e,e=i-2>-1&&"."!==t.buffer[i-2]?t.buffer[i-2]+e:"0"+e):e="00"+e,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(e)}}},onUnMask:function(e,t,i){return e},inputmode:"numeric"},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",greedy:!1,casing:"lower",onBeforePaste:function(e,t){return(e=e.toLowerCase()).replace("mailto:","")},definitions:{"*":{validator:"[0-9-A-Za-z--!#$%&'*+/=?^_`{|}~-]"},"-":{validator:"[0-9A-Za-z-]"}},onUnMask:function(e,t,i){return e},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",casing:"upper"}},clearIncomplete:!0,autoUnmask:!0}}),e})?n.apply(t,o):n)||(e.exports=a)},function(e,t,i){"use strict";var n,o,a,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=[i(3),i(5)],void 0===(a="function"==typeof(n=function(e,t,i){var n=t.document,o=navigator.userAgent,a=o.indexOf("MSIE ")>0||o.indexOf("Trident/")>0,s=p("touchstart"),l=/iemobile/i.test(o),c=/iphone/i.test(o)&&!l;function u(t,n,o){if(!(this instanceof u))return new u(t,n,o);this.el=i,this.events={},this.maskset=i,this.refreshValue=!1,!0!==o&&(e.isPlainObject(t)?n=t:(n=n||{},t&&(n.alias=t)),this.opts=e.extend(!0,{},this.defaults,n),this.noMasksCache=n&&n.definitions!==i,this.userOptions=n||{},this.isRTL=this.opts.numericInput,d(this.opts.alias,n,this.opts))}function d(t,n,o){var a=u.prototype.aliases[t];return a?(a.alias&&d(a.alias,i,o),e.extend(!0,o,a),e.extend(!0,o,n),!0):(null===o.mask&&(o.mask=t),!1)}function h(t,n){function o(t,o,a){var r=!1;if(null!==t&&""!==t||((r=null!==a.regex)?t=(t=a.regex).replace(/^(\^)(.*)(\$)$/,"$2"):(r=!0,t=".*")),1===t.length&&!1===a.greedy&&0!==a.repeat&&(a.placeholder=""),a.repeat>0||"*"===a.repeat||"+"===a.repeat){var s="*"===a.repeat?0:"+"===a.repeat?1:a.repeat;t=a.groupmarker[0]+t+a.groupmarker[1]+a.quantifiermarker[0]+s+","+a.repeat+a.quantifiermarker[1]}var l,c=r?"regex_"+a.regex:a.numericInput?t.split("").reverse().join(""):t;return u.prototype.masksCache[c]===i||!0===n?(l={mask:t,maskToken:u.prototype.analyseMask(t,r,a),validPositions:{},_buffer:i,buffer:i,tests:{},excludes:{},metadata:o,maskLength:i,jitOffset:{}},!0!==n&&(u.prototype.masksCache[c]=l,l=e.extend(!0,{},u.prototype.masksCache[c]))):l=e.extend(!0,{},u.prototype.masksCache[c]),l}if(e.isFunction(t.mask)&&(t.mask=t.mask(t)),e.isArray(t.mask)){if(t.mask.length>1){if(null===t.keepStatic){t.keepStatic="auto";for(var a=0;a<t.mask.length;a++)if(t.mask[a].charAt(0)!==t.mask[0].charAt(0)){t.keepStatic=!0;break}}var r=t.groupmarker[0];return e.each(t.isRTL?t.mask.reverse():t.mask,function(n,o){r.length>1&&(r+=t.groupmarker[1]+t.alternatormarker+t.groupmarker[0]),o.mask===i||e.isFunction(o.mask)?r+=o:r+=o.mask}),o(r+=t.groupmarker[1],t.mask,t)}t.mask=t.mask.pop()}return t.mask&&t.mask.mask!==i&&!e.isFunction(t.mask.mask)?o(t.mask.mask,t.mask,t):o(t.mask,t.mask,t)}function p(e){var t=n.createElement("input"),i="on"+e,o=i in t;return o||(t.setAttribute(i,"return;"),o="function"==typeof t[i]),t=null,o}function f(o,d,h){d=d||this.maskset,h=h||this.opts;var m,v,g,b,y,w=this,k=this.el,x=this.isRTL,C=!1,_=!1,S=!1,T=!1;function E(e,t,n,o,a){var r=h.greedy;a&&(h.greedy=!1),t=t||0;var s,l,c,u=[],d=0;F();do{if(!0===e&&A().validPositions[d])c=a&&!0===A().validPositions[d].match.optionality&&A().validPositions[d+1]===i&&(!0===A().validPositions[d].generatedInput||A().validPositions[d].input==h.skipOptionalPartCharacter&&d>0)?M(d,N(d,s,d-1)):A().validPositions[d],l=c.match,s=c.locator.slice(),u.push(!0===n?c.input:!1===n?l.nativeDef:Q(d,l));else{c=O(d,s,d-1),l=c.match,s=c.locator.slice();var p=!0!==o&&(!1!==h.jitMasking?h.jitMasking:l.jit);(!1===p||p===i||"number"==typeof p&&isFinite(p)&&p>d)&&u.push(!1===n?l.nativeDef:Q(d,l))}"auto"===h.keepStatic&&l.newBlockMarker&&null!==l.fn&&(h.keepStatic=d-1),d++}while((g===i||d<g)&&(null!==l.fn||""!==l.def)||t>d);return""===u[u.length-1]&&u.pop(),!1===n&&A().maskLength!==i||(A().maskLength=d-1),h.greedy=r,u}function A(){return d}function D(e){var t=A();t.buffer=i,!0!==e&&(t.validPositions={},t.p=0)}function F(e,t,n){var o=-1,a=-1,r=n||A().validPositions;for(var s in e===i&&(e=-1),r){var l=parseInt(s);r[l]&&(t||!0!==r[l].generatedInput)&&(l<=e&&(o=l),l>=e&&(a=l))}return-1===o||o==e?a:-1==a?o:e-o<a-e?o:a}function P(e){var t=e.locator[e.alternation];return"string"==typeof t&&t.length>0&&(t=t.split(",")[0]),t!==i?t.toString():""}function I(e,t){var n=(e.alternation!=i?e.mloc[P(e)]:e.locator).join("");if(""!==n)for(;n.length<t;)n+="0";return n}function M(e,t){for(var n,o,a,r=$(e=e>0?e-1:0),s=I(r),l=0;l<t.length;l++){var c=t[l];n=I(c,s.length);var u=Math.abs(n-s);(o===i||""!==n&&u<o||a&&!h.greedy&&a.match.optionality&&"master"===a.match.newBlockMarker&&(!c.match.optionality||!c.match.newBlockMarker)||a&&a.match.optionalQuantifier&&!c.match.optionalQuantifier)&&(o=u,a=c)}return a}function O(e,t,i){return A().validPositions[e]||M(e,N(e,t?t.slice():t,i))}function $(e,t){return A().validPositions[e]?A().validPositions[e]:(t||N(e))[0]}function z(e,t){for(var i=!1,n=N(e),o=0;o<n.length;o++)if(n[o].match&&n[o].match.def===t){i=!0;break}return i}function N(t,n,o){var a,r=A().maskToken,s=n?o:0,l=n?n.slice():[0],c=[],u=!1,d=n?n.join(""):"";function p(n,o,r,l){function f(r,l,m){function v(t,i){var n=0===e.inArray(t,i.matches);return n||e.each(i.matches,function(e,o){if(!0===o.isQuantifier?n=v(t,i.matches[e-1]):o.hasOwnProperty("matches")&&(n=v(t,o)),n)return!1}),n}function g(t,n,o){var a,r;if((A().tests[t]||A().validPositions[t])&&e.each(A().tests[t]||[A().validPositions[t]],function(e,t){if(t.mloc[n])return a=t,!1;var s=o!==i?o:t.alternation,l=t.locator[s]!==i?t.locator[s].toString().indexOf(n):-1;(r===i||l<r)&&-1!==l&&(a=t,r=l)}),a){var s=a.locator[a.alternation],l=a.mloc[n]||a.mloc[s]||a.locator;return l.slice((o!==i?o:a.alternation)+1)}return o!==i?g(t,n):i}function b(e,t){function i(e){for(var t,i,n=[],o=0,a=e.length;o<a;o++)if("-"===e.charAt(o))for(i=e.charCodeAt(o+1);++t<i;)n.push(String.fromCharCode(t));else t=e.charCodeAt(o),n.push(e.charAt(o));return n.join("")}return h.regex&&null!==e.match.fn&&null!==t.match.fn?-1!==i(t.match.def.replace(/[\[\]]/g,"")).indexOf(i(e.match.def.replace(/[\[\]]/g,""))):e.match.def===t.match.nativeDef}function y(e,t){if(t===i||e.alternation===t.alternation&&-1===e.locator[e.alternation].toString().indexOf(t.locator[t.alternation])){e.mloc=e.mloc||{};var n=e.locator[e.alternation];if(n!==i){if("string"==typeof n&&(n=n.split(",")[0]),e.mloc[n]===i&&(e.mloc[n]=e.locator.slice()),t!==i){for(var o in t.mloc)"string"==typeof o&&(o=o.split(",")[0]),e.mloc[o]===i&&(e.mloc[o]=t.mloc[o]);e.locator[e.alternation]=Object.keys(e.mloc).join(",")}return!0}e.alternation=i}return!1}if(s>500&&m!==i)throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+A().mask;if(s===t&&r.matches===i)return c.push({match:r,locator:l.reverse(),cd:d,mloc:{}}),!0;if(r.matches!==i){if(r.isGroup&&m!==r){if(r=f(n.matches[e.inArray(r,n.matches)+1],l,m))return!0}else if(r.isOptional){var w=r;if(r=p(r,o,l,m)){if(e.each(c,function(e,t){t.match.optionality=!0}),a=c[c.length-1].match,m!==i||!v(a,w))return!0;u=!0,s=t}}else if(r.isAlternator){var k,x=r,C=[],_=c.slice(),S=l.length,T=o.length>0?o.shift():-1;if(-1===T||"string"==typeof T){var E,D=s,F=o.slice(),P=[];if("string"==typeof T)P=T.split(",");else for(E=0;E<x.matches.length;E++)P.push(E.toString());if(A().excludes[t]){for(var I=P.slice(),M=0,O=A().excludes[t].length;M<O;M++)P.splice(P.indexOf(A().excludes[t][M].toString()),1);0===P.length&&(A().excludes[t]=i,P=I)}(!0===h.keepStatic||isFinite(parseInt(h.keepStatic))&&D>=h.keepStatic)&&(P=P.slice(0,1));for(var $=!1,z=0;z<P.length;z++){E=parseInt(P[z]),c=[],o="string"==typeof T&&g(s,E,S)||F.slice(),x.matches[E]&&f(x.matches[E],[E].concat(l),m)?r=!0:0===z&&($=!0),k=c.slice(),s=D,c=[];for(var N=0;N<k.length;N++){var L=k[N],R=!1;L.match.jit=L.match.jit||$,L.alternation=L.alternation||S,y(L);for(var j=0;j<C.length;j++){var U=C[j];if("string"!=typeof T||L.alternation!==i&&-1!==e.inArray(L.locator[L.alternation].toString(),P)){if(L.match.nativeDef===U.match.nativeDef){R=!0,y(U,L);break}if(b(L,U)){y(L,U)&&(R=!0,C.splice(C.indexOf(U),0,L));break}if(b(U,L)){y(U,L);break}if(q=L,Y=U,void 0,!(!((q=L).locator.slice(q.alternation).join("")==Y.locator.slice(Y.alternation).join(""))||null!==q.match.fn||null===Y.match.fn)&&Y.match.fn.test(q.match.def,A(),t,!1,h,!1)){y(L,U)&&(R=!0,C.splice(C.indexOf(U),0,L));break}}}R||C.push(L)}}c=_.concat(C),s=t,u=c.length>0,r=C.length>0,o=F.slice()}else r=f(x.matches[T]||n.matches[T],[T].concat(l),m);if(r)return!0}else if(r.isQuantifier&&m!==n.matches[e.inArray(r,n.matches)-1])for(var B=r,H=o.length>0?o.shift():0;H<(isNaN(B.quantifier.max)?H+1:B.quantifier.max)&&s<=t;H++){var V=n.matches[e.inArray(B,n.matches)-1];if(r=f(V,[H].concat(l),V)){if((a=c[c.length-1].match).optionalQuantifier=H>=B.quantifier.min,a.jit=(H||1)*V.matches.indexOf(a)>=B.quantifier.jit,a.optionalQuantifier&&v(a,V)){u=!0,s=t;break}return a.jit&&(A().jitOffset[t]=V.matches.indexOf(a)),!0}}else if(r=p(r,o,l,m))return!0}else s++;var q,Y}for(var m=o.length>0?o.shift():0;m<n.matches.length;m++)if(!0!==n.matches[m].isQuantifier){var v=f(n.matches[m],[m].concat(r),l);if(v&&s===t)return v;if(s>t)break}}if(t>-1){if(n===i){for(var f,m=t-1;(f=A().validPositions[m]||A().tests[m])===i&&m>-1;)m--;f!==i&&m>-1&&(l=function(t,n){var o=[];return e.isArray(n)||(n=[n]),n.length>0&&(n[0].alternation===i?0===(o=M(t,n.slice()).locator.slice()).length&&(o=n[0].locator.slice()):e.each(n,function(e,t){if(""!==t.def)if(0===o.length)o=t.locator.slice();else for(var i=0;i<o.length;i++)t.locator[i]&&-1===o[i].toString().indexOf(t.locator[i])&&(o[i]+=","+t.locator[i])})),o}(m,f),d=l.join(""),s=m)}if(A().tests[t]&&A().tests[t][0].cd===d)return A().tests[t];for(var v=l.shift();v<r.length;v++){var g=p(r[v],l,[v]);if(g&&s===t||s>t)break}}return(0===c.length||u)&&c.push({match:{fn:null,optionality:!1,casing:null,def:"",placeholder:""},locator:[],mloc:{},cd:d}),n!==i&&A().tests[t]?e.extend(!0,[],c):(A().tests[t]=e.extend(!0,[],c),A().tests[t])}function L(){return A()._buffer===i&&(A()._buffer=E(!1,1),A().buffer===i&&(A().buffer=A()._buffer.slice())),A()._buffer}function R(e){return A().buffer!==i&&!0!==e||(A().buffer=E(!0,F(),!0),A()._buffer===i&&(A()._buffer=A().buffer.slice())),A().buffer}function j(e,t,n){var o,a;if(!0===e)D(),e=0,t=n.length;else for(o=e;o<t;o++)delete A().validPositions[o];for(a=e,o=e;o<t;o++)if(D(!0),n[o]!==h.skipOptionalPartCharacter){var r=V(a,n[o],!0,!0);!1!==r&&(D(!0),a=r.caret!==i?r.caret:r.pos+1)}}function U(t,i,n){switch(h.casing||i.casing){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break;case"title":var o=A().validPositions[n-1];t=0===n||o&&o.input===String.fromCharCode(u.keyCode.SPACE)?t.toUpperCase():t.toLowerCase();break;default:if(e.isFunction(h.casing)){var a=Array.prototype.slice.call(arguments);a.push(A().validPositions),t=h.casing.apply(this,a)}}return t}function B(t,n,o){for(var a,r=h.greedy?n:n.slice(0,1),s=!1,l=o!==i?o.split(","):[],c=0;c<l.length;c++)-1!==(a=t.indexOf(l[c]))&&t.splice(a,1);for(var u=0;u<t.length;u++)if(-1!==e.inArray(t[u],r)){s=!0;break}return s}function H(t,n,o,a,r){var s,l,c,u,d,h,p,f=e.extend(!0,{},A().validPositions),m=!1,v=r!==i?r:F();if(-1===v&&r===i)u=$(s=0),l=u.alternation;else for(;v>=0;v--)if((c=A().validPositions[v])&&c.alternation!==i){if(u&&u.locator[c.alternation]!==c.locator[c.alternation])break;s=v,l=A().validPositions[s].alternation,u=c}if(l!==i){p=parseInt(s),A().excludes[p]=A().excludes[p]||[],!0!==t&&A().excludes[p].push(P(u));var g=[],b=0;for(d=p;d<F(i,!0)+1;d++)(h=A().validPositions[d])&&!0!==h.generatedInput?g.push(h.input):d<t&&b++,delete A().validPositions[d];for(;A().excludes[p]&&A().excludes[p].length<10;){var y=-1*b,w=g.slice();for(A().tests[p]=i,D(!0),m=!0;w.length>0;){var k=w.shift();if(!(m=V(F(i,!0)+1,k,!1,a,!0)))break}if(m&&n!==i){var x=F(t)+1;for(d=p;d<F()+1;d++)((h=A().validPositions[d])===i||null==h.match.fn)&&d<t+y&&y++;m=V((t+=y)>x?x:t,n,o,a,!0)}if(m)break;if(D(),u=$(p),A().validPositions=e.extend(!0,{},f),!A().excludes[p]){m=H(t,n,o,a,p-1);break}var C=P(u);if(-1!==A().excludes[p].indexOf(C)){m=H(t,n,o,a,p-1);break}for(A().excludes[p].push(C),d=p;d<F(i,!0)+1;d++)delete A().validPositions[d]}}return A().excludes[p]=i,m}function V(t,n,o,a,r,s){function l(e){return x?e.begin-e.end>1||e.begin-e.end==1:e.end-e.begin>1||e.end-e.begin==1}o=!0===o;var c=t;function u(n,o,r){var s=!1;return e.each(N(n),function(c,u){var d=u.match;if(R(!0),!1!==(s=null!=d.fn?d.fn.test(o,A(),n,r,h,l(t)):(o===d.def||o===h.skipOptionalPartCharacter)&&""!==d.def&&{c:Q(n,d,!0)||d.def,pos:n})){var p=s.c!==i?s.c:o,f=n;return p=p===h.skipOptionalPartCharacter&&null===d.fn?Q(n,d,!0)||d.def:p,s.remove!==i&&(e.isArray(s.remove)||(s.remove=[s.remove]),e.each(s.remove.sort(function(e,t){return t-e}),function(e,t){Y({begin:t,end:t+1})})),s.insert!==i&&(e.isArray(s.insert)||(s.insert=[s.insert]),e.each(s.insert.sort(function(e,t){return e-t}),function(e,t){V(t.pos,t.c,!0,a)})),!0!==s&&s.pos!==i&&s.pos!==n&&(f=s.pos),(!0===s||s.pos!==i||s.c!==i)&&(Y(t,e.extend({},u,{input:U(p,d,f)}),a,f)||(s=!1),!1)}}),s}t.begin!==i&&(c=x?t.end:t.begin);var d=!0,p=e.extend(!0,{},A().validPositions);if(e.isFunction(h.preValidation)&&!o&&!0!==a&&!0!==s&&(d=h.preValidation(R(),c,n,l(t),h,A())),!0===d){if(q(i,c,!0),(g===i||c<g)&&(d=u(c,n,o),(!o||!0===a)&&!1===d&&!0!==s)){var f=A().validPositions[c];if(!f||null!==f.match.fn||f.match.def!==n&&n!==h.skipOptionalPartCharacter){if((h.insertMode||A().validPositions[G(c)]===i)&&(!W(c,!0)||A().jitOffset[c]))if(A().jitOffset[c]&&A().validPositions[G(c)]===i)!1!==(d=V(c+A().jitOffset[c],n,o))&&(d.caret=c);else for(var m=c+1,v=G(c);m<=v;m++)if(!1!==(d=u(m,n,o))){d=q(c,d.pos!==i?d.pos:m)||d,c=m;break}}else d={caret:G(c)}}!1!==d||!1===h.keepStatic||null!=h.regex&&!se(R())||o||!0===r||(d=H(c,n,o,a)),!0===d&&(d={pos:c})}if(e.isFunction(h.postValidation)&&!1!==d&&!o&&!0!==a&&!0!==s){var b=h.postValidation(R(!0),t.begin!==i?x?t.end:t.begin:t,d,h);if(b!==i){if(b.refreshFromBuffer&&b.buffer){var y=b.refreshFromBuffer;j(!0===y?y:y.start,y.end,b.buffer)}d=!0===b?d:b}}return d&&d.pos===i&&(d.pos=c),!1!==d&&!0!==s||(D(!0),A().validPositions=e.extend(!0,{},p)),d}function q(t,n,o){var a;if(t===i)for(t=n-1;t>0&&!A().validPositions[t];t--);for(var r=t;r<n;r++)if(A().validPositions[r]===i&&!W(r,!0)){var s=0==r?$(r):A().validPositions[r-1];if(s){var l=N(r).slice();""===l[l.length-1].match.def&&l.pop();var c=M(r,l);if((c=e.extend({},c,{input:Q(r,c.match,!0)||c.match.def})).generatedInput=!0,Y(r,c,!0),!0!==o){var u=A().validPositions[n].input;A().validPositions[n]=i,a=V(n,u,!0,!0)}}}return a}function Y(t,n,o,a){function r(e,t,n){var o=t[e];if(o!==i&&(null===o.match.fn&&!0!==o.match.optionality||o.input===h.radixPoint)){var a=n.begin<=e-1?t[e-1]&&null===t[e-1].match.fn&&t[e-1]:t[e-1],r=n.end>e+1?t[e+1]&&null===t[e+1].match.fn&&t[e+1]:t[e+1];return a&&r}return!1}var s=t.begin!==i?t.begin:t,l=t.end!==i?t.end:t;if(t.begin>t.end&&(s=t.end,l=t.begin),a=a!==i?a:s,s!==l||h.insertMode&&A().validPositions[a]!==i&&o===i){var c=e.extend(!0,{},A().validPositions),u=F(i,!0);for(A().p=s,v=u;v>=s;v--)A().validPositions[v]&&"+"===A().validPositions[v].match.nativeDef&&(h.isNegative=!1),delete A().validPositions[v];var d=!0,p=a,f=(A().validPositions,!1),m=p,v=p;for(n&&(A().validPositions[a]=e.extend(!0,{},n),m++,p++,s<l&&v++);v<=u;v++){var g=c[v];if(g!==i&&(v>=l||v>=s&&!0!==g.generatedInput&&r(v,c,{begin:s,end:l}))){for(;""!==$(m).match.def;){if(!1===f&&c[m]&&c[m].match.nativeDef===g.match.nativeDef)A().validPositions[m]=e.extend(!0,{},c[m]),A().validPositions[m].input=g.input,q(i,m,!0),p=m+1,d=!0;else if(h.shiftPositions&&z(m,g.match.def)){var b=V(m,g.input,!0,!0);d=!1!==b,p=b.caret||b.insert?F():m+1,f=!0}else d=!0===g.generatedInput||g.input===h.radixPoint&&!0===h.numericInput;if(d)break;if(!d&&m>l&&W(m,!0)&&(null!==g.match.fn||m>A().maskLength))break;m++}""==$(m).match.def&&(d=!1),m=p}if(!d)break}if(!d)return A().validPositions=e.extend(!0,{},c),D(!0),!1}else n&&(A().validPositions[a]=e.extend(!0,{},n));return D(!0),!0}function W(e,t){var i=O(e).match;if(""===i.def&&(i=$(e).match),null!=i.fn)return i.fn;if(!0!==t&&e>-1){var n=N(e);return n.length>1+(""===n[n.length-1].match.def?1:0)}return!1}function G(e,t){for(var i=e+1;""!==$(i).match.def&&(!0===t&&(!0!==$(i).match.newBlockMarker||!W(i))||!0!==t&&!W(i));)i++;return i}function Z(e,t){var i,n=e;if(n<=0)return 0;for(;--n>0&&(!0===t&&!0!==$(n).match.newBlockMarker||!0!==t&&!W(n)&&((i=N(n)).length<2||2===i.length&&""===i[1].match.def)););return n}function K(t,n,o,a,r){if(a&&e.isFunction(h.onBeforeWrite)){var s=h.onBeforeWrite.call(w,a,n,o,h);if(s){if(s.refreshFromBuffer){var l=s.refreshFromBuffer;j(!0===l?l:l.start,l.end,s.buffer||n),n=R(!0)}o!==i&&(o=s.caret!==i?s.caret:o)}}if(t!==i&&(t.inputmask._valueSet(n.join("")),o===i||a!==i&&"blur"===a.type?ue(t,o,0===n.length):oe(t,o),!0===r)){var c=e(t),u=t.inputmask._valueGet();_=!0,c.trigger("input"),setTimeout(function(){u===L().join("")?c.trigger("cleared"):!0===se(n)&&c.trigger("complete")},0)}}function Q(t,n,o){if((n=n||$(t).match).placeholder!==i||!0===o)return e.isFunction(n.placeholder)?n.placeholder(h):n.placeholder;if(null===n.fn){if(t>-1&&A().validPositions[t]===i){var a,r=N(t),s=[];if(r.length>1+(""===r[r.length-1].match.def?1:0))for(var l=0;l<r.length;l++)if(!0!==r[l].match.optionality&&!0!==r[l].match.optionalQuantifier&&(null===r[l].match.fn||a===i||!1!==r[l].match.fn.test(a.match.def,A(),t,!0,h))&&(s.push(r[l]),null===r[l].match.fn&&(a=r[l]),s.length>1&&/[0-9a-bA-Z]/.test(s[0].match.def)))return h.placeholder.charAt(t%h.placeholder.length)}return n.def}return h.placeholder.charAt(t%h.placeholder.length)}function J(e,t){if(a){if(e.inputmask._valueGet()!==t&&(e.placeholder!==t||""===e.placeholder)){var i=R().slice(),n=e.inputmask._valueGet();if(n!==t){var o=F();-1===o&&n===L().join("")?i=[]:-1!==o&&re(i),K(e,i)}}}else e.placeholder!==t&&(e.placeholder=t,""===e.placeholder&&e.removeAttribute("placeholder"))}var X,ee={on:function(t,n,o){var a=function(t){var n=this;if(n.inputmask===i&&"FORM"!==this.nodeName){var a=e.data(n,"_inputmask_opts");a?new u(a).mask(n):ee.off(n)}else{if("setvalue"===t.type||"FORM"===this.nodeName||!(n.disabled||n.readOnly&&!("keydown"===t.type&&t.ctrlKey&&67===t.keyCode||!1===h.tabThrough&&t.keyCode===u.keyCode.TAB))){switch(t.type){case"input":if(!0===_)return _=!1,t.preventDefault();if(s){var r=arguments;return setTimeout(function(){o.apply(n,r),oe(n,n.inputmask.caretPos,i,!0)},0),!1}break;case"keydown":C=!1,_=!1;break;case"keypress":if(!0===C)return t.preventDefault();C=!0;break;case"click":if(l||c){var r=arguments;return setTimeout(function(){o.apply(n,r)},0),!1}}var d=o.apply(n,arguments);return!1===d&&(t.preventDefault(),t.stopPropagation()),d}t.preventDefault()}};t.inputmask.events[n]=t.inputmask.events[n]||[],t.inputmask.events[n].push(a),-1!==e.inArray(n,["submit","reset"])?null!==t.form&&e(t.form).on(n,a):e(t).on(n,a)},off:function(t,i){var n;t.inputmask&&t.inputmask.events&&(i?(n=[])[i]=t.inputmask.events[i]:n=t.inputmask.events,e.each(n,function(i,n){for(;n.length>0;){var o=n.pop();-1!==e.inArray(i,["submit","reset"])?null!==t.form&&e(t.form).off(i,o):e(t).off(i,o)}delete t.inputmask.events[i]}))}},te={keydownEvent:function(t){var i=e(this),n=t.keyCode,o=oe(this);if(n===u.keyCode.BACKSPACE||n===u.keyCode.DELETE||c&&n===u.keyCode.BACKSPACE_SAFARI||t.ctrlKey&&n===u.keyCode.X&&!p("cut"))t.preventDefault(),le(0,n,o),K(this,R(!0),A().p,t,this.inputmask._valueGet()!==R().join(""));else if(n===u.keyCode.END||n===u.keyCode.PAGE_DOWN){t.preventDefault();var a=G(F());oe(this,t.shiftKey?o.begin:a,a,!0)}else n===u.keyCode.HOME&&!t.shiftKey||n===u.keyCode.PAGE_UP?(t.preventDefault(),oe(this,0,t.shiftKey?o.begin:0,!0)):(h.undoOnEscape&&n===u.keyCode.ESCAPE||90===n&&t.ctrlKey)&&!0!==t.altKey?(ie(this,!0,!1,m.split("")),i.trigger("click")):n!==u.keyCode.INSERT||t.shiftKey||t.ctrlKey?!0===h.tabThrough&&n===u.keyCode.TAB&&(!0===t.shiftKey?(null===$(o.begin).match.fn&&(o.begin=G(o.begin)),o.end=Z(o.begin,!0),o.begin=Z(o.end,!0)):(o.begin=G(o.begin,!0),o.end=G(o.begin,!0),o.end<A().maskLength&&o.end--),o.begin<A().maskLength&&(t.preventDefault(),oe(this,o.begin,o.end))):(h.insertMode=!h.insertMode,this.setAttribute("im-insert",h.insertMode));h.onKeyDown.call(this,t,R(),oe(this).begin,h),S=-1!==e.inArray(n,h.ignorables)},keypressEvent:function(t,n,o,a,r){var s=this,l=e(s),c=t.which||t.charCode||t.keyCode;if(!(!0===n||t.ctrlKey&&t.altKey)&&(t.ctrlKey||t.metaKey||S))return c===u.keyCode.ENTER&&m!==R().join("")&&(m=R().join(""),setTimeout(function(){l.trigger("change")},0)),!0;if(c){46===c&&!1===t.shiftKey&&""!==h.radixPoint&&(c=h.radixPoint.charCodeAt(0));var d,p=n?{begin:r,end:r}:oe(s),f=String.fromCharCode(c),v=0;if(h._radixDance&&h.numericInput){var g=R().indexOf(h.radixPoint.charAt(0))+1;p.begin<=g&&(c===h.radixPoint.charCodeAt(0)&&(v=1),p.begin-=1,p.end-=1)}A().writeOutBuffer=!0;var b=V(p,f,a);if(!1!==b&&(D(!0),d=b.caret!==i?b.caret:G(b.pos.begin?b.pos.begin:b.pos),A().p=d),d=(h.numericInput&&b.caret===i?Z(d):d)+v,!1!==o&&(setTimeout(function(){h.onKeyValidation.call(s,c,b,h)},0),A().writeOutBuffer&&!1!==b)){var y=R();K(s,y,d,t,!0!==n)}if(t.preventDefault(),n)return!1!==b&&(b.forwardPosition=d),b}},pasteEvent:function(i){var n,o=i.originalEvent||i,a=(e(this),this.inputmask._valueGet(!0)),r=oe(this);x&&(n=r.end,r.end=r.begin,r.begin=n);var s=a.substr(0,r.begin),l=a.substr(r.end,a.length);if(s===(x?L().reverse():L()).slice(0,r.begin).join("")&&(s=""),l===(x?L().reverse():L()).slice(r.end).join("")&&(l=""),t.clipboardData&&t.clipboardData.getData)a=s+t.clipboardData.getData("Text")+l;else{if(!o.clipboardData||!o.clipboardData.getData)return!0;a=s+o.clipboardData.getData("text/plain")+l}var c=a;if(e.isFunction(h.onBeforePaste)){if(!1===(c=h.onBeforePaste.call(w,a,h)))return i.preventDefault();c||(c=a)}return ie(this,!1,!1,c.toString().split("")),K(this,R(),G(F()),i,m!==R().join("")),i.preventDefault()},inputFallBackEvent:function(t){var i=this,n=i.inputmask._valueGet();if(R().join("")!==n){var o=oe(i);if(n=function(e,t,i){if(l){var n=t.replace(R().join(""),"");if(1===n.length){var o=t.split("");o.splice(i.begin,0,n),t=o.join("")}}return t}(0,n=function(e,t,i){return"."===t.charAt(i.begin-1)&&""!==h.radixPoint&&((t=t.split(""))[i.begin-1]=h.radixPoint.charAt(0),t=t.join("")),t}(0,n,o),o),R().join("")!==n){var a=R().join(""),r=!h.numericInput&&n.length>a.length?-1:0,s=n.substr(0,o.begin),c=n.substr(o.begin),d=a.substr(0,o.begin+r),p=a.substr(o.begin+r),f=o,m="",v=!1;if(s!==d){var g,b=(v=s.length>=d.length)?s.length:d.length;for(g=0;s.charAt(g)===d.charAt(g)&&g<b;g++);v&&(f.begin=g-r,m+=s.slice(g,f.end))}if(c!==p&&(c.length>p.length?m+=c.slice(0,1):c.length<p.length&&(f.end+=p.length-c.length,v||""===h.radixPoint||""!==c||s.charAt(f.begin+r-1)!==h.radixPoint||(f.begin--,m=h.radixPoint))),K(i,R(),{begin:f.begin+r,end:f.end+r}),m.length>0)e.each(m.split(""),function(t,n){var o=new e.Event("keypress");o.which=n.charCodeAt(0),S=!1,te.keypressEvent.call(i,o)});else{f.begin===f.end-1&&(f.begin=Z(f.begin+1),f.begin===f.end-1?oe(i,f.begin):oe(i,f.begin,f.end));var y=new e.Event("keydown");y.keyCode=h.numericInput?u.keyCode.BACKSPACE:u.keyCode.DELETE,te.keydownEvent.call(i,y)}t.preventDefault()}}},beforeInputEvent:function(t){if(t.cancelable){var i=this;switch(t.inputType){case"insertText":return e.each(t.data.split(""),function(t,n){var o=new e.Event("keypress");o.which=n.charCodeAt(0),S=!1,te.keypressEvent.call(i,o)}),t.preventDefault();case"deleteContentBackward":var n=new e.Event("keydown");return n.keyCode=u.keyCode.BACKSPACE,te.keydownEvent.call(i,n),t.preventDefault();case"deleteContentForward":var n=new e.Event("keydown");return n.keyCode=u.keyCode.DELETE,te.keydownEvent.call(i,n),t.preventDefault()}}},setValueEvent:function(t){this.inputmask.refreshValue=!1;var i=t&&t.detail?t.detail[0]:arguments[1],i=i||this.inputmask._valueGet(!0);e.isFunction(h.onBeforeMask)&&(i=h.onBeforeMask.call(w,i,h)||i),ie(this,!0,!1,i=i.split("")),m=R().join(""),(h.clearMaskOnLostFocus||h.clearIncomplete)&&this.inputmask._valueGet()===L().join("")&&this.inputmask._valueSet("")},focusEvent:function(e){var t=this.inputmask._valueGet();h.showMaskOnFocus&&(t!==R().join("")?K(this,R(),G(F())):!1===T&&oe(this,G(F()))),!0===h.positionCaretOnTab&&!1===T&&te.clickEvent.apply(this,[e,!0]),m=R().join("")},mouseleaveEvent:function(e){T=!1,h.clearMaskOnLostFocus&&n.activeElement!==this&&J(this,y)},clickEvent:function(t,o){var a=this;setTimeout(function(){if(n.activeElement===a){var t=oe(a);if(o&&(x?t.end=t.begin:t.begin=t.end),t.begin===t.end)switch(h.positionCaretOnClick){case"none":break;case"select":oe(a,0,R().length);break;case"ignore":oe(a,G(F()));break;case"radixFocus":if(function(t){if(""!==h.radixPoint){var n=A().validPositions;if(n[t]===i||n[t].input===Q(t)){if(t<G(-1))return!0;var o=e.inArray(h.radixPoint,R());if(-1!==o){for(var a in n)if(o<a&&n[a].input!==Q(a))return!1;return!0}}}return!1}(t.begin)){var r=R().join("").indexOf(h.radixPoint);oe(a,h.numericInput?G(r):r);break}default:var s=t.begin,l=F(s,!0),c=G(l);if(s<c)oe(a,W(s,!0)||W(s-1,!0)?s:G(s));else{var u=A().validPositions[l],d=O(c,u?u.match.locator:i,u),p=Q(c,d.match);if(""!==p&&R()[c]!==p&&!0!==d.match.optionalQuantifier&&!0!==d.match.newBlockMarker||!W(c,h.keepStatic)&&d.match.def===p){var f=G(c);(s>=f||s===c)&&(c=f)}oe(a,c)}}}},0)},cutEvent:function(i){e(this);var o=oe(this),a=i.originalEvent||i,r=t.clipboardData||a.clipboardData,s=x?R().slice(o.end,o.begin):R().slice(o.begin,o.end);r.setData("text",x?s.reverse().join(""):s.join("")),n.execCommand&&n.execCommand("copy"),le(0,u.keyCode.DELETE,o),K(this,R(),A().p,i,m!==R().join(""))},blurEvent:function(t){var n=e(this);if(this.inputmask){J(this,y);var o=this.inputmask._valueGet(),a=R().slice();""===o&&b===i||(h.clearMaskOnLostFocus&&(-1===F()&&o===L().join("")?a=[]:re(a)),!1===se(a)&&(setTimeout(function(){n.trigger("incomplete")},0),h.clearIncomplete&&(D(),a=h.clearMaskOnLostFocus?[]:L().slice())),K(this,a,i,t)),m!==R().join("")&&(m=a.join(""),n.trigger("change"))}},mouseenterEvent:function(e){T=!0,n.activeElement!==this&&h.showMaskOnHover&&J(this,(x?R().slice().reverse():R()).join(""))},submitEvent:function(e){m!==R().join("")&&v.trigger("change"),h.clearMaskOnLostFocus&&-1===F()&&k.inputmask._valueGet&&k.inputmask._valueGet()===L().join("")&&k.inputmask._valueSet(""),h.clearIncomplete&&!1===se(R())&&k.inputmask._valueSet(""),h.removeMaskOnSubmit&&(k.inputmask._valueSet(k.inputmask.unmaskedvalue(),!0),setTimeout(function(){K(k,R())},0))},resetEvent:function(e){k.inputmask.refreshValue=!0,setTimeout(function(){v.trigger("setvalue")},0)}};function ie(t,n,o,a,r){var s=this||t.inputmask,l=a.slice(),c="",d=-1,p=i;if(D(),o||!0===h.autoUnmask)d=G(d);else{var f=L().slice(0,G(-1)).join(""),m=l.join("").match(new RegExp("^"+u.escapeRegex(f),"g"));m&&m.length>0&&(l.splice(0,m.length*f.length),d=G(d))}-1===d?(A().p=G(d),d=0):A().p=d,s.caretPos={begin:d},e.each(l,function(n,a){if(a!==i)if(A().validPositions[n]===i&&l[n]===Q(n)&&W(n,!0)&&!1===V(n,l[n],!0,i,i,!0))A().p++;else{var r=new e.Event("_checkval");r.which=a.charCodeAt(0),c+=a;var u=F(i,!0);!function(e,t){return-1!==E(!0,0,!1).slice(e,G(e)).join("").replace(/'/g,"").indexOf(t)&&!W(e)&&($(e).match.nativeDef===t.charAt(0)||null===$(e).match.fn&&$(e).match.nativeDef==="'"+t.charAt(0)||" "===$(e).match.nativeDef&&($(e+1).match.nativeDef===t.charAt(0)||null===$(e+1).match.fn&&$(e+1).match.nativeDef==="'"+t.charAt(0)))}(d,c)?(p=te.keypressEvent.call(t,r,!0,!1,o,s.caretPos.begin))&&(d=s.caretPos.begin+1,c=""):p=te.keypressEvent.call(t,r,!0,!1,o,u+1),p&&(K(i,R(),p.forwardPosition,r,!1),s.caretPos={begin:p.forwardPosition,end:p.forwardPosition})}}),n&&K(t,R(),p?p.forwardPosition:i,r||new e.Event("checkval"),r&&"input"===r.type)}function ne(t){if(t){if(t.inputmask===i)return t.value;t.inputmask&&t.inputmask.refreshValue&&te.setValueEvent.call(t)}var n=[],o=A().validPositions;for(var a in o)o[a].match&&null!=o[a].match.fn&&n.push(o[a].input);var r=0===n.length?"":(x?n.reverse():n).join("");if(e.isFunction(h.onUnMask)){var s=(x?R().slice().reverse():R()).join("");r=h.onUnMask.call(w,s,r,h)}return r}function oe(o,a,r,s){function l(e){return!x||"number"!=typeof e||h.greedy&&""===h.placeholder||!k||(e=k.inputmask._valueGet().length-e),e}var c;if(a===i)return"selectionStart"in o?(a=o.selectionStart,r=o.selectionEnd):t.getSelection?(c=t.getSelection().getRangeAt(0)).commonAncestorContainer.parentNode!==o&&c.commonAncestorContainer!==o||(a=c.startOffset,r=c.endOffset):n.selection&&n.selection.createRange&&(c=n.selection.createRange(),a=0-c.duplicate().moveStart("character",-o.inputmask._valueGet().length),r=a+c.text.length),{begin:s?a:l(a),end:s?r:l(r)};if(e.isArray(a)&&(r=x?a[0]:a[1],a=x?a[1]:a[0]),a.begin!==i&&(r=x?a.begin:a.end,a=x?a.end:a.begin),"number"==typeof a){a=s?a:l(a),r="number"==typeof(r=s?r:l(r))?r:a;var u=parseInt(((o.ownerDocument.defaultView||t).getComputedStyle?(o.ownerDocument.defaultView||t).getComputedStyle(o,null):o.currentStyle).fontSize)*r;if(o.scrollLeft=u>o.scrollWidth?u:0,o.inputmask.caretPos={begin:a,end:r},o===n.activeElement){if("selectionStart"in o)o.selectionStart=a,o.selectionEnd=r;else if(t.getSelection){if(c=n.createRange(),o.firstChild===i||null===o.firstChild){var d=n.createTextNode("");o.appendChild(d)}c.setStart(o.firstChild,a<o.inputmask._valueGet().length?a:o.inputmask._valueGet().length),c.setEnd(o.firstChild,r<o.inputmask._valueGet().length?r:o.inputmask._valueGet().length),c.collapse(!0);var p=t.getSelection();p.removeAllRanges(),p.addRange(c)}else o.createTextRange&&((c=o.createTextRange()).collapse(!0),c.moveEnd("character",r),c.moveStart("character",a),c.select());ue(o,{begin:a,end:r})}}}function ae(t){var n,o,a=E(!0,F(),!0,!0),r=a.length,s=F(),l={},c=A().validPositions[s],u=c!==i?c.locator.slice():i;for(n=s+1;n<a.length;n++)o=O(n,u,n-1),u=o.locator.slice(),l[n]=e.extend(!0,{},o);var d=c&&c.alternation!==i?c.locator[c.alternation]:i;for(n=r-1;n>s&&((o=l[n]).match.optionality||o.match.optionalQuantifier&&o.match.newBlockMarker||d&&(d!==l[n].locator[c.alternation]&&null!=o.match.fn||null===o.match.fn&&o.locator[c.alternation]&&B(o.locator[c.alternation].toString().split(","),d.toString().split(","))&&""!==N(n)[0].def))&&a[n]===Q(n,o.match);n--)r--;return t?{l:r,def:l[r]?l[r].match:i}:r}function re(e){e.length=0;for(var t,n=E(!0,0,!0,i,!0);(t=n.shift())!==i;)e.push(t);return e}function se(t){if(e.isFunction(h.isComplete))return h.isComplete(t,h);if("*"===h.repeat)return i;var n=!1,o=ae(!0),a=Z(o.l);if(o.def===i||o.def.newBlockMarker||o.def.optionality||o.def.optionalQuantifier){n=!0;for(var r=0;r<=a;r++){var s=O(r).match;if(null!==s.fn&&A().validPositions[r]===i&&!0!==s.optionality&&!0!==s.optionalQuantifier||null===s.fn&&t[r]!==Q(r,s)){n=!1;break}}}return n}function le(e,t,n,o,a){if((h.numericInput||x)&&(t===u.keyCode.BACKSPACE?t=u.keyCode.DELETE:t===u.keyCode.DELETE&&(t=u.keyCode.BACKSPACE),x)){var r=n.end;n.end=n.begin,n.begin=r}if(t===u.keyCode.BACKSPACE&&n.end-n.begin<1?(n.begin=Z(n.begin),A().validPositions[n.begin]!==i&&A().validPositions[n.begin].input===h.groupSeparator&&n.begin--):t===u.keyCode.DELETE&&n.begin===n.end&&(n.end=W(n.end,!0)&&A().validPositions[n.end]&&A().validPositions[n.end].input!==h.radixPoint?n.end+1:G(n.end)+1,A().validPositions[n.begin]!==i&&A().validPositions[n.begin].input===h.groupSeparator&&n.end++),Y(n),!0!==o&&!1!==h.keepStatic||null!==h.regex){var s=H(!0);if(s){var l=s.caret!==i?s.caret:s.pos?G(s.pos.begin?s.pos.begin:s.pos):F(-1,!0);(t!==u.keyCode.DELETE||n.begin>l)&&n.begin}}var c=F(n.begin,!0);if(c<n.begin||-1===n.begin)A().p=G(c);else if(!0!==o&&(A().p=n.begin,!0!==a))for(;A().p<c&&A().validPositions[A().p]===i;)A().p++}function ce(i){var o=(i.ownerDocument.defaultView||t).getComputedStyle(i,null),a=n.createElement("div");a.style.width=o.width,a.style.textAlign=o.textAlign,b=n.createElement("div"),i.inputmask.colorMask=b,b.className="im-colormask",i.parentNode.insertBefore(b,i),i.parentNode.removeChild(i),b.appendChild(i),b.appendChild(a),i.style.left=a.offsetLeft+"px",e(b).on("mouseleave",function(e){return te.mouseleaveEvent.call(i,[e])}),e(b).on("mouseenter",function(e){return te.mouseenterEvent.call(i,[e])}),e(b).on("click",function(e){return oe(i,function(e){var t,a=n.createElement("span");for(var r in o)isNaN(r)&&-1!==r.indexOf("font")&&(a.style[r]=o[r]);a.style.textTransform=o.textTransform,a.style.letterSpacing=o.letterSpacing,a.style.position="absolute",a.style.height="auto",a.style.width="auto",a.style.visibility="hidden",a.style.whiteSpace="nowrap",n.body.appendChild(a);var s,l=i.inputmask._valueGet(),c=0;for(t=0,s=l.length;t<=s;t++){if(a.innerHTML+=l.charAt(t)||"_",a.offsetWidth>=e){var u=e-c,d=a.offsetWidth-e;a.innerHTML=l.charAt(t),u-=a.offsetWidth/3,t=u<d?t-1:t;break}c=a.offsetWidth}return n.body.removeChild(a),t}(e.clientX)),te.clickEvent.call(i,[e])})}function ue(e,t,o){var a,r,s,l=[],c=!1,u=0;function d(e){if(e===i&&(e=""),c||null!==a.fn&&r.input!==i)if(c&&(null!==a.fn&&r.input!==i||""===a.def)){c=!1;var t=l.length;l[t-1]=l[t-1]+"</span>",l.push(e)}else l.push(e);else c=!0,l.push("<span class='im-static'>"+e)}if(b!==i){var p=R();if(t===i?t=oe(e):t.begin===i&&(t={begin:t,end:t}),!0!==o){var f=F();do{A().validPositions[u]?(r=A().validPositions[u],a=r.match,s=r.locator.slice(),d(p[u])):(r=O(u,s,u-1),a=r.match,s=r.locator.slice(),!1===h.jitMasking||u<f||"number"==typeof h.jitMasking&&isFinite(h.jitMasking)&&h.jitMasking>u?d(Q(u,a)):c=!1),u++}while((g===i||u<g)&&(null!==a.fn||""!==a.def)||f>u||c);c&&d(),n.activeElement===e&&(l.splice(t.begin,0,t.begin===t.end||t.end>A().maskLength?'<mark class="im-caret" style="border-right-width: 1px;border-right-style: solid;">':'<mark class="im-caret-select">'),l.splice(t.end+1,0,"</mark>"))}var m=b.getElementsByTagName("div")[0];m.innerHTML=l.join(""),e.inputmask.positionColorMask(e,m)}}if(u.prototype.positionColorMask=function(e,t){e.style.left=t.offsetLeft+"px"},o!==i)switch(o.action){case"isComplete":return k=o.el,se(R());case"unmaskedvalue":return k!==i&&o.value===i||(X=o.value,X=(e.isFunction(h.onBeforeMask)&&h.onBeforeMask.call(w,X,h)||X).split(""),ie.call(this,i,!1,!1,X),e.isFunction(h.onBeforeWrite)&&h.onBeforeWrite.call(w,i,R(),0,h)),ne(k);case"mask":!function(t){ee.off(t);var o=function(t,o){var a=t.getAttribute("type"),s="INPUT"===t.tagName&&-1!==e.inArray(a,o.supportsInputType)||t.isContentEditable||"TEXTAREA"===t.tagName;if(!s)if("INPUT"===t.tagName){var l=n.createElement("input");l.setAttribute("type",a),s="text"===l.type,l=null}else s="partial";return!1!==s?function(t){var a,s;function l(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():-1!==F()||!0!==o.nullable?n.activeElement===this&&o.clearMaskOnLostFocus?(x?re(R().slice()).reverse():re(R().slice())).join(""):a.call(this):"":a.call(this)}function c(t){s.call(this,t),this.inputmask&&e(this).trigger("setvalue",[t])}if(!t.inputmask.__valueGet){if(!0!==o.noValuePatching){if(Object.getOwnPropertyDescriptor){"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"===r("test".__proto__)?function(e){return e.__proto__}:function(e){return e.constructor.prototype});var u=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t),"value"):i;u&&u.get&&u.set?(a=u.get,s=u.set,Object.defineProperty(t,"value",{get:l,set:c,configurable:!0})):"INPUT"!==t.tagName&&(a=function(){return this.textContent},s=function(e){this.textContent=e},Object.defineProperty(t,"value",{get:l,set:c,configurable:!0}))}else n.__lookupGetter__&&t.__lookupGetter__("value")&&(a=t.__lookupGetter__("value"),s=t.__lookupSetter__("value"),t.__defineGetter__("value",l),t.__defineSetter__("value",c));t.inputmask.__valueGet=a,t.inputmask.__valueSet=s}t.inputmask._valueGet=function(e){return x&&!0!==e?a.call(this.el).split("").reverse().join(""):a.call(this.el)},t.inputmask._valueSet=function(e,t){s.call(this.el,null===e||e===i?"":!0!==t&&x?e.split("").reverse().join(""):e)},a===i&&(a=function(){return this.value},s=function(e){this.value=e},function(t){if(e.valHooks&&(e.valHooks[t]===i||!0!==e.valHooks[t].inputmaskpatch)){var n=e.valHooks[t]&&e.valHooks[t].get?e.valHooks[t].get:function(e){return e.value},a=e.valHooks[t]&&e.valHooks[t].set?e.valHooks[t].set:function(e,t){return e.value=t,e};e.valHooks[t]={get:function(e){if(e.inputmask){if(e.inputmask.opts.autoUnmask)return e.inputmask.unmaskedvalue();var t=n(e);return-1!==F(i,i,e.inputmask.maskset.validPositions)||!0!==o.nullable?t:""}return n(e)},set:function(t,i){var n,o=e(t);return n=a(t,i),t.inputmask&&o.trigger("setvalue",[i]),n},inputmaskpatch:!0}}}(t.type),function(t){ee.on(t,"mouseenter",function(t){var i=e(this),n=this.inputmask._valueGet();n!==R().join("")&&i.trigger("setvalue")})}(t))}}(t):t.inputmask=i,s}(t,h);if(!1!==o&&(v=e(k=t),y=k.placeholder,-1===(g=k!==i?k.maxLength:i)&&(g=i),!0===h.colorMask&&ce(k),s&&("inputmode"in k&&(k.inputmode=h.inputmode,k.setAttribute("inputmode",h.inputmode)),!0===h.disablePredictiveText&&("autocorrect"in k?k.autocorrect=!1:(!0!==h.colorMask&&ce(k),k.type="password"))),!0===o&&(k.setAttribute("im-insert",h.insertMode),ee.on(k,"submit",te.submitEvent),ee.on(k,"reset",te.resetEvent),ee.on(k,"blur",te.blurEvent),ee.on(k,"focus",te.focusEvent),!0!==h.colorMask&&(ee.on(k,"click",te.clickEvent),ee.on(k,"mouseleave",te.mouseleaveEvent),ee.on(k,"mouseenter",te.mouseenterEvent)),ee.on(k,"paste",te.pasteEvent),ee.on(k,"cut",te.cutEvent),ee.on(k,"complete",h.oncomplete),ee.on(k,"incomplete",h.onincomplete),ee.on(k,"cleared",h.oncleared),s||!0===h.inputEventOnly?k.removeAttribute("maxLength"):(ee.on(k,"keydown",te.keydownEvent),ee.on(k,"keypress",te.keypressEvent)),ee.on(k,"input",te.inputFallBackEvent),ee.on(k,"beforeinput",te.beforeInputEvent)),ee.on(k,"setvalue",te.setValueEvent),m=L().join(""),""!==k.inputmask._valueGet(!0)||!1===h.clearMaskOnLostFocus||n.activeElement===k)){var a=e.isFunction(h.onBeforeMask)&&h.onBeforeMask.call(w,k.inputmask._valueGet(!0),h)||k.inputmask._valueGet(!0);""!==a&&ie(k,!0,!1,a.split(""));var l=R().slice();m=l.join(""),!1===se(l)&&h.clearIncomplete&&D(),h.clearMaskOnLostFocus&&n.activeElement!==k&&(-1===F()?l=[]:re(l)),(!1===h.clearMaskOnLostFocus||h.showMaskOnFocus&&n.activeElement===k||""!==k.inputmask._valueGet(!0))&&K(k,l),n.activeElement===k&&oe(k,G(F()))}}(k);break;case"format":return X=(e.isFunction(h.onBeforeMask)&&h.onBeforeMask.call(w,o.value,h)||o.value).split(""),ie.call(this,i,!0,!1,X),o.metadata?{value:x?R().slice().reverse().join(""):R().join(""),metadata:f.call(this,{action:"getmetadata"},d,h)}:x?R().slice().reverse().join(""):R().join("");case"isValid":o.value?(X=o.value.split(""),ie.call(this,i,!0,!0,X)):o.value=R().join("");for(var de=R(),he=ae(),pe=de.length-1;pe>he&&!W(pe);pe--);return de.splice(he,pe+1-he),se(de)&&o.value===R().join("");case"getemptymask":return L().join("");case"remove":return k&&k.inputmask&&(e.data(k,"_inputmask_opts",null),v=e(k),k.inputmask._valueSet(h.autoUnmask?ne(k):k.inputmask._valueGet(!0)),ee.off(k),k.inputmask.colorMask&&((b=k.inputmask.colorMask).removeChild(k),b.parentNode.insertBefore(k,b),b.parentNode.removeChild(b)),Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(k),"value")&&k.inputmask.__valueGet&&Object.defineProperty(k,"value",{get:k.inputmask.__valueGet,set:k.inputmask.__valueSet,configurable:!0}):n.__lookupGetter__&&k.__lookupGetter__("value")&&k.inputmask.__valueGet&&(k.__defineGetter__("value",k.inputmask.__valueGet),k.__defineSetter__("value",k.inputmask.__valueSet)),k.inputmask=i),k;case"getmetadata":if(e.isArray(d.metadata)){var fe=E(!0,0,!1).join("");return e.each(d.metadata,function(e,t){if(t.mask===fe)return fe=t,!1}),fe}return d.metadata}}return u.prototype={dataAttribute:"data-inputmask",defaults:{placeholder:"_",optionalmarker:["[","]"],quantifiermarker:["{","}"],groupmarker:["(",")"],alternatormarker:"|",escapeChar:"\\",mask:null,regex:null,oncomplete:e.noop,onincomplete:e.noop,oncleared:e.noop,repeat:0,greedy:!1,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,alias:null,onKeyDown:e.noop,onBeforeMask:null,onBeforePaste:function(t,i){return e.isFunction(i.onBeforeMask)?i.onBeforeMask.call(this,t,i):t},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:e.noop,skipOptionalPartCharacter:" ",numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",_radixDance:!1,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","url","password","search"],ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123,0,229],isComplete:null,preValidation:null,postValidation:null,staticDefinitionSymbol:i,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"verbatim",colorMask:!1,disablePredictiveText:!1,importDataAttributes:!0,shiftPositions:!0},definitions:{9:{validator:"[0-9-]",definitionSymbol:"*"},a:{validator:"[A-Za-z--]",definitionSymbol:"*"},"*":{validator:"[0-9-A-Za-z--]"}},aliases:{},masksCache:{},mask:function(o){var a=this;return"string"==typeof o&&(o=n.getElementById(o)||n.querySelectorAll(o)),o=o.nodeName?[o]:o,e.each(o,function(n,o){var r=e.extend(!0,{},a.opts);if(function(n,o,a,r){if(!0===o.importDataAttributes){var s,l,c,u,h=function(e,o){null!==(o=o!==i?o:n.getAttribute(r+"-"+e))&&("string"==typeof o&&(0===e.indexOf("on")?o=t[o]:"false"===o?o=!1:"true"===o&&(o=!0)),a[e]=o)},p=n.getAttribute(r);if(p&&""!==p&&(p=p.replace(/'/g,'"'),l=JSON.parse("{"+p+"}")),l)for(u in c=i,l)if("alias"===u.toLowerCase()){c=l[u];break}for(s in h("alias",c),a.alias&&d(a.alias,a,o),o){if(l)for(u in c=i,l)if(u.toLowerCase()===s.toLowerCase()){c=l[u];break}h(s,c)}}return e.extend(!0,o,a),("rtl"===n.dir||o.rightAlign)&&(n.style.textAlign="right"),("rtl"===n.dir||o.numericInput)&&(n.dir="ltr",n.removeAttribute("dir"),o.isRTL=!0),Object.keys(a).length}(o,r,e.extend(!0,{},a.userOptions),a.dataAttribute)){var s=h(r,a.noMasksCache);s!==i&&(o.inputmask!==i&&(o.inputmask.opts.autoUnmask=!0,o.inputmask.remove()),o.inputmask=new u(i,i,!0),o.inputmask.opts=r,o.inputmask.noMasksCache=a.noMasksCache,o.inputmask.userOptions=e.extend(!0,{},a.userOptions),o.inputmask.isRTL=r.isRTL||r.numericInput,o.inputmask.el=o,o.inputmask.maskset=s,e.data(o,"_inputmask_opts",r),f.call(o.inputmask,{action:"mask"}))}}),o&&o[0]&&o[0].inputmask||this},option:function(t,i){return"string"==typeof t?this.opts[t]:"object"===(void 0===t?"undefined":r(t))?(e.extend(this.userOptions,t),this.el&&!0!==i&&this.mask(this.el),this):void 0},unmaskedvalue:function(e){return this.maskset=this.maskset||h(this.opts,this.noMasksCache),f.call(this,{action:"unmaskedvalue",value:e})},remove:function(){return f.call(this,{action:"remove"})},getemptymask:function(){return this.maskset=this.maskset||h(this.opts,this.noMasksCache),f.call(this,{action:"getemptymask"})},hasMaskedValue:function(){return!this.opts.autoUnmask},isComplete:function(){return this.maskset=this.maskset||h(this.opts,this.noMasksCache),f.call(this,{action:"isComplete"})},getmetadata:function(){return this.maskset=this.maskset||h(this.opts,this.noMasksCache),f.call(this,{action:"getmetadata"})},isValid:function(e){return this.maskset=this.maskset||h(this.opts,this.noMasksCache),f.call(this,{action:"isValid",value:e})},format:function(e,t){return this.maskset=this.maskset||h(this.opts,this.noMasksCache),f.call(this,{action:"format",value:e,metadata:t})},setValue:function(t){this.el&&e(this.el).trigger("setvalue",[t])},analyseMask:function(t,n,o){var a,r,s,l,c,d,h=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?(?:\|[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g,p=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,f=!1,m=new b,v=[],g=[];function b(e,t,i,n){this.matches=[],this.openGroup=e||!1,this.alternatorGroup=!1,this.isGroup=e||!1,this.isOptional=t||!1,this.isQuantifier=i||!1,this.isAlternator=n||!1,this.quantifier={min:1,max:1}}function y(t,a,r){r=r!==i?r:t.matches.length;var s=t.matches[r-1];if(n)0===a.indexOf("[")||f&&/\\d|\\s|\\w]/i.test(a)||"."===a?t.matches.splice(r++,0,{fn:new RegExp(a,o.casing?"i":""),optionality:!1,newBlockMarker:s===i?"master":s.def!==a,casing:null,def:a,placeholder:i,nativeDef:a}):(f&&(a=a[a.length-1]),e.each(a.split(""),function(e,n){s=t.matches[r-1],t.matches.splice(r++,0,{fn:null,optionality:!1,newBlockMarker:s===i?"master":s.def!==n&&null!==s.fn,casing:null,def:o.staticDefinitionSymbol||n,placeholder:o.staticDefinitionSymbol!==i?n:i,nativeDef:(f?"'":"")+n})})),f=!1;else{var l=(o.definitions?o.definitions[a]:i)||u.prototype.definitions[a];l&&!f?t.matches.splice(r++,0,{fn:l.validator?"string"==typeof l.validator?new RegExp(l.validator,o.casing?"i":""):new function(){this.test=l.validator}:new RegExp("."),optionality:!1,newBlockMarker:s===i?"master":s.def!==(l.definitionSymbol||a),casing:l.casing,def:l.definitionSymbol||a,placeholder:l.placeholder,nativeDef:a}):(t.matches.splice(r++,0,{fn:null,optionality:!1,newBlockMarker:s===i?"master":s.def!==a&&null!==s.fn,casing:null,def:o.staticDefinitionSymbol||a,placeholder:o.staticDefinitionSymbol!==i?a:i,nativeDef:(f?"'":"")+a}),f=!1)}}function w(){if(v.length>0){if(y(l=v[v.length-1],r),l.isAlternator){c=v.pop();for(var e=0;e<c.matches.length;e++)c.matches[e].isGroup&&(c.matches[e].isGroup=!1);v.length>0?(l=v[v.length-1]).matches.push(c):m.matches.push(c)}}else y(m,r)}function k(e){var t=new b(!0);return t.openGroup=!1,t.matches=e,t}for(n&&(o.optionalmarker[0]=i,o.optionalmarker[1]=i);a=n?p.exec(t):h.exec(t);){if(r=a[0],n)switch(r.charAt(0)){case"?":r="{0,1}";break;case"+":case"*":r="{"+r+"}"}if(f)w();else switch(r.charAt(0)){case"(?=":case"(?!":case"(?<=":case"(?<!":break;case o.escapeChar:f=!0,n&&w();break;case o.optionalmarker[1]:case o.groupmarker[1]:if((s=v.pop()).openGroup=!1,s!==i)if(v.length>0){if((l=v[v.length-1]).matches.push(s),l.isAlternator){c=v.pop();for(var x=0;x<c.matches.length;x++)c.matches[x].isGroup=!1,c.matches[x].alternatorGroup=!1;v.length>0?(l=v[v.length-1]).matches.push(c):m.matches.push(c)}}else m.matches.push(s);else w();break;case o.optionalmarker[0]:v.push(new b(!1,!0));break;case o.groupmarker[0]:v.push(new b(!0));break;case o.quantifiermarker[0]:var C=new b(!1,!1,!0),_=(r=r.replace(/[{}]/g,"")).split("|"),S=_[0].split(","),T=isNaN(S[0])?S[0]:parseInt(S[0]),E=1===S.length?T:isNaN(S[1])?S[1]:parseInt(S[1]);"*"!==T&&"+"!==T||(T="*"===E?0:1),C.quantifier={min:T,max:E,jit:_[1]};var A=v.length>0?v[v.length-1].matches:m.matches;if((a=A.pop()).isAlternator){A.push(a),A=a.matches;var D=new b(!0),F=A.pop();A.push(D),A=D.matches,a=F}a.isGroup||(a=k([a])),A.push(a),A.push(C);break;case o.alternatormarker:var P=function(e){var t=e.pop();return t.isQuantifier&&(t=k([e.pop(),t])),t};if(v.length>0){var I=(l=v[v.length-1]).matches[l.matches.length-1];d=l.openGroup&&(I.matches===i||!1===I.isGroup&&!1===I.isAlternator)?v.pop():P(l.matches)}else d=P(m.matches);if(d.isAlternator)v.push(d);else if(d.alternatorGroup?(c=v.pop(),d.alternatorGroup=!1):c=new b(!1,!1,!1,!0),c.matches.push(d),v.push(c),d.openGroup){d.openGroup=!1;var M=new b(!0);M.alternatorGroup=!0,v.push(M)}break;default:w()}}for(;v.length>0;)s=v.pop(),m.matches.push(s);return m.matches.length>0&&(function t(a){a&&a.matches&&e.each(a.matches,function(e,r){var s=a.matches[e+1];(s===i||s.matches===i||!1===s.isQuantifier)&&r&&r.isGroup&&(r.isGroup=!1,n||(y(r,o.groupmarker[0],0),!0!==r.openGroup&&y(r,o.groupmarker[1]))),t(r)})}(m),g.push(m)),(o.numericInput||o.isRTL)&&function e(t){for(var n in t.matches=t.matches.reverse(),t.matches)if(t.matches.hasOwnProperty(n)){var a=parseInt(n);if(t.matches[n].isQuantifier&&t.matches[a+1]&&t.matches[a+1].isGroup){var r=t.matches[n];t.matches.splice(n,1),t.matches.splice(a+1,0,r)}t.matches[n].matches!==i?t.matches[n]=e(t.matches[n]):t.matches[n]=((s=t.matches[n])===o.optionalmarker[0]?s=o.optionalmarker[1]:s===o.optionalmarker[1]?s=o.optionalmarker[0]:s===o.groupmarker[0]?s=o.groupmarker[1]:s===o.groupmarker[1]&&(s=o.groupmarker[0]),s)}var s;return t}(g[0]),g}},u.extendDefaults=function(t){e.extend(!0,u.prototype.defaults,t)},u.extendDefinitions=function(t){e.extend(!0,u.prototype.definitions,t)},u.extendAliases=function(t){e.extend(!0,u.prototype.aliases,t)},u.format=function(e,t,i){return u(t).format(e,i)},u.unmask=function(e,t){return u(t).unmaskedvalue(e)},u.isValid=function(e,t){return u(t).isValid(e)},u.remove=function(t){"string"==typeof t&&(t=n.getElementById(t)||n.querySelectorAll(t)),t=t.nodeName?[t]:t,e.each(t,function(e,t){t.inputmask&&t.inputmask.remove()})},u.setValue=function(t,i){"string"==typeof t&&(t=n.getElementById(t)||n.querySelectorAll(t)),t=t.nodeName?[t]:t,e.each(t,function(t,n){n.inputmask?n.inputmask.setValue(i):e(n).trigger("setvalue",[i])})},u.escapeRegex=function(e){return e.replace(new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"].join("|\\")+")","gim"),"\\$1")},u.keyCode={BACKSPACE:8,BACKSPACE_SAFARI:127,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,SPACE:32,TAB:9,UP:38,X:88,CONTROL:17},u.dependencyLib=e,u})?n.apply(t,o):n)||(e.exports=a)},function(e,t,i){"use strict";var n,o,a;"function"==typeof Symbol&&Symbol.iterator;o=[i(4)],void 0===(a="function"==typeof(n=function(e){return e})?n.apply(t,o):n)||(e.exports=a)},function(e,t){e.exports=jQuery},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};__WEBPACK_AMD_DEFINE_RESULT__=function(){return"undefined"!=typeof window?window:new(eval("require('jsdom').JSDOM"))("").window}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(e,t,i){"use strict";var n,o,a,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=[i(2)],void 0===(a="function"==typeof(n=function(e){var t=e.dependencyLib,i={d:["[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",Date.prototype.getDate],dd:["0[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",function(){return s(Date.prototype.getDate.call(this),2)}],ddd:[""],dddd:[""],m:["[1-9]|1[012]",Date.prototype.setMonth,"month",function(){return Date.prototype.getMonth.call(this)+1}],mm:["0[1-9]|1[012]",Date.prototype.setMonth,"month",function(){return s(Date.prototype.getMonth.call(this)+1,2)}],mmm:[""],mmmm:[""],yy:["[0-9]{2}",Date.prototype.setFullYear,"year",function(){return s(Date.prototype.getFullYear.call(this),2)}],yyyy:["[0-9]{4}",Date.prototype.setFullYear,"year",function(){return s(Date.prototype.getFullYear.call(this),4)}],h:["[1-9]|1[0-2]",Date.prototype.setHours,"hours",Date.prototype.getHours],hh:["0[1-9]|1[0-2]",Date.prototype.setHours,"hours",function(){return s(Date.prototype.getHours.call(this),2)}],hhh:["[0-9]+",Date.prototype.setHours,"hours",Date.prototype.getHours],H:["1?[0-9]|2[0-3]",Date.prototype.setHours,"hours",Date.prototype.getHours],HH:["0[0-9]|1[0-9]|2[0-3]",Date.prototype.setHours,"hours",function(){return s(Date.prototype.getHours.call(this),2)}],HHH:["[0-9]+",Date.prototype.setHours,"hours",Date.prototype.getHours],M:["[1-5]?[0-9]",Date.prototype.setMinutes,"minutes",Date.prototype.getMinutes],MM:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setMinutes,"minutes",function(){return s(Date.prototype.getMinutes.call(this),2)}],ss:["[0-5][0-9]",Date.prototype.setSeconds,"seconds",function(){return s(Date.prototype.getSeconds.call(this),2)}],l:["[0-9]{3}",Date.prototype.setMilliseconds,"milliseconds",function(){return s(Date.prototype.getMilliseconds.call(this),3)}],L:["[0-9]{2}",Date.prototype.setMilliseconds,"milliseconds",function(){return s(Date.prototype.getMilliseconds.call(this),2)}],t:["[ap]"],tt:["[ap]m"],T:["[AP]"],TT:["[AP]M"],Z:[""],o:[""],S:[""]},n={isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};function o(e){if(!e.tokenizer){var t=[];for(var n in i)-1===t.indexOf(n[0])&&t.push(n[0]);e.tokenizer="("+t.join("+|")+")+?|.",e.tokenizer=new RegExp(e.tokenizer,"g")}return e.tokenizer}function a(t,n,a,r){for(var s,l="";s=o(a).exec(t);)if(void 0===n)if(i[s[0]])l+="("+i[s[0]][0]+")";else switch(s[0]){case"[":l+="(";break;case"]":l+=")?";break;default:l+=e.escapeRegex(s[0])}else if(i[s[0]])if(!0!==r&&i[s[0]][3]){var c=i[s[0]][3];l+=c.call(n.date)}else i[s[0]][2]?l+=n["raw"+i[s[0]][2]]:l+=s[0];else l+=s[0];return l}function s(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function l(e,t,n){var a,s,l,c={date:new Date(1,0,1)},u=e;function d(e){var t=e.replace(/[^0-9]/g,"0");if(t!=e){var i=e.replace(/[^0-9]/g,""),o=(n.min&&n.min[a]||e).toString(),r=(n.max&&n.max[a]||e).toString();t=i+(i<o.slice(0,i.length)?o.slice(i.length):i>r.slice(0,i.length)?r.slice(i.length):t.toString().slice(i.length))}return t}function h(e,t,i){e[a]=d(t),e["raw"+a]=t,void 0!==l&&l.call(e.date,"month"==a?parseInt(e[a])-1:e[a])}if("string"==typeof u){for(;s=o(n).exec(t);){var p=u.slice(0,s[0].length);i.hasOwnProperty(s[0])&&(i[s[0]][0],a=i[s[0]][2],l=i[s[0]][1],h(c,p)),u=u.slice(p.length)}return c}if(u&&"object"===(void 0===u?"undefined":r(u))&&u.hasOwnProperty("date"))return u}return e.extendAliases({datetime:{mask:function(e){return i.S=e.i18n.ordinalSuffix.join("|"),e.inputFormat=n[e.inputFormat]||e.inputFormat,e.displayFormat=n[e.displayFormat]||e.displayFormat||e.inputFormat,e.outputFormat=n[e.outputFormat]||e.outputFormat||e.inputFormat,e.placeholder=""!==e.placeholder?e.placeholder:e.inputFormat.replace(/[\[\]]/,""),e.regex=a(e.inputFormat,void 0,e),null},placeholder:"",inputFormat:"isoDateTime",displayFormat:void 0,outputFormat:void 0,min:null,max:null,i18n:{dayNames:["Mon","Tue","Wed","Thu","Fri","Sat","Sun","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],ordinalSuffix:["st","nd","rd","th"]},postValidation:function(e,t,i,n){n.min=l(n.min,n.inputFormat,n),n.max=l(n.max,n.inputFormat,n);var o=i,r=l(e.join(""),n.inputFormat,n);return o&&r.date.getTime()==r.date.getTime()&&(o=(o=function(e,t){return(!isFinite(e.rawday)||"29"==e.day&&!isFinite(e.rawyear)||new Date(e.date.getFullYear(),isFinite(e.rawmonth)?e.month:e.date.getMonth()+1,0).getDate()>=e.day)&&t}(r,o))&&function(e,t){var i=!0;if(t.min){if(e.rawyear){var n=e.rawyear.replace(/[^0-9]/g,""),o=t.min.year.substr(0,n.length);i=o<=n}e.year===e.rawyear&&t.min.date.getTime()==t.min.date.getTime()&&(i=t.min.date.getTime()<=e.date.getTime())}return i&&t.max&&t.max.date.getTime()==t.max.date.getTime()&&(i=t.max.date.getTime()>=e.date.getTime()),i}(r,n)),t&&o&&i.pos!==t?{buffer:a(n.inputFormat,r,n),refreshFromBuffer:{start:t,end:i.pos}}:o},onKeyDown:function(i,n,a,r){if(i.ctrlKey&&i.keyCode===e.keyCode.RIGHT){for(var l,c=new Date,u="";l=o(r).exec(r.inputFormat);)"d"===l[0].charAt(0)?u+=s(c.getDate(),l[0].length):"m"===l[0].charAt(0)?u+=s(c.getMonth()+1,l[0].length):"yyyy"===l[0]?u+=c.getFullYear().toString():"y"===l[0].charAt(0)&&(u+=s(c.getYear(),l[0].length));this.inputmask._valueSet(u),t(this).trigger("setvalue")}},onUnMask:function(e,t,i){return a(i.outputFormat,l(e,i.inputFormat,i),i,!0)},casing:function(e,t,i,n){return 0==t.nativeDef.indexOf("[ap]")?e.toLowerCase():0==t.nativeDef.indexOf("[AP]")?e.toUpperCase():e},insertMode:!1,shiftPositions:!1}}),e})?n.apply(t,o):n)||(e.exports=a)},function(e,t,i){"use strict";var n,o,a;"function"==typeof Symbol&&Symbol.iterator;o=[i(2)],void 0===(a="function"==typeof(n=function(e){var t=e.dependencyLib;function i(t,i){for(var n="",o=0;o<t.length;o++)e.prototype.definitions[t.charAt(o)]||i.definitions[t.charAt(o)]||i.optionalmarker.start===t.charAt(o)||i.optionalmarker.end===t.charAt(o)||i.quantifiermarker.start===t.charAt(o)||i.quantifiermarker.end===t.charAt(o)||i.groupmarker.start===t.charAt(o)||i.groupmarker.end===t.charAt(o)||i.alternatormarker===t.charAt(o)?n+="\\"+t.charAt(o):n+=t.charAt(o);return n}return e.extendAliases({numeric:{mask:function(e){if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator===e.radixPoint&&e.digits&&"0"!==e.digits&&("."===e.radixPoint?e.groupSeparator=",":","===e.radixPoint?e.groupSeparator=".":e.groupSeparator="")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=void 0),e.autoGroup=e.autoGroup&&""!==e.groupSeparator,e.autoGroup&&("string"==typeof e.groupSize&&isFinite(e.groupSize)&&(e.groupSize=parseInt(e.groupSize)),isFinite(e.integerDigits))){var t=Math.floor(e.integerDigits/e.groupSize),n=e.integerDigits%e.groupSize;e.integerDigits=parseInt(e.integerDigits)+(0===n?t-1:t),e.integerDigits<1&&(e.integerDigits="*")}e.placeholder.length>1&&(e.placeholder=e.placeholder.charAt(0)),"radixFocus"===e.positionCaretOnClick&&""===e.placeholder&&!1===e.integerOptional&&(e.positionCaretOnClick="lvp"),e.definitions[";"]=e.definitions["~"],e.definitions[";"].definitionSymbol="~",!0===e.numericInput&&(e.positionCaretOnClick="radixFocus"===e.positionCaretOnClick?"lvp":e.positionCaretOnClick,e.digitsOptional=!1,isNaN(e.digits)&&(e.digits=2),e.decimalProtect=!1);var o="[+]";if(o+=i(e.prefix,e),!0===e.integerOptional?o+="~{1,"+e.integerDigits+"}":o+="~{"+e.integerDigits+"}",void 0!==e.digits){var a=e.decimalProtect?":":e.radixPoint,r=e.digits.toString().split(",");isFinite(r[0])&&r[1]&&isFinite(r[1])?o+=a+";{"+e.digits+"}":(isNaN(e.digits)||parseInt(e.digits)>0)&&(e.digitsOptional?o+="["+a+";{1,"+e.digits+"}]":o+=a+";{"+e.digits+"}")}return o+=i(e.suffix,e),o+="[-]",e.greedy=!1,o},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,enforceDigitsOnBlur:!1,radixPoint:".",positionCaretOnClick:"radixFocus",groupSize:3,groupSeparator:"",autoGroup:!1,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",integerOptional:!0,prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:null,max:null,step:1,insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,inputType:"text",inputmode:"numeric",preValidation:function(e,i,n,o,a,r){if("-"===n||n===a.negationSymbol.front)return!0===a.allowMinus&&(a.isNegative=void 0===a.isNegative||!a.isNegative,""===e.join("")||{caret:r.validPositions[i]?i:void 0,dopost:!0});if(!1===o&&n===a.radixPoint&&void 0!==a.digits&&(isNaN(a.digits)||parseInt(a.digits)>0)){var s=t.inArray(a.radixPoint,e);if(-1!==s&&void 0!==r.validPositions[s])return!0===a.numericInput?i===s:{caret:s+1}}return!0},postValidation:function(i,n,o,a){var r=a.suffix.split(""),s=a.prefix.split("");if(void 0===o.pos&&void 0!==o.caret&&!0!==o.dopost)return o;var l=void 0!==o.caret?o.caret:o.pos,c=i.slice();a.numericInput&&(l=c.length-l-1,c=c.reverse());var u=c[l];if(u===a.groupSeparator&&(u=c[l+=1]),l===c.length-a.suffix.length-1&&u===a.radixPoint)return o;void 0!==u&&u!==a.radixPoint&&u!==a.negationSymbol.front&&u!==a.negationSymbol.back&&(c[l]="?",a.prefix.length>0&&l>=(!1===a.isNegative?1:0)&&l<a.prefix.length-1+(!1===a.isNegative?1:0)?s[l-(!1===a.isNegative?1:0)]="?":a.suffix.length>0&&l>=c.length-a.suffix.length-(!1===a.isNegative?1:0)&&(r[l-(c.length-a.suffix.length-(!1===a.isNegative?1:0))]="?")),s=s.join(""),r=r.join("");var d=c.join("").replace(s,"");if(d=(d=(d=(d=d.replace(r,"")).replace(new RegExp(e.escapeRegex(a.groupSeparator),"g"),"")).replace(new RegExp("[-"+e.escapeRegex(a.negationSymbol.front)+"]","g"),"")).replace(new RegExp(e.escapeRegex(a.negationSymbol.back)+"$"),""),isNaN(a.placeholder)&&(d=d.replace(new RegExp(e.escapeRegex(a.placeholder),"g"),"")),d.length>1&&1!==d.indexOf(a.radixPoint)&&("0"===u&&(d=d.replace(/^\?/g,"")),d=d.replace(/^0/g,"")),d.charAt(0)===a.radixPoint&&""!==a.radixPoint&&!0!==a.numericInput&&(d="0"+d),""!==d){if(d=d.split(""),(!a.digitsOptional||a.enforceDigitsOnBlur&&"blur"===o.event)&&isFinite(a.digits)){var h=t.inArray(a.radixPoint,d),p=t.inArray(a.radixPoint,c);-1===h&&(d.push(a.radixPoint),h=d.length-1);for(var f=1;f<=a.digits;f++)a.digitsOptional&&(!a.enforceDigitsOnBlur||"blur"!==o.event)||void 0!==d[h+f]&&d[h+f]!==a.placeholder.charAt(0)?-1!==p&&void 0!==c[p+f]&&(d[h+f]=d[h+f]||c[p+f]):d[h+f]=o.placeholder||a.placeholder.charAt(0)}if(!0!==a.autoGroup||""===a.groupSeparator||u===a.radixPoint&&void 0===o.pos&&!o.dopost)d=d.join("");else{var m=d[d.length-1]===a.radixPoint&&o.c===a.radixPoint;d=e(function(e,t){var i="";if(i+="("+t.groupSeparator+"*{"+t.groupSize+"}){*}",""!==t.radixPoint){var n=e.join("").split(t.radixPoint);n[1]&&(i+=t.radixPoint+"*{"+n[1].match(/^\d*\??\d*/)[0].length+"}")}return i}(d,a),{numericInput:!0,jitMasking:!0,definitions:{"*":{validator:"[0-9?]",cardinality:1}}}).format(d.join("")),m&&(d+=a.radixPoint),d.charAt(0)===a.groupSeparator&&d.substr(1)}}if(a.isNegative&&"blur"===o.event&&(a.isNegative="0"!==d),d=s+d,d+=r,a.isNegative&&(d=a.negationSymbol.front+d,d+=a.negationSymbol.back),d=d.split(""),void 0!==u)if(u!==a.radixPoint&&u!==a.negationSymbol.front&&u!==a.negationSymbol.back)(l=t.inArray("?",d))>-1?d[l]=u:l=o.caret||0;else if(u===a.radixPoint||u===a.negationSymbol.front||u===a.negationSymbol.back){var v=t.inArray(u,d);-1!==v&&(l=v)}a.numericInput&&(l=d.length-l-1,d=d.reverse());var g={caret:void 0!==u&&void 0===o.pos||void 0===l?l:l+(a.numericInput?-1:1),buffer:d,refreshFromBuffer:o.dopost||i.join("")!==d.join("")};return g.refreshFromBuffer?g:o},onBeforeWrite:function(i,n,o,a){if(i)switch(i.type){case"keydown":return a.postValidation(n,o,{caret:o,dopost:!0},a);case"blur":case"checkval":var r;if(function(t){void 0===t.parseMinMaxOptions&&(null!==t.min&&(t.min=t.min.toString().replace(new RegExp(e.escapeRegex(t.groupSeparator),"g"),""),","===t.radixPoint&&(t.min=t.min.replace(t.radixPoint,".")),t.min=isFinite(t.min)?parseFloat(t.min):NaN,isNaN(t.min)&&(t.min=Number.MIN_VALUE)),null!==t.max&&(t.max=t.max.toString().replace(new RegExp(e.escapeRegex(t.groupSeparator),"g"),""),","===t.radixPoint&&(t.max=t.max.replace(t.radixPoint,".")),t.max=isFinite(t.max)?parseFloat(t.max):NaN,isNaN(t.max)&&(t.max=Number.MAX_VALUE)),t.parseMinMaxOptions="done")}(a),null!==a.min||null!==a.max){if(r=a.onUnMask(n.join(""),void 0,t.extend({},a,{unmaskAsNumber:!0})),null!==a.min&&r<a.min)return a.isNegative=a.min<0,a.postValidation(a.min.toString().replace(".",a.radixPoint).split(""),o,{caret:o,dopost:!0,placeholder:"0"},a);if(null!==a.max&&r>a.max)return a.isNegative=a.max<0,a.postValidation(a.max.toString().replace(".",a.radixPoint).split(""),o,{caret:o,dopost:!0,placeholder:"0"},a)}return a.postValidation(n,o,{caret:o,placeholder:"0",event:"blur"},a);case"_checkval":return{caret:o}}},regex:{integerPart:function(t,i){return i?new RegExp("["+e.escapeRegex(t.negationSymbol.front)+"+]?"):new RegExp("["+e.escapeRegex(t.negationSymbol.front)+"+]?\\d+")},integerNPart:function(t){return new RegExp("[\\d"+e.escapeRegex(t.groupSeparator)+e.escapeRegex(t.placeholder.charAt(0))+"]+")}},definitions:{"~":{validator:function(t,i,n,o,a,r){var s;if("k"===t||"m"===t){s={insert:[],c:0};for(var l=0,c="k"===t?2:5;l<c;l++)s.insert.push({pos:n+l,c:0});return s.pos=n+c,s}if(!0===(s=o?new RegExp("[0-9"+e.escapeRegex(a.groupSeparator)+"]").test(t):new RegExp("[0-9]").test(t))){if(!0!==a.numericInput&&void 0!==i.validPositions[n]&&"~"===i.validPositions[n].match.def&&!r){var u=i.buffer.join(""),d=(u=(u=u.replace(new RegExp("[-"+e.escapeRegex(a.negationSymbol.front)+"]","g"),"")).replace(new RegExp(e.escapeRegex(a.negationSymbol.back)+"$"),"")).split(a.radixPoint);d.length>1&&(d[1]=d[1].replace(/0/g,a.placeholder.charAt(0))),"0"===d[0]&&(d[0]=d[0].replace(/0/g,a.placeholder.charAt(0))),u=d[0]+a.radixPoint+d[1]||"";var h=i._buffer.join("");for(u===a.radixPoint&&(u=h);null===u.match(e.escapeRegex(h)+"$");)h=h.slice(1);s=void 0===(u=(u=u.replace(h,"")).split(""))[n]?{pos:n,remove:n}:{pos:n}}}else o||t!==a.radixPoint||void 0!==i.validPositions[n-1]||(s={insert:{pos:n,c:0},pos:n+1});return s},cardinality:1},"+":{validator:function(e,t,i,n,o){return o.allowMinus&&("-"===e||e===o.negationSymbol.front)},cardinality:1,placeholder:""},"-":{validator:function(e,t,i,n,o){return o.allowMinus&&e===o.negationSymbol.back},cardinality:1,placeholder:""},":":{validator:function(t,i,n,o,a){var r="["+e.escapeRegex(a.radixPoint)+"]",s=new RegExp(r).test(t);return s&&i.validPositions[n]&&i.validPositions[n].match.placeholder===a.radixPoint&&(s={caret:n+1}),s},cardinality:1,placeholder:function(e){return e.radixPoint}}},onUnMask:function(t,i,n){if(""===i&&!0===n.nullable)return i;var o=t.replace(n.prefix,"");return o=(o=o.replace(n.suffix,"")).replace(new RegExp(e.escapeRegex(n.groupSeparator),"g"),""),""!==n.placeholder.charAt(0)&&(o=o.replace(new RegExp(n.placeholder.charAt(0),"g"),"0")),n.unmaskAsNumber?(""!==n.radixPoint&&-1!==o.indexOf(n.radixPoint)&&(o=o.replace(e.escapeRegex.call(this,n.radixPoint),".")),o=(o=o.replace(new RegExp("^"+e.escapeRegex(n.negationSymbol.front)),"-")).replace(new RegExp(e.escapeRegex(n.negationSymbol.back)+"$"),""),Number(o)):o},isComplete:function(t,i){var n=(i.numericInput?t.slice().reverse():t).join("");return n=(n=(n=(n=(n=n.replace(new RegExp("^"+e.escapeRegex(i.negationSymbol.front)),"-")).replace(new RegExp(e.escapeRegex(i.negationSymbol.back)+"$"),"")).replace(i.prefix,"")).replace(i.suffix,"")).replace(new RegExp(e.escapeRegex(i.groupSeparator)+"([0-9]{3})","g"),"$1"),","===i.radixPoint&&(n=n.replace(e.escapeRegex(i.radixPoint),".")),isFinite(n)},onBeforeMask:function(i,n){n.isNegative=void 0;var o=n.radixPoint||",";"number"!=typeof i&&"number"!==n.inputType||""===o||(i=i.toString().replace(".",o));var a=i.split(o),r=a[0].replace(/[^\-0-9]/g,""),s=a.length>1?a[1].replace(/[^0-9]/g,""):"";i=r+(""!==s?o+s:s);var l=0;if(""!==o&&(l=s.length,""!==s)){var c=Math.pow(10,l||1);isFinite(n.digits)&&(l=parseInt(n.digits),c=Math.pow(10,l)),i=i.replace(e.escapeRegex(o),"."),isFinite(i)&&(i=Math.round(parseFloat(i)*c)/c),i=i.toString().replace(".",o)}return 0===n.digits&&-1!==i.indexOf(e.escapeRegex(o))&&(i=i.substring(0,i.indexOf(e.escapeRegex(o)))),function(e,i,n){if(i>0){var o=t.inArray(n.radixPoint,e);-1===o&&(e.push(n.radixPoint),o=e.length-1);for(var a=1;a<=i;a++)e[o+a]=e[o+a]||"0"}return e}(i.toString().split(""),l,n).join("")},onKeyDown:function(i,n,o,a){var r=t(this);if(i.ctrlKey)switch(i.keyCode){case e.keyCode.UP:r.val(parseFloat(this.inputmask.unmaskedvalue())+parseInt(a.step)),r.trigger("setvalue");break;case e.keyCode.DOWN:r.val(parseFloat(this.inputmask.unmaskedvalue())-parseInt(a.step)),r.trigger("setvalue")}}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0,radixPoint:""},percentage:{alias:"numeric",digits:2,digitsOptional:!0,radixPoint:".",placeholder:"0",autoGroup:!1,min:0,max:100,suffix:" %",allowMinus:!1}}),e})?n.apply(t,o):n)||(e.exports=a)},function(e,t,i){"use strict";var n,o,a,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=[i(4),i(2)],void 0===(a="function"==typeof(n=function(e,t){return void 0===e.fn.inputmask&&(e.fn.inputmask=function(i,n){var o,a=this[0];if(void 0===n&&(n={}),"string"==typeof i)switch(i){case"unmaskedvalue":return a&&a.inputmask?a.inputmask.unmaskedvalue():e(a).val();case"remove":return this.each(function(){this.inputmask&&this.inputmask.remove()});case"getemptymask":return a&&a.inputmask?a.inputmask.getemptymask():"";case"hasMaskedValue":return!(!a||!a.inputmask)&&a.inputmask.hasMaskedValue();case"isComplete":return!a||!a.inputmask||a.inputmask.isComplete();case"getmetadata":return a&&a.inputmask?a.inputmask.getmetadata():void 0;case"setvalue":t.setValue(a,n);break;case"option":if("string"!=typeof n)return this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(n)});if(a&&void 0!==a.inputmask)return a.inputmask.option(n);break;default:return n.alias=i,o=new t(n),this.each(function(){o.mask(this)})}else{if(Array.isArray(i))return n.alias=i,o=new t(n),this.each(function(){o.mask(this)});if("object"==(void 0===i?"undefined":r(i)))return o=new t(i),void 0===i.mask&&void 0===i.alias?this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(i);o.mask(this)}):this.each(function(){o.mask(this)});if(void 0===i)return this.each(function(){(o=new t(n)).mask(this)})}}),e.fn.inputmask})?n.apply(t,o):n)||(e.exports=a)}]),function(e){e.fn.multiselect=function(t){var i,n=e.extend({data:[],search:!1,searchPlaceholder:"Search items",placeholder:"Select option",className:null,disable:!1,onOptionSelect:function(){}},t),o=JSON.parse(JSON.stringify(n.data));function a(){e(".multiselect-container .search-input").val(""),r(n.data),e(".multiselect-container").removeClass("show"),e(event.target).closest(".multiselect-container").removeClass("show"),e(event.target).closest(".multiselect-container").find(".search-input").blur()}function r(t,i){if(i)var o=e(i.target).closest(".multiselect-container").find(".items-container");else o=e(".multiselect-container").find(".items-container");o.empty(),t.length>0?e.each(t,function(t,i){e("<div />",{class:"item","data-id":t,text:i.name,click:function(e){a(),n.onOptionSelect&&"function"==typeof n.onOptionSelect&&n.onOptionSelect(i.name)}}).appendTo(o)}):e("<div />",{class:"no-item",text:"No item found",click:function(e){a()}}).appendTo(o)}i=n.className?"multiselect-container "+n.className:"multiselect-container",n.disable&&(i+=" disable");var s=this.addClass(i),l=e("<div />",{class:"header",click:function(t){var i;e((i=t).target).closest(".multiselect-container").toggleClass("show"),e(i.target).closest(".multiselect-container").hasClass("show")?e(i.target).closest(".multiselect-container").find(".search-input").focus():e(i.target).closest(".multiselect-container").find(".search-input").blur()}}).appendTo(s),c=(e("<div />",{class:"selected-text",text:n.placeholder}).appendTo(l),e("<div />",{class:"dropdown"}).appendTo(s));if(n.search){var u=e("<div />",{class:"search"}).appendTo(c);e("<input />",{class:"search-input",name:"search",placeholder:n.searchPlaceholder,keyup:function(t){var i=e(this).val(),o=[];n.data.forEach(function(e){e.name.toLowerCase().indexOf(i.toLowerCase())>=0&&o.push(e)}),r(o,t)}}).appendTo(u)}if(o.length>0){var d=e("<div />",{class:"items-container"}).appendTo(c);e.each(o,function(t,i){e("<div />",{class:"item","data-id":t,text:i.name,click:function(e){a(),n.onOptionSelect&&"function"==typeof n.onOptionSelect&&n.onOptionSelect(i.name)}}).appendTo(d)})}return e(document).on("click",function(t){!e(".multiselect-container").find(t.target).length>0&&e(".multiselect-container").hasClass("show")&&a()}),this.append(s)}}(jQuery),function(e){"use strict";function t(t,i){this.isInit=!0,this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=i&&i.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(i),this.isInit=!1}function i(e,t){if("function"!=typeof e[t]){var i=e[t];e[t]=function(e){return e[i]}}}function n(e,t){if("function"!=typeof e[t]){var i=e[t];e[t]=function(){return i}}}function o(e){return e?s.text(e).html():""}function a(e){var t=0;if(document.selection){e.focus();var i=document.selection.createRange();i.moveStart("character",-e.value.length),t=i.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}var r={tagClass:function(e){return"label label-info"},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},itemTitle:function(e){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(e,t){t.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};t.prototype={constructor:t,add:function(t,i,n){var a=this;if(!(a.options.maxTags&&a.itemsArray.length>=a.options.maxTags)&&(!1===t||t)){if("string"==typeof t&&a.options.trimValue&&(t=e.trim(t)),"object"==typeof t&&!a.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(a.isSelect&&!a.multiple&&a.itemsArray.length>0&&a.remove(a.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var r=a.options.delimiterRegex?a.options.delimiterRegex:a.options.delimiter,s=t.split(r);if(s.length>1){for(var l=0;l<s.length;l++)this.add(s[l],!0);return void(i||a.pushVal())}}var c=a.options.itemValue(t),u=a.options.itemText(t),d=a.options.tagClass(t),h=a.options.itemTitle(t),p=e.grep(a.itemsArray,function(e){return a.options.itemValue(e)===c})[0];if(!p||a.options.allowDuplicates){if(!(a.items().toString().length+t.length+1>a.options.maxInputLength)){var f=e.Event("beforeItemAdd",{item:t,cancel:!1,options:n});if(a.$element.trigger(f),!f.cancel){a.itemsArray.push(t);var m=e('<span class="tag '+o(d)+(null!==h?'" title="'+h:"")+'">'+o(u)+'<span data-role="remove"></span></span>');m.data("item",t),a.findInputWrapper().before(m),m.after(" ");var v=e('option[value="'+encodeURIComponent(c)+'"]',a.$element).length||e('option[value="'+o(c)+'"]',a.$element).length;if(a.isSelect&&!v){var g=e("<option selected>"+o(u)+"</option>");g.data("item",t),g.attr("value",c),a.$element.append(g)}i||a.pushVal(),(a.options.maxTags===a.itemsArray.length||a.items().toString().length===a.options.maxInputLength)&&a.$container.addClass("bootstrap-tagsinput-max"),e(".typeahead, .twitter-typeahead",a.$container).length&&a.$input.typeahead("val",""),this.isInit?a.$element.trigger(e.Event("itemAddedOnInit",{item:t,options:n})):a.$element.trigger(e.Event("itemAdded",{item:t,options:n}))}}}else if(a.options.onTagExists){var b=e(".tag",a.$container).filter(function(){return e(this).data("item")===p});a.options.onTagExists(t,b)}}}},remove:function(t,i,n){var o=this;if(o.objectItems&&(t=(t="object"==typeof t?e.grep(o.itemsArray,function(e){return o.options.itemValue(e)==o.options.itemValue(t)}):e.grep(o.itemsArray,function(e){return o.options.itemValue(e)==t}))[t.length-1]),t){var a=e.Event("beforeItemRemove",{item:t,cancel:!1,options:n});if(o.$element.trigger(a),a.cancel)return;e(".tag",o.$container).filter(function(){return e(this).data("item")===t}).remove(),e("option",o.$element).filter(function(){return e(this).data("item")===t}).remove(),-1!==e.inArray(t,o.itemsArray)&&o.itemsArray.splice(e.inArray(t,o.itemsArray),1)}i||o.pushVal(),o.options.maxTags>o.itemsArray.length&&o.$container.removeClass("bootstrap-tagsinput-max"),o.$element.trigger(e.Event("itemRemoved",{item:t,options:n}))},removeAll:function(){var t=this;for(e(".tag",t.$container).remove(),e("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal()},refresh:function(){var t=this;e(".tag",t.$container).each(function(){var i=e(this),n=i.data("item"),a=t.options.itemValue(n),r=t.options.itemText(n),s=t.options.tagClass(n);(i.attr("class",null),i.addClass("tag "+o(s)),i.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=o(r),t.isSelect)&&e("option",t.$element).filter(function(){return e(this).data("item")===n}).attr("value",a)})},items:function(){return this.itemsArray},pushVal:function(){var t=this,i=e.map(t.items(),function(e){return t.options.itemValue(e).toString()});t.$element.val(i,!0).trigger("change")},build:function(t){var o=this;if(o.options=e.extend({},r,t),o.objectItems&&(o.options.freeInput=!1),i(o.options,"itemValue"),i(o.options,"itemText"),n(o.options,"tagClass"),o.options.typeahead){var s=o.options.typeahead||{};n(s,"source"),o.$input.typeahead(e.extend({},s,{source:function(t,i){function n(e){for(var t=[],n=0;n<e.length;n++){var r=o.options.itemText(e[n]);a[r]=e[n],t.push(r)}i(t)}this.map={};var a=this.map,r=s.source(t);e.isFunction(r.success)?r.success(n):e.isFunction(r.then)?r.then(n):e.when(r).then(n)},updater:function(e){return o.add(this.map[e]),this.map[e]},matcher:function(e){return-1!==e.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}}))}if(o.options.typeaheadjs){var l=null,c={},u=o.options.typeaheadjs;e.isArray(u)?(l=u[0],c=u[1]):c=u,o.$input.typeahead(l,c).on("typeahead:selected",e.proxy(function(e,t){c.valueKey?o.add(t[c.valueKey]):o.add(t),o.$input.typeahead("val","")},o))}o.$container.on("click",e.proxy(function(e){o.$element.attr("disabled")||o.$input.removeAttr("disabled"),o.$input.focus()},o)),o.options.addOnBlur&&o.options.freeInput&&o.$input.on("focusout",e.proxy(function(t){0===e(".typeahead, .twitter-typeahead",o.$container).length&&(o.add(o.$input.val()),o.$input.val(""))},o)),o.$container.on("keydown","input",e.proxy(function(t){var i=e(t.target),n=o.findInputWrapper();if(o.$element.attr("disabled"))o.$input.attr("disabled","disabled");else{switch(t.which){case 8:if(0===a(i[0])){var r=n.prev();r.length&&o.remove(r.data("item"))}break;case 46:if(0===a(i[0])){var s=n.next();s.length&&o.remove(s.data("item"))}break;case 37:var l=n.prev();0===i.val().length&&l[0]&&(l.before(n),i.focus());break;case 39:var c=n.next();0===i.val().length&&c[0]&&(c.after(n),i.focus())}var u=i.val().length;Math.ceil(u/5),i.attr("size",Math.max(this.inputSize,i.val().length))}},o)),o.$container.on("keypress","input",e.proxy(function(t){var i=e(t.target);if(o.$element.attr("disabled"))o.$input.attr("disabled","disabled");else{var n=i.val(),a=o.options.maxChars&&n.length>=o.options.maxChars;o.options.freeInput&&(function(t,i){var n=!1;return e.each(i,function(e,i){if("number"==typeof i&&t.which===i)return n=!0,!1;if(t.which===i.which){var o=!i.hasOwnProperty("altKey")||t.altKey===i.altKey,a=!i.hasOwnProperty("shiftKey")||t.shiftKey===i.shiftKey,r=!i.hasOwnProperty("ctrlKey")||t.ctrlKey===i.ctrlKey;if(o&&a&&r)return n=!0,!1}}),n}(t,o.options.confirmKeys)||a)&&(0!==n.length&&(o.add(a?n.substr(0,o.options.maxChars):n),i.val("")),!1===o.options.cancelConfirmKeysOnEmpty&&t.preventDefault());var r=i.val().length;Math.ceil(r/5),i.attr("size",Math.max(this.inputSize,i.val().length))}},o)),o.$container.on("click","[data-role=remove]",e.proxy(function(t){o.$element.attr("disabled")||o.remove(e(t.target).closest(".tag").data("item"))},o)),o.options.itemValue===r.itemValue&&("INPUT"===o.$element[0].tagName?o.add(o.$element.val()):e("option",o.$element).each(function(){o.add(e(this).attr("value"),!0)}))},destroy:function(){var e=this;e.$container.off("keypress","input"),e.$container.off("click","[role=remove]"),e.$container.remove(),e.$element.removeData("tagsinput"),e.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],i=this.$container[0];t&&t.parentNode!==i;)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(i,n,o){var a=[];return this.each(function(){var r=e(this).data("tagsinput");if(r)if(i||n){if(void 0!==r[i]){if(3===r[i].length&&void 0!==o)var s=r[i](n,null,o);else s=r[i](n);void 0!==s&&a.push(s)}}else a.push(r);else r=new t(this,i),e(this).data("tagsinput",r),a.push(r),"SELECT"===this.tagName&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val())}),"string"==typeof i?a.length>1?a:a[0]:a},e.fn.tagsinput.Constructor=t;var s=e("<div />");e(function(){e("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),function(e){"use strict";function t(t,i){this.$select=e(t),this.$select.attr("data-placeholder")&&(i.nonSelectedText=this.$select.data("placeholder")),this.options=this.mergeOptions(e.extend({},i,this.$select.data())),this.originalOptions=this.$select.clone()[0].options,this.query="",this.searchTimeout=null,this.lastToggledInput=null,this.options.multiple="multiple"===this.$select.attr("multiple"),this.options.onChange=e.proxy(this.options.onChange,this),this.options.onDropdownShow=e.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=e.proxy(this.options.onDropdownHide,this),this.options.onDropdownShown=e.proxy(this.options.onDropdownShown,this),this.options.onDropdownHidden=e.proxy(this.options.onDropdownHidden,this),this.buildContainer(),this.buildButton(),this.buildDropdown(),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&e("option",this.$select).length<=0&&this.disable(),this.$select.hide().after(this.$container)}"undefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={after:["options","value","selectedOptions"],init:function(t,i,n,o,a){var r=e(t),s=ko.toJS(i());if(r.multiselect(s),n.has("options")){var l=n.get("options");ko.isObservable(l)&&ko.computed({read:function(){l(),setTimeout(function(){var e=r.data("multiselect");e&&e.updateOriginalOptions(),r.multiselect("rebuild")},1)},disposeWhenNodeIsRemoved:t})}if(n.has("value")){var c=n.get("value");ko.isObservable(c)&&ko.computed({read:function(){c(),setTimeout(function(){r.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:t}).extend({rateLimit:100,notifyWhenChangesStop:!0})}if(n.has("selectedOptions")){var u=n.get("selectedOptions");ko.isObservable(u)&&ko.computed({read:function(){u(),setTimeout(function(){r.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:t}).extend({rateLimit:100,notifyWhenChangesStop:!0})}ko.utils.domNodeDisposal.addDisposeCallback(t,function(){r.multiselect("destroy")})},update:function(t,i,n,o,a){var r=e(t),s=ko.toJS(i());r.multiselect("setOptions",s),r.multiselect("rebuild")}}),t.prototype={defaults:{buttonText:function(t,i){if(0===t.length)return this.nonSelectedText;if(this.allSelectedText&&t.length===e("option",e(i)).length&&1!==e("option",e(i)).length&&this.multiple)return this.selectAllNumber?this.allSelectedText+" ("+t.length+")":this.allSelectedText;if(t.length>this.numberDisplayed)return t.length+" "+this.nSelectedText;var n="",o=this.delimiterText;return t.each(function(){var t=void 0!==e(this).attr("label")?e(this).attr("label"):e(this).text();n+=t+o}),n.substr(0,n.length-2)},buttonTitle:function(t,i){if(0===t.length)return this.nonSelectedText;var n="",o=this.delimiterText;return t.each(function(){var t=void 0!==e(this).attr("label")?e(this).attr("label"):e(this).text();n+=t+o}),n.substr(0,n.length-2)},optionLabel:function(t){return e(t).attr("label")||e(t).text()},onChange:function(e,t){},onDropdownShow:function(e){},onDropdownHide:function(e){},onDropdownShown:function(e){},onDropdownHidden:function(e){},onSelectAll:function(){},enableHTML:!1,buttonClass:"btn btn-default",inheritClass:!1,buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:!1,selectedClass:"active",maxHeight:!1,checkboxName:!1,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",selectAllName:!1,selectAllNumber:!0,enableFiltering:!1,enableCaseInsensitiveFiltering:!1,enableClickableOptGroups:!1,filterPlaceholder:"Search",filterBehavior:"text",includeFilterClearBtn:!0,preventInputChangeEvent:!1,nonSelectedText:"None selected",nSelectedText:"selected",allSelectedText:"All selected",numberDisplayed:3,disableIfEmpty:!1,delimiterText:", ",templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"><span class="multiselect-selected-text"></span> <b class="caret"></b></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button"><i class="glyphicon glyphicon-remove-circle"></i></button></span>',li:'<li><a tabindex="0"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item multiselect-group"><label></label></li>'}},constructor:t,buildContainer:function(){this.$container=e(this.options.buttonContainer),this.$container.on("show.bs.dropdown",this.options.onDropdownShow),this.$container.on("hide.bs.dropdown",this.options.onDropdownHide),this.$container.on("shown.bs.dropdown",this.options.onDropdownShown),this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=e(this.options.templates.button).addClass(this.options.buttonClass),this.$select.attr("class")&&this.options.inheritClass&&this.$button.addClass(this.$select.attr("class")),this.$select.prop("disabled")?this.disable():this.enable(),this.options.buttonWidth&&"auto"!==this.options.buttonWidth&&(this.$button.css({width:this.options.buttonWidth,overflow:"hidden","text-overflow":"ellipsis"}),this.$container.css({width:this.options.buttonWidth}));var t=this.$select.attr("tabindex");t&&this.$button.attr("tabindex",t),this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=e(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(e.proxy(function(t,i){var n=e(i),o=n.prop("tagName").toLowerCase();n.prop("value")!==this.options.selectAllValue&&("optgroup"===o?this.createOptgroup(i):"option"===o&&("divider"===n.data("role")?this.createDivider():this.createOptionValue(i)))},this)),e("li input",this.$ul).on("change",e.proxy(function(t){var i=e(t.target),n=i.prop("checked")||!1,o=i.val()===this.options.selectAllValue;this.options.selectedClass&&(n?i.closest("li").addClass(this.options.selectedClass):i.closest("li").removeClass(this.options.selectedClass));var a=i.val(),r=this.getOptionByValue(a),s=e("option",this.$select).not(r),l=e("input",this.$container).not(i);if(o&&(n?this.selectAll():this.deselectAll()),o||(n?(r.prop("selected",!0),this.options.multiple?r.prop("selected",!0):(this.options.selectedClass&&e(l).closest("li").removeClass(this.options.selectedClass),e(l).prop("checked",!1),s.prop("selected",!1),this.$button.click()),"active"===this.options.selectedClass&&s.closest("a").css("outline","")):r.prop("selected",!1)),this.$select.change(),this.updateButtonText(),this.updateSelectAll(),this.options.onChange(r,n),this.options.preventInputChangeEvent)return!1},this)),e("li a",this.$ul).on("mousedown",function(e){if(e.shiftKey)return!1}),e("li a",this.$ul).on("touchstart click",e.proxy(function(t){t.stopPropagation();var i=e(t.target);if(t.shiftKey&&this.options.multiple){i.is("label")&&(t.preventDefault(),(i=i.find("input")).prop("checked",!i.prop("checked")));var n=i.prop("checked")||!1;if(null!==this.lastToggledInput&&this.lastToggledInput!==i){var o=i.closest("li").index(),a=this.lastToggledInput.closest("li").index();if(o>a){var r=a;a=o,o=r}++a;var s=this.$ul.find("li").slice(o,a).find("input");s.prop("checked",n),this.options.selectedClass&&s.closest("li").toggleClass(this.options.selectedClass,n);for(var l=0,c=s.length;l<c;l++){var u=e(s[l]);this.getOptionByValue(u.val()).prop("selected",n)}}i.trigger("change")}i.is("input")&&!i.closest("li").is(".multiselect-item")&&(this.lastToggledInput=i),i.blur()},this)),this.$container.off("keydown.multiselect").on("keydown.multiselect",e.proxy(function(t){if(!e('input[type="text"]',this.$container).is(":focus"))if(9===t.keyCode&&this.$container.hasClass("open"))this.$button.click();else{var i=e(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!i.length)return;var n=i.index(i.filter(":focus"));38===t.keyCode&&n>0?n--:40===t.keyCode&&n<i.length-1?n++:~n||(n=0);var o=i.eq(n);if(o.focus(),32===t.keyCode||13===t.keyCode){var a=o.find("input");a.prop("checked",!a.prop("checked")),a.change()}t.stopPropagation(),t.preventDefault()}},this)),this.options.enableClickableOptGroups&&this.options.multiple&&e("li.multiselect-group",this.$ul).on("click",e.proxy(function(t){t.stopPropagation();var i=e(t.target).parent().nextUntil("li.multiselect-group").filter(":visible:not(.disabled)"),n=!0,o=i.find("input");o.each(function(){n=n&&e(this).prop("checked")}),o.prop("checked",!n).trigger("change")},this))},createOptionValue:function(t){var i=e(t);i.is(":selected")&&i.prop("selected",!0);var n=this.options.optionLabel(t),o=i.val(),a=this.options.multiple?"checkbox":"radio",r=e(this.options.templates.li),s=e("label",r);s.addClass(a),this.options.enableHTML?s.html(" "+n):s.text(" "+n);var l=e("<input/>").attr("type",a);this.options.checkboxName&&l.attr("name",this.options.checkboxName),s.prepend(l);var c=i.prop("selected")||!1;l.val(o),o===this.options.selectAllValue&&(r.addClass("multiselect-item multiselect-all"),l.parent().parent().addClass("multiselect-all")),s.attr("title",i.attr("title")),this.$ul.append(r),i.is(":disabled")&&l.attr("disabled","disabled").prop("disabled",!0).closest("a").attr("tabindex","-1").closest("li").addClass("disabled"),l.prop("checked",c),c&&this.options.selectedClass&&l.closest("li").addClass(this.options.selectedClass)},createDivider:function(t){var i=e(this.options.templates.divider);this.$ul.append(i)},createOptgroup:function(t){var i=e(t).prop("label"),n=e(this.options.templates.liGroup);this.options.enableHTML?e("label",n).html(i):e("label",n).text(i),this.options.enableClickableOptGroups&&n.addClass("multiselect-group-clickable"),this.$ul.append(n),e(t).is(":disabled")&&n.addClass("disabled"),e("option",t).each(e.proxy(function(e,t){this.createOptionValue(t)},this))},buildSelectAll:function(){if("number"==typeof this.options.selectAllValue&&(this.options.selectAllValue=this.options.selectAllValue.toString()),!this.hasSelectAll()&&this.options.includeSelectAllOption&&this.options.multiple&&e("option",this.$select).length>this.options.includeSelectAllIfMoreThan){this.options.includeSelectAllDivider&&this.$ul.prepend(e(this.options.templates.divider));var t=e(this.options.templates.li);e("label",t).addClass("checkbox"),this.options.enableHTML?e("label",t).html(" "+this.options.selectAllText):e("label",t).text(" "+this.options.selectAllText),this.options.selectAllName?e("label",t).prepend('<input type="checkbox" name="'+this.options.selectAllName+'" />'):e("label",t).prepend('<input type="checkbox" />');var i=e("input",t);i.val(this.options.selectAllValue),t.addClass("multiselect-item multiselect-all"),i.parent().parent().addClass("multiselect-all"),this.$ul.prepend(t),i.prop("checked",!1)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var t=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);if(this.$select.find("option").length>=t){if(this.$filter=e(this.options.templates.filter),e("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.options.includeFilterClearBtn){var i=e(this.options.templates.filterClearBtn);i.on("click",e.proxy(function(t){clearTimeout(this.searchTimeout),this.$filter.find(".multiselect-search").val(""),e("li",this.$ul).show().removeClass("filter-hidden"),this.updateSelectAll()},this)),this.$filter.find(".input-group").append(i)}this.$ul.prepend(this.$filter),this.$filter.val(this.query).on("click",function(e){e.stopPropagation()}).on("input keydown",e.proxy(function(t){13===t.which&&t.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(e.proxy(function(){var i,n;this.query!==t.target.value&&(this.query=t.target.value,e.each(e("li",this.$ul),e.proxy(function(t,o){var a=e("input",o).length>0?e("input",o).val():"",r=e("label",o).text(),s="";if("text"===this.options.filterBehavior?s=r:"value"===this.options.filterBehavior?s=a:"both"===this.options.filterBehavior&&(s=r+"\n"+a),a!==this.options.selectAllValue&&r){var l=!1;this.options.enableCaseInsensitiveFiltering&&s.toLowerCase().indexOf(this.query.toLowerCase())>-1?l=!0:s.indexOf(this.query)>-1&&(l=!0),e(o).toggle(l).toggleClass("filter-hidden",!l),e(o).hasClass("multiselect-group")?(i=o,n=l):(l&&e(i).show().removeClass("filter-hidden"),!l&&n&&e(o).show().removeClass("filter-hidden"))}},this)));this.updateSelectAll()},this),300,this)},this))}}},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.data("multiselect",null)},refresh:function(){e("option",this.$select).each(e.proxy(function(t,i){var n=e("li input",this.$ul).filter(function(){return e(this).val()===e(i).val()});e(i).is(":selected")?(n.prop("checked",!0),this.options.selectedClass&&n.closest("li").addClass(this.options.selectedClass)):(n.prop("checked",!1),this.options.selectedClass&&n.closest("li").removeClass(this.options.selectedClass)),e(i).is(":disabled")?n.attr("disabled","disabled").prop("disabled",!0).closest("li").addClass("disabled"):n.prop("disabled",!1).closest("li").removeClass("disabled")},this)),this.updateButtonText(),this.updateSelectAll()},select:function(t,i){e.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n];if(null!=o){var a=this.getOptionByValue(o),r=this.getInputByValue(o);void 0!==a&&void 0!==r&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&r.closest("li").addClass(this.options.selectedClass),r.prop("checked",!0),a.prop("selected",!0),i&&this.options.onChange(a,!0))}}this.updateButtonText(),this.updateSelectAll()},clearSelection:function(){this.deselectAll(!1),this.updateButtonText(),this.updateSelectAll()},deselect:function(t,i){e.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n];if(null!=o){var a=this.getOptionByValue(o),r=this.getInputByValue(o);void 0!==a&&void 0!==r&&(this.options.selectedClass&&r.closest("li").removeClass(this.options.selectedClass),r.prop("checked",!1),a.prop("selected",!1),i&&this.options.onChange(a,!1))}}this.updateButtonText(),this.updateSelectAll()},selectAll:function(t,i){t=void 0===t||t;var n=e("li input[type='checkbox']:enabled",this.$ul),o=n.filter(":visible"),a=n.length,r=o.length;if(t?(o.prop("checked",!0),e("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass)):(n.prop("checked",!0),e("li:not(.divider):not(.disabled)",this.$ul).addClass(this.options.selectedClass)),a===r||!1===t)e("option:enabled",this.$select).prop("selected",!0);else{var s=o.map(function(){return e(this).val()}).get();e("option:enabled",this.$select).filter(function(t){return-1!==e.inArray(e(this).val(),s)}).prop("selected",!0)}i&&this.options.onSelectAll()},deselectAll:function(t){if(t=void 0===t||t){var i=e("li input[type='checkbox']:not(:disabled)",this.$ul).filter(":visible");i.prop("checked",!1);var n=i.map(function(){return e(this).val()}).get();e("option:enabled",this.$select).filter(function(t){return-1!==e.inArray(e(this).val(),n)}).prop("selected",!1),this.options.selectedClass&&e("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass)}else e("li input[type='checkbox']:enabled",this.$ul).prop("checked",!1),e("option:enabled",this.$select).prop("selected",!1),this.options.selectedClass&&e("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass)},rebuild:function(){this.$ul.html(""),this.options.multiple="multiple"===this.$select.attr("multiple"),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(),this.options.disableIfEmpty&&e("option",this.$select).length<=0?this.disable():this.enable(),this.options.dropRight&&this.$ul.addClass("pull-right")},dataprovider:function(t){var i=0,n=this.$select.empty();e.each(t,function(t,o){var a;e.isArray(o.children)?(i++,a=e("<optgroup/>").attr({label:o.label||"Group "+i,disabled:!!o.disabled}),function(e,t){for(var i=0;i<e.length;++i)t(e[i],i)}(o.children,function(t){a.append(e("<option/>").attr({value:t.value,label:t.label||t.value,title:t.title,selected:!!t.selected,disabled:!!t.disabled}))})):a=e("<option/>").attr({value:o.value,label:o.label||o.value,title:o.title,selected:!!o.selected,disabled:!!o.disabled}),n.append(a)}),this.rebuild()},enable:function(){this.$select.prop("disabled",!1),this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0),this.$button.prop("disabled",!0).addClass("disabled")},setOptions:function(e){this.options=this.mergeOptions(e)},mergeOptions:function(t){return e.extend(!0,{},this.defaults,this.options,t)},hasSelectAll:function(){return e("li.multiselect-all",this.$ul).length>0},updateSelectAll:function(){if(this.hasSelectAll()){var t=e("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul),i=t.length,n=t.filter(":checked").length,o=e("li.multiselect-all",this.$ul),a=o.find("input");n>0&&n===i?(a.prop("checked",!0),o.addClass(this.options.selectedClass),this.options.onSelectAll()):(a.prop("checked",!1),o.removeClass(this.options.selectedClass))}},updateButtonText:function(){var t=this.getSelected();this.options.enableHTML?e(".multiselect .multiselect-selected-text",this.$container).html(this.options.buttonText(t,this.$select)):e(".multiselect .multiselect-selected-text",this.$container).text(this.options.buttonText(t,this.$select)),e(".multiselect",this.$container).attr("title",this.options.buttonTitle(t,this.$select))},getSelected:function(){return e("option",this.$select).filter(":selected")},getOptionByValue:function(t){for(var i=e("option",this.$select),n=t.toString(),o=0;o<i.length;o+=1){var a=i[o];if(a.value===n)return e(a)}},getInputByValue:function(t){for(var i=e("li input",this.$ul),n=t.toString(),o=0;o<i.length;o+=1){var a=i[o];if(a.value===n)return e(a)}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(e,t,i){var n=Array.prototype.slice.call(arguments,3);return setTimeout(function(){e.apply(i||window,n)},t)},setAllSelectedText:function(e){this.options.allSelectedText=e,this.updateButtonText()}},e.fn.multiselect=function(i,n,o){return this.each(function(){var a=e(this).data("multiselect");a||(a=new t(this,"object"==typeof i&&i),e(this).data("multiselect",a)),"string"==typeof i&&(a[i](n,o),"destroy"===i&&e(this).data("multiselect",!1))})},e.fn.multiselect.Constructor=t,e(function(){e("select[data-role=multiselect]").multiselect()})}(window.jQuery),("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)})(["jquery"],function(e){return function(){function t(t,i){return t||(t=r()),(l=e("#"+t.containerId)).length?l:(i&&(l=function(t){return(l=e("<div/>").attr("id",t.containerId).addClass(t.positionClass)).appendTo(e(t.target)),l}(t)),l)}function i(t){for(var i=l.children(),o=i.length-1;o>=0;o--)n(e(i[o]),t)}function n(t,i,n){var o=!(!n||!n.force)&&n.force;return!(!t||!o&&0!==e(":focus",t).length||(t[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){s(t)}}),0))}function o(e){c&&c(e)}function a(i){function n(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function a(t){var i=t&&!1!==f.closeMethod?f.closeMethod:f.hideMethod,n=t&&!1!==f.closeDuration?f.closeDuration:f.hideDuration,a=t&&!1!==f.closeEasing?f.closeEasing:f.hideEasing;if(!e(":focus",g).length||t)return clearTimeout(x.intervalId),g[i]({duration:n,easing:a,complete:function(){s(g),clearTimeout(v),f.onHidden&&"hidden"!==C.state&&f.onHidden(),C.state="hidden",C.endTime=new Date,o(C)}})}function c(){(f.timeOut>0||f.extendedTimeOut>0)&&(v=setTimeout(a,f.extendedTimeOut),x.maxHideTime=parseFloat(f.extendedTimeOut),x.hideEta=(new Date).getTime()+x.maxHideTime)}function h(){clearTimeout(v),x.hideEta=0,g.stop(!0,!0)[f.showMethod]({duration:f.showDuration,easing:f.showEasing})}function p(){var e=(x.hideEta-(new Date).getTime())/x.maxHideTime*100;w.width(e+"%")}var f=r(),m=i.iconClass||f.iconClass;if(void 0!==i.optionsOverride&&(f=e.extend(f,i.optionsOverride),m=i.optionsOverride.iconClass||m),!function(e,t){if(e.preventDuplicates){if(t.message===u)return!0;u=t.message}return!1}(f,i)){d++,l=t(f,!0);var v=null,g=e("<div/>"),b=e("<div/>"),y=e("<div/>"),w=e("<div/>"),k=e(f.closeHtml),x={intervalId:null,hideEta:null,maxHideTime:null},C={toastId:d,state:"visible",startTime:new Date,options:f,map:i};return i.iconClass&&g.addClass(f.toastClass).addClass(m),function(){if(i.title){var e=i.title;f.escapeHtml&&(e=n(i.title)),b.append(e).addClass(f.titleClass),g.append(b)}}(),function(){if(i.message){var e=i.message;f.escapeHtml&&(e=n(i.message)),y.append(e).addClass(f.messageClass),g.append(y)}}(),f.closeButton&&(k.addClass(f.closeClass).attr("role","button"),g.prepend(k)),f.progressBar&&(w.addClass(f.progressClass),g.prepend(w)),f.rtl&&g.addClass("rtl"),f.newestOnTop?l.prepend(g):l.append(g),function(){var e="";switch(i.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}g.attr("aria-live",e)}(),g.hide(),g[f.showMethod]({duration:f.showDuration,easing:f.showEasing,complete:f.onShown}),f.timeOut>0&&(v=setTimeout(a,f.timeOut),x.maxHideTime=parseFloat(f.timeOut),x.hideEta=(new Date).getTime()+x.maxHideTime,f.progressBar&&(x.intervalId=setInterval(p,10))),f.closeOnHover&&g.hover(h,c),!f.onclick&&f.tapToDismiss&&g.click(a),f.closeButton&&k&&k.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),f.onCloseClick&&f.onCloseClick(e),a(!0)}),f.onclick&&g.click(function(e){f.onclick(e),a()}),o(C),f.debug&&console&&console.log(C),g}}function r(){return e.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},p.options)}function s(e){l||(l=t()),e.is(":visible")||(e.remove(),e=null,0===l.children().length&&(l.remove(),u=void 0))}var l,c,u,d=0,h={error:"error",info:"info",success:"success",warning:"warning"},p={clear:function(e,o){var a=r();l||t(a),n(e,a,o)||i(a)},remove:function(i){var n=r();return l||t(n),i&&0===e(":focus",i).length?void s(i):void(l.children().length&&l.remove())},error:function(e,t,i){return a({type:h.error,iconClass:r().iconClasses.error,message:e,optionsOverride:i,title:t})},getContainer:t,info:function(e,t,i){return a({type:h.info,iconClass:r().iconClasses.info,message:e,optionsOverride:i,title:t})},options:{},subscribe:function(e){c=e},success:function(e,t,i){return a({type:h.success,iconClass:r().iconClasses.success,message:e,optionsOverride:i,title:t})},version:"2.1.4",warning:function(e,t,i){return a({type:h.warning,iconClass:r().iconClasses.warning,message:e,optionsOverride:i,title:t})}};return p}()});
