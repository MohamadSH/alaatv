function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){"use strict";var e={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6e3,useLeft:!1,closable:!0,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimatoin:!0,hideControlOnEnd:!1,mousewheel:!0,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:1,showAfterLoad:!0,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:!1,iframeMaxWidth:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],galleryId:1};function t(t,i){if(this.el=t,this.$el=$(t),this.s=$.extend({},e,i),this.s.dynamic&&"undefined"!==this.s.dynamicEl&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length)throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.modules={},this.lGalleryOn=!1,this.lgBusy=!1,this.hideBartimeout=!1,this.isTouch="ontouchstart"in document.documentElement,this.s.slideEndAnimatoin&&(this.s.hideControlOnEnd=!1),this.s.dynamic?this.$items=this.s.dynamicEl:"this"===this.s.selector?this.$items=this.$el:""!==this.s.selector?this.s.selectWithin?this.$items=$(this.s.selectWithin).find(this.s.selector):this.$items=this.$el.find($(this.s.selector)):this.$items=this.$el.children(),this.$slide="",this.$outer="",this.init(),this}t.prototype.init=function(){var e=this;e.s.preload>e.$items.length&&(e.s.preload=e.$items.length);var t=window.location.hash;t.indexOf("lg="+this.s.galleryId)>0&&(e.index=parseInt(t.split("&slide=")[1],10),$("body").addClass("lg-from-hash"),$("body").hasClass("lg-on")||(setTimeout(function(){e.build(e.index)}),$("body").addClass("lg-on"))),e.s.dynamic?(e.$el.trigger("onBeforeOpen.lg"),e.index=e.s.index||0,$("body").hasClass("lg-on")||setTimeout(function(){e.build(e.index),$("body").addClass("lg-on")})):e.$items.on("click.lgcustom",function(t){try{t.preventDefault(),t.preventDefault()}catch(e){t.returnValue=!1}e.$el.trigger("onBeforeOpen.lg"),e.index=e.s.index||e.$items.index(this),$("body").hasClass("lg-on")||(e.build(e.index),$("body").addClass("lg-on"))})},t.prototype.build=function(e){var t=this;t.structure(),$.each($.fn.lightGallery.modules,function(e){t.modules[e]=new $.fn.lightGallery.modules[e](t.el)}),t.slide(e,!1,!1,!1),t.s.keyPress&&t.keyPress(),t.$items.length>1?(t.arrow(),setTimeout(function(){t.enableDrag(),t.enableSwipe()},50),t.s.mousewheel&&t.mousewheel()):t.$slide.on("click.lg",function(){t.$el.trigger("onSlideClick.lg")}),t.counter(),t.closeGallery(),t.$el.trigger("onAfterOpen.lg"),t.$outer.on("mousemove.lg click.lg touchstart.lg",function(){t.$outer.removeClass("lg-hide-items"),clearTimeout(t.hideBartimeout),t.hideBartimeout=setTimeout(function(){t.$outer.addClass("lg-hide-items")},t.s.hideBarsDelay)}),t.$outer.trigger("mousemove.lg")},t.prototype.structure=function(){var e,t="",i="",r=0,n="",s=this;for($("body").append('<div class="lg-backdrop"></div>'),$(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms"),r=0;r<this.$items.length;r++)t+='<div class="lg-item"></div>';if(this.s.controls&&this.$items.length>1&&(i='<div class="lg-actions"><button class="lg-prev lg-icon">'+this.s.prevHtml+'</button><button class="lg-next lg-icon">'+this.s.nextHtml+"</button></div>"),".lg-sub-html"===this.s.appendSubHtmlTo&&(n='<div class="lg-sub-html"></div>'),e='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+t+'</div><div class="lg-toolbar lg-group"><span class="lg-close lg-icon"></span></div>'+i+n+"</div></div>",$("body").append(e),this.$outer=$(".lg-outer"),this.$slide=this.$outer.find(".lg-item"),this.s.useLeft?(this.$outer.addClass("lg-use-left"),this.s.mode="lg-slide"):this.$outer.addClass("lg-use-css3"),s.setTop(),$(window).on("resize.lg orientationchange.lg",function(){setTimeout(function(){s.setTop()},100)}),this.$slide.eq(this.index).addClass("lg-current"),this.doCss()?this.$outer.addClass("lg-css3"):(this.$outer.addClass("lg-css"),this.s.speed=0),this.$outer.addClass(this.s.mode),this.s.enableDrag&&this.$items.length>1&&this.$outer.addClass("lg-grab"),this.s.showAfterLoad&&this.$outer.addClass("lg-show-after-load"),this.doCss()){var o=this.$outer.find(".lg-inner");o.css("transition-timing-function",this.s.cssEasing),o.css("transition-duration",this.s.speed+"ms")}setTimeout(function(){$(".lg-backdrop").addClass("in")}),setTimeout(function(){s.$outer.addClass("lg-visible")},this.s.backdropDuration),this.s.download&&this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>'),this.prevScrollTop=$(window).scrollTop()},t.prototype.setTop=function(){if("100%"!==this.s.height){var e=$(window).height(),t=(e-parseInt(this.s.height,10))/2,i=this.$outer.find(".lg");e>=parseInt(this.s.height,10)?i.css("top",t+"px"):i.css("top","0px")}},t.prototype.doCss=function(){return!!function(){var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],t=document.documentElement,i=0;for(i=0;i<e.length;i++)if(e[i]in t.style)return!0}()},t.prototype.isVideo=function(e,t){var i;if(i=this.s.dynamic?this.s.dynamicEl[t].html:this.$items.eq(t).attr("data-html"),!e)return i?{html5:!0}:(console.error("lightGallery :- data-src is not pvovided on slide item "+(t+1)+". Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html"),!1);var r=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),n=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),s=e.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),o=e.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);return r?{youtube:r}:n?{vimeo:n}:s?{dailymotion:s}:o?{vk:o}:void 0},t.prototype.counter=function(){this.s.counter&&$(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")},t.prototype.addHtml=function(e){var t,i,r=null;if(this.s.dynamic?this.s.dynamicEl[e].subHtmlUrl?t=this.s.dynamicEl[e].subHtmlUrl:r=this.s.dynamicEl[e].subHtml:(i=this.$items.eq(e)).attr("data-sub-html-url")?t=i.attr("data-sub-html-url"):(r=i.attr("data-sub-html"),this.s.getCaptionFromTitleOrAlt&&!r&&(r=i.attr("title")||i.find("img").first().attr("alt"))),!t)if(null!=r){var n=r.substring(0,1);"."!==n&&"#"!==n||(r=this.s.subHtmlSelectorRelative&&!this.s.dynamic?i.find(r).html():$(r).html())}else r="";".lg-sub-html"===this.s.appendSubHtmlTo?t?this.$outer.find(this.s.appendSubHtmlTo).load(t):this.$outer.find(this.s.appendSubHtmlTo).html(r):t?this.$slide.eq(e).load(t):this.$slide.eq(e).append(r),null!=r&&(""===r?this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html"):this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")),this.$el.trigger("onAfterAppendSubHtml.lg",[e])},t.prototype.preload=function(e){var t=1,i=1;for(t=1;t<=this.s.preload&&!(t>=this.$items.length-e);t++)this.loadContent(e+t,!1,0);for(i=1;i<=this.s.preload&&!(e-i<0);i++)this.loadContent(e-i,!1,0)},t.prototype.loadContent=function(e,t,i){var r,n,s,o,a,l,u=this,c=!1,d=function(e){for(var t=[],i=[],r=0;r<e.length;r++){var s=e[r].split(" ");""===s[0]&&s.splice(0,1),i.push(s[0]),t.push(s[1])}for(var o=$(window).width(),a=0;a<t.length;a++)if(parseInt(t[a],10)>o){n=i[a];break}};if(u.s.dynamic){if(u.s.dynamicEl[e].poster&&(c=!0,s=u.s.dynamicEl[e].poster),l=u.s.dynamicEl[e].html,n=u.s.dynamicEl[e].src,u.s.dynamicEl[e].responsive)d(u.s.dynamicEl[e].responsive.split(","));o=u.s.dynamicEl[e].srcset,a=u.s.dynamicEl[e].sizes}else{if(u.$items.eq(e).attr("data-poster")&&(c=!0,s=u.$items.eq(e).attr("data-poster")),l=u.$items.eq(e).attr("data-html"),n=u.$items.eq(e).attr("href")||u.$items.eq(e).attr("data-src"),u.$items.eq(e).attr("data-responsive"))d(u.$items.eq(e).attr("data-responsive").split(","));o=u.$items.eq(e).attr("data-srcset"),a=u.$items.eq(e).attr("data-sizes")}var h=!1;u.s.dynamic?u.s.dynamicEl[e].iframe&&(h=!0):"true"===u.$items.eq(e).attr("data-iframe")&&(h=!0);var p=u.isVideo(n,e);if(!u.$slide.eq(e).hasClass("lg-loaded")){if(h)u.$slide.eq(e).prepend('<div class="lg-video-cont lg-has-iframe" style="max-width:'+u.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+n+'"  allowfullscreen="true"></iframe></div></div>');else if(c){var f="";f=p&&p.youtube?"lg-has-youtube":p&&p.vimeo?"lg-has-vimeo":"lg-has-html5",u.$slide.eq(e).prepend('<div class="lg-video-cont '+f+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+s+'" /></div></div>')}else p?(u.$slide.eq(e).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>'),u.$el.trigger("hasVideo.lg",[e,n,l])):u.$slide.eq(e).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+n+'" /></div>');if(u.$el.trigger("onAferAppendSlide.lg",[e]),r=u.$slide.eq(e).find(".lg-object"),a&&r.attr("sizes",a),o){r.attr("srcset",o);try{picturefill({elements:[r[0]]})}catch(e){console.warn("lightGallery :- If you want srcset to be supported for older browser please include picturefil version 2 javascript library in your document.")}}".lg-sub-html"!==this.s.appendSubHtmlTo&&u.addHtml(e),u.$slide.eq(e).addClass("lg-loaded")}u.$slide.eq(e).find(".lg-object").on("load.lg error.lg",function(){var t=0;i&&!$("body").hasClass("lg-from-hash")&&(t=i),setTimeout(function(){u.$slide.eq(e).addClass("lg-complete"),u.$el.trigger("onSlideItemLoad.lg",[e,i||0])},t)}),p&&p.html5&&!c&&u.$slide.eq(e).addClass("lg-complete"),!0===t&&(u.$slide.eq(e).hasClass("lg-complete")?u.preload(e):u.$slide.eq(e).find(".lg-object").on("load.lg error.lg",function(){u.preload(e)}))},t.prototype.slide=function(e,t,i,r){var n=this.$outer.find(".lg-current").index(),s=this;if(!s.lGalleryOn||n!==e){var o=this.$slide.length,a=s.lGalleryOn?this.s.speed:0;if(!s.lgBusy){var l,u,c;if(this.s.download)(l=s.s.dynamic?!1!==s.s.dynamicEl[e].downloadUrl&&(s.s.dynamicEl[e].downloadUrl||s.s.dynamicEl[e].src):"false"!==s.$items.eq(e).attr("data-download-url")&&(s.$items.eq(e).attr("data-download-url")||s.$items.eq(e).attr("href")||s.$items.eq(e).attr("data-src")))?($("#lg-download").attr("href",l),s.$outer.removeClass("lg-hide-download")):s.$outer.addClass("lg-hide-download");if(this.$el.trigger("onBeforeSlide.lg",[n,e,t,i]),s.lgBusy=!0,clearTimeout(s.hideBartimeout),".lg-sub-html"===this.s.appendSubHtmlTo&&setTimeout(function(){s.addHtml(e)},a),this.arrowDisable(e),r||(e<n?r="prev":e>n&&(r="next")),t)this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide"),o>2?(u=e-1,c=e+1,0===e&&n===o-1?(c=0,u=o-1):e===o-1&&0===n&&(c=0,u=o-1)):(u=0,c=1),"prev"===r?s.$slide.eq(c).addClass("lg-next-slide"):s.$slide.eq(u).addClass("lg-prev-slide"),s.$slide.eq(e).addClass("lg-current");else s.$outer.addClass("lg-no-trans"),this.$slide.removeClass("lg-prev-slide lg-next-slide"),"prev"===r?(this.$slide.eq(e).addClass("lg-prev-slide"),this.$slide.eq(n).addClass("lg-next-slide")):(this.$slide.eq(e).addClass("lg-next-slide"),this.$slide.eq(n).addClass("lg-prev-slide")),setTimeout(function(){s.$slide.removeClass("lg-current"),s.$slide.eq(e).addClass("lg-current"),s.$outer.removeClass("lg-no-trans")},50);s.lGalleryOn?(setTimeout(function(){s.loadContent(e,!0,0)},this.s.speed+50),setTimeout(function(){s.lgBusy=!1,s.$el.trigger("onAfterSlide.lg",[n,e,t,i])},this.s.speed)):(s.loadContent(e,!0,s.s.backdropDuration),s.lgBusy=!1,s.$el.trigger("onAfterSlide.lg",[n,e,t,i])),s.lGalleryOn=!0,this.s.counter&&$("#lg-counter-current").text(e+1)}s.index=e}},t.prototype.goToNextSlide=function(e){var t=this,i=t.s.loop;e&&t.$slide.length<3&&(i=!1),t.lgBusy||(t.index+1<t.$slide.length?(t.index++,t.$el.trigger("onBeforeNextSlide.lg",[t.index]),t.slide(t.index,e,!1,"next")):i?(t.index=0,t.$el.trigger("onBeforeNextSlide.lg",[t.index]),t.slide(t.index,e,!1,"next")):t.s.slideEndAnimatoin&&!e&&(t.$outer.addClass("lg-right-end"),setTimeout(function(){t.$outer.removeClass("lg-right-end")},400)))},t.prototype.goToPrevSlide=function(e){var t=this,i=t.s.loop;e&&t.$slide.length<3&&(i=!1),t.lgBusy||(t.index>0?(t.index--,t.$el.trigger("onBeforePrevSlide.lg",[t.index,e]),t.slide(t.index,e,!1,"prev")):i?(t.index=t.$items.length-1,t.$el.trigger("onBeforePrevSlide.lg",[t.index,e]),t.slide(t.index,e,!1,"prev")):t.s.slideEndAnimatoin&&!e&&(t.$outer.addClass("lg-left-end"),setTimeout(function(){t.$outer.removeClass("lg-left-end")},400)))},t.prototype.keyPress=function(){var e=this;this.$items.length>1&&$(window).on("keyup.lg",function(t){e.$items.length>1&&(37===t.keyCode&&(t.preventDefault(),e.goToPrevSlide()),39===t.keyCode&&(t.preventDefault(),e.goToNextSlide()))}),$(window).on("keydown.lg",function(t){!0===e.s.escKey&&27===t.keyCode&&(t.preventDefault(),e.$outer.hasClass("lg-thumb-open")?e.$outer.removeClass("lg-thumb-open"):e.destroy())})},t.prototype.arrow=function(){var e=this;this.$outer.find(".lg-prev").on("click.lg",function(){e.goToPrevSlide()}),this.$outer.find(".lg-next").on("click.lg",function(){e.goToNextSlide()})},t.prototype.arrowDisable=function(e){!this.s.loop&&this.s.hideControlOnEnd&&(e+1<this.$slide.length?this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled"),e>0?this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled"))},t.prototype.setTranslate=function(e,t,i){this.s.useLeft?e.css("left",t):e.css({transform:"translate3d("+t+"px, "+i+"px, 0px)"})},t.prototype.touchMove=function(e,t){var i=t-e;Math.abs(i)>15&&(this.$outer.addClass("lg-dragging"),this.setTranslate(this.$slide.eq(this.index),i,0),this.setTranslate($(".lg-prev-slide"),-this.$slide.eq(this.index).width()+i,0),this.setTranslate($(".lg-next-slide"),this.$slide.eq(this.index).width()+i,0))},t.prototype.touchEnd=function(e){var t=this;"lg-slide"!==t.s.mode&&t.$outer.addClass("lg-slide"),this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0"),setTimeout(function(){t.$outer.removeClass("lg-dragging"),e<0&&Math.abs(e)>t.s.swipeThreshold?t.goToNextSlide(!0):e>0&&Math.abs(e)>t.s.swipeThreshold?t.goToPrevSlide(!0):Math.abs(e)<5&&t.$el.trigger("onSlideClick.lg"),t.$slide.removeAttr("style")}),setTimeout(function(){t.$outer.hasClass("lg-dragging")||"lg-slide"===t.s.mode||t.$outer.removeClass("lg-slide")},t.s.speed+100)},t.prototype.enableSwipe=function(){var e=this,t=0,i=0,r=!1;e.s.enableSwipe&&e.doCss()&&(e.$slide.on("touchstart.lg",function(i){e.$outer.hasClass("lg-zoomed")||e.lgBusy||(i.preventDefault(),e.manageSwipeClass(),t=i.originalEvent.targetTouches[0].pageX)}),e.$slide.on("touchmove.lg",function(n){e.$outer.hasClass("lg-zoomed")||(n.preventDefault(),i=n.originalEvent.targetTouches[0].pageX,e.touchMove(t,i),r=!0)}),e.$slide.on("touchend.lg",function(){e.$outer.hasClass("lg-zoomed")||(r?(r=!1,e.touchEnd(i-t)):e.$el.trigger("onSlideClick.lg"))}))},t.prototype.enableDrag=function(){var e=this,t=0,i=0,r=!1,n=!1;e.s.enableDrag&&e.doCss()&&(e.$slide.on("mousedown.lg",function(i){e.$outer.hasClass("lg-zoomed")||e.lgBusy||$(i.target).text().trim()||(i.preventDefault(),e.manageSwipeClass(),t=i.pageX,r=!0,e.$outer.scrollLeft+=1,e.$outer.scrollLeft-=1,e.$outer.removeClass("lg-grab").addClass("lg-grabbing"),e.$el.trigger("onDragstart.lg"))}),$(window).on("mousemove.lg",function(s){r&&(n=!0,i=s.pageX,e.touchMove(t,i),e.$el.trigger("onDragmove.lg"))}),$(window).on("mouseup.lg",function(s){n?(n=!1,e.touchEnd(i-t),e.$el.trigger("onDragend.lg")):($(s.target).hasClass("lg-object")||$(s.target).hasClass("lg-video-play"))&&e.$el.trigger("onSlideClick.lg"),r&&(r=!1,e.$outer.removeClass("lg-grabbing").addClass("lg-grab"))}))},t.prototype.manageSwipeClass=function(){var e=this.index+1,t=this.index-1;this.s.loop&&this.$slide.length>2&&(0===this.index?t=this.$slide.length-1:this.index===this.$slide.length-1&&(e=0)),this.$slide.removeClass("lg-next-slide lg-prev-slide"),t>-1&&this.$slide.eq(t).addClass("lg-prev-slide"),this.$slide.eq(e).addClass("lg-next-slide")},t.prototype.mousewheel=function(){var e=this;e.$outer.on("mousewheel.lg",function(t){t.deltaY&&(t.deltaY>0?e.goToPrevSlide():e.goToNextSlide(),t.preventDefault())})},t.prototype.closeGallery=function(){var e=this,t=!1;this.$outer.find(".lg-close").on("click.lg",function(){e.destroy()}),e.s.closable&&(e.$outer.on("mousedown.lg",function(e){t=!!($(e.target).is(".lg-outer")||$(e.target).is(".lg-item ")||$(e.target).is(".lg-img-wrap"))}),e.$outer.on("mousemove.lg",function(){t=!1}),e.$outer.on("mouseup.lg",function(i){($(i.target).is(".lg-outer")||$(i.target).is(".lg-item ")||$(i.target).is(".lg-img-wrap")&&t)&&(e.$outer.hasClass("lg-dragging")||e.destroy())}))},t.prototype.destroy=function(e){var t=this;e||(t.$el.trigger("onBeforeClose.lg"),$(window).scrollTop(t.prevScrollTop)),e&&(t.s.dynamic||this.$items.off("click.lg click.lgcustom"),$.removeData(t.el,"lightGallery")),this.$el.off(".lg.tm"),$.each($.fn.lightGallery.modules,function(e){t.modules[e]&&t.modules[e].destroy()}),this.lGalleryOn=!1,clearTimeout(t.hideBartimeout),this.hideBartimeout=!1,$(window).off(".lg"),$("body").removeClass("lg-on lg-from-hash"),t.$outer&&t.$outer.removeClass("lg-visible"),$(".lg-backdrop").removeClass("in"),setTimeout(function(){t.$outer&&t.$outer.remove(),$(".lg-backdrop").remove(),e||t.$el.trigger("onCloseAfter.lg")},t.s.backdropDuration+50)},$.fn.lightGallery=function(e){return this.each(function(){if($.data(this,"lightGallery"))try{$(this).data("lightGallery").init()}catch(e){console.error("lightGallery has not initiated properly")}else $.data(this,"lightGallery",new t(this,e))})},$.fn.lightGallery.modules={}}(),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t(require("jquery")):t(jQuery)}(0,function(e){!function(){"use strict";var t={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbHeight:"80px",thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toogleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0},i=function(i){return this.core=e(i).data("lightGallery"),this.core.s=e.extend({},t,this.core.s),this.$el=e(i),this.$thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.core.s.animateThumb&&(this.core.s.thumbHeight="100%"),this.left=0,this.init(),this};i.prototype.init=function(){var e=this;this.core.s.thumbnail&&this.core.$items.length>1&&(this.core.s.showThumbByDefault&&setTimeout(function(){e.core.$outer.addClass("lg-thumb-open")},700),this.core.s.pullCaptionUp&&this.core.$outer.addClass("lg-pull-caption-up"),this.build(),this.core.s.animateThumb&&this.core.doCss()?(this.core.s.enableThumbDrag&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toogle(),this.thumbkeyPress())},i.prototype.build=function(){function t(e,t,i){var o,a=r.core.isVideo(e,i)||{},l="";a.youtube||a.vimeo||a.dailymotion?a.youtube?o=r.core.s.loadYoutubeThumbnail?"//img.youtube.com/vi/"+a.youtube[1]+"/"+r.core.s.youtubeThumbSize+".jpg":t:a.vimeo?r.core.s.loadVimeoThumbnail?(o="//i.vimeocdn.com/video/error_"+s+".jpg",l=a.vimeo[1]):o=t:a.dailymotion&&(o=r.core.s.loadDailymotionThumbnail?"//www.dailymotion.com/thumbnail/video/"+a.dailymotion[1]:t):o=t,n+='<div data-vimeo-id="'+l+'" class="lg-thumb-item" style="width:'+r.core.s.thumbWidth+"px; height: "+r.core.s.thumbHeight+"; margin-right: "+r.core.s.thumbMargin+'px"><img src="'+o+'" /></div>',l=""}var i,r=this,n="",s="";switch(this.core.s.vimeoThumbSize){case"thumbnail_large":s="640";break;case"thumbnail_medium":s="200x150";break;case"thumbnail_small":s="100x75"}if(r.core.$outer.addClass("lg-has-thumb"),r.core.$outer.find(".lg").append('<div class="lg-thumb-outer"><div class="lg-thumb lg-group"></div></div>'),r.$thumbOuter=r.core.$outer.find(".lg-thumb-outer"),r.thumbOuterWidth=r.$thumbOuter.width(),r.core.s.animateThumb&&r.core.$outer.find(".lg-thumb").css({width:r.thumbTotalWidth+"px",position:"relative"}),this.core.s.animateThumb&&r.$thumbOuter.css("height",r.core.s.thumbContHeight+"px"),r.core.s.dynamic)for(var o=0;o<r.core.s.dynamicEl.length;o++)t(r.core.s.dynamicEl[o].src,r.core.s.dynamicEl[o].thumb,o);else r.core.$items.each(function(i){r.core.s.exThumbImage?t(e(this).attr("href")||e(this).attr("data-src"),e(this).attr(r.core.s.exThumbImage),i):t(e(this).attr("href")||e(this).attr("data-src"),e(this).find("img").attr("src"),i)});r.core.$outer.find(".lg-thumb").html(n),(i=r.core.$outer.find(".lg-thumb-item")).each(function(){var t=e(this),i=t.attr("data-vimeo-id");i&&e.getJSON("//www.vimeo.com/api/v2/video/"+i+".json?callback=?",{format:"json"},function(e){t.find("img").attr("src",e[0][r.core.s.vimeoThumbSize])})}),i.eq(r.core.index).addClass("active"),r.core.$el.on("onBeforeSlide.lg.tm",function(){i.removeClass("active"),i.eq(r.core.index).addClass("active")}),i.on("click.lg touchend.lg",function(){var t=e(this);setTimeout(function(){(r.thumbClickable&&!r.core.lgBusy||!r.core.doCss())&&(r.core.index=t.index(),r.core.slide(r.core.index,!1,!0,!1))},50)}),r.core.$el.on("onBeforeSlide.lg.tm",function(){r.animateThumb(r.core.index)}),e(window).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){r.animateThumb(r.core.index),r.thumbOuterWidth=r.$thumbOuter.width()},200)})},i.prototype.setTranslate=function(e){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+e+"px, 0px, 0px)"})},i.prototype.animateThumb=function(e){var t=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var i;switch(this.core.s.currentPagerPosition){case"left":i=0;break;case"middle":i=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":i=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*e-1-i,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),this.left<0&&(this.left=0),this.core.lGalleryOn?(t.hasClass("on")||this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms"),this.core.doCss()||t.animate({left:-this.left+"px"},this.core.s.speed)):this.core.doCss()||t.css("left",-this.left+"px"),this.setTranslate(this.left)}},i.prototype.enableThumbDrag=function(){var t=this,i=0,r=0,n=!1,s=!1,o=0;t.$thumbOuter.addClass("lg-grab"),t.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(e){t.thumbTotalWidth>t.thumbOuterWidth&&(e.preventDefault(),i=e.pageX,n=!0,t.core.$outer.scrollLeft+=1,t.core.$outer.scrollLeft-=1,t.thumbClickable=!1,t.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),e(window).on("mousemove.lg.thumb",function(e){n&&(o=t.left,s=!0,r=e.pageX,t.$thumbOuter.addClass("lg-dragging"),(o-=r-i)>t.thumbTotalWidth-t.thumbOuterWidth&&(o=t.thumbTotalWidth-t.thumbOuterWidth),o<0&&(o=0),t.setTranslate(o))}),e(window).on("mouseup.lg.thumb",function(){s?(s=!1,t.$thumbOuter.removeClass("lg-dragging"),t.left=o,Math.abs(r-i)<t.core.s.swipeThreshold&&(t.thumbClickable=!0)):t.thumbClickable=!0,n&&(n=!1,t.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab"))})},i.prototype.enableThumbSwipe=function(){var e=this,t=0,i=0,r=!1,n=0;e.core.$outer.find(".lg-thumb").on("touchstart.lg",function(i){e.thumbTotalWidth>e.thumbOuterWidth&&(i.preventDefault(),t=i.originalEvent.targetTouches[0].pageX,e.thumbClickable=!1)}),e.core.$outer.find(".lg-thumb").on("touchmove.lg",function(s){e.thumbTotalWidth>e.thumbOuterWidth&&(s.preventDefault(),i=s.originalEvent.targetTouches[0].pageX,r=!0,e.$thumbOuter.addClass("lg-dragging"),n=e.left,(n-=i-t)>e.thumbTotalWidth-e.thumbOuterWidth&&(n=e.thumbTotalWidth-e.thumbOuterWidth),n<0&&(n=0),e.setTranslate(n))}),e.core.$outer.find(".lg-thumb").on("touchend.lg",function(){e.thumbTotalWidth>e.thumbOuterWidth&&r?(r=!1,e.$thumbOuter.removeClass("lg-dragging"),Math.abs(i-t)<e.core.s.swipeThreshold&&(e.thumbClickable=!0),e.left=n):e.thumbClickable=!0})},i.prototype.toogle=function(){var e=this;e.core.s.toogleThumb&&(e.core.$outer.addClass("lg-can-toggle"),e.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>'),e.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){e.core.$outer.toggleClass("lg-thumb-open")}))},i.prototype.thumbkeyPress=function(){var t=this;e(window).on("keydown.lg.thumb",function(e){38===e.keyCode?(e.preventDefault(),t.core.$outer.addClass("lg-thumb-open")):40===e.keyCode&&(e.preventDefault(),t.core.$outer.removeClass("lg-thumb-open"))})},i.prototype.destroy=function(){this.core.s.thumbnail&&this.core.$items.length>1&&(e(window).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb"),this.$thumbOuter.remove(),this.core.$outer.removeClass("lg-has-thumb"))},e.fn.lightGallery.modules.Thumbnail=i}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t(require("jquery")):t(jQuery)}(0,function(e){!function(){"use strict";var t={autoplay:!1,pause:5e3,progressBar:!0,fourceAutoplay:!1,autoplayControls:!0,appendAutoplayControlsTo:".lg-toolbar"},i=function(i){return this.core=e(i).data("lightGallery"),this.$el=e(i),!(this.core.$items.length<2)&&(this.core.s=e.extend({},t,this.core.s),this.interval=!1,this.fromAuto=!0,this.canceledOnTouch=!1,this.fourceAutoplayTemp=this.core.s.fourceAutoplay,this.core.doCss()||(this.core.s.progressBar=!1),this.init(),this)};i.prototype.init=function(){var e=this;e.core.s.autoplayControls&&e.controls(),e.core.s.progressBar&&e.core.$outer.find(".lg").append('<div class="lg-progress-bar"><div class="lg-progress"></div></div>'),e.progress(),e.core.s.autoplay&&e.$el.one("onSlideItemLoad.lg.tm",function(){e.startlAuto()}),e.$el.on("onDragstart.lg.tm touchstart.lg.tm",function(){e.interval&&(e.cancelAuto(),e.canceledOnTouch=!0)}),e.$el.on("onDragend.lg.tm touchend.lg.tm onSlideClick.lg.tm",function(){!e.interval&&e.canceledOnTouch&&(e.startlAuto(),e.canceledOnTouch=!1)})},i.prototype.progress=function(){var e,t,i=this;i.$el.on("onBeforeSlide.lg.tm",function(){i.core.s.progressBar&&i.fromAuto&&(e=i.core.$outer.find(".lg-progress-bar"),t=i.core.$outer.find(".lg-progress"),i.interval&&(t.removeAttr("style"),e.removeClass("lg-start"),setTimeout(function(){t.css("transition","width "+(i.core.s.speed+i.core.s.pause)+"ms ease 0s"),e.addClass("lg-start")},20))),i.fromAuto||i.core.s.fourceAutoplay||i.cancelAuto(),i.fromAuto=!1})},i.prototype.controls=function(){var t=this;e(this.core.s.appendAutoplayControlsTo).append('<span class="lg-autoplay-button lg-icon"></span>'),t.core.$outer.find(".lg-autoplay-button").on("click.lg",function(){e(t.core.$outer).hasClass("lg-show-autoplay")?(t.cancelAuto(),t.core.s.fourceAutoplay=!1):t.interval||(t.startlAuto(),t.core.s.fourceAutoplay=t.fourceAutoplayTemp)})},i.prototype.startlAuto=function(){var e=this;e.core.$outer.find(".lg-progress").css("transition","width "+(e.core.s.speed+e.core.s.pause)+"ms ease 0s"),e.core.$outer.addClass("lg-show-autoplay"),e.core.$outer.find(".lg-progress-bar").addClass("lg-start"),e.interval=setInterval(function(){e.core.index+1<e.core.$items.length?e.core.index++:e.core.index=0,e.fromAuto=!0,e.core.slide(e.core.index,!1,!1,"next")},e.core.s.speed+e.core.s.pause)},i.prototype.cancelAuto=function(){clearInterval(this.interval),this.interval=!1,this.core.$outer.find(".lg-progress").removeAttr("style"),this.core.$outer.removeClass("lg-show-autoplay"),this.core.$outer.find(".lg-progress-bar").removeClass("lg-start")},i.prototype.destroy=function(){this.cancelAuto(),this.core.$outer.find(".lg-progress-bar").remove()},e.fn.lightGallery.modules.autoplay=i}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t(require("jquery")):t(jQuery)}(0,function(e){!function(){"use strict";var t={fullScreen:!0},i=function(i){return this.core=e(i).data("lightGallery"),this.$el=e(i),this.core.s=e.extend({},t,this.core.s),this.init(),this};i.prototype.init=function(){var e="";if(this.core.s.fullScreen){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))return;e='<span class="lg-fullscreen lg-icon"></span>',this.core.$outer.find(".lg-toolbar").append(e),this.fullScreen()}},i.prototype.requestFullscreen=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},i.prototype.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},i.prototype.fullScreen=function(){var t=this;e(document).on("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg",function(){t.core.$outer.toggleClass("lg-fullscreen-on")}),this.core.$outer.find(".lg-fullscreen").on("click.lg",function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?t.exitFullscreen():t.requestFullscreen()})},i.prototype.destroy=function(){this.exitFullscreen(),e(document).off("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg")},e.fn.lightGallery.modules.fullscreen=i}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t(require("jquery")):t(jQuery)}(0,function(e){!function(){"use strict";var t={pager:!1},i=function(i){return this.core=e(i).data("lightGallery"),this.$el=e(i),this.core.s=e.extend({},t,this.core.s),this.core.s.pager&&this.core.$items.length>1&&this.init(),this};i.prototype.init=function(){var t,i,r,n=this,s="";if(n.core.$outer.find(".lg").append('<div class="lg-pager-outer"></div>'),n.core.s.dynamic)for(var o=0;o<n.core.s.dynamicEl.length;o++)s+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+n.core.s.dynamicEl[o].thumb+'" /></div></span>';else n.core.$items.each(function(){s+=n.core.s.exThumbImage?'<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+e(this).attr(n.core.s.exThumbImage)+'" /></div></span>':'<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+e(this).find("img").attr("src")+'" /></div></span>'});(i=n.core.$outer.find(".lg-pager-outer")).html(s),(t=n.core.$outer.find(".lg-pager-cont")).on("click.lg touchend.lg",function(){var t=e(this);n.core.index=t.index(),n.core.slide(n.core.index,!1,!0,!1)}),i.on("mouseover.lg",function(){clearTimeout(r),i.addClass("lg-pager-hover")}),i.on("mouseout.lg",function(){r=setTimeout(function(){i.removeClass("lg-pager-hover")})}),n.core.$el.on("onBeforeSlide.lg.tm",function(e,i,r){t.removeClass("lg-pager-active"),t.eq(r).addClass("lg-pager-active")})},i.prototype.destroy=function(){},e.fn.lightGallery.modules.pager=i}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t(require("jquery")):t(jQuery)}(0,function(e){!function(){"use strict";var t={hash:!0},i=function(i){return this.core=e(i).data("lightGallery"),this.core.s=e.extend({},t,this.core.s),this.core.s.hash&&(this.oldHash=window.location.hash,this.init()),this};i.prototype.init=function(){var t,i=this;i.core.$el.on("onAfterSlide.lg.tm",function(e,t,r){history.replaceState?history.replaceState(null,null,window.location.pathname+window.location.search+"#lg="+i.core.s.galleryId+"&slide="+r):window.location.hash="lg="+i.core.s.galleryId+"&slide="+r}),e(window).on("hashchange.lg.hash",function(){t=window.location.hash;var e=parseInt(t.split("&slide=")[1],10);t.indexOf("lg="+i.core.s.galleryId)>-1?i.core.slide(e,!1,!1):i.core.lGalleryOn&&i.core.destroy()})},i.prototype.destroy=function(){this.core.s.hash&&(this.oldHash&&this.oldHash.indexOf("lg="+this.core.s.galleryId)<0?history.replaceState?history.replaceState(null,null,this.oldHash):window.location.hash=this.oldHash:history.replaceState?history.replaceState(null,document.title,window.location.pathname+window.location.search):window.location.hash="",this.core.$el.off(".lg.hash"))},e.fn.lightGallery.modules.hash=i}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t(require("jquery")):t(jQuery)}(0,function(e){!function(){"use strict";var t={share:!0,facebook:!0,facebookDropdownText:"Facebook",twitter:!0,twitterDropdownText:"Twitter",googlePlus:!0,googlePlusDropdownText:"GooglePlus",pinterest:!0,pinterestDropdownText:"Pinterest"},i=function(i){return this.core=e(i).data("lightGallery"),this.core.s=e.extend({},t,this.core.s),this.core.s.share&&this.init(),this};i.prototype.init=function(){var t=this,i='<span id="lg-share" class="lg-icon"><ul class="lg-dropdown" style="position: absolute;">';i+=t.core.s.facebook?'<li><a id="lg-share-facebook" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.facebookDropdownText+"</span></a></li>":"",i+=t.core.s.twitter?'<li><a id="lg-share-twitter" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.twitterDropdownText+"</span></a></li>":"",i+=t.core.s.googlePlus?'<li><a id="lg-share-googleplus" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.googlePlusDropdownText+"</span></a></li>":"",i+=t.core.s.pinterest?'<li><a id="lg-share-pinterest" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.pinterestDropdownText+"</span></a></li>":"",i+="</ul></span>",this.core.$outer.find(".lg-toolbar").append(i),this.core.$outer.find(".lg").append('<div id="lg-dropdown-overlay"></div>'),e("#lg-share").on("click.lg",function(){t.core.$outer.toggleClass("lg-dropdown-active")}),e("#lg-dropdown-overlay").on("click.lg",function(){t.core.$outer.removeClass("lg-dropdown-active")}),t.core.$el.on("onAfterSlide.lg.tm",function(i,r,n){setTimeout(function(){e("#lg-share-facebook").attr("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(t.getSahreProps(n,"facebookShareUrl")||window.location.href)),e("#lg-share-twitter").attr("href","https://twitter.com/intent/tweet?text="+t.getSahreProps(n,"tweetText")+"&url="+encodeURIComponent(t.getSahreProps(n,"twitterShareUrl")||window.location.href)),e("#lg-share-googleplus").attr("href","https://plus.google.com/share?url="+encodeURIComponent(t.getSahreProps(n,"googleplusShareUrl")||window.location.href)),e("#lg-share-pinterest").attr("href","http://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(t.getSahreProps(n,"pinterestShareUrl")||window.location.href)+"&media="+encodeURIComponent(t.getSahreProps(n,"src"))+"&description="+t.getSahreProps(n,"pinterestText"))},100)})},i.prototype.getSahreProps=function(e,t){var i="";if(this.core.s.dynamic)i=this.core.s.dynamicEl[e][t];else{var r=this.core.$items.eq(e).attr("href"),n=this.core.$items.eq(e).data(t);i="src"===t&&r||n}return i},i.prototype.destroy=function(){},e.fn.lightGallery.modules.share=i}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==("undefined"==typeof module?"undefined":_typeof2(module))&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){!function(){"use strict";var t={videoMaxWidth:"855px",autoplayFirstVideo:!0,youtubePlayerParams:!1,vimeoPlayerParams:!1,dailymotionPlayerParams:!1,vkPlayerParams:!1,videojs:!1,videojsOptions:{}},i=function(i){return this.core=e(i).data("lightGallery"),this.$el=e(i),this.core.s=e.extend({},t,this.core.s),this.videoLoaded=!1,this.init(),this};i.prototype.init=function(){var t=this;t.core.$el.on("hasVideo.lg.tm",function(e,t,i,r){var n=this;if(n.core.$slide.eq(t).find(".lg-video").append(n.loadVideo(i,"lg-object",!0,t,r)),r)if(n.core.s.videojs)try{videojs(n.core.$slide.eq(t).find(".lg-html5").get(0),n.core.s.videojsOptions,function(){!n.videoLoaded&&n.core.s.autoplayFirstVideo&&this.play()})}catch(e){console.error("Make sure you have included videojs")}else!n.videoLoaded&&n.core.s.autoplayFirstVideo&&n.core.$slide.eq(t).find(".lg-html5").get(0).play()}.bind(this)),t.core.$el.on("onAferAppendSlide.lg.tm",function(e,t){var i=this.core.$slide.eq(t).find(".lg-video-cont");i.hasClass("lg-has-iframe")||(i.css("max-width",this.core.s.videoMaxWidth),this.videoLoaded=!0)}.bind(this)),t.core.doCss()&&t.core.$items.length>1&&(t.core.s.enableSwipe||t.core.s.enableDrag)?t.core.$el.on("onSlideClick.lg.tm",function(){var e=t.core.$slide.eq(t.core.index);t.loadVideoOnclick(e)}):t.core.$slide.on("click.lg",function(){t.loadVideoOnclick(e(this))}),t.core.$el.on("onBeforeSlide.lg.tm",function(t,i,r){var n,s=this,o=s.core.$slide.eq(i),a=o.find(".lg-youtube").get(0),l=o.find(".lg-vimeo").get(0),u=o.find(".lg-dailymotion").get(0),c=o.find(".lg-vk").get(0),d=o.find(".lg-html5").get(0);if(a)a.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");else if(l)try{$f(l).api("pause")}catch(e){console.error("Make sure you have included froogaloop2 js")}else if(u)u.contentWindow.postMessage("pause","*");else if(d)if(s.core.s.videojs)try{videojs(d).pause()}catch(e){console.error("Make sure you have included videojs")}else d.pause();c&&e(c).attr("src",e(c).attr("src").replace("&autoplay","&noplay")),n=s.core.s.dynamic?s.core.s.dynamicEl[r].src:s.core.$items.eq(r).attr("href")||s.core.$items.eq(r).attr("data-src");var h=s.core.isVideo(n,r)||{};(h.youtube||h.vimeo||h.dailymotion||h.vk)&&s.core.$outer.addClass("lg-hide-download")}.bind(this)),t.core.$el.on("onAfterSlide.lg.tm",function(e,i){t.core.$slide.eq(i).removeClass("lg-video-playing")}),t.core.s.autoplayFirstVideo&&t.core.$el.on("onAferAppendSlide.lg.tm",function(e,i){if(!t.core.lGalleryOn){var r=t.core.$slide.eq(i);setTimeout(function(){t.loadVideoOnclick(r)},100)}})},i.prototype.loadVideo=function(t,i,r,n,s){var o="",a=1,l="",u=this.core.isVideo(t,n)||{};if(r&&(a=this.videoLoaded?0:this.core.s.autoplayFirstVideo?1:0),u.youtube)l="?wmode=opaque&autoplay="+a+"&enablejsapi=1",this.core.s.youtubePlayerParams&&(l=l+"&"+e.param(this.core.s.youtubePlayerParams)),o='<iframe class="lg-video-object lg-youtube '+i+'" width="560" height="315" src="//www.youtube.com/embed/'+u.youtube[1]+l+'" frameborder="0" allowfullscreen></iframe>';else if(u.vimeo)l="?autoplay="+a+"&api=1",this.core.s.vimeoPlayerParams&&(l=l+"&"+e.param(this.core.s.vimeoPlayerParams)),o='<iframe class="lg-video-object lg-vimeo '+i+'" width="560" height="315"  src="//player.vimeo.com/video/'+u.vimeo[1]+l+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';else if(u.dailymotion)l="?wmode=opaque&autoplay="+a+"&api=postMessage",this.core.s.dailymotionPlayerParams&&(l=l+"&"+e.param(this.core.s.dailymotionPlayerParams)),o='<iframe class="lg-video-object lg-dailymotion '+i+'" width="560" height="315" src="//www.dailymotion.com/embed/video/'+u.dailymotion[1]+l+'" frameborder="0" allowfullscreen></iframe>';else if(u.html5){var c=s.substring(0,1);"."!==c&&"#"!==c||(s=e(s).html()),o=s}else u.vk&&(l="&autoplay="+a,this.core.s.vkPlayerParams&&(l=l+"&"+e.param(this.core.s.vkPlayerParams)),o='<iframe class="lg-video-object lg-vk '+i+'" width="560" height="315" src="//vk.com/video_ext.php?'+u.vk[1]+l+'" frameborder="0" allowfullscreen></iframe>');return o},i.prototype.loadVideoOnclick=function(e){var t=this;if(e.find(".lg-object").hasClass("lg-has-poster")&&e.find(".lg-object").is(":visible"))if(e.hasClass("lg-has-video")){var i=e.find(".lg-youtube").get(0),r=e.find(".lg-vimeo").get(0),n=e.find(".lg-dailymotion").get(0),s=e.find(".lg-html5").get(0);if(i)i.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");else if(r)try{$f(r).api("play")}catch(e){console.error("Make sure you have included froogaloop2 js")}else if(n)n.contentWindow.postMessage("play","*");else if(s)if(t.core.s.videojs)try{videojs(s).play()}catch(e){console.error("Make sure you have included videojs")}else s.play();e.addClass("lg-video-playing")}else{e.addClass("lg-video-playing lg-has-video");var o=function(i,r){if(e.find(".lg-video").append(t.loadVideo(i,"",!1,t.core.index,r)),r)if(t.core.s.videojs)try{videojs(t.core.$slide.eq(t.core.index).find(".lg-html5").get(0),t.core.s.videojsOptions,function(){this.play()})}catch(e){console.error("Make sure you have included videojs")}else t.core.$slide.eq(t.core.index).find(".lg-html5").get(0).play()};t.core.s.dynamic?o(t.core.s.dynamicEl[t.core.index].src,t.core.s.dynamicEl[t.core.index].html):o(t.core.$items.eq(t.core.index).attr("href")||t.core.$items.eq(t.core.index).attr("data-src"),t.core.$items.eq(t.core.index).attr("data-html"));var a=e.find(".lg-object");e.find(".lg-video").append(a),e.find(".lg-video-object").hasClass("lg-html5")||(e.removeClass("lg-complete"),e.find(".lg-video-object").on("load.lg error.lg",function(){e.addClass("lg-complete")}))}},i.prototype.destroy=function(){this.videoLoaded=!1},e.fn.lightGallery.modules.video=i}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t(require("jquery")):t(jQuery)}(0,function(e){!function(){"use strict";var t={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300,useLeftForZoom:function(){var e=!1,t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return t&&parseInt(t[2],10)<54&&(e=!0),e}()},i=function(i){return this.core=e(i).data("lightGallery"),this.core.s=e.extend({},t,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=e(window).width()/2,this.pageY=e(window).height()/2+e(window).scrollTop()),this};i.prototype.init=function(){var t=this,i='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';t.core.s.actualSize&&(i+='<span id="lg-actual-size" class="lg-icon"></span>'),t.core.s.useLeftForZoom?t.core.$outer.addClass("lg-use-left-for-zoom"):t.core.$outer.addClass("lg-use-transition-for-zoom"),this.core.$outer.find(".lg-toolbar").append(i),t.core.$el.on("onSlideItemLoad.lg.tm.zoom",function(i,r,n){var s=t.core.s.enableZoomAfter+n;e("body").hasClass("lg-from-hash")&&n?s=0:e("body").removeClass("lg-from-hash"),t.zoomabletimeout=setTimeout(function(){t.core.$slide.eq(r).addClass("lg-zoomable")},s+30)});var r=1,n=function(i){var r,n,s=t.core.$outer.find(".lg-current .lg-image"),o=(e(window).width()-s.prop("offsetWidth"))/2,a=(e(window).height()-s.prop("offsetHeight"))/2+e(window).scrollTop();r=t.pageX-o,n=t.pageY-a;var l=(i-1)*r,u=(i-1)*n;s.css("transform","scale3d("+i+", "+i+", 1)").attr("data-scale",i),t.core.s.useLeftForZoom?s.parent().css({left:-l+"px",top:-u+"px"}).attr("data-x",l).attr("data-y",u):s.parent().css("transform","translate3d(-"+l+"px, -"+u+"px, 0)").attr("data-x",l).attr("data-y",u)},s=function(){r>1?t.core.$outer.addClass("lg-zoomed"):t.resetZoom(),r<1&&(r=1),n(r)},o=function(i,n,o,a){var l,u=n.prop("offsetWidth");l=t.core.s.dynamic?t.core.s.dynamicEl[o].width||n[0].naturalWidth||u:t.core.$items.eq(o).attr("data-width")||n[0].naturalWidth||u,t.core.$outer.hasClass("lg-zoomed")?r=1:l>u&&(r=l/u||2),a?(t.pageX=e(window).width()/2,t.pageY=e(window).height()/2+e(window).scrollTop()):(t.pageX=i.pageX||i.originalEvent.targetTouches[0].pageX,t.pageY=i.pageY||i.originalEvent.targetTouches[0].pageY),s(),setTimeout(function(){t.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")},10)},a=!1;t.core.$el.on("onAferAppendSlide.lg.tm.zoom",function(e,i){var r=t.core.$slide.eq(i).find(".lg-image");r.on("dblclick",function(e){o(e,r,i)}),r.on("touchstart",function(e){a?(clearTimeout(a),a=null,o(e,r,i)):a=setTimeout(function(){a=null},300),e.preventDefault()})}),e(window).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom",function(){t.pageX=e(window).width()/2,t.pageY=e(window).height()/2+e(window).scrollTop(),n(r)}),e("#lg-zoom-out").on("click.lg",function(){t.core.$outer.find(".lg-current .lg-image").length&&(r-=t.core.s.scale,s())}),e("#lg-zoom-in").on("click.lg",function(){t.core.$outer.find(".lg-current .lg-image").length&&(r+=t.core.s.scale,s())}),e("#lg-actual-size").on("click.lg",function(e){o(e,t.core.$slide.eq(t.core.index).find(".lg-image"),t.core.index,!0)}),t.core.$el.on("onBeforeSlide.lg.tm",function(){r=1,t.resetZoom()}),t.zoomDrag(),t.zoomSwipe()},i.prototype.resetZoom=function(){this.core.$outer.removeClass("lg-zoomed"),this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y"),this.core.$slide.find(".lg-image").removeAttr("style data-scale"),this.pageX=e(window).width()/2,this.pageY=e(window).height()/2+e(window).scrollTop()},i.prototype.zoomSwipe=function(){var e=this,t={},i={},r=!1,n=!1,s=!1;e.core.$slide.on("touchstart.lg",function(i){if(e.core.$outer.hasClass("lg-zoomed")){var r=e.core.$slide.eq(e.core.index).find(".lg-object");s=r.prop("offsetHeight")*r.attr("data-scale")>e.core.$outer.find(".lg").height(),((n=r.prop("offsetWidth")*r.attr("data-scale")>e.core.$outer.find(".lg").width())||s)&&(i.preventDefault(),t={x:i.originalEvent.targetTouches[0].pageX,y:i.originalEvent.targetTouches[0].pageY})}}),e.core.$slide.on("touchmove.lg",function(o){if(e.core.$outer.hasClass("lg-zoomed")){var a,l,u=e.core.$slide.eq(e.core.index).find(".lg-img-wrap");o.preventDefault(),r=!0,i={x:o.originalEvent.targetTouches[0].pageX,y:o.originalEvent.targetTouches[0].pageY},e.core.$outer.addClass("lg-zoom-dragging"),l=s?-Math.abs(u.attr("data-y"))+(i.y-t.y):-Math.abs(u.attr("data-y")),a=n?-Math.abs(u.attr("data-x"))+(i.x-t.x):-Math.abs(u.attr("data-x")),(Math.abs(i.x-t.x)>15||Math.abs(i.y-t.y)>15)&&(e.core.s.useLeftForZoom?u.css({left:a+"px",top:l+"px"}):u.css("transform","translate3d("+a+"px, "+l+"px, 0)"))}}),e.core.$slide.on("touchend.lg",function(){e.core.$outer.hasClass("lg-zoomed")&&r&&(r=!1,e.core.$outer.removeClass("lg-zoom-dragging"),e.touchendZoom(t,i,n,s))})},i.prototype.zoomDrag=function(){var t=this,i={},r={},n=!1,s=!1,o=!1,a=!1;t.core.$slide.on("mousedown.lg.zoom",function(r){var s=t.core.$slide.eq(t.core.index).find(".lg-object");a=s.prop("offsetHeight")*s.attr("data-scale")>t.core.$outer.find(".lg").height(),o=s.prop("offsetWidth")*s.attr("data-scale")>t.core.$outer.find(".lg").width(),t.core.$outer.hasClass("lg-zoomed")&&e(r.target).hasClass("lg-object")&&(o||a)&&(r.preventDefault(),i={x:r.pageX,y:r.pageY},n=!0,t.core.$outer.scrollLeft+=1,t.core.$outer.scrollLeft-=1,t.core.$outer.removeClass("lg-grab").addClass("lg-grabbing"))}),e(window).on("mousemove.lg.zoom",function(e){if(n){var l,u,c=t.core.$slide.eq(t.core.index).find(".lg-img-wrap");s=!0,r={x:e.pageX,y:e.pageY},t.core.$outer.addClass("lg-zoom-dragging"),u=a?-Math.abs(c.attr("data-y"))+(r.y-i.y):-Math.abs(c.attr("data-y")),l=o?-Math.abs(c.attr("data-x"))+(r.x-i.x):-Math.abs(c.attr("data-x")),t.core.s.useLeftForZoom?c.css({left:l+"px",top:u+"px"}):c.css("transform","translate3d("+l+"px, "+u+"px, 0)")}}),e(window).on("mouseup.lg.zoom",function(e){n&&(n=!1,t.core.$outer.removeClass("lg-zoom-dragging"),!s||i.x===r.x&&i.y===r.y||(r={x:e.pageX,y:e.pageY},t.touchendZoom(i,r,o,a)),s=!1),t.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")})},i.prototype.touchendZoom=function(e,t,i,r){var n=this,s=n.core.$slide.eq(n.core.index).find(".lg-img-wrap"),o=n.core.$slide.eq(n.core.index).find(".lg-object"),a=-Math.abs(s.attr("data-x"))+(t.x-e.x),l=-Math.abs(s.attr("data-y"))+(t.y-e.y),u=(n.core.$outer.find(".lg").height()-o.prop("offsetHeight"))/2,c=Math.abs(o.prop("offsetHeight")*Math.abs(o.attr("data-scale"))-n.core.$outer.find(".lg").height()+u),d=(n.core.$outer.find(".lg").width()-o.prop("offsetWidth"))/2,h=Math.abs(o.prop("offsetWidth")*Math.abs(o.attr("data-scale"))-n.core.$outer.find(".lg").width()+d);(Math.abs(t.x-e.x)>15||Math.abs(t.y-e.y)>15)&&(r&&(l<=-c?l=-c:l>=-u&&(l=-u)),i&&(a<=-h?a=-h:a>=-d&&(a=-d)),r?s.attr("data-y",Math.abs(l)):l=-Math.abs(s.attr("data-y")),i?s.attr("data-x",Math.abs(a)):a=-Math.abs(s.attr("data-x")),n.core.s.useLeftForZoom?s.css({left:a+"px",top:l+"px"}):s.css("transform","translate3d("+a+"px, "+l+"px, 0)"))},i.prototype.destroy=function(){var t=this;t.core.$el.off(".lg.zoom"),e(window).off(".lg.zoom"),t.core.$slide.off(".lg.zoom"),t.core.$el.off(".lg.tm.zoom"),t.resetZoom(),clearTimeout(t.zoomabletimeout),t.zoomabletimeout=!1},e.fn.lightGallery.modules.zoom=i}()}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof module?"undefined":_typeof2(module))&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var t=Array.prototype.slice,i=Array.prototype.splice,r={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:"",widthFromWrapper:!0,responsiveWidth:!1,zIndex:"auto"},n=e(window),s=e(document),o=[],a=n.height(),l=function(){for(var t=n.scrollTop(),i=s.height(),r=i-a,l=t>r?r-t:0,u=0,c=o.length;u<c;u++){var d=o[u],h=d.stickyWrapper.offset().top-d.topSpacing-l;if(d.stickyWrapper.css("height",d.stickyElement.outerHeight()),t<=h)null!==d.currentTop&&(d.stickyElement.css({width:"",position:"",top:"","z-index":""}),d.stickyElement.parent().removeClass(d.className),d.stickyElement.trigger("sticky-end",[d]),d.currentTop=null);else{var p,f=i-d.stickyElement.outerHeight()-d.topSpacing-d.bottomSpacing-t-l;if(f<0?f+=d.topSpacing:f=d.topSpacing,d.currentTop!==f)d.getWidthFrom?p=e(d.getWidthFrom).width()||null:d.widthFromWrapper&&(p=d.stickyWrapper.width()),null==p&&(p=d.stickyElement.width()),d.stickyElement.css("width",p).css("position","fixed").css("top",f).css("z-index",d.zIndex),d.stickyElement.parent().addClass(d.className),null===d.currentTop?d.stickyElement.trigger("sticky-start",[d]):d.stickyElement.trigger("sticky-update",[d]),d.currentTop===d.topSpacing&&d.currentTop>f||null===d.currentTop&&f<d.topSpacing?d.stickyElement.trigger("sticky-bottom-reached",[d]):null!==d.currentTop&&f===d.topSpacing&&d.currentTop<f&&d.stickyElement.trigger("sticky-bottom-unreached",[d]),d.currentTop=f;var m=d.stickyWrapper.parent();d.stickyElement.offset().top+d.stickyElement.outerHeight()>=m.offset().top+m.outerHeight()&&d.stickyElement.offset().top<=d.topSpacing?d.stickyElement.css("position","absolute").css("top","").css("bottom",0).css("z-index",""):d.stickyElement.css("position","fixed").css("top",f).css("bottom","").css("z-index",d.zIndex)}}},u=function(){a=n.height();for(var t=0,i=o.length;t<i;t++){var r=o[t],s=null;r.getWidthFrom?r.responsiveWidth&&(s=e(r.getWidthFrom).width()):r.widthFromWrapper&&(s=r.stickyWrapper.width()),null!=s&&r.stickyElement.css("width",s)}},c={init:function(t){var i=e.extend({},r,t);return this.each(function(){var t=e(this),n=t.attr("id"),s=n?n+"-"+r.wrapperClassName:r.wrapperClassName,a=e("<div></div>").attr("id",s).addClass(i.wrapperClassName);t.wrapAll(a);var l=t.parent();i.center&&l.css({width:t.outerWidth(),marginLeft:"auto",marginRight:"auto"}),"right"===t.css("float")&&t.css({float:"none"}).parent().css({float:"right"}),i.stickyElement=t,i.stickyWrapper=l,i.currentTop=null,o.push(i),c.setWrapperHeight(this),c.setupChangeListeners(this)})},setWrapperHeight:function(t){var i=e(t),r=i.parent();r&&r.css("height",i.outerHeight())},setupChangeListeners:function(e){window.MutationObserver?new window.MutationObserver(function(t){(t[0].addedNodes.length||t[0].removedNodes.length)&&c.setWrapperHeight(e)}).observe(e,{subtree:!0,childList:!0}):(e.addEventListener("DOMNodeInserted",function(){c.setWrapperHeight(e)},!1),e.addEventListener("DOMNodeRemoved",function(){c.setWrapperHeight(e)},!1))},update:l,unstick:function(t){return this.each(function(){for(var t=e(this),r=-1,n=o.length;n-- >0;)o[n].stickyElement.get(0)===this&&(i.call(o,n,1),r=n);-1!==r&&(t.unwrap(),t.css({width:"",position:"",top:"",float:"","z-index":""}))})}};window.addEventListener?(window.addEventListener("scroll",l,!1),window.addEventListener("resize",u,!1)):window.attachEvent&&(window.attachEvent("onscroll",l),window.attachEvent("onresize",u)),e.fn.sticky=function(i){return c[i]?c[i].apply(this,t.call(arguments,1)):"object"!==_typeof2(i)&&i?void e.error("Method "+i+" does not exist on jQuery.sticky"):c.init.apply(this,arguments)},e.fn.unstick=function(i){return c[i]?c[i].apply(this,t.call(arguments,1)):"object"!==_typeof2(i)&&i?void e.error("Method "+i+" does not exist on jQuery.sticky"):c.unstick.apply(this,arguments)},e(function(){setTimeout(l,0)})});var BootstrapNotifyDemo={init:function(){$("[data-switch=true]").bootstrapSwitch(),$("#m_notify_btn").click(function(){var e={message:"New order has been placed"};$("#m_notify_title").prop("checked")&&(e.title="Notification Title"),""!=$("#m_notify_icon").val()&&(e.icon="icon "+$("#m_notify_icon").val()),$("#m_notify_url").prop("checked")&&(e.url="www.keenthemes.com",e.target="_blank");var t=$.notify(e,{type:$("#m_notify_state").val(),allow_dismiss:$("#m_notify_dismiss").prop("checked"),newest_on_top:$("#m_notify_top").prop("checked"),mouse_over:$("#m_notify_pause").prop("checked"),showProgressbar:$("#m_notify_progress").prop("checked"),spacing:$("#m_notify_spacing").val(),timer:$("#m_notify_timer").val(),placement:{from:$("#m_notify_placement_from").val(),align:$("#m_notify_placement_align").val()},offset:{x:$("#m_notify_offset_x").val(),y:$("#m_notify_offset_y").val()},delay:$("#m_notify_delay").val(),z_index:$("#m_notify_zindex").val(),animate:{enter:"animated "+$("#m_notify_animate_enter").val(),exit:"animated "+$("#m_notify_animate_exit").val()}});$("#m_notify_progress").prop("checked")&&(setTimeout(function(){t.update("message","<strong>Saving</strong> Page Data."),t.update("type","primary"),t.update("progress",20)},1e3),setTimeout(function(){t.update("message","<strong>Saving</strong> User Data."),t.update("type","warning"),t.update("progress",40)},2e3),setTimeout(function(){t.update("message","<strong>Saving</strong> Profile Data."),t.update("type","danger"),t.update("progress",65)},3e3),setTimeout(function(){t.update("message","<strong>Checking</strong> for errors."),t.update("type","success"),t.update("progress",100)},4e3))})}};jQuery(document).ready(function(){BootstrapNotifyDemo.init()}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.videojs=t()}(this,function(){var e="7.0.3",t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e,t){return e(t={exports:{}},t.exports),t.exports}var r,n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},s={},o=Object.freeze({default:s}),a=o&&s||o,l=void 0!==t?t:"undefined"!=typeof window?window:{};"undefined"!=typeof document?r=document:(r=l["__GLOBAL_DOCUMENT_CACHE@4"])||(r=l["__GLOBAL_DOCUMENT_CACHE@4"]=a);var u=r,c=void 0,d="info",h=[],p=function(e,t){var i=c.levels[d],r=new RegExp("^("+i+")$");if("log"!==e&&t.unshift(e.toUpperCase()+":"),h&&h.push([].concat(t)),t.unshift("VIDEOJS:"),n.console){var s=n.console[e];s||"debug"!==e||(s=n.console.info||n.console.log),s&&i&&r.test(e)&&s[Array.isArray(t)?"apply":"call"](n.console,t)}};(c=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];p("log",t)}).levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:d},c.level=function(e){if("string"==typeof e){if(!c.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');d=e}return d},c.history=function(){return h?[].concat(h):[]},c.history.clear=function(){h&&(h.length=0)},c.history.disable=function(){null!==h&&(h.length=0,h=null)},c.history.enable=function(){null===h&&(h=[])},c.error=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return p("error",t)},c.warn=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return p("warn",t)},c.debug=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return p("debug",t)};var f=c;function m(e){return e.replace(/\n\r?\s*/g,"")}var g=function(e){for(var t="",i=0;i<arguments.length;i++)t+=m(e[i])+(arguments[i+1]||"");return t},y="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},b=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},_=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==_typeof2(t)&&"function"!=typeof t?e:t},T=function(e,t){return e.raw=t,e},S=Object.prototype.toString,w=function(e){return E(e)?Object.keys(e):[]};function C(e,t){w(e).forEach(function(i){return t(e[i],i)})}function k(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return Object.assign?Object.assign.apply(Object,[e].concat(i)):(i.forEach(function(t){t&&C(t,function(t,i){e[i]=t})}),e)}function E(e){return!!e&&"object"===(void 0===e?"undefined":y(e))}function j(e){return E(e)&&"[object Object]"===S.call(e)&&e.constructor===Object}function x(e,t){if(!e||!t)return"";if("function"==typeof n.getComputedStyle){var i=n.getComputedStyle(e);return i?i[t]:""}return""}var A=T(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function P(e){return"string"==typeof e&&/\S/.test(e)}function O(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function I(){return u===n.document}function L(e){return E(e)&&1===e.nodeType}function D(){try{return n.parent!==n.self}catch(e){return!0}}function M(e){return function(t,i){if(!P(t))return u[e](null);P(i)&&(i=u.querySelector(i));var r=L(i)?i:u;return r[e]&&r[e](t)}}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],n=u.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var i=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(f.warn(g(A,e,i)),n.setAttribute(e,i)):"textContent"===e?B(n,i):n[e]=i}),Object.getOwnPropertyNames(i).forEach(function(e){n.setAttribute(e,i[e])}),r&&ie(n,r),n}function B(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function N(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function U(e,t){return O(t),e.classList?e.classList.contains(t):(i=t,new RegExp("(^|\\s)"+i+"($|\\s)")).test(e.className);var i}function $(e,t){return e.classList?e.classList.add(t):U(e,t)||(e.className=(e.className+" "+t).trim()),e}function F(e,t){return e.classList?e.classList.remove(t):(O(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function z(e,t,i){var r=U(e,t);if("function"==typeof i&&(i=i(e,t)),"boolean"!=typeof i&&(i=!r),i!==r)return i?$(e,t):F(e,t),e}function H(e,t){Object.getOwnPropertyNames(t).forEach(function(i){var r=t[i];null==r||!1===r?e.removeAttribute(i):e.setAttribute(i,!0===r?"":r)})}function q(e){var t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var r=e.attributes,n=r.length-1;n>=0;n--){var s=r[n].name,o=r[n].value;"boolean"!=typeof e[s]&&-1===i.indexOf(","+s+",")||(o=null!==o),t[s]=o}return t}function V(e,t){return e.getAttribute(t)}function W(e,t,i){e.setAttribute(t,i)}function Q(e,t){e.removeAttribute(t)}function G(){u.body.focus(),u.onselectstart=function(){return!1}}function Y(){u.onselectstart=function(){return!0}}function X(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(x(e,"height"))),i.width||(i.width=parseFloat(x(e,"width"))),i}}function K(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var i=u.documentElement,r=u.body,s=i.clientLeft||r.clientLeft||0,o=n.pageXOffset||r.scrollLeft,a=t.left+o-s,l=i.clientTop||r.clientTop||0,c=n.pageYOffset||r.scrollTop,d=t.top+c-l;return{left:Math.round(a),top:Math.round(d)}}function Z(e,t){var i={},r=K(e),n=e.offsetWidth,s=e.offsetHeight,o=r.top,a=r.left,l=t.pageY,u=t.pageX;return t.changedTouches&&(u=t.changedTouches[0].pageX,l=t.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(o-l+s)/s)),i.x=Math.max(0,Math.min(1,(u-a)/n)),i}function J(e){return E(e)&&3===e.nodeType}function ee(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function te(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),L(e)||J(e)?e:"string"==typeof e&&/\S/.test(e)?u.createTextNode(e):void 0}).filter(function(e){return e})}function ie(e,t){return te(t).forEach(function(t){return e.appendChild(t)}),e}function re(e,t){return ie(ee(e),t)}function ne(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||0===e.button&&1===e.buttons)}var se=M("querySelector"),oe=M("querySelectorAll"),ae=Object.freeze({isReal:I,isEl:L,isInFrame:D,createEl:R,textContent:B,prependTo:N,hasClass:U,addClass:$,removeClass:F,toggleClass:z,setAttributes:H,getAttributes:q,getAttribute:V,setAttribute:W,removeAttribute:Q,blockTextSelection:G,unblockTextSelection:Y,getBoundingClientRect:X,findPosition:K,getPointerPosition:Z,isTextNode:J,emptyEl:ee,normalizeContent:te,appendContent:ie,insertContent:re,isSingleLeftClick:ne,$:se,$$:oe}),le=1;function ue(){return le++}var ce={},de="vdata"+(new Date).getTime();function he(e){var t=e[de];return t||(t=e[de]=ue()),ce[t]||(ce[t]={}),ce[t]}function pe(e){var t=e[de];return!!t&&!!Object.getOwnPropertyNames(ce[t]).length}function fe(e){var t=e[de];if(t){delete ce[t];try{delete e[de]}catch(t){e.removeAttribute?e.removeAttribute(de):e[de]=null}}}function me(e,t){var i=he(e);0===i.handlers[t].length&&(delete i.handlers[t],e.removeEventListener?e.removeEventListener(t,i.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),0===Object.getOwnPropertyNames(i).length&&fe(e)}function ge(e,t,i,r){i.forEach(function(i){e(t,i,r)})}function ye(e){function t(){return!0}function i(){return!1}if(!e||!e.isPropagationStopped){var r=e||n.event;for(var s in e={},r)"layerX"!==s&&"layerY"!==s&&"keyLocation"!==s&&"webkitMovementX"!==s&&"webkitMovementY"!==s&&("returnValue"===s&&r.preventDefault||(e[s]=r[s]));if(e.target||(e.target=e.srcElement||u),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!==e.clientX&&void 0!==e.clientX){var o=u.documentElement,a=u.body;e.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var ve=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){ve=!0}});n.addEventListener("test",null,e),n.removeEventListener("test",null,e)}catch(e){}}();var be=["touchstart","touchmove"];function _e(e,t,i){if(Array.isArray(t))return ge(_e,e,t,i);var r=he(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),i.guid||(i.guid=ue()),r.handlers[t].push(i),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,i){if(!r.disabled){t=ye(t);var n=r.handlers[t.type];if(n)for(var s=n.slice(0),o=0,a=s.length;o<a&&!t.isImmediatePropagationStopped();o++)try{s[o].call(e,t,i)}catch(e){f.error(e)}}}),1===r.handlers[t].length)if(e.addEventListener){var n=!1;ve&&be.indexOf(t)>-1&&(n={passive:!0}),e.addEventListener(t,r.dispatcher,n)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function Te(e,t,i){if(pe(e)){var r=he(e);if(r.handlers){if(Array.isArray(t))return ge(Te,e,t,i);var n=function(e,t){r.handlers[t]=[],me(e,t)};if(void 0!==t){var s=r.handlers[t];if(s)if(i){if(i.guid)for(var o=0;o<s.length;o++)s[o].guid===i.guid&&s.splice(o--,1);me(e,t)}else n(e,t)}else for(var a in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},a)&&n(e,a)}}}function Se(e,t,i){var r=pe(e)?he(e):{},n=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=ye(t),r.dispatcher&&r.dispatcher.call(e,t,i),n&&!t.isPropagationStopped()&&!0===t.bubbles)Se.call(null,n,t,i);else if(!n&&!t.defaultPrevented){var s=he(t.target);t.target[t.type]&&(s.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),s.disabled=!1)}return!t.defaultPrevented}function we(e,t,i){if(Array.isArray(t))return ge(we,e,t,i);var r=function r(){Te(e,t,r),i.apply(this,arguments)};r.guid=i.guid=i.guid||ue(),_e(e,t,r)}var Ce=Object.freeze({fixEvent:ye,on:_e,off:Te,trigger:Se,one:we}),ke=!1,Ee=void 0,je=function(){if(I()&&!1!==Ee.options.autoSetup){var e=Array.prototype.slice.call(u.getElementsByTagName("video")),t=Array.prototype.slice.call(u.getElementsByTagName("audio")),i=Array.prototype.slice.call(u.getElementsByTagName("video-js")),r=e.concat(t,i);if(r&&r.length>0)for(var n=0,s=r.length;n<s;n++){var o=r[n];if(!o||!o.getAttribute){xe(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&Ee(o)}else ke||xe(1)}};function xe(e,t){t&&(Ee=t),n.setTimeout(je,e)}I()&&"complete"===u.readyState?ke=!0:we(n,"load",function(){ke=!0});var Ae=function(e){var t=u.createElement("style");return t.className=e,t},Pe=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Oe=function(e,t,i){t.guid||(t.guid=ue());var r=function(){return t.apply(e,arguments)};return r.guid=i?i+"_"+t.guid:t.guid,r},Ie=function(e,t){var i=Date.now();return function(){var r=Date.now();r-i>=t&&(e.apply(void 0,arguments),i=r)}},Le=function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,s=void 0;return function(){var n=this,o=arguments,a=function(){s=null,a=null,i||e.apply(n,o)};!s&&i&&e.apply(n,o),r.clearTimeout(s),s=r.setTimeout(a,t)}},De=function(){};De.prototype.allowedEvents_={},De.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},_e(this,e,t),this.addEventListener=i},De.prototype.addEventListener=De.prototype.on,De.prototype.off=function(e,t){Te(this,e,t)},De.prototype.removeEventListener=De.prototype.off,De.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},we(this,e,t),this.addEventListener=i},De.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=ye(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Se(this,e)},De.prototype.dispatchEvent=De.prototype.trigger;var Me=function(e){return e instanceof De||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},Re=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Be=function(e){if(!e.nodeName&&!Me(e))throw new Error("Invalid target; must be a DOM node or evented object.")},Ne=function(e){if(!Re(e))throw new Error("Invalid event type; must be a non-empty string or array.")},Ue=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},$e=function(e,t){var i=t.length<3||t[0]===e||t[0]===e.eventBusEl_,r=void 0,n=void 0,s=void 0;return i?(r=e.eventBusEl_,t.length>=3&&t.shift(),n=t[0],s=t[1]):(r=t[0],n=t[1],s=t[2]),Be(r),Ne(n),Ue(s),{isTargetingSelf:i,target:r,type:n,listener:s=Oe(e,s)}},Fe=function(e,t,i,r){Be(e),e.nodeName?Ce[t](e,i,r):e[t](i,r)},ze={on:function(){for(var e=this,t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];var n=$e(this,i),s=n.isTargetingSelf,o=n.target,a=n.type,l=n.listener;if(Fe(o,"on",a,l),!s){var u=function(){return e.off(o,a,l)};u.guid=l.guid;var c=function(){return e.off("dispose",u)};c.guid=l.guid,Fe(this,"on","dispose",u),Fe(o,"on","dispose",c)}},one:function(){for(var e=this,t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];var n=$e(this,i),s=n.isTargetingSelf,o=n.target,a=n.type,l=n.listener;if(s)Fe(o,"one",a,l);else{var u=function t(){for(var i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];e.off(o,a,t),l.apply(null,r)};u.guid=l.guid,Fe(o,"one",a,u)}},off:function(e,t,i){if(!e||Re(e))Te(this.eventBusEl_,e,t);else{var r=e,n=t;Be(r),Ne(n),Ue(i),i=Oe(this,i),this.off("dispose",i),r.nodeName?(Te(r,n,i),Te(r,"dispose",i)):Me(r)&&(r.off(n,i),r.off("dispose",i))}},trigger:function(e,t){return Se(this.eventBusEl_,e,t)}};function He(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(t){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=R("span",{className:"vjs-event-bus"});return k(e,ze),e.on("dispose",function(){e.off(),n.setTimeout(function(){e.eventBusEl_=null},0)}),e}var qe={state:{},setState:function(e){var t=this;"function"==typeof e&&(e=e());var i=void 0;return C(e,function(e,r){t.state[r]!==e&&((i=i||{})[r]={from:t.state[r],to:e}),t.state[r]=e}),i&&Me(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function Ve(e,t){return k(e,qe),e.state=k({},e.state,t),"function"==typeof e.handleStateChanged&&Me(e)&&e.on("statechanged",e.handleStateChanged),e}function We(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function Qe(){for(var e={},t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];return i.forEach(function(t){t&&C(t,function(t,i){j(t)?(j(e[i])||(e[i]={}),e[i]=Qe(e[i],t)):e[i]=t})}),e}var Ge=function(){function e(t,i,r){if(v(this,e),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=Qe({},this.options_),i=this.options_=Qe(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){var n=t&&t.id&&t.id()||"no_player";this.id_=n+"_component_"+ue()}this.name_=i.name||null,i.el?this.el_=i.el:!1!==i.createEl&&(this.el_=this.createEl()),!1!==i.evented&&He(this,{eventBusKey:this.el_?"el_":null}),Ve(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},!1!==i.initChildren&&this.initChildren(),this.ready(r),!1!==i.reportTouchActivity&&this.enableTouchActivity()}return e.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),fe(this.el_),this.el_=null),this.player_=null},e.prototype.player=function(){return this.player_},e.prototype.options=function(e){return f.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=Qe(this.options_,e),this.options_):this.options_},e.prototype.el=function(){return this.el_},e.prototype.createEl=function(e,t,i){return R(e,t,i)},e.prototype.localize=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages(),s=n&&n[r],o=r&&r.split("-")[0],a=n&&n[o],l=i;return s&&s[e]?l=s[e]:a&&a[e]&&(l=a[e]),t&&(l=l.replace(/\{(\d+)\}/g,function(e,i){var r=t[i-1],n=r;return void 0===r&&(n=e),n})),l},e.prototype.contentEl=function(){return this.contentEl_||this.el_},e.prototype.id=function(){return this.id_},e.prototype.name=function(){return this.name_},e.prototype.children=function(){return this.children_},e.prototype.getChildById=function(e){return this.childIndex_[e]},e.prototype.getChild=function(e){if(e)return e=We(e),this.childNameIndex_[e]},e.prototype.addChild=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,n=void 0,s=void 0;if("string"==typeof t){s=We(t);var o=i.componentClass||s;i.name=s;var a=e.getComponent(o);if(!a)throw new Error("Component "+o+" does not exist");if("function"!=typeof a)return null;n=new a(this.player_||this,i)}else n=t;if(this.children_.splice(r,0,n),"function"==typeof n.id&&(this.childIndex_[n.id()]=n),(s=s||n.name&&We(n.name()))&&(this.childNameIndex_[s]=n),"function"==typeof n.el&&n.el()){var l=this.contentEl().children[r]||null;this.contentEl().insertBefore(n.el(),l)}return n},e.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.prototype.initChildren=function(){var t=this,i=this.options_.children;if(i){var r=this.options_,n=void 0,s=e.getComponent("Tech");(n=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(e){return!n.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var r=void 0,n=void 0;return"string"==typeof e?n=i[r=e]||t.options_[r]||{}:(r=e.name,n=e),{name:r,opts:n}}).filter(function(t){var i=e.getComponent(t.opts.componentClass||We(t.name));return i&&!s.isTech(i)}).forEach(function(e){var i=e.name,n=e.opts;if(void 0!==r[i]&&(n=r[i]),!1!==n){!0===n&&(n={}),n.playerOptions=t.options_.playerOptions;var s=t.addChild(i,n);s&&(t[i]=s)}})}},e.prototype.buildCSSClass=function(){return""},e.prototype.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.prototype.$=function(e,t){return se(e,t||this.contentEl())},e.prototype.$$=function(e,t){return oe(e,t||this.contentEl())},e.prototype.hasClass=function(e){return U(this.el_,e)},e.prototype.addClass=function(e){$(this.el_,e)},e.prototype.removeClass=function(e){F(this.el_,e)},e.prototype.toggleClass=function(e,t){z(this.el_,e,t)},e.prototype.show=function(){this.removeClass("vjs-hidden")},e.prototype.hide=function(){this.addClass("vjs-hidden")},e.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},e.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.prototype.getAttribute=function(e){return V(this.el_,e)},e.prototype.setAttribute=function(e,t){W(this.el_,e,t)},e.prototype.removeAttribute=function(e){Q(this.el_,e)},e.prototype.width=function(e,t){return this.dimension("width",e,t)},e.prototype.height=function(e,t){return this.dimension("height",e,t)},e.prototype.dimensions=function(e,t){this.width(e,!0),this.height(t)},e.prototype.dimension=function(e,t,i){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(i||this.trigger("componentresize"));if(!this.el_)return 0;var r=this.el_.style[e],n=r.indexOf("px");return-1!==n?parseInt(r.slice(0,n),10):parseInt(this.el_["offset"+We(e)],10)},e.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof n.getComputedStyle){var i=n.getComputedStyle(this.el_);t=i.getPropertyValue(e)||i[e]}if(0===(t=parseFloat(t))){var r="offset"+We(e);t=this.el_[r]}return t},e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.prototype.currentWidth=function(){return this.currentDimension("width")},e.prototype.currentHeight=function(){return this.currentDimension("height")},e.prototype.focus=function(){this.el_.focus()},e.prototype.blur=function(){this.el_.blur()},e.prototype.emitTapEvents=function(){var e=0,t=null,i=void 0;this.on("touchstart",function(r){1===r.touches.length&&(t={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},e=(new Date).getTime(),i=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)i=!1;else if(t){var r=e.touches[0].pageX-t.pageX,n=e.touches[0].pageY-t.pageY;Math.sqrt(r*r+n*n)>10&&(i=!1)}});var r=function(){i=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",function(r){(t=null,!0===i)&&((new Date).getTime()-e<200&&(r.preventDefault(),this.trigger("tap")))})},e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=Oe(this.player(),this.player().reportUserActivity),t=void 0;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var i=function(i){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}},e.prototype.setTimeout=function(e,t){var i=this;e=Oe(this,e);var r=n.setTimeout(e,t),s=function(){return i.clearTimeout(r)};return s.guid="vjs-timeout-"+r,this.on("dispose",s),r},e.prototype.clearTimeout=function(e){n.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.prototype.setInterval=function(e,t){var i=this;e=Oe(this,e);var r=n.setInterval(e,t),s=function(){return i.clearInterval(r)};return s.guid="vjs-interval-"+r,this.on("dispose",s),r},e.prototype.clearInterval=function(e){n.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.prototype.requestAnimationFrame=function(e){var t=this;if(this.supportsRaf_){e=Oe(this,e);var i=n.requestAnimationFrame(e),r=function(){return t.cancelAnimationFrame(i)};return r.guid="vjs-raf-"+i,this.on("dispose",r),i}return this.setTimeout(e,1e3/60)},e.prototype.cancelAnimationFrame=function(e){if(this.supportsRaf_){n.cancelAnimationFrame(e);var t=function(){};return t.guid="vjs-raf-"+e,this.off("dispose",t),e}return this.clearTimeout(e)},e.registerComponent=function(t,i){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r=e.getComponent("Tech"),n=r&&r.isTech(i),s=e===i||e.prototype.isPrototypeOf(i.prototype);if(n||!s){var o=void 0;throw o=n?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+o+".")}t=We(t),e.components_||(e.components_={});var a=e.getComponent("Player");if("Player"===t&&a&&a.players){var l=a.players,u=Object.keys(l);if(l&&u.length>0&&u.map(function(e){return l[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=i,i},e.getComponent=function(t){if(t)return t=We(t),e.components_&&e.components_[t]?e.components_[t]:void 0},e}();Ge.prototype.supportsRaf_="function"==typeof n.requestAnimationFrame&&"function"==typeof n.cancelAnimationFrame,Ge.registerComponent("Component",Ge);var Ye,Xe=n.navigator&&n.navigator.userAgent||"",Ke=/AppleWebKit\/([\d.]+)/i.exec(Xe),Ze=Ke?parseFloat(Ke.pop()):null,Je=/iPad/i.test(Xe),et=/iPhone/i.test(Xe)&&!Je,tt=/iPod/i.test(Xe),it=et||Je||tt,rt=(Ye=Xe.match(/OS (\d+)_/i))&&Ye[1]?Ye[1]:null,nt=/Android/i.test(Xe),st=function(){var e=Xe.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),ot=nt&&st<5&&Ze<537,at=/Firefox/i.test(Xe),lt=/Edge/i.test(Xe),ut=!lt&&/Chrome/i.test(Xe),ct=function(){var e=Xe.match(/Chrome\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),dt=function(){var e=/MSIE\s(\d+)\.\d/.exec(Xe),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(Xe)&&/rv:11.0/.test(Xe)&&(t=11),t}(),ht=/Safari/i.test(Xe)&&!ut&&!nt&&!lt,pt=ht||it,ft=I()&&("ontouchstart"in n||n.DocumentTouch&&n.document instanceof n.DocumentTouch),mt=Object.freeze({IS_IPAD:Je,IS_IPHONE:et,IS_IPOD:tt,IS_IOS:it,IOS_VERSION:rt,IS_ANDROID:nt,ANDROID_VERSION:st,IS_NATIVE_ANDROID:ot,IS_FIREFOX:at,IS_EDGE:lt,IS_CHROME:ut,CHROME_VERSION:ct,IE_VERSION:dt,IS_SAFARI:ht,IS_ANY_SAFARI:pt,TOUCH_ENABLED:ft});function gt(e,t,i,r){return function(e,t,i){if("number"!=typeof t||t<0||t>i)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}(e,r,i.length-1),i[r][t]}function yt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:gt.bind(null,"start",0,e),end:gt.bind(null,"end",1,e)}}function vt(e,t){return Array.isArray(e)?yt(e):void 0===e||void 0===t?yt():yt([[e,t]])}function bt(e,t){var i=0,r=void 0,n=void 0;if(!t)return 0;e&&e.length||(e=vt(0,0));for(var s=0;s<e.length;s++)r=e.start(s),(n=e.end(s))>t&&(n=t),i+=n-r;return i/t}for(var _t={},Tt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],St=Tt[0],wt=void 0,Ct=0;Ct<Tt.length;Ct++)if(Tt[Ct][1]in u){wt=Tt[Ct];break}if(wt)for(var kt=0;kt<wt.length;kt++)_t[St[kt]]=wt[kt];function Et(e){if(e instanceof Et)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:E(e)&&("number"==typeof e.code&&(this.code=e.code),k(this,e)),this.message||(this.message=Et.defaultMessages[this.code]||"")}Et.prototype.code=0,Et.prototype.message="",Et.prototype.status=null,Et.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Et.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var jt=0;jt<Et.errorTypes.length;jt++)Et[Et.errorTypes[jt]]=jt,Et.prototype[Et.errorTypes[jt]]=jt;var xt=function(e,t){var i,r=null;try{i=JSON.parse(e,t)}catch(e){r=e}return[r,i]};function At(e){return null!=e&&"function"==typeof e.then}function Pt(e){At(e)&&e.then(null,function(e){})}var Ot=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,i,r){return e[i]&&(t[i]=e[i]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},It=function(e){var t=e.$$("track"),i=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=Ot(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===i.indexOf(e)}).map(Ot))},Lt=function(e,t){return e.forEach(function(e){var i=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return i.addCue(e)})}),t.textTracks()},Dt="vjs-modal-dialog",Mt=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=R("div",{className:Dt+"-content"},{role:"document"}),n.descEl_=R("p",{className:Dt+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),B(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},t.prototype.buildCSSClass=function(){return Dt+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){27===e.which&&this.closeable()&&this.close()},t.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",Oe(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",Oe(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.prototype.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){var r=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(i,"close",this.close)}!t&&i&&(this.off(i,"close",this.close),this.removeChild(i),i.dispose())}return this.closeable_},t.prototype.fill=function(){this.fillWith(this.content())},t.prototype.fillWith=function(e){var t=this.contentEl(),i=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),re(t,e),this.trigger("modalfill"),r?i.insertBefore(t,r):i.appendChild(t);var n=this.getChild("closeButton");n&&i.appendChild(n.el_)},t.prototype.empty=function(){this.trigger("beforemodalempty"),ee(this.contentEl()),this.trigger("modalempty")},t.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},t.prototype.conditionalFocus_=function(){var e=u.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus(),this.on(u,"keydown",this.handleKeyDown))},t.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(u,"keydown",this.handleKeyDown)},t.prototype.handleKeyDown=function(e){if(9===e.which){for(var t=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=void 0,n=0;n<t.length;n++)if(i===t[n]){r=n;break}u.activeElement===this.el_&&(r=0),e.shiftKey&&0===r?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||r!==t.length-1||(t[0].focus(),e.preventDefault())}},t.prototype.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof n.HTMLAnchorElement||e instanceof n.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof n.HTMLInputElement||e instanceof n.HTMLSelectElement||e instanceof n.HTMLTextAreaElement||e instanceof n.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof n.HTMLIFrameElement||e instanceof n.HTMLObjectElement||e instanceof n.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},t}(Ge);Mt.prototype.options_={pauseOnOpen:!0,temporary:!0},Ge.registerComponent("ModalDialog",Mt);var Rt=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,t);var r=_(this,e.call(this));r.tracks_=[],Object.defineProperty(r,"length",{get:function(){return this.tracks_.length}});for(var n=0;n<i.length;n++)r.addTrack(i[n]);return r}return b(t,e),t.prototype.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.prototype.removeTrack=function(e){for(var t=void 0,i=0,r=this.length;i<r;i++)if(this[i]===e){(t=this[i]).off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,i=0,r=this.length;i<r;i++){var n=this[i];if(n.id===e){t=n;break}}return t},t}(De);for(var Bt in Rt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Rt.prototype.allowedEvents_)Rt.prototype["on"+Bt]=null;var Nt=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)},Ut=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,t);for(var r=i.length-1;r>=0;r--)if(i[r].enabled){Nt(i,i[r]);break}var n=_(this,e.call(this,i));return n.changing_=!1,n}return b(t,e),t.prototype.addTrack=function(t){var i=this;t.enabled&&Nt(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){i.changing_||(i.changing_=!0,Nt(i,t),i.changing_=!1,i.trigger("change"))})},t}(Rt),$t=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].selected=!1)},Ft=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,t);for(var r=i.length-1;r>=0;r--)if(i[r].selected){$t(i,i[r]);break}var n=_(this,e.call(this,i));return n.changing_=!1,Object.defineProperty(n,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}return b(t,e),t.prototype.addTrack=function(t){var i=this;t.selected&&$t(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){i.changing_||(i.changing_=!0,$t(i,t),i.changing_=!1,i.trigger("change"))})},t}(Rt),zt=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.addTrack=function(t){e.prototype.addTrack.call(this,t),t.addEventListener("modechange",Oe(this,function(){this.trigger("change")}));-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",Oe(this,function(){this.trigger("selectedlanguagechange")}))},t}(Rt),Ht=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,e),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var i=0,r=t.length;i<r;i++)this.addTrackElement_(t[i])}return e.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},e.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,i=0,r=this.trackElements_.length;i<r;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t},e.prototype.removeTrackElement_=function(e){for(var t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}(),qt=function(){function e(t){v(this,e),e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}return e.prototype.setCues_=function(e){var t=this.length||0,i=0,r=e.length;this.cues_=e,this.length_=e.length;var n=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<r)for(i=t;i<r;i++)n.call(this,i)},e.prototype.getCueById=function(e){for(var t=null,i=0,r=this.length;i<r;i++){var n=this[i];if(n.id===e){t=n;break}}return t},e}(),Vt={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Wt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Qt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Gt={disabled:"disabled",hidden:"hidden",showing:"showing"},Yt=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t);var r=_(this,e.call(this)),n={id:i.id||"vjs_track_"+ue(),kind:i.kind||"",label:i.label||"",language:i.language||""},s=function(e){Object.defineProperty(r,e,{get:function(){return n[e]},set:function(){}})};for(var o in n)s(o);return r}return b(t,e),t}(De),Xt=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=u.createElement("a");i.href=e;var r=""===i.host&&"file:"!==i.protocol,s=void 0;r&&((s=u.createElement("div")).innerHTML='<a href="'+e+'"></a>',i=s.firstChild,s.setAttribute("style","display:none; position:absolute;"),u.body.appendChild(s));for(var o={},a=0;a<t.length;a++)o[t[a]]=i[t[a]];return"http:"===o.protocol&&(o.host=o.host.replace(/:80$/,"")),"https:"===o.protocol&&(o.host=o.host.replace(/:443$/,"")),o.protocol||(o.protocol=n.location.protocol),r&&u.body.removeChild(s),o},Kt=function(e){if(!e.match(/^https?:\/\//)){var t=u.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},Zt=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(t)return t.pop().toLowerCase()}return""},Jt=function(e){var t=n.location,i=Xt(e);return(":"===i.protocol?t.protocol:i.protocol)+i.host!==t.protocol+t.host},ei=Object.freeze({parseUrl:Xt,getAbsoluteURL:Kt,getFileExtension:Zt,isCrossOrigin:Jt}),ti=function(e){var t=ii.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},ii=Object.prototype.toString;var ri=Object.freeze({default:ti,__moduleExports:ti}),ni=i(function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),si=ni.left,oi=ni.right,ai=Object.freeze({default:ni,__moduleExports:ni,left:si,right:oi}),li=ri&&ti||ri,ui=function(e,t,i){if(!li(t))throw new TypeError("iterator must be a function");arguments.length<3&&(i=this);"[object Array]"===ci.call(e)?function(e,t,i){for(var r=0,n=e.length;r<n;r++)di.call(e,r)&&t.call(i,e[r],r,e)}(e,t,i):"string"==typeof e?function(e,t,i){for(var r=0,n=e.length;r<n;r++)t.call(i,e.charAt(r),r,e)}(e,t,i):function(e,t,i){for(var r in e)di.call(e,r)&&t.call(i,e[r],r,e)}(e,t,i)},ci=Object.prototype.toString,di=Object.prototype.hasOwnProperty;var hi=Object.freeze({default:ui,__moduleExports:ui}),pi=ai&&ni||ai,fi=hi&&ui||hi,mi=function(e){if(!e)return{};var t={};return fi(pi(e).split("\n"),function(e){var i,r=e.indexOf(":"),n=pi(e.slice(0,r)).toLowerCase(),s=pi(e.slice(r+1));void 0===t[n]?t[n]=s:(i=t[n],"[object Array]"===Object.prototype.toString.call(i)?t[n].push(s):t[n]=[t[n],s])}),t},gi=Object.freeze({default:mi,__moduleExports:mi}),yi=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var r in i)vi.call(i,r)&&(e[r]=i[r])}return e},vi=Object.prototype.hasOwnProperty;var bi=Object.freeze({default:yi,__moduleExports:yi}),_i=gi&&mi||gi,Ti=bi&&yi||bi,Si=Ci;function wi(e,t,i){var r=e;return li(t)?(i=t,"string"==typeof e&&(r={uri:e})):r=Ti(t,{uri:e}),r.callback=i,r}function Ci(e,t,i){return ki(t=wi(e,t,i))}function ki(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,i=function(i,r,n){t||(t=!0,e.callback(i,r,n))};function r(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML;return null}(l),m)try{e=JSON.parse(e)}catch(e){}return e}function n(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,i(e,g)}function s(){if(!a){var t;clearTimeout(u),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var n=g,s=null;return 0!==t?(n={body:r(),statusCode:t,method:d,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(n.headers=_i(l.getAllResponseHeaders()))):s=new Error("Internal XMLHttpRequest Error"),i(s,n,n.body)}}var o,a,l=e.xhr||null;l||(l=e.cors||e.useXDR?new Ci.XDomainRequest:new Ci.XMLHttpRequest);var u,c=l.url=e.uri||e.url,d=l.method=e.method||"GET",h=e.body||e.data,p=l.headers=e.headers||{},f=!!e.sync,m=!1,g={body:void 0,headers:{},statusCode:0,method:d,url:c,rawRequest:l};if("json"in e&&!1!==e.json&&(m=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),h=JSON.stringify(!0===e.json?h:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(s,0)},l.onload=s,l.onerror=n,l.onprogress=function(){},l.onabort=function(){a=!0},l.ontimeout=n,l.open(d,c,!f,e.username,e.password),f||(l.withCredentials=!!e.withCredentials),!f&&e.timeout>0&&(u=setTimeout(function(){if(!a){a=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",n(e)}},e.timeout)),l.setRequestHeader)for(o in p)p.hasOwnProperty(o)&&l.setRequestHeader(o,p[o]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(h||null),l}Ci.XMLHttpRequest=n.XMLHttpRequest||function(){},Ci.XDomainRequest="withCredentials"in new Ci.XMLHttpRequest?Ci.XMLHttpRequest:n.XDomainRequest,function(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],function(e){Ci["delete"===e?"del":e]=function(t,i,r){return(i=wi(t,i,r)).method=e.toUpperCase(),ki(i)}});var Ei=function(e,t){var i=new n.WebVTT.Parser(n,n.vttjs,n.WebVTT.StringDecoder()),r=[];i.oncue=function(e){t.addCue(e)},i.onparsingerror=function(e){r.push(e)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),r.length>0&&(n.console&&n.console.groupCollapsed&&n.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(e){return f.error(e)}),n.console&&n.console.groupEnd&&n.console.groupEnd()),i.flush()},ji=function(e,t){var i={uri:e},r=Jt(e);r&&(i.cors=r),Si(i,Oe(this,function(e,i,r){if(e)return f.error(e,i);if(t.loaded_=!0,"function"!=typeof n.WebVTT){if(t.tech_){var s=function(){return Ei(r,t)};t.tech_.on("vttjsloaded",s),t.tech_.on("vttjserror",function(){f.error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",s)})}}else Ei(r,t)}))},xi=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(v(this,t),!i.tech)throw new Error("A tech was not provided.");var r=Qe(i,{kind:Qt[i.kind]||"subtitles",language:i.language||i.srclang||""}),n=Gt[r.mode]||"disabled",s=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(n="hidden");var o=_(this,e.call(this,r));o.tech_=r.tech,o.cues_=[],o.activeCues_=[];var a=new qt(o.cues_),l=new qt(o.activeCues_),u=!1,c=Oe(o,function(){this.activeCues,u&&(this.trigger("cuechange"),u=!1)});return"disabled"!==n&&o.tech_.ready(function(){o.tech_.on("timeupdate",c)},!0),Object.defineProperties(o,{default:{get:function(){return s},set:function(){}},mode:{get:function(){return n},set:function(e){var t=this;Gt[e]&&("showing"===(n=e)&&this.tech_.ready(function(){t.tech_.on("timeupdate",c)},!0),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return l;for(var e=this.tech_.currentTime(),t=[],i=0,r=this.cues.length;i<r;i++){var n=this.cues[i];n.startTime<=e&&n.endTime>=e?t.push(n):n.startTime===n.endTime&&n.startTime<=e&&n.startTime+.5>=e&&t.push(n)}if(u=!1,t.length!==this.activeCues_.length)u=!0;else for(var s=0;s<t.length;s++)-1===this.activeCues_.indexOf(t[s])&&(u=!0);return this.activeCues_=t,l.setCues_(this.activeCues_),l},set:function(){}}}),r.src?(o.src=r.src,ji(r.src,o)):o.loaded_=!0,o}return b(t,e),t.prototype.addCue=function(e){var t=e;if(n.vttjs&&!(e instanceof n.vttjs.VTTCue)){for(var i in t=new n.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}for(var r=this.tech_.textTracks(),s=0;s<r.length;s++)r[s]!==this&&r[s].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(Yt);xi.prototype.allowedEvents_={cuechange:"cuechange"};var Ai=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t);var r=Qe(i,{kind:Wt[i.kind]||""}),n=_(this,e.call(this,r)),s=!1;return Object.defineProperty(n,"enabled",{get:function(){return s},set:function(e){"boolean"==typeof e&&e!==s&&(s=e,this.trigger("enabledchange"))}}),r.enabled&&(n.enabled=r.enabled),n.loaded_=!0,n}return b(t,e),t}(Yt),Pi=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t);var r=Qe(i,{kind:Vt[i.kind]||""}),n=_(this,e.call(this,r)),s=!1;return Object.defineProperty(n,"selected",{get:function(){return s},set:function(e){"boolean"==typeof e&&e!==s&&(s=e,this.trigger("selectedchange"))}}),r.selected&&(n.selected=r.selected),n}return b(t,e),t}(Yt),Oi=0,Ii=2,Li=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t);var r=_(this,e.call(this)),n=void 0,s=new xi(i);return r.kind=s.kind,r.src=s.src,r.srclang=s.language,r.label=s.label,r.default=s.default,Object.defineProperties(r,{readyState:{get:function(){return n}},track:{get:function(){return s}}}),n=Oi,s.addEventListener("loadeddata",function(){n=Ii,r.trigger({type:"load",target:r})}),r}return b(t,e),t}(De);Li.prototype.allowedEvents_={load:"load"},Li.NONE=Oi,Li.LOADING=1,Li.LOADED=Ii,Li.ERROR=3;var Di={audio:{ListClass:Ut,TrackClass:Ai,capitalName:"Audio"},video:{ListClass:Ft,TrackClass:Pi,capitalName:"Video"},text:{ListClass:zt,TrackClass:xi,capitalName:"Text"}};Object.keys(Di).forEach(function(e){Di[e].getterName=e+"Tracks",Di[e].privateName=e+"Tracks_"});var Mi={remoteText:{ListClass:zt,TrackClass:xi,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Ht,TrackClass:Li,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ri=Qe(Di,Mi);Mi.names=Object.keys(Mi),Di.names=Object.keys(Di),Ri.names=[].concat(Mi.names).concat(Di.names);var Bi=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function Ni(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Ui(e){function t(e,t,i,r){return 3600*(0|e)+60*(0|t)+(0|i)+(0|r)/1e3}var i=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function $i(){this.values=Bi(null)}function Fi(e,t,i,r){var n=r?e.split(r):[e];for(var s in n)if("string"==typeof n[s]){var o=n[s].split(i);if(2===o.length)t(o[0],o[1])}}function zi(e,t,i){var r=e;function n(){var t=Ui(e);if(null===t)throw new Ni(Ni.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}if(s(),t.startTime=n(),s(),"--\x3e"!==e.substr(0,3))throw new Ni(Ni.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),s(),t.endTime=n(),s(),function(e,t){var r=new $i;Fi(e,function(e,t){switch(e){case"region":for(var n=i.length-1;n>=0;n--)if(i[n].id===t){r.set(e,i[n].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var s=t.split(","),o=s[0];r.integer(e,o),r.percent(e,o)&&r.set("snapToLines",!1),r.alt(e,o,["auto"]),2===s.length&&r.alt("lineAlign",s[1],["start","middle","end"]);break;case"position":s=t.split(","),r.percent(e,s[0]),2===s.length&&r.alt("positionAlign",s[1],["start","middle","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical",""),t.line=r.get("line","auto"),t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align","middle"),t.position=r.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=r.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}(e,t)}Ni.prototype=Bi(Error.prototype),Ni.prototype.constructor=Ni,Ni.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},$i.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,i){for(var r=0;r<i.length;++r)if(t===i[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var Hi={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},qi={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Vi={v:"title",lang:"lang"},Wi={rt:"ruby"};function Qi(e,t){function i(){if(!t)return null;var e,i=t.match(/^([^<]*)(<[^>]*>?)?/);return e=i[1]?i[1]:i[2],t=t.substr(e.length),e}function r(e){return Hi[e]}function n(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],r);return e}function s(e,t){return!Wi[t.localName]||Wi[t.localName]===e.localName}function o(t,i){var r=qi[t];if(!r)return null;var n=e.document.createElement(r);n.localName=r;var s=Vi[t];return s&&i&&(n[s]=i.trim()),n}for(var a,l=e.document.createElement("div"),u=l,c=[];null!==(a=i());)if("<"!==a[0])u.appendChild(e.document.createTextNode(n(a)));else{if("/"===a[1]){c.length&&c[c.length-1]===a.substr(2).replace(">","")&&(c.pop(),u=u.parentNode);continue}var d,h=Ui(a.substr(1,a.length-2));if(h){d=e.document.createProcessingInstruction("timestamp",h),u.appendChild(d);continue}var p=a.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(d=o(p[1],p[3])))continue;if(!s(u,d))continue;p[2]&&(d.className=p[2].substr(1).replace("."," ")),c.push(p[1]),u.appendChild(d),u=d}return l}var Gi=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Yi(e){for(var t=0;t<Gi.length;t++){var i=Gi[t];if(e>=i[0]&&e<=i[1])return!0}return!1}function Xi(e){var t=[],i="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var i=t.childNodes.length-1;i>=0;i--)e.push(t.childNodes[i])}function n(e){if(!e||!e.length)return null;var t=e.pop(),i=t.textContent||t.innerText;if(i){var s=i.match(/^.*(\n|\r)/);return s?(e.length=0,s[0]):i}return"ruby"===t.tagName?n(e):t.childNodes?(r(e,t),n(e)):void 0}for(r(t,e);i=n(t);)for(var s=0;s<i.length;s++)if(Yi(i.charCodeAt(s)))return"rtl";return"ltr"}function Ki(){}function Zi(e,t,i){Ki.call(this),this.cue=t,this.cueDiv=Qi(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:Xi(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var n=0;switch(t.positionAlign){case"start":n=t.position;break;case"middle":n=t.position-t.size/2;break;case"end":n=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function Ji(e){var t,i,r,n;if(e.div){i=e.div.offsetHeight,r=e.div.offsetWidth,n=e.div.offsetTop;var s=(s=e.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();e=e.div.getBoundingClientRect(),t=s?Math.max(s[0]&&s[0].height||0,e.height/s.length):0}this.left=e.left,this.right=e.right,this.top=e.top||n,this.height=e.height||i,this.bottom=e.bottom||n+(e.height||i),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight}function er(e,t,i,r){var n=new Ji(t),s=t.cue,o=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,i=t.textTrackList,r=0,n=0;n<i.length&&i[n]!==t;n++)"showing"===i[n].mode&&r++;return-1*++r}(s),a=[];if(s.snapToLines){var l;switch(s.vertical){case"":a=["+y","-y"],l="height";break;case"rl":a=["+x","-x"],l="width";break;case"lr":a=["-x","+x"],l="width"}var u=n.lineHeight,c=u*Math.round(o),d=i[l]+u,h=a[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),o<0&&(c+=""===s.vertical?i.height:i.width,a=a.reverse()),n.move(h,c)}else{var p=n.lineHeight/i.height*100;switch(s.lineAlign){case"middle":o-=p/2;break;case"end":o-=p}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}a=["+y","-x","+x","-y"],n=new Ji(t)}var f=function(e,t){for(var n,s=new Ji(e),o=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(i,t[a])||e.within(i)&&e.overlapsAny(r);)e.move(t[a]);if(e.within(i))return e;var l=e.intersectPercentage(i);o>l&&(n=new Ji(e),o=l),e=new Ji(s)}return n||s}(n,a);t.move(f.toCSSCompatValues(i))}function tr(){}Ki.prototype.applyStyles=function(e,t){for(var i in t=t||this.div,e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},Ki.prototype.formatStyle=function(e,t){return 0===e?0:e+t},Zi.prototype=Bi(Ki.prototype),Zi.prototype.constructor=Zi,Ji.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},Ji.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},Ji.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},Ji.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},Ji.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},Ji.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},Ji.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},Ji.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||i}},tr.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},tr.convertCueToDOMTree=function(e,t){return e&&t?Qi(e,t):null};tr.processCues=function(e,t,i){if(!e||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",i.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var n=[],s=Ji.getSimpleBoxPosition(r),o={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var i,a,l=0;l<t.length;l++)a=t[l],i=new Zi(e,a,o),r.appendChild(i.div),er(0,i,s,n),a.displayState=i.div,n.push(Ji.getSimpleBoxPosition(i))}()}else for(var a=0;a<t.length;a++)r.appendChild(t[a].displayState)},tr.Parser=function(e,t,i){i||(i=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]},tr.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof Ni))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function i(){for(var e=t.buffer,i=0;i<e.length&&"\r"!==e[i]&&"\n"!==e[i];)++i;var r=e.substr(0,i);return"\r"===e[i]&&++i,"\n"===e[i]&&++i,t.buffer=e.substr(i),r}function r(e){e.match(/X-TIMESTAMP-MAP/)?Fi(e,function(e,i){switch(e){case"X-TIMESTAMP-MAP":r=i,n=new $i,Fi(r,function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",Ui(t))}},/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}var r,n},/=/):Fi(e,function(e,i){switch(e){case"Region":!function(e){var i=new $i;if(Fi(e,function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var r=t.split(",");if(2!==r.length)break;var n=new $i;if(n.percent("x",r[0]),n.percent("y",r[1]),!n.has("x")||!n.has("y"))break;i.set(e+"X",n.get("x")),i.set(e+"Y",n.get("y"));break;case"scroll":i.alt(e,t,["up"])}},/=/,/\s/),i.has("id")){var r=new(t.vttjs.VTTRegion||t.window.VTTRegion);r.width=i.get("width",100),r.lines=i.get("lines",3),r.regionAnchorX=i.get("regionanchorX",0),r.regionAnchorY=i.get("regionanchorY",100),r.viewportAnchorX=i.get("viewportanchorX",0),r.viewportAnchorY=i.get("viewportanchorY",100),r.scroll=i.get("scroll",""),t.onregion&&t.onregion(r),t.regionList.push({id:i.get("id"),region:r})}}(i)}},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var n;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var s=(n=i()).match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new Ni(Ni.Errors.BadSignature);t.state="HEADER"}for(var o=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:n=i(),t.state){case"HEADER":/:/.test(n)?r(n):n||(t.state="ID");continue;case"NOTE":n||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){t.state="NOTE";break}if(!n)continue;if(t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,""),t.state="CUE",-1===n.indexOf("--\x3e")){t.cue.id=n;continue}case"CUE":try{zi(n,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var a=-1!==n.indexOf("--\x3e");if(!n||a&&(o=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=n;continue;case"BADCUE":n||(t.state="ID")}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Ni(Ni.Errors.BadSignature)}catch(e){this.reportOrThrowError(e)}return this.onflush&&this.onflush(),this}};var ir=tr,rr=Object.freeze({default:ir,__moduleExports:ir}),nr="auto",sr={"":1,lr:1,rl:1},or={start:1,middle:1,end:1,left:1,right:1};function ar(e){return"string"==typeof e&&(!!or[e.toLowerCase()]&&e.toLowerCase())}function lr(e,t,i){this.hasBeenReset=!1;var r="",n=!1,s=e,o=t,a=i,l=null,u="",c=!0,d="auto",h="start",p=50,f="middle",m=50,g="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(e){r=""+e}},pauseOnExit:{enumerable:!0,get:function(){return n},set:function(e){n=!!e}},startTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");o=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return a},set:function(e){a=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&!!sr[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&e!==nr)throw new SyntaxError("An invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=ar(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=ar(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){var t=ar(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=void 0}lr.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var ur=lr,cr=Object.freeze({default:ur,__moduleExports:ur}),dr={"":!0,up:!0};function hr(e){return"number"==typeof e&&e>=0&&e<=100}var pr=function(){var e=100,t=3,i=0,r=100,n=0,s=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!hr(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(e){if(!hr(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!hr(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!hr(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!hr(e))throw new Error("ViewportAnchorX must be between 0 and 100.");n=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){var t=function(e){return"string"==typeof e&&!!dr[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");o=t}}})},fr=Object.freeze({default:pr,__moduleExports:pr}),mr=rr&&ir||rr,gr=cr&&ur||cr,yr=fr&&pr||fr,vr=i(function(e){var t=e.exports={WebVTT:mr,VTTCue:gr,VTTRegion:yr};n.vttjs=t,n.WebVTT=t.WebVTT;var i=t.VTTCue,r=t.VTTRegion,s=n.VTTCue,o=n.VTTRegion;t.shim=function(){n.VTTCue=i,n.VTTRegion=r},t.restore=function(){n.VTTCue=s,n.VTTRegion=o},n.VTTCue||t.shim()});vr.WebVTT,vr.VTTCue,vr.VTTRegion;var br=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};v(this,t),i.reportTouchActivity=!1;var n=_(this,e.call(this,null,i,r));return n.hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),Ri.names.forEach(function(e){var t=Ri[e];i&&i[t.getterName]&&(n[t.privateName]=i[t.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===i["native"+e+"Tracks"]&&(n["featuresNative"+e+"Tracks"]=!1)}),!1===i.nativeCaptions||!1===i.nativeTextTracks?n.featuresNativeTextTracks=!1:!0!==i.nativeCaptions&&!0!==i.nativeTextTracks||(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.autoRemoteTextTracks_=new Ri.text.ListClass,n.initTrackListeners(),i.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}return b(t,e),t.prototype.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},t.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},t.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},t.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Oe(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},t.prototype.onDurationChange=function(e){this.duration_=this.duration()},t.prototype.buffered=function(){return vt(0,0)},t.prototype.bufferedPercent=function(){return bt(this.buffered(),this.duration_)},t.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},t.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},t.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.dispose=function(){this.clearTracks(Di.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},t.prototype.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var i=t[e+"Tracks"]()||[],r=i.length;r--;){var n=i[r];"text"===e&&t.removeRemoteTextTrack(n),i.removeTrack(n)}})},t.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var i=e[t];this.removeRemoteTextTrack(i)}},t.prototype.reset=function(){},t.prototype.error=function(e){return void 0!==e&&(this.error_=new Et(e),this.trigger("error")),this.error_},t.prototype.played=function(){return this.hasStarted_?vt(0,0):vt()},t.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.prototype.initTrackListeners=function(){var e=this;Di.names.forEach(function(t){var i=Di[t],r=function(){e.trigger(t+"trackchange")},n=e[i.getterName]();n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),e.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)})})},t.prototype.addWebVttScript_=function(){var e=this;if(!n.WebVTT)if(u.body.contains(this.el())){if(!this.options_["vtt.js"]&&j(vr)&&Object.keys(vr).length>0)return void this.trigger("vttjsloaded");var t=u.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),n.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},t.prototype.emulateTextTracks=function(){var e=this,t=this.textTracks(),i=this.remoteTextTracks(),r=function(e){return t.addTrack(e.track)},n=function(e){return t.removeTrack(e.track)};i.on("addtrack",r),i.on("removetrack",n),this.addWebVttScript_();var s=function(){return e.trigger("texttrackchange")},o=function(){s();for(var e=0;e<t.length;e++){var i=t[e];i.removeEventListener("cuechange",s),"showing"===i.mode&&i.addEventListener("cuechange",s)}};o(),t.addEventListener("change",o),t.addEventListener("addtrack",o),t.addEventListener("removetrack",o),this.on("dispose",function(){i.off("addtrack",r),i.off("removetrack",n),t.removeEventListener("change",o),t.removeEventListener("addtrack",o),t.removeEventListener("removetrack",o);for(var e=0;e<t.length;e++){t[e].removeEventListener("cuechange",s)}})},t.prototype.addTextTrack=function(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,i,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=e.textTracks();n.kind=t,i&&(n.label=i),r&&(n.language=r),n.tech=e;var o=new Ri.text.TrackClass(n);return s.addTrack(o),o}(this,e,t,i)},t.prototype.createRemoteTextTrack=function(e){var t=Qe(e,{tech:this});return new Mi.remoteTextEl.TrackClass(t)},t.prototype.addRemoteTextTrack=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],r=this.createRemoteTextTrack(t);return!0!==i&&!1!==i&&(f.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),i=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!0!==i&&this.ready(function(){return e.autoRemoteTextTracks_.addTrack(r.track)}),r},t.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},t.prototype.getVideoPlaybackQuality=function(){return{}},t.prototype.setPoster=function(){},t.prototype.playsinline=function(){},t.prototype.setPlaysinline=function(){},t.prototype.overrideNativeAudioTracks=function(){},t.prototype.overrideNativeVideoTracks=function(){},t.prototype.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,i){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,i){if(t.techs_||(t.techs_={}),!t.isTech(i))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=We(e),t.techs_[e]=i,"Tech"!==e&&t.defaultTechOrder_.push(e),i},t.getTech=function(e){if(e)return e=We(e),t.techs_&&t.techs_[e]?t.techs_[e]:n&&n.videojs&&n.videojs[e]?(f.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),n.videojs[e]):void 0},t}(Ge);Ri.names.forEach(function(e){var t=Ri[e];br.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),br.prototype.featuresVolumeControl=!0,br.prototype.featuresFullscreenResize=!1,br.prototype.featuresPlaybackRate=!1,br.prototype.featuresProgressEvents=!1,br.prototype.featuresSourceset=!1,br.prototype.featuresTimeupdateEvents=!1,br.prototype.featuresNativeTextTracks=!1,br.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){var r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===i&&(i=r.length),r.splice(i,0,t)},e.canPlayType=function(t){for(var i=e.sourceHandlers||[],r=void 0,n=0;n<i.length;n++)if(r=i[n].canPlayType(t))return r;return""},e.selectSourceHandler=function(t,i){for(var r=e.sourceHandlers||[],n=0;n<r.length;n++)if(r[n].canHandleSource(t,i))return r[n];return null},e.canPlaySource=function(t,i){var r=e.selectSourceHandler(t,i);return r?r.canHandleSource(t,i):""};["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var i=e.selectSourceHandler(t,this.options_);i||(e.nativeSourceHandler?i=e.nativeSourceHandler:f.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),i!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Ge.registerComponent("Tech",br),br.registerTech("Tech",br),br.defaultTechOrder_=[];var _r={},Tr={},Sr={};function wr(e,t,i){e.setTimeout(function(){return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=arguments[2];var n=arguments[3];var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];var a=i[0],l=i.slice(1);if("string"==typeof a)e(t,_r[a],r,n,s,o);else if(a){var u=function(e,t){var i=Tr[e.id()],r=null;if(null==i)return r=t(e),Tr[e.id()]=[[t,r]],r;for(var n=0;n<i.length;n++){var s=i[n],o=s[0],a=s[1];o===t&&(r=a)}null===r&&(r=t(e),i.push([t,r]));return r}(n,a);u.setSource(k({},t),function(i,a){if(i)return e(t,l,r,n,s,o);s.push(u),e(a,t.type===a.type?l:_r[a.type],r,n,s,o)})}else l.length?e(t,l,r,n,s,o):o?r(t,s):e(t,_r["*"],r,n,s,!0)}(t,_r[t.type],i,e)},1)}function Cr(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n="call"+We(i),s=e.reduce(xr(n),r),o=s===Sr,a=o?null:t[i](s);return function(e,t,i,r){for(var n=e.length-1;n>=0;n--){var s=e[n];s[t]&&s[t](r,i)}}(e,i,a,o),a}var kr={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Er={setCurrentTime:1},jr={play:1,pause:1};function xr(e){return function(t,i){return t===Sr?Sr:i[e]?i[e](t):t}}var Ar={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},Pr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Zt(e);return Ar[t.toLowerCase()]||""};function Or(e){var t=Pr(e.src);return!e.type&&t&&(e.type=t),e}var Ir=function(e){function t(i,r,n){v(this,t);var s=Qe({createEl:!1},r),o=_(this,e.call(this,i,s,n));if(r.playerOptions.sources&&0!==r.playerOptions.sources.length)i.src(r.playerOptions.sources);else for(var a=0,l=r.playerOptions.techOrder;a<l.length;a++){var u=We(l[a]),c=br.getTech(u);if(u||(c=Ge.getComponent(u)),c&&c.isSupported()){i.loadTech_(u);break}}return o}return b(t,e),t}(Ge);Ge.registerComponent("MediaLoader",Ir);var Lr=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.emitTapEvents(),n.enable(),n}return b(t,e),t.prototype.createEl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i=k({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),"button"===t&&f.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),r=k({role:"button"},r),this.tabIndex_=i.tabIndex;var n=e.prototype.createEl.call(this,t,i,r);return this.createControlTextEl(n),n},t.prototype.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=R("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var i=this.localize(e);this.controlText_=e,B(this.controlTextEl_,i),this.nonIconControl||t.setAttribute("title",i)},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},t.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},t.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},t.prototype.handleClick=function(e){},t.prototype.handleFocus=function(e){_e(u,"keydown",Oe(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.trigger("click")):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(e){Te(u,"keydown",Oe(this,this.handleKeyPress))},t}(Ge);Ge.registerComponent("ClickableComponent",Lr);var Dr=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.update(),i.on("posterchange",Oe(n,n.update)),n}return b(t,e),t.prototype.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},t.prototype.createEl=function(){return R("div",{className:"vjs-poster",tabIndex:-1})},t.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.prototype.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},t.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},t}(Lr);Ge.registerComponent("PosterImage",Dr);var Mr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Rr(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}function Br(e,t,i){try{e.style[t]=i}catch(e){}}var Nr=function(e){function t(i,r,n){v(this,t);var s=_(this,e.call(this,i,r,n));return i.on("loadstart",Oe(s,s.toggleDisplay)),i.on("texttrackchange",Oe(s,s.updateDisplay)),i.on("loadstart",Oe(s,s.preselectTrack)),i.ready(Oe(s,function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",Oe(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),s}return b(t,e),t.prototype.preselectTrack=function(){for(var e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage,r=void 0,n=void 0,s=void 0,o=0;o<t.length;o++){var a=t[o];i&&i.enabled&&i.language===a.language?a.kind===i.kind?s=a:s||(s=a):i&&!i.enabled?(s=null,r=null,n=null):a.default&&("descriptions"!==a.kind||r?a.kind in e&&!n&&(n=a):r=a)}s?s.mode="showing":n?n.mode="showing":r&&(r.mode="showing")},t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof n.WebVTT&&n.WebVTT.processCues(n,[],this.el_)},t.prototype.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var t=null,i=null,r=e.length;r--;){var n=e[r];"showing"===n.mode&&("descriptions"===n.kind?t=n:i=n)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},t.prototype.updateForTrack=function(e){if("function"==typeof n.WebVTT&&e.activeCues){for(var t=[],i=0;i<e.activeCues.length;i++)t.push(e.activeCues[i]);if(n.WebVTT.processCues(n,t,this.el_),this.player_.textTrackSettings)for(var r=this.player_.textTrackSettings.getValues(),s=t.length;s--;){var o=t[s];if(o){var a=o.displayState;if(r.color&&(a.firstChild.style.color=r.color),r.textOpacity&&Br(a.firstChild,"color",Rr(r.color||"#fff",r.textOpacity)),r.backgroundColor&&(a.firstChild.style.backgroundColor=r.backgroundColor),r.backgroundOpacity&&Br(a.firstChild,"backgroundColor",Rr(r.backgroundColor||"#000",r.backgroundOpacity)),r.windowColor&&(r.windowOpacity?Br(a,"backgroundColor",Rr(r.windowColor,r.windowOpacity)):a.style.backgroundColor=r.windowColor),r.edgeStyle&&("dropshadow"===r.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===r.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===r.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===r.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),r.fontPercent&&1!==r.fontPercent){var l=n.parseFloat(a.style.fontSize);a.style.fontSize=l*r.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}r.fontFamily&&"default"!==r.fontFamily&&("small-caps"===r.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Mr[r.fontFamily])}}}},t}(Ge);Ge.registerComponent("TextTrackDisplay",Nr);var Ur=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),i=this.localize(t?"Audio Player":"Video Player"),r=R("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])}),n=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(r),n},t}(Ge);Ge.registerComponent("LoadingSpinner",Ur);var $r=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e="button",t=k({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),i=k({type:"button"},i);var r=Ge.prototype.createEl.call(this,"button",t,i);return this.createControlTextEl(r),r},t.prototype.addChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.constructor.name;return f.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),Ge.prototype.addChild.call(this,e,t)},t.prototype.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.prototype.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(Lr);Ge.registerComponent("Button",$r);var Fr=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(e){var t=this.player_.play();if(!(this.mouseused_&&e.clientX&&e.clientY)){var i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(r){var n=function(){return r.focus()};At(t)?t.then(n,function(){}):this.setTimeout(n,1)}else this.player_.focus()}},t.prototype.handleKeyPress=function(t){this.mouseused_=!1,e.prototype.handleKeyPress.call(this,t)},t.prototype.handleMouseDown=function(e){this.mouseused_=!0},t}($r);Fr.prototype.controlText_="Play Video",Ge.registerComponent("BigPlayButton",Fr);var zr=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.controlText(r&&r.controlText||n.localize("Close")),n}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t}($r);Ge.registerComponent("CloseButton",zr);var Hr=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.on(i,"play",n.handlePlay),n.on(i,"pause",n.handlePause),n.on(i,"ended",n.handleEnded),n}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.prototype.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.prototype.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}($r);Hr.prototype.controlText_="Play",Ge.registerComponent("PlayToggle",Hr);var qr=function(e,t){e=e<0?0:e;var i=Math.floor(e%60),r=Math.floor(e/60%60),n=Math.floor(e/3600),s=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(n=r=i="-"),(n=n>0||o>0?n+":":"")+(r=((n||s>=10)&&r<10?"0"+r:r)+":")+(i=i<10?"0"+i:i)},Vr=qr;function Wr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return Vr(e,t)}var Qr=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.throttledUpdateContent=Ie(Oe(n,n.updateContent),25),n.on(i,"timeupdate",n.throttledUpdateContent),n}return b(t,e),t.prototype.createEl=function(t){var i=this.buildCSSClass(),r=e.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=R("span",{className:i+"-display"},{"aria-live":"off"}),this.updateTextNode_(),r.appendChild(this.contentEl_),r},t.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},t.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=u.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},t.prototype.formatTime_=function(e){return Wr(e)},t.prototype.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},t.prototype.updateContent=function(e){},t}(Ge);Qr.prototype.labelText_="Time",Qr.prototype.controlText_="Time",Ge.registerComponent("TimeDisplay",Qr);var Gr=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.on(i,"ended",n.handleEnded),n}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-current-time"},t.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},t.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(Qr);Gr.prototype.labelText_="Current Time",Gr.prototype.controlText_="Current Time",Ge.registerComponent("CurrentTimeDisplay",Gr);var Yr=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.on(i,"durationchange",n.updateContent),n.on(i,"loadedmetadata",n.throttledUpdateContent),n}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-duration"},t.prototype.updateContent=function(e){var t=this.player_.duration();t&&this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},t}(Qr);Yr.prototype.labelText_="Duration",Yr.prototype.controlText_="Duration",Ge.registerComponent("DurationDisplay",Yr);var Xr=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(Ge);Ge.registerComponent("TimeDivider",Xr);var Kr=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.on(i,"durationchange",n.throttledUpdateContent),n.on(i,"ended",n.handleEnded),n}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-remaining-time"},t.prototype.formatTime_=function(t){return"-"+e.prototype.formatTime_.call(this,t)},t.prototype.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},t.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},t}(Qr);Kr.prototype.labelText_="Remaining Time",Kr.prototype.controlText_="Remaining Time",Ge.registerComponent("RemainingTimeDisplay",Kr);var Zr=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}return b(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=R("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},t.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Ge);Ge.registerComponent("LiveDisplay",Zr);var Jr=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}return b(t,e),t.prototype.enabled=function(){return this.enabled_},t.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.prototype.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.prototype.createEl=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.className=i.className+" vjs-slider",i=k({tabIndex:0},i),r=k({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,i,r)},t.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),G(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(e){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Y(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var i=(100*e).toFixed(2)+"%",r=t.el().style;return this.vertical()?r.height=i:r.width=i,e}}},t.prototype.calculateDistance=function(e){var t=Z(this.el_,e);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.prototype.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Ge);Ge.registerComponent("Slider",Jr);var en=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.partEls_=[],n.on(i,"progress",n.update),n}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.prototype.dispose=function(){this.partEls_=null,e.prototype.dispose.call(this)},t.prototype.update=function(e){var t=this.player_.buffered(),i=this.player_.duration(),r=this.player_.bufferedEnd(),n=this.partEls_,s=function(e,t){var i=e/t||0;return 100*(i>=1?1:i)+"%"};this.el_.style.width=s(r,i);for(var o=0;o<t.length;o++){var a=t.start(o),l=t.end(o),u=n[o];u||(u=this.el_.appendChild(R()),n[o]=u),u.style.left=s(a,r),u.style.width=s(l-a,r)}for(var c=n.length;c>t.length;c--)this.el_.removeChild(n[c-1]);n.length=t.length},t}(Ge);Ge.registerComponent("LoadProgressBar",en);var tn=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},t.prototype.update=function(e,t,i){var r=X(this.el_),n=X(this.player_.el()),s=e.width*t;if(n&&r){var o=e.left-n.left+s,a=e.width-s+(n.right-e.right),l=r.width/2;o<l?l+=l-o:a<l&&(l=a),l<0?l=0:l>r.width&&(l=r.width),this.el_.style.right="-"+l+"px",B(this.el_,i)}},t}(Ge);Ge.registerComponent("TimeTooltip",tn);var rn=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.update=function(e,t){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var r=Wr(i.player_.scrubbing()?i.player_.getCache().currentTime:i.player_.currentTime(),i.player_.duration()),n=i.getChild("timeTooltip");n&&n.update(e,t,r)})},t}(Ge);rn.prototype.options_={children:[]},it||nt||rn.prototype.options_.children.push("timeTooltip"),Ge.registerComponent("PlayProgressBar",rn);var nn=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.update=Ie(Oe(n,n.update),25),n}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.update=function(e,t){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var r=i.player_.duration(),n=Wr(t*r,r);i.el_.style.left=e.width*t+"px",i.getChild("timeTooltip").update(e,t,n)})},t}(Ge);nn.prototype.options_={children:["timeTooltip"]},Ge.registerComponent("MouseTimeDisplay",nn);var sn=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.setEventHandlers_(),n}return b(t,e),t.prototype.setEventHandlers_=function(){var e=this;this.update=Ie(Oe(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(){e.clearInterval(e.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.prototype.update_=function(e,t){var i=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Wr(e,i),Wr(i,i)],"{1} of {2}")),this.bar.update(X(this.el_),t)},t.prototype.update=function(t){var i=e.prototype.update.call(this);return this.update_(this.getCurrentTime_(),i),i},t.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.prototype.handleEnded=function(e){this.update_(this.player_.duration(),1)},t.prototype.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return e>=1?1:e||0},t.prototype.handleMouseDown=function(t){ne(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},t.prototype.handleMouseMove=function(e){if(ne(e)){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)}},t.prototype.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},t.prototype.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Pt(this.player_.play())},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleAction(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t}(Jr);sn.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},it||nt||sn.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),sn.prototype.playerEvent="timeupdate",Ge.registerComponent("SeekBar",sn);var on=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.handleMouseMove=Ie(Oe(n,n.handleMouseMove),25),n.throttledHandleMouseSeek=Ie(Oe(n,n.handleMouseSeek),25),n.enable(),n}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.prototype.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var i=t.getChild("mouseTimeDisplay"),r=t.el(),n=X(r),s=Z(r,e).x;s>1?s=1:s<0&&(s=0),i&&i.update(n,s)}},t.prototype.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},t.prototype.enabled=function(){return this.enabled_},t.prototype.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},t.prototype.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(Ge);on.prototype.options_={children:["seekBar"]},Ge.registerComponent("ProgressControl",on);var an=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.on(i,"fullscreenchange",n.handleFullscreenChange),n}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}($r);an.prototype.controlText_="Fullscreen",Ge.registerComponent("FullscreenToggle",an);var ln=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},un=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(Ge);Ge.registerComponent("VolumeLevel",un);var cn=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.on("slideractive",n.updateLastVolume_),n.on(i,"volumechange",n.updateARIAAttributes),i.ready(function(){return n.updateARIAAttributes()}),n}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.prototype.handleMouseDown=function(t){ne(t)&&e.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(e){ne(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.prototype.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},t}(Jr);cn.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},cn.prototype.playerEvent="volumechange",Ge.registerComponent("VolumeBar",cn);var dn=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t),r.vertical=r.vertical||!1,(void 0===r.volumeBar||j(r.volumeBar))&&(r.volumeBar=r.volumeBar||{},r.volumeBar.vertical=r.vertical);var n=_(this,e.call(this,i,r));return ln(n,i),n.throttledHandleMouseMove=Ie(Oe(n,n.handleMouseMove),25),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}return b(t,e),t.prototype.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},t.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t.prototype.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Ge);dn.prototype.options_={children:["volumeBar"]},Ge.registerComponent("VolumeControl",dn);var hn=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return ln(n,i),n.on(i,["loadstart","volumechange"],n.update),n}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){var t=this.player_.volume(),i=this.player_.lastVolume_();if(0===t){var r=i<.1?.1:i;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.prototype.update=function(e){this.updateIcon_(),this.updateControlText_()},t.prototype.updateIcon_=function(){var e=this.player_.volume(),t=3;0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var i=0;i<4;i++)F(this.el_,"vjs-vol-"+i);$(this.el_,"vjs-vol-"+t)},t.prototype.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}($r);hn.prototype.controlText_="Mute",Ge.registerComponent("MuteToggle",hn);var pn=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t),void 0!==r.inline?r.inline=r.inline:r.inline=!0,(void 0===r.volumeControl||j(r.volumeControl))&&(r.volumeControl=r.volumeControl||{},r.volumeControl.vertical=!r.inline);var n=_(this,e.call(this,i,r));return ln(n,i),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}return b(t,e),t.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},t.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.prototype.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},t}(Ge);pn.prototype.options_={children:["muteToggle","volumeControl"]},Ge.registerComponent("VolumePanel",pn);var fn=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return r&&(n.menuButton_=r.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyPress),n}return b(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",Oe(this,function(t){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=R(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var i=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return i.appendChild(this.contentEl_),_e(i,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),i},t.prototype.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.prototype.focus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(Ge);Ge.registerComponent("Menu",fn);var mn=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t);var n=_(this,e.call(this,i,r));n.menuButton_=new $r(i,r),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var s=$r.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+s,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"focus",n.handleFocus),n.on(n.menuButton_,"blur",n.handleBlur),n.on("keydown",n.handleSubmenuKeyPress),n}return b(t,e),t.prototype.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.prototype.createMenu=function(){var e=new fn(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=R("li",{className:"vjs-menu-title",innerHTML:We(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),N(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.prototype.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+$r.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(e,t)},t.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",Oe(this,function(e){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.focus=function(){this.menuButton_.focus()},t.prototype.blur=function(){this.menuButton_.blur()},t.prototype.handleFocus=function(){_e(u,"keydown",Oe(this,this.handleKeyPress))},t.prototype.handleBlur=function(){Te(u,"keydown",Oe(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},t.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},t.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),it&&D())return;this.menu.focus()}},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Ge);Ge.registerComponent("MenuButton",mn);var gn=function(e){function t(i,r){v(this,t);var n=r.tracks,s=_(this,e.call(this,i,r));if(s.items.length<=1&&s.hide(),!n)return _(s);var o=Oe(s,s.update);return n.addEventListener("removetrack",o),n.addEventListener("addtrack",o),s.player_.on("ready",o),s.player_.on("dispose",function(){n.removeEventListener("removetrack",o),n.removeEventListener("addtrack",o)}),s}return b(t,e),t}(mn);Ge.registerComponent("TrackButton",gn);var yn=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.selectable=r.selectable,n.isSelected_=r.selected||!1,n.selected(n.isSelected_),n.selectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitem"),n}return b(t,e),t.prototype.createEl=function(t,i,r){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",k({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),r)},t.prototype.handleClick=function(e){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Lr);Ge.registerComponent("MenuItem",yn);var vn=function(e){function t(i,r){v(this,t);var s=r.track,o=i.textTracks();r.label=s.label||s.language||"Unknown",r.selected="showing"===s.mode;var a=_(this,e.call(this,i,r));a.track=s;var l=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];a.handleTracksChange.apply(a,t)},c=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];a.handleSelectedLanguageChange.apply(a,t)};if(i.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",c),a.on("dispose",function(){i.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",c)}),void 0===o.onchange){var d=void 0;a.on(["tap","click"],function(){if("object"!==y(n.Event))try{d=new n.Event("change")}catch(e){}d||(d=u.createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(d)})}return a.handleTracksChange(),a}return b(t,e),t.prototype.handleClick=function(t){var i=this.track.kind,r=this.track.kinds,n=this.player_.textTracks();if(r||(r=[i]),e.prototype.handleClick.call(this,t),n)for(var s=0;s<n.length;s++){var o=n[s];o===this.track&&r.indexOf(o.kind)>-1?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled")}},t.prototype.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},t.prototype.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.prototype.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(yn);Ge.registerComponent("TextTrackMenuItem",vn);var bn=function(e){function t(i,r){return v(this,t),r.track={player:i,kind:r.kind,kinds:r.kinds,default:!1,mode:"disabled"},r.kinds||(r.kinds=[r.kind]),r.label?r.track.label=r.label:r.track.label=r.kinds.join(" and ")+" off",r.selectable=!0,_(this,e.call(this,i,r))}return b(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!0,r=0,n=t.length;r<n;r++){var s=t[r];if(this.options_.kinds.indexOf(s.kind)>-1&&"showing"===s.mode){i=!1;break}}i!==this.isSelected_&&this.selected(i)},t.prototype.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),i=!0,r=0,n=t.length;r<n;r++){var s=t[r];if(["captions","descriptions","subtitles"].indexOf(s.kind)>-1&&"showing"===s.mode){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(vn);Ge.registerComponent("OffTextTrackMenuItem",bn);var _n=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(this,t),r.tracks=i.textTracks(),_(this,e.call(this,i,r))}return b(t,e),t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn,i=void 0;this.label_&&(i=this.label_+" off"),e.push(new bn(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var n=0;n<r.length;n++){var s=r[n];if(this.kinds_.indexOf(s.kind)>-1){var o=new t(this.player_,{track:s,selectable:!0});o.addClass("vjs-"+s.kind+"-menu-item"),e.push(o)}}return e},t}(gn);Ge.registerComponent("TextTrackButton",_n);var Tn=function(e){function t(i,r){v(this,t);var n=r.track,s=r.cue,o=i.currentTime();r.selectable=!0,r.label=s.text,r.selected=s.startTime<=o&&o<s.endTime;var a=_(this,e.call(this,i,r));return a.track=n,a.cue=s,n.addEventListener("cuechange",Oe(a,a.update)),a}return b(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(e){var t=this.cue,i=this.player_.currentTime();this.selected(t.startTime<=i&&i<t.endTime)},t}(yn);Ge.registerComponent("ChaptersTrackMenuItem",Tn);var Sn=function(e){function t(i,r,n){return v(this,t),_(this,e.call(this,i,r,n))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},t.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_)}}},t.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var i=e[t];if(i.kind===this.kind_)return i}},t.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(We(this.kind_))},t.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},t.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var i=0,r=t.length;i<r;i++){var n=t[i],s=new Tn(this.player_,{track:this.track_,cue:n});e.push(s)}return e},t}(_n);Sn.prototype.kind_="chapters",Sn.prototype.controlText_="Chapters",Ge.registerComponent("ChaptersButton",Sn);var wn=function(e){function t(i,r,n){v(this,t);var s=_(this,e.call(this,i,r,n)),o=i.textTracks(),a=Oe(s,s.handleTracksChange);return o.addEventListener("change",a),s.on("dispose",function(){o.removeEventListener("change",a)}),s}return b(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),i=!1,r=0,n=t.length;r<n;r++){var s=t[r];if(s.kind!==this.kind_&&"showing"===s.mode){i=!0;break}}i?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(_n);wn.prototype.kind_="descriptions",wn.prototype.controlText_="Descriptions",Ge.registerComponent("DescriptionsButton",wn);var Cn=function(e){function t(i,r,n){return v(this,t),_(this,e.call(this,i,r,n))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(_n);Cn.prototype.kind_="subtitles",Cn.prototype.controlText_="Subtitles",Ge.registerComponent("SubtitlesButton",Cn);var kn=function(e){function t(i,r){v(this,t),r.track={player:i,kind:r.kind,label:r.kind+" settings",selectable:!1,default:!1,mode:"disabled"},r.selectable=!1,r.name="CaptionSettingsMenuItem";var n=_(this,e.call(this,i,r));return n.addClass("vjs-texttrack-settings"),n.controlText(", opens "+r.kind+" settings dialog"),n}return b(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(vn);Ge.registerComponent("CaptionSettingsMenuItem",kn);var En=function(e){function t(i,r,n){return v(this,t),_(this,e.call(this,i,r,n))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new kn(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(_n);En.prototype.kind_="captions",En.prototype.controlText_="Captions",Ge.registerComponent("CaptionsButton",En);var jn=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(t,i,r){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),n+="</span>",e.prototype.createEl.call(this,t,k({innerHTML:n},i),r)},t}(vn);Ge.registerComponent("SubsCapsMenuItem",jn);var xn=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t);var n=_(this,e.call(this,i,r));return n.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(We(n.label_)),n}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new kn(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,jn)},t}(_n);xn.prototype.kinds_=["captions","subtitles"],xn.prototype.controlText_="Subtitles",Ge.registerComponent("SubsCapsButton",xn);var An=function(e){function t(i,r){v(this,t);var n=r.track,s=i.audioTracks();r.label=n.label||n.language||"Unknown",r.selected=n.enabled;var o=_(this,e.call(this,i,r));o.track=n;var a=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];o.handleTracksChange.apply(o,t)};return s.addEventListener("change",a),o.on("dispose",function(){s.removeEventListener("change",a)}),o}return b(t,e),t.prototype.handleClick=function(t){var i=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var r=0;r<i.length;r++){var n=i[r];n.enabled=n===this.track}},t.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(yn);Ge.registerComponent("AudioTrackMenuItem",An);var Pn=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(this,t),r.tracks=i.audioTracks(),_(this,e.call(this,i,r))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var t=this.player_.audioTracks(),i=0;i<t.length;i++){var r=t[i];e.push(new An(this.player_,{track:r,selectable:!0}))}return e},t}(gn);Pn.prototype.controlText_="Audio Track",Ge.registerComponent("AudioTrackButton",Pn);var On=function(e){function t(i,r){v(this,t);var n=r.rate,s=parseFloat(n,10);r.label=n,r.selected=1===s,r.selectable=!0;var o=_(this,e.call(this,i,r));return o.label=n,o.rate=s,o.on(i,"ratechange",o.update),o}return b(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(yn);On.prototype.contentElType="button",Ge.registerComponent("PlaybackRateMenuItem",On);var In=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.updateVisibility(),n.updateLabel(),n.on(i,"loadstart",n.updateVisibility),n.on(i,"ratechange",n.updateLabel),n}return b(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=R("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},t.prototype.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},t.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},t.prototype.createMenu=function(){var e=new fn(this.player()),t=this.playbackRates();if(t)for(var i=t.length-1;i>=0;i--)e.addChild(new On(this.player(),{rate:t[i]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),i=this.playbackRates(),r=i[0],n=0;n<i.length;n++)if(i[n]>t){r=i[n];break}this.player().playbackRate(r)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(mn);In.prototype.controlText_="Playback Rate",Ge.registerComponent("PlaybackRateMenuButton",In);var Ln=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(Ge);Ge.registerComponent("Spacer",Ln);var Dn=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(Ln);Ge.registerComponent("CustomControlSpacer",Dn);var Mn=function(e){function t(){return v(this,t),_(this,e.apply(this,arguments))}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Ge);Mn.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Ge.registerComponent("ControlBar",Mn);var Rn=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r));return n.on(i,"error",n.open),n}return b(t,e),t.prototype.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Mt);Rn.prototype.options_=Qe(Mt.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Ge.registerComponent("ErrorDisplay",Rn);var Bn=["#000","Black"],Nn=["#00F","Blue"],Un=["#0FF","Cyan"],$n=["#0F0","Green"],Fn=["#F0F","Magenta"],zn=["#F00","Red"],Hn=["#FFF","White"],qn=["#FF0","Yellow"],Vn=["1","Opaque"],Wn=["0.5","Semi-Transparent"],Qn=["0","Transparent"],Gn={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Bn,Hn,zn,$n,Nn,qn,Fn,Un]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Vn,Wn,Qn]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Hn,Bn,zn,$n,Nn,qn,Fn,Un]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Vn,Wn]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Qn,Wn,Vn]}};function Yn(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}Gn.windowColor.options=Gn.backgroundColor.options;var Xn=function(e){function t(i,r){v(this,t),r.temporary=!1;var n=_(this,e.call(this,i,r));return n.updateDisplay=Oe(n,n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=R("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===r.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),C(Gn,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}return b(t,e),t.prototype.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},t.prototype.createElSelect_=function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",n=Gn[e],s=n.id.replace("%s",this.id_),o=[i,s].join(" ").trim();return["<"+r+' id="'+s+'" class="'+("label"===r?"vjs-label":"")+'">',this.localize(n.label),"</"+r+">",'<select aria-labelledby="'+o+'">'].concat(n.options.map(function(e){var i=s+"-"+e[1].replace(/\W+/g,"");return['<option id="'+i+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+i+'">',t.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},t.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElColors_=function(){return R("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.prototype.createElFont_=function(){return R("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return R("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.prototype.label=function(){return this.localize("Caption Settings Dialog")},t.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.prototype.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.prototype.getValues=function(){var e=this;return function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return w(e).reduce(function(i,r){return t(i,e[r],r)},i)}(Gn,function(t,i,r){var n,s,o=(n=e.$(i.selector),s=i.parser,Yn(n.options[n.options.selectedIndex].value,s));return void 0!==o&&(t[r]=o),t},{})},t.prototype.setValues=function(e){var t=this;C(Gn,function(i,r){!function(e,t,i){if(t)for(var r=0;r<e.options.length;r++)if(Yn(e.options[r].value,i)===t){e.selectedIndex=r;break}}(t.$(i.selector),e[r],i.parser)})},t.prototype.setDefaults=function(){var e=this;C(Gn,function(t){var i=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=i})},t.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(n.localStorage.getItem("vjs-text-track-settings"))}catch(e){f.warn(e)}e&&this.setValues(e)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?n.localStorage.setItem("vjs-text-track-settings",JSON.stringify(e)):n.localStorage.removeItem("vjs-text-track-settings")}catch(e){f.warn(e)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(u,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()},t}(Mt);Ge.registerComponent("TextTrackSettings",Xn);var Kn=function(e){function t(i,r){v(this,t);var s=r.ResizeObserver||n.ResizeObserver;null===r.ResizeObserver&&(s=!1);var o=Qe({createEl:!s},r),a=_(this,e.call(this,i,o));return a.ResizeObserver=r.ResizeObserver||n.ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=Le(function(){a.resizeHandler()},100,!1,i),s?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(i.el())):(a.loadListener_=function(){a.el_.contentWindow&&_e(a.el_.contentWindow,"resize",a.debouncedHandler_),a.off("load",a.loadListener_)},a.on("load",a.loadListener_)),a}return b(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},t.prototype.resizeHandler=function(){this.player_.trigger("playerresize")},t.prototype.dispose=function(){this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&Te(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},t}(Ge);Ge.registerComponent("ResizeManager",Kn);var Zn=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),r=[],n="";if(!i.length)return!1;for(var s=0;s<i.length;s++){var o=i[s].src;o&&-1===r.indexOf(o)&&r.push(o)}return!!r.length&&(1===r.length&&(n=r[0]),e.triggerSourceset(n),!0)},Jn=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=u.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var i=u.createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",n.Element.prototype.appendChild.call(this,i),this.innerHTML}}),es=function(e,t){for(var i={},r=0;r<e.length&&!((i=Object.getOwnPropertyDescriptor(e[r],t))&&i.set&&i.get);r++);return i.enumerable=!0,i.configurable=!0,i},ts=function(e){var t=e.el();if(!t.resetSourceWatch_){var i={},r=function(e){return es([e.el(),n.HTMLMediaElement.prototype,n.Element.prototype,Jn],"innerHTML")}(e),s=function(i){return function(){for(var r=arguments.length,n=Array(r),s=0;s<r;s++)n[s]=arguments[s];var o=i.apply(t,n);return Zn(e),o}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){t[e]&&(i[e]=t[e],t[e]=s(i[e]))}),Object.defineProperty(t,"innerHTML",Qe(r,{set:s(r.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(i).forEach(function(e){t[e]=i[e]}),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)}},is=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Kt(n.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return n.Element.prototype.setAttribute.call(this,"src",e),e}}),rs=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var i=function(e){return es([e.el(),n.HTMLMediaElement.prototype,is],"src")}(e),r=t.setAttribute,s=t.load;Object.defineProperty(t,"src",Qe(i,{set:function(r){var n=i.set.call(t,r);return e.triggerSourceset(t.src),n}})),t.setAttribute=function(i,n){var s=r.call(t,i,n);return/src/i.test(i)&&e.triggerSourceset(t.src),s},t.load=function(){var i=s.call(t);return Zn(e)||(e.triggerSourceset(""),ts(e)),i},t.currentSrc?e.triggerSourceset(t.currentSrc):Zn(e)||ts(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=s,t.setAttribute=r,Object.defineProperty(t,"src",i),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},ns=T(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),ss=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,i,r)),s=i.source,o=!1;if(s&&(n.el_.currentSrc!==s.src||i.tag&&3===i.tag.initNetworkState_)?n.setSource(s):n.handleLateInit_(n.el_),i.enableSourceset&&n.setupSourcesetHandling_(),n.el_.hasChildNodes()){for(var a=n.el_.childNodes,l=a.length,u=[];l--;){var c=a[l];"track"===c.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(c),n.remoteTextTracks().addTrack(c.track),n.textTracks().addTrack(c.track),o||n.el_.hasAttribute("crossorigin")||!Jt(c.src)||(o=!0)):u.push(c))}for(var d=0;d<u.length;d++)n.el_.removeChild(u[d])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&o&&f.warn(g(ns)),n.restoreMetadataTracksInIOSNativePlayer_(),(ft||et||ot)&&!0===i.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}return b(t,e),t.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},t.prototype.setupSourcesetHandling_=function(){rs(this)},t.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),t=void 0,i=function(){t=[];for(var i=0;i<e.length;i++){var r=e[i];"metadata"===r.kind&&t.push({track:r,storedMode:r.mode})}};i(),e.addEventListener("change",i),this.on("dispose",function(){return e.removeEventListener("change",i)});var r=function i(){for(var r=0;r<t.length;r++){var n=t[r];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",i),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",r)})},t.prototype.overrideNative_=function(e,t){var i=this;if(t===this["featuresNative"+e+"Tracks"]){var r=e.toLowerCase();this[r+"TracksListeners_"]&&Object.keys(this[r+"TracksListeners_"]).forEach(function(e){i.el()[r+"Tracks"].removeEventListener(e,i[r+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[r+"TracksListeners_"]=null,this.proxyNativeTracksForType_(r)}},t.prototype.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},t.prototype.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},t.prototype.proxyNativeTracksForType_=function(e){var t=this,i=Di[e],r=this.el()[i.getterName],n=this[i.getterName]();if(this["featuresNative"+i.capitalName+"Tracks"]&&r&&r.addEventListener){var s={change:function(e){n.trigger({type:"change",target:n,currentTarget:n,srcElement:n})},addtrack:function(e){n.addTrack(e.track)},removetrack:function(e){n.removeTrack(e.track)}},o=function(){for(var e=[],t=0;t<n.length;t++){for(var i=!1,s=0;s<r.length;s++)if(r[s]===n[t]){i=!0;break}i||e.push(n[t])}for(;e.length;)n.removeTrack(e.shift())};this[i.getterName+"Listeners_"]=s,Object.keys(s).forEach(function(e){var i=s[e];r.addEventListener(e,i),t.on("dispose",function(t){return r.removeEventListener(e,i)})}),this.on("loadstart",o),this.on("dispose",function(e){return t.off("loadstart",o)})}},t.prototype.proxyNativeTracks_=function(){var e=this;Di.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},t.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),t.disposeMediaElement(e),e=i}else{e=u.createElement("video");var r=Qe({},this.options_.tag&&q(this.options_.tag));ft&&!0===this.options_.nativeControlsForTouch||delete r.controls,H(e,k(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&W(e,"preload",this.options_.preload);for(var n=["loop","muted","playsinline","autoplay"],s=0;s<n.length;s++){var o=n[s],a=this.options_[o];void 0!==a&&(a?W(e,o,o):Q(e,o),e[o]=a)}return e},t.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,i=function(){t=!0};this.on("loadstart",i);var r=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",r),t||this.trigger("loadstart")})}var n=["loadstart"];n.push("loadedmetadata"),e.readyState>=2&&n.push("loadeddata"),e.readyState>=3&&n.push("canplay"),e.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(e){this.trigger(e)},this)})}},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){f(e,"Video is not ready. (Video.js)")}},t.prototype.duration=function(){var e=this;if(this.el_.duration===1/0&&nt&&ut&&0===this.el_.currentTime){return this.on("timeupdate",function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN}return this.el_.duration||NaN},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},i=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",i),this.on("dispose",function(){e.off("webkitbeginfullscreen",i),e.off("webkitendfullscreen",t)})}},t.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=n.navigator&&n.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},t.prototype.reset=function(){t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.addTextTrack=function(t,i,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,i,r):e.prototype.addTextTrack.call(this,t,i,r)},t.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var i=u.createElement("track");return t.kind&&(i.kind=t.kind),t.label&&(i.label=t.label),(t.language||t.srclang)&&(i.srclang=t.language||t.srclang),t.default&&(i.default=t.default),t.id&&(i.id=t.id),t.src&&(i.src=t.src),i},t.prototype.addRemoteTextTrack=function(t,i){var r=e.prototype.addRemoteTextTrack.call(this,t,i);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},t.prototype.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var i=this.$$("track"),r=i.length;r--;)t!==i[r]&&t!==i[r].track||this.el().removeChild(i[r])},t.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),n.performance&&"function"==typeof n.performance.now?e.creationTime=n.performance.now():n.performance&&n.performance.timing&&"number"==typeof n.performance.timing.navigationStart&&(e.creationTime=n.Date.now()-n.performance.timing.navigationStart),e},t}(br);if(I()){ss.TEST_VID=u.createElement("video");var os=u.createElement("track");os.kind="captions",os.srclang="en",os.label="English",ss.TEST_VID.appendChild(os)}ss.isSupported=function(){try{ss.TEST_VID.volume=.5}catch(e){return!1}return!(!ss.TEST_VID||!ss.TEST_VID.canPlayType)},ss.canPlayType=function(e){return ss.TEST_VID.canPlayType(e)},ss.canPlaySource=function(e,t){return ss.canPlayType(e.type)},ss.canControlVolume=function(){try{var e=ss.TEST_VID.volume;return ss.TEST_VID.volume=e/2+.1,e!==ss.TEST_VID.volume}catch(e){return!1}},ss.canControlPlaybackRate=function(){if(nt&&ut&&ct<58)return!1;try{var e=ss.TEST_VID.playbackRate;return ss.TEST_VID.playbackRate=e/2+.1,e!==ss.TEST_VID.playbackRate}catch(e){return!1}},ss.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(u.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(u.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(u.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(u.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},ss.supportsNativeTextTracks=function(){return pt},ss.supportsNativeVideoTracks=function(){return!(!ss.TEST_VID||!ss.TEST_VID.videoTracks)},ss.supportsNativeAudioTracks=function(){return!(!ss.TEST_VID||!ss.TEST_VID.audioTracks)},ss.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],ss.prototype.featuresVolumeControl=ss.canControlVolume(),ss.prototype.featuresPlaybackRate=ss.canControlPlaybackRate(),ss.prototype.featuresSourceset=ss.canOverrideAttributes(),ss.prototype.movingMediaElementInDOM=!it,ss.prototype.featuresFullscreenResize=!0,ss.prototype.featuresProgressEvents=!0,ss.prototype.featuresTimeupdateEvents=!0,ss.prototype.featuresNativeTextTracks=ss.supportsNativeTextTracks(),ss.prototype.featuresNativeVideoTracks=ss.supportsNativeVideoTracks(),ss.prototype.featuresNativeAudioTracks=ss.supportsNativeAudioTracks();var as=ss.TEST_VID&&ss.TEST_VID.constructor.prototype.canPlayType,ls=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;ss.patchCanPlayType=function(){st>=4&&!at&&!ut&&(ss.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&ls.test(e)?"maybe":as.call(this,e)})},ss.unpatchCanPlayType=function(){var e=ss.TEST_VID.constructor.prototype.canPlayType;return ss.TEST_VID.constructor.prototype.canPlayType=as,e},ss.patchCanPlayType(),ss.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},ss.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),i=t.length;i--;)e.removeChild(t[i]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){ss.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){ss.prototype["set"+We(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){ss.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(e){ss.prototype["set"+We(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){ss.prototype[e]=function(){return this.el_[e]()}}),br.withSourceHandlers(ss),ss.nativeSourceHandler={},ss.nativeSourceHandler.canPlayType=function(e){try{return ss.TEST_VID.canPlayType(e)}catch(e){return""}},ss.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return ss.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=Zt(e.src);return ss.nativeSourceHandler.canPlayType("video/"+i)}return""},ss.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},ss.nativeSourceHandler.dispose=function(){},ss.registerSourceHandler(ss.nativeSourceHandler),br.registerTech("Html5",ss);var us=T(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),cs=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],ds={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},hs=function(t){function i(r,n,s){if(v(this,i),r.id=r.id||n.id||"vjs_video_"+ue(),(n=k(i.getTagSettings(r),n)).initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language)if("function"==typeof r.closest){var o=r.closest("[lang]");o&&o.getAttribute&&(n.language=o.getAttribute("lang"))}else for(var a=r;a&&1===a.nodeType;){if(q(a).hasOwnProperty("lang")){n.language=a.getAttribute("lang");break}a=a.parentNode}var l=_(this,t.call(this,null,n,s));if(l.isPosterFromTech_=!1,l.queuedCallbacks_=[],l.isReady_=!1,l.hasStarted_=!1,l.userActive_=!1,!l.options_||!l.options_.techOrder||!l.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(l.tag=r,l.tagAttributes=r&&q(r),l.language(l.options_.language),n.languages){var u={};Object.getOwnPropertyNames(n.languages).forEach(function(e){u[e.toLowerCase()]=n.languages[e]}),l.languages_=u}else l.languages_=i.prototype.options_.languages;l.cache_={},l.poster_=n.poster||"",l.controls_=!!n.controls,l.cache_.lastVolume=1,r.controls=!1,r.removeAttribute("controls"),l.scrubbing_=!1,l.el_=l.createEl(),l.cache_.lastPlaybackRate=l.defaultPlaybackRate(),He(l,{eventBusKey:"el_"});var c=Qe(l.options_);if(n.plugins){var d=n.plugins;Object.keys(d).forEach(function(e){if("function"!=typeof this[e])throw new Error('plugin "'+e+'" does not exist');this[e](d[e])},l)}l.options_.playerOptions=c,l.middleware_=[],l.initChildren(),l.isAudio("audio"===r.nodeName.toLowerCase()),l.controls()?l.addClass("vjs-controls-enabled"):l.addClass("vjs-controls-disabled"),l.el_.setAttribute("role","region"),l.isAudio()?l.el_.setAttribute("aria-label",l.localize("Audio Player")):l.el_.setAttribute("aria-label",l.localize("Video Player")),l.isAudio()&&l.addClass("vjs-audio"),l.flexNotSupported_()&&l.addClass("vjs-no-flex"),it||l.addClass("vjs-workinghover"),i.players[l.id_]=l;var h=e.split(".")[0];return l.addClass("vjs-v"+h),l.userActive(!0),l.reportUserActivity(),l.one("play",l.listenForUserActivity_),l.on("fullscreenchange",l.handleFullscreenChange_),l.on("stageclick",l.handleStageClick_),l.changingSrc_=!1,l.playWaitingForReady_=!1,l.playOnLoadstart_=null,l}return b(i,t),i.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),i.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Tr[this.id()]=null,t.prototype.dispose.call(this)},i.prototype.createEl=function(){var e=this.tag,i=void 0,r=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),s="video-js"===this.tag.tagName.toLowerCase();r?i=this.el_=e.parentNode:s||(i=this.el_=t.prototype.createEl.call(this,"div"));var o=q(e);if(s){for(i=this.el_=e,e=this.tag=u.createElement("video");i.children.length;)e.appendChild(i.firstChild);U(i,"video-js")||$(i,"video-js"),i.appendChild(e),r=this.playerElIngest_=i,Object.keys(i).forEach(function(t){e[t]=i[t]})}if(e.setAttribute("tabindex","-1"),e.removeAttribute("width"),e.removeAttribute("height"),Object.getOwnPropertyNames(o).forEach(function(t){s&&"class"===t||i.setAttribute(t,o[t]),s&&e.setAttribute(t,o[t])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=i.player=this,this.addClass("vjs-paused"),!0!==n.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Ae("vjs-styles-dimensions");var a=se(".vjs-styles-defaults"),l=se("head");l.insertBefore(this.styleEl_,a?a.nextSibling:l.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var c=e.getElementsByTagName("a"),d=0;d<c.length;d++){var h=c.item(d);$(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!r&&e.parentNode.insertBefore(i,e),N(e,i),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_=i,i},i.prototype.width=function(e){return this.dimension("width",e)},i.prototype.height=function(e){return this.dimension("height",e)},i.prototype.dimension=function(e,t){var i=e+"_";if(void 0===t)return this[i]||0;if(""===t)return this[i]=void 0,void this.updateStyleEl_();var r=parseFloat(t);isNaN(r)?f.error('Improper value "'+t+'" supplied for for '+e):(this[i]=r,this.updateStyleEl_())},i.prototype.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},i.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},i.prototype.updateStyleEl_=function(){if(!0!==n.VIDEOJS_NO_DYNAMIC_STYLE){var e=void 0,t=void 0,i=void 0,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),s=r[1]/r[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/s:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*s,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),Pe(this.styleEl_,"\n      ."+i+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*s+"%;\n      }\n    ")}else{var o="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(o>=0&&(l.width=o),a>=0&&(l.height=a))}},i.prototype.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var r=We(e),n=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(br.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var s={source:t,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Ri.names.forEach(function(e){var t=Ri[e];s[t.getterName]=i[t.privateName]}),k(s,this.options_[r]),k(s,this.options_[n]),k(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);var o=br.getTech(e);if(!o)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new o(s),this.tech_.ready(Oe(this,this.handleTechReady_),!0),Lt(this.textTracksJson_||[],this.tech_),cs.forEach(function(e){i.on(i.tech_,e,i["handleTech"+We(e)+"_"])}),Object.keys(ds).forEach(function(e){i.on(i.tech_,e,function(t){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+ds[e]+"_"].bind(i),event:t}):i["handleTech"+ds[e]+"_"](t)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||N(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},i.prototype.unloadTech_=function(){var e=this;Ri.names.forEach(function(t){var i=Ri[t];e[i.privateName]=e[i.getterName]()}),this.textTracksJson_=It(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},i.prototype.tech=function(e){return void 0===e&&f.warn(g(us)),this.tech_},i.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},i.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},i.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused())try{delete this.tag.poster}catch(e){f("deleting tag.poster throws in some browsers",e)}},i.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},i.prototype.updateSourceCaches_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var r=e.$$("source"),n=0;n<r.length;n++){var s=r[n];if(s.type&&s.src&&s.src===t)return s.type}return Pr(t)}(this,t)),this.cache_.source={src:t,type:i};for(var r=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),n=[],s=this.$$("source"),o=[],a=0;a<s.length;a++){var l=q(s[a]);n.push(l),l.src&&l.src===t&&o.push(l.src)}o.length&&!r.length?this.cache_.sources=n:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},i.prototype.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_&&(this.updateSourceCaches_(e.src),!e.src)){this.tech_.one(["sourceset","loadstart"],function e(i){"sourceset"!==i.type&&t.updateSourceCaches_(t.techGet_("currentSrc")),t.tech_.off(["sourceset","loadstart"],e)})}this.trigger({src:e.src,type:"sourceset"})},i.prototype.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},i.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},i.prototype.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},i.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},i.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},i.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},i.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},i.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(f.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},i.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},i.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},i.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},i.prototype.handleTechClick_=function(e){ne(e)&&this.controls_&&(this.paused()?this.play():this.pause())},i.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},i.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},i.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},i.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},i.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},i.prototype.handleStageClick_=function(){this.reportUserActivity()},i.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},i.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},i.prototype.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},i.prototype.getCache=function(){return this.cache_},i.prototype.techCall_=function(e,t){this.ready(function(){if(e in Er)return function(e,t,i,r){return t[i](e.reduce(xr(i),r))}(this.middleware_,this.tech_,e,t);if(e in jr)return Cr(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw f(e),e}},!0)},i.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in kr)return function(e,t,i){return e.reduceRight(xr(i),t[i]())}(this.middleware_,this.tech_,e);if(e in jr)return Cr(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw f("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw f("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw f(t),t}}},i.prototype.play=function(){var e=this;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return this.techGet_("play");this.playOnLoadstart_=function(){e.playOnLoadstart_=null,Pt(e.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){e.playWaitingForReady_=!1,Pt(e.play())})}},i.prototype.pause=function(){this.techCall_("pause")},i.prototype.paused=function(){return!1!==this.techGet_("paused")},i.prototype.played=function(){return this.techGet_("played")||vt(0,0)},i.prototype.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},i.prototype.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},i.prototype.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},i.prototype.remainingTime=function(){return this.duration()-this.currentTime()},i.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},i.prototype.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=vt(0,0)),e},i.prototype.bufferedPercent=function(){return bt(this.buffered(),this.duration())},i.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return i>t&&(i=t),i},i.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},i.prototype.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},i.prototype.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},i.prototype.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},i.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},i.prototype.isFullscreen=function(e){if(void 0===e)return!!this.isFullscreen_;this.isFullscreen_=!!e},i.prototype.requestFullscreen=function(){var e=_t;this.isFullscreen(!0),e.requestFullscreen?(_e(u,e.fullscreenchange,Oe(this,function t(i){this.isFullscreen(u[e.fullscreenElement]),!1===this.isFullscreen()&&Te(u,e.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},i.prototype.exitFullscreen=function(){var e=_t;this.isFullscreen(!1),e.requestFullscreen?u[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},i.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=u.documentElement.style.overflow,_e(u,"keydown",Oe(this,this.fullWindowOnEscKey)),u.documentElement.style.overflow="hidden",$(u.body,"vjs-full-window"),this.trigger("enterFullWindow")},i.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},i.prototype.exitFullWindow=function(){this.isFullWindow=!1,Te(u,"keydown",this.fullWindowOnEscKey),u.documentElement.style.overflow=this.docOrigOverflow,F(u.body,"vjs-full-window"),this.trigger("exitFullWindow")},i.prototype.canPlayType=function(e){for(var t=void 0,i=0,r=this.options_.techOrder;i<r.length;i++){var n=r[i],s=br.getTech(n);if(s||(s=Ge.getComponent(n)),s){if(s.isSupported()&&(t=s.canPlayType(e)))return t}else f.error('The "'+n+'" tech is undefined. Skipped browser support check for that tech.')}return""},i.prototype.selectSource=function(e){var t,i=this,r=this.options_.techOrder.map(function(e){return[e,br.getTech(e)]}).filter(function(e){var t=e[0],i=e[1];return i?i.isSupported():(f.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),n=function(e,t,i){var r=void 0;return e.some(function(e){return t.some(function(t){if(r=i(e,t))return!0})}),r},s=function(e,t){var r=e[0];if(e[1].canPlaySource(t,i.options_[r.toLowerCase()]))return{source:t,tech:r}};return(this.options_.sourceOrder?n(e,r,(t=s,function(e,i){return t(i,e)})):n(r,e,s))||!1},i.prototype.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var i=function e(t){if(Array.isArray(t)){var i=[];t.forEach(function(t){t=e(t),Array.isArray(t)?i=i.concat(t):E(t)&&i.push(t)}),t=i}else t="string"==typeof t&&t.trim()?[Or({src:t})]:E(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Or(t)]:[];return t}(e);i.length?(this.changingSrc_=!0,this.cache_.sources=i,this.updateSourceCaches_(i[0]),wr(this,i[0],function(e,r){var n,s;if(t.middleware_=r,t.cache_.sources=i,t.updateSourceCaches_(e),t.src_(e))return i.length>1?t.src(i.slice(1)):(t.changingSrc_=!1,t.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void t.triggerReady());n=r,s=t.tech_,n.forEach(function(e){return e.setTech&&e.setTech(s)})})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},i.prototype.src_=function(e){var t,i,r=this,n=this.selectSource([e]);return!n||(t=n.tech,i=this.techName_,We(t)!==We(i)?(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(function(){r.changingSrc_=!1}),!1):(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1))},i.prototype.load=function(){this.techCall_("load")},i.prototype.reset=function(){this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},i.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},i.prototype.currentSource=function(){return this.cache_.source||{}},i.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},i.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},i.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},i.prototype.autoplay=function(e){return void 0!==e?(this.techCall_("setAutoplay",e),void(this.options_.autoplay=e)):this.techGet_("autoplay",e)},i.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},i.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},i.prototype.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},i.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},i.prototype.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},i.prototype.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},i.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new Et(e),this.addClass("vjs-error"),f.error("(CODE:"+this.error_.code+" "+Et.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},i.prototype.reportUserActivity=function(e){this.userActivity_=!0},i.prototype.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},i.prototype.listenForUserActivity_=function(){var e=void 0,t=void 0,i=void 0,r=Oe(this,this.reportUserActivity);this.on("mousedown",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)}),this.on("mousemove",function(e){e.screenX===t&&e.screenY===i||(t=e.screenX,i=e.screenY,r())}),this.on("mouseup",function(t){r(),this.clearInterval(e)}),this.on("keydown",r),this.on("keyup",r);var n=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(n);var e=this.options_.inactivityTimeout;e<=0||(n=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},i.prototype.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},i.prototype.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},i.prototype.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},i.prototype.addTextTrack=function(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)},i.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},i.prototype.removeRemoteTextTrack=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).track,t=void 0===e?arguments[0]:e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},i.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},i.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},i.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},i.prototype.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},i.prototype.languages=function(){return Qe(i.prototype.options_.languages,this.languages_)},i.prototype.toJSON=function(){var e=Qe(this.options_),t=e.tracks;e.tracks=[];for(var i=0;i<t.length;i++){var r=t[i];(r=Qe(r)).player=void 0,e.tracks[i]=r}return e},i.prototype.createModal=function(e,t){var i=this;(t=t||{}).content=e||"";var r=new Mt(this,t);return this.addChild(r),r.on("dispose",function(){i.removeChild(r)}),r.open(),r},i.getTagSettings=function(e){var t={sources:[],tracks:[]},i=q(e),r=i["data-setup"];if(U(e,"vjs-fluid")&&(i.fluid=!0),null!==r){var n=xt(r||"{}"),s=n[0],o=n[1];s&&f.error(s),k(i,o)}if(k(t,i),e.hasChildNodes())for(var a=e.childNodes,l=0,u=a.length;l<u;l++){var c=a[l],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(q(c)):"track"===d&&t.tracks.push(q(c))}return t},i.prototype.flexNotSupported_=function(){var e=u.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},i}(Ge);Ri.names.forEach(function(e){var t=Ri[e];hs.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),hs.players={};var ps=n.navigator;hs.prototype.options_={techOrder:br.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:ps&&(ps.languages&&ps.languages[0]||ps.userLanguage||ps.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){hs.prototype[e]=function(){return this.techGet_(e)}}),cs.forEach(function(e){hs.prototype["handleTech"+We(e)+"_"]=function(){return this.trigger(e)}}),Ge.registerComponent("Player",hs);var fs={},ms=function(e){return fs.hasOwnProperty(e)},gs=function(e){return ms(e)?fs[e]:void 0},ys=function(e,t){e.activePlugins_=e.activePlugins_||{},e.activePlugins_[t]=!0},vs=function(e,t,i){var r=(i?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},bs=function(e,t){return t.prototype.name=e,function(){vs(this,{name:e,plugin:t,instance:null},!0);for(var i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];var s=new(Function.prototype.bind.apply(t,[null].concat([this].concat(r))));return this[e]=function(){return s},vs(this,s.getEventHash()),s}},_s=function(){function e(t){if(v(this,e),this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,He(this),delete this.trigger,Ve(this,this.constructor.defaultState),ys(t,this.name),this.dispose=Oe(this,this.dispose),t.on("dispose",this.dispose)}return e.prototype.version=function(){return this.constructor.VERSION},e.prototype.getEventHash=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.name=this.name,e.plugin=this.constructor,e.instance=this,e},e.prototype.trigger=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Se(this.eventBusEl_,e,this.getEventHash(t))},e.prototype.handleStateChanged=function(e){},e.prototype.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t.activePlugins_[e]=!1,this.player=this.state=null,t[e]=bs(e,fs[e])},e.isBasic=function(t){var i="string"==typeof t?gs(t):t;return"function"==typeof i&&!e.prototype.isPrototypeOf(i.prototype)},e.registerPlugin=function(t,i){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+(void 0===t?"undefined":y(t))+".");if(ms(t))f.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(hs.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof i)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+(void 0===i?"undefined":y(i))+".");return fs[t]=i,"plugin"!==t&&(e.isBasic(i)?hs.prototype[t]=function(e,t){var i=function(){vs(this,{name:e,plugin:t,instance:null},!0);var i=t.apply(this,arguments);return ys(this,e),vs(this,{name:e,plugin:t,instance:i}),i};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i}(t,i):hs.prototype[t]=bs(t,i)),i},e.deregisterPlugin=function(e){if("plugin"===e)throw new Error("Cannot de-register base plugin.");ms(e)&&(delete fs[e],delete hs.prototype[e])},e.getPlugins=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(fs),t=void 0;return e.forEach(function(e){var i=gs(e);i&&((t=t||{})[e]=i)}),t},e.getPluginVersion=function(e){var t=gs(e);return t&&t.VERSION||""},e}();_s.getPlugin=gs,_s.BASE_PLUGIN_NAME="plugin",_s.registerPlugin("plugin",_s),hs.prototype.usingPlugin=function(e){return!!this.activePlugins_&&!0===this.activePlugins_[e]},hs.prototype.hasPlugin=function(e){return!!ms(e)};var Ts=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Ss(e,t,i){var r=Ss.getPlayer(e);if(r)return t&&f.warn('Player "'+e+'" is already initialised. Options will not be applied.'),i&&r.ready(i),r;var n="string"==typeof e?se("#"+Ts(e)):e;if(!L(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");u.body.contains(n)||f.warn("The element supplied is not included in the DOM"),t=t||{},Ss.hooks("beforesetup").forEach(function(e){var i=e(n,Qe(t));E(i)&&!Array.isArray(i)?t=Qe(t,i):f.error("please return an object in beforesetup hooks")});var s=Ge.getComponent("Player");return r=new s(n,t,i),Ss.hooks("setup").forEach(function(e){return e(r)}),r}if(Ss.hooks_={},Ss.hooks=function(e,t){return Ss.hooks_[e]=Ss.hooks_[e]||[],t&&(Ss.hooks_[e]=Ss.hooks_[e].concat(t)),Ss.hooks_[e]},Ss.hook=function(e,t){Ss.hooks(e,t)},Ss.hookOnce=function(e,t){Ss.hooks(e,[].concat(t).map(function(t){return function i(){return Ss.removeHook(e,i),t.apply(void 0,arguments)}}))},Ss.removeHook=function(e,t){var i=Ss.hooks(e).indexOf(t);return!(i<=-1)&&(Ss.hooks_[e]=Ss.hooks_[e].slice(),Ss.hooks_[e].splice(i,1),!0)},!0!==n.VIDEOJS_NO_DYNAMIC_STYLE&&I()){var ws=se(".vjs-styles-defaults");if(!ws){ws=Ae("vjs-styles-defaults");var Cs=se("head");Cs&&Cs.insertBefore(ws,Cs.firstChild),Pe(ws,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}xe(1,Ss),Ss.VERSION=e,Ss.options=hs.prototype.options_,Ss.getPlayers=function(){return hs.players},Ss.getPlayer=function(e){var t=hs.players,i=void 0;if("string"==typeof e){var r=Ts(e),n=t[r];if(n)return n;i=se("#"+r)}else i=e;if(L(i)){var s=i,o=s.player,a=s.playerId;if(o||t[a])return o||t[a]}},Ss.getAllPlayers=function(){return Object.keys(hs.players).map(function(e){return hs.players[e]}).filter(Boolean)},Ss.players=hs.players,Ss.getComponent=Ge.getComponent,Ss.registerComponent=function(e,t){br.isTech(t)&&f.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Ge.registerComponent.call(Ge,e,t)},Ss.getTech=br.getTech,Ss.registerTech=br.registerTech,Ss.use=function(e,t){_r[e]=_r[e]||[],_r[e].push(t)},Object.defineProperty(Ss,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Ss.middleware,"TERMINATOR",{value:Sr,writeable:!1,enumerable:!0}),Ss.browser=mt,Ss.TOUCH_ENABLED=ft,Ss.extend=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function(){e.apply(this,arguments)},r={};for(var n in"object"===(void 0===t?"undefined":y(t))?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),r=t):"function"==typeof t&&(i=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":y(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)}(i,e),r)r.hasOwnProperty(n)&&(i.prototype[n]=r[n]);return i},Ss.mergeOptions=Qe,Ss.bind=Oe,Ss.registerPlugin=_s.registerPlugin,Ss.plugin=function(e,t){return f.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),_s.registerPlugin(e,t)},Ss.getPlugins=_s.getPlugins,Ss.getPlugin=_s.getPlugin,Ss.getPluginVersion=_s.getPluginVersion,Ss.addLanguage=function(e,t){var i;return e=(""+e).toLowerCase(),Ss.options.languages=Qe(Ss.options.languages,((i={})[e]=t,i)),Ss.options.languages[e]},Ss.log=f,Ss.createTimeRange=Ss.createTimeRanges=vt,Ss.formatTime=Wr,Ss.setFormatTime=function(e){Vr=e},Ss.resetFormatTime=function(){Vr=qr},Ss.parseUrl=Xt,Ss.isCrossOrigin=Jt,Ss.EventTarget=De,Ss.on=_e,Ss.one=we,Ss.off=Te,Ss.trigger=Se,Ss.xhr=Si,Ss.TextTrack=xi,Ss.AudioTrack=Ai,Ss.VideoTrack=Pi,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Ss[e]=function(){return f.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),ae[e].apply(null,arguments)}}),Ss.computedStyle=x,Ss.dom=ae,Ss.url=ei;var ks=i(function(e,t){var i,r,n,s,o;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/;?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var n=o.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=o.normalizePath(n.path),o.buildURLFromParts(n)}var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return i.alwaysNormalize?(s.path=o.normalizePath(s.path),o.buildURLFromParts(s)):t;var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=r.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var u={scheme:a.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(u.netLoc=a.netLoc,"/"!==s.path[0]))if(s.path){var c=a.path,d=c.substring(0,c.lastIndexOf("/")+1)+s.path;u.path=o.normalizePath(d)}else u.path=a.path,s.params||(u.params=a.params,s.query||(u.query=a.query));return null===u.path&&(u.path=i.alwaysNormalize?o.normalizePath(s.path):s.path),o.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o}),Es=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},js=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},xs=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":y(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},As=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":y(t))&&"function"!=typeof t?e:t},Ps=function(){function e(){Es(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),i>-1},e.prototype.trigger=function(e){var t=this.listeners[e],i=void 0,r=void 0,n=void 0;if(t)if(2===arguments.length)for(r=t.length,i=0;i<r;++i)t[i].call(this,arguments[1]);else for(n=Array.prototype.slice.call(arguments,1),r=t.length,i=0;i<r;++i)t[i].apply(this,n)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),Os=function(e){function t(){Es(this,t);var i=As(this,e.call(this));return i.buffer="",i}return xs(t,e),t.prototype.push=function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(Ps),Is=function(e){for(var t=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},r=t.length,n=void 0;r--;)""!==t[r]&&((n=/([^=]*)=(.*)/.exec(t[r]).slice(1))[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),i[n[0]]=n[1]);return i},Ls=function(e){function t(){Es(this,t);var i=As(this,e.call(this));return i.customParsers=[],i}return xs(t,e),t.prototype.push=function(e){var t=void 0,i=void 0;if(0!==(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===e[0]){for(var r=0;r<this.customParsers.length;r++)if(this.customParsers[r].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),void this.trigger("data",i);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"totalduration"},t[1]&&(i.duration=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),void this.trigger("data",i);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),void this.trigger("data",i);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return i={type:"tag",tagType:"byterange"},t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),void this.trigger("data",i);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"map"},t[1]){var n=Is(t[1]);if(n.URI&&(i.uri=n.URI),n.BYTERANGE){var s=n.BYTERANGE.split("@"),o=s[0],a=s[1];i.byterange={},o&&(i.byterange.length=parseInt(o,10)),a&&(i.byterange.offset=parseInt(a,10))}}this.trigger("data",i)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=Is(t[1]),i.attributes.RESOLUTION){var l=i.attributes.RESOLUTION.split("x"),u={};l[0]&&(u.width=parseInt(l[0],10)),l[1]&&(u.height=parseInt(l[1],10)),i.attributes.RESOLUTION=u}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}this.trigger("data",i)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return i={type:"tag",tagType:"media"},t[1]&&(i.attributes=Is(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-ENDLIST/.exec(e))this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),void this.trigger("data",i);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return i={type:"tag",tagType:"key"},t[1]&&(i.attributes=Is(t[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.trigger("data",i);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return i={type:"tag",tagType:"start"},t[1]&&(i.attributes=Is(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void this.trigger("data",i);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",void this.trigger("data",i);this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}else this.trigger("data",{type:"uri",uri:e})},t.prototype.addParser=function(e){var t=this,i=e.expression,r=e.customType,n=e.dataParser,s=e.segment;"function"!=typeof n&&(n=function(e){return e}),this.customParsers.push(function(e){if(i.exec(e))return t.trigger("data",{type:"custom",data:n(e),customType:r,segment:s}),!0})},t}(Ps),Ds=function(e){function t(){Es(this,t);var i=As(this,e.call(this));i.lineStream=new Os,i.parseStream=new Ls,i.lineStream.pipe(i.parseStream);var r=i,n=[],s={},o=void 0,a=void 0,l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;return i.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},i.parseStream.on("data",function(e){var t=void 0,i=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(s.byterange=t,t.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key:function(){e.attributes?"NONE"!==e.attributes.METHOD?e.attributes.URI?(e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(a.iv=e.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):a=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,u=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){o={},e.uri&&(o.uri=e.uri),e.byterange&&(o.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(s.attributes||(s.attributes={}),js(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var r=this.manifest.mediaGroups[e.attributes.TYPE];r[e.attributes["GROUP-ID"]]=r[e.attributes["GROUP-ID"]]||{},t=r[e.attributes["GROUP-ID"]],(i={default:/yes/i.test(e.attributes.DEFAULT)}).default?i.autoselect=!0:i.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(i.language=e.attributes.LANGUAGE),e.attributes.URI&&(i.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(i.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(i.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(i.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=i}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data}}[e.tagType]||function(){}).call(r)},uri:function(){s.uri=e.uri,n.push(s),!this.manifest.targetDuration||"duration"in s||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),a&&(s.key=a),s.timeline=u,o&&(s.map=o),s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)}),i}return xs(t,e),t.prototype.push=function(e){this.lineStream.push(e)},t.prototype.end=function(){this.lineStream.push("\n")},t.prototype.addParser=function(e){this.parseStream.addParser(e)},t}(Ps),Ms=function(e){var t,i=e.attributes,r=e.segments,n={attributes:(t={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:r,mediaSequence:r.length?r[0].number:1};return i.contentProtection&&(n.contentProtection=i.contentProtection),n},Rs=function(e){var t,i=e.attributes,r=e.segments,n={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:r,mediaSequence:r.length?r[0].number:1};return i.contentProtection&&(n.contentProtection=i.contentProtection),n},Bs=function(e){var t;if(!e.length)return{};var i=e[0].attributes,r=i.sourceDuration,n=i.minimumUpdatePeriod,s=void 0===n?0:n,o=e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType}).map(Rs),a=e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType}),l=e.filter(function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType}),u={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:r,playlists:o,minimumUpdatePeriod:1e3*s};return a.length&&(u.mediaGroups.AUDIO.audio=a.reduce(function(e,t){var i=t.attributes.role&&t.attributes.role.value||"main",r=t.attributes.lang||"",n="main";return r&&(n=t.attributes.lang+" ("+i+")"),e[n]&&e[n].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth?e:(e[n]={language:r,autoselect:!0,default:"main"===i,playlists:[Ms(t)],uri:""},e)},{})),l.length&&(u.mediaGroups.SUBTITLES.subs=function(e){return e.reduce(function(e,t){var i,r,n,s,o=t.attributes.lang||"text";return e[o]?e:(e[o]={language:o,default:!1,autoselect:!1,playlists:[(i=t,n=i.attributes,s=i.segments,void 0===s&&(s=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration),{attributes:(r={NAME:n.id,BANDWIDTH:n.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:s,mediaSequence:s.length?s[0].number:1})],uri:""},e)},{})}(l)),u},Ns=function(e){return!!e&&"object"===(void 0===e?"undefined":y(e))},Us=function e(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];return i.reduce(function(t,i){return Object.keys(i).forEach(function(r){Array.isArray(t[r])&&Array.isArray(i[r])?t[r]=t[r].concat(i[r]):Ns(t[r])&&Ns(i[r])?t[r]=e(t[r],i[r]):t[r]=i[r]}),t},{})},$s=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=ks.buildAbsoluteURL(n.location.href,e)),ks.buildAbsoluteURL(e,t))},Fs=function(e){var t=e.baseUrl,i=void 0===t?"":t,r=e.source,n=void 0===r?"":r,s=e.range,o=void 0===s?"":s,a={uri:n,resolvedUri:$s(i||"",n)};if(o){var l=o.split("-"),u=parseInt(l[0],10),c=parseInt(l[1],10);a.byterange={length:c-u,offset:u}}return a},zs=function(e,t,i){var r=e.NOW,n=e.clientOffset,s=e.availabilityStartTime,o=e.timescale,a=void 0===o?1:o,l=e.start,u=void 0===l?0:l,c=e.minimumUpdatePeriod,d=(r+n)/1e3+(void 0===c?0:c)-(s+u);return Math.ceil((d*a-t)/i)},Hs=function(e,t){for(var i=e.type,r=void 0===i?"static":i,n=e.minimumUpdatePeriod,s=void 0===n?0:n,o=e.media,a=void 0===o?"":o,l=e.sourceDuration,u=e.timescale,c=void 0===u?1:u,d=e.startNumber,h=void 0===d?1:d,p=e.periodIndex,f=[],m=-1,g=0;g<t.length;g++){var y=t[g],v=y.d,b=y.r||0,_=y.t||0;m<0&&(m=_),_&&_>m&&(m=_);var T=void 0;if(b<0){var S=g+1;T=S===t.length?"dynamic"===r&&s>0&&a.indexOf("$Number$")>0?zs(e,m,v):(l*c-m)/v:(t[S].t-m)/v}else T=b+1;for(var w=h+f.length+T,C=h+f.length;C<w;)f.push({number:C,duration:v/c,time:m,timeline:p}),m+=v,C++}return f},qs=function(e){return e.reduce(function(e,t){return e.concat(t)},[])},Vs=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},Ws={static:function(e){var t=e.duration,i=e.timescale,r=void 0===i?1:i,n=e.sourceDuration;return{start:0,end:Math.ceil(n/(t/r))}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,r=e.availabilityStartTime,n=e.timescale,s=void 0===n?1:n,o=e.duration,a=e.start,l=void 0===a?0:a,u=e.minimumUpdatePeriod,c=void 0===u?0:u,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,p=(t+i)/1e3,f=r+l,m=p+c-f,g=Math.ceil(m*s/o),y=Math.floor((p-f-h)*s/o),v=Math.floor((p-f)*s/o);return{start:Math.max(0,y),end:Math.min(g,v)}}},Qs=function(e){var t=e.type,i=void 0===t?"static":t,r=e.duration,n=e.timescale,s=void 0===n?1:n,o=e.sourceDuration,a=Ws[i](e),l=function(e,t){for(var i=[],r=e;r<t;r++)i.push(r);return i}(a.start,a.end).map(function(e){return function(t,i){var r=e.duration,n=e.timescale,s=void 0===n?1:n,o=e.periodIndex,a=e.startNumber;return{number:(void 0===a?1:a)+t,duration:r/s,timeline:o,time:i*r}}}(e));if("static"===i){var u=l.length-1;l[u].duration=o-r/s*u}return l},Gs=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Ys=function(e,t){return e.replace(Gs,function(e){return function(t,i,r,n){if("$$"===t)return"$";if(void 0===e[i])return t;var s=""+e[i];return"RepresentationID"===i?s:(n=r?parseInt(n,10):1,s.length>=n?s:""+new Array(n-s.length+1).join("0")+s)}}(t))},Xs=function(e,t){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,n=void 0===r?{sourceURL:"",range:""}:r,s=Fs({baseUrl:e.baseUrl,source:Ys(n.sourceURL,i),range:n.range});return function(e,t){return e.duration||t?e.duration?Qs(e):Hs(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t).map(function(t){i.Number=t.number,i.Time=t.time;var r=Ys(e.media||"",i);return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:$s(e.baseUrl||"",r),map:s,number:t.number}})},Ks="INVALID_NUMBER_OF_PERIOD",Zs="DASH_EMPTY_MANIFEST",Js="DASH_INVALID_XML",eo="NO_BASE_URL",to="SEGMENT_TIME_UNSPECIFIED",io="UNSUPPORTED_UTC_TIMING_SCHEME",ro=function(e,t){var i=e.duration,r=e.segmentUrls,n=void 0===r?[]:r;if(!i&&!t||i&&t)throw new Error(to);var s=n.map(function(t){return function(e,t){var i=e.baseUrl,r=e.initialization,n=void 0===r?{}:r,s=Fs({baseUrl:i,source:n.sourceURL,range:n.range}),o=Fs({baseUrl:i,source:t.media,range:t.mediaRange});return o.map=s,o}(e,t)}),o=void 0;return i&&(o=Qs(e)),t&&(o=Hs(e,t)),o.map(function(e,t){if(s[t]){var i=s[t];return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i}}).filter(function(e){return e})},no=function(e){var t=e.baseUrl,i=e.initialization,r=void 0===i?{}:i,n=e.sourceDuration,s=e.timescale,o=void 0===s?1:s,a=e.indexRange,l=void 0===a?"":a,u=e.duration;if(!t)throw new Error(eo);var c=Fs({baseUrl:t,source:r.sourceURL,range:r.range}),d=Fs({baseUrl:t,source:t,range:l});if(d.map=c,u){var h=Qs(e);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else n&&(d.duration=n/o,d.timeline=0);return d.number=0,[d]},so=function(e){var t=e.attributes,i=e.segmentInfo,r=void 0,n=void 0;if(i.template?(n=Xs,r=Us(t,i.template)):i.base?(n=no,r=Us(t,i.base)):i.list&&(n=ro,r=Us(t,i.list)),!n)return{attributes:t};var s=n(r,i.timeline);if(r.duration){var o=r,a=o.duration,l=o.timescale,u=void 0===l?1:l;r.duration=a/u}else s.length?r.duration=s.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):r.duration=0;return{attributes:r,segments:s}},oo=function(e,t){return Vs(e.childNodes).filter(function(e){return e.tagName===t})},ao=function(e){return e.textContent.trim()},lo=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var i=t.slice(1),r=i[0],n=i[1],s=i[2],o=i[3],a=i[4],l=i[5];return 31536e3*parseFloat(r||0)+2592e3*parseFloat(n||0)+86400*parseFloat(s||0)+3600*parseFloat(o||0)+60*parseFloat(a||0)+parseFloat(l||0)},uo={mediaPresentationDuration:function(e){return lo(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return lo(e)},timeShiftBufferDepth:function(e){return lo(e)},start:function(e){return lo(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?lo(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},co=function(e){return e&&e.attributes?Vs(e.attributes).reduce(function(e,t){var i=uo[t.name]||uo.DEFAULT;return e[t.name]=i(t.value),e},{}):{}};var ho,po,fo={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},mo=function(e,t){return t.length?qs(e.map(function(e){return t.map(function(t){return $s(e,ao(t))})})):e},go=function(e){var t=oo(e,"SegmentTemplate")[0],i=oo(e,"SegmentList")[0],r=i&&oo(i,"SegmentURL").map(function(e){return Us({tag:"SegmentURL"},co(e))}),n=oo(e,"SegmentBase")[0],s=i||t,o=s&&oo(s,"SegmentTimeline")[0],a=i||n||t,l=a&&oo(a,"Initialization")[0],u=t&&co(t);u&&l?u.initialization=l&&co(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var c={template:u,timeline:o&&oo(o,"S").map(function(e){return co(e)}),list:i&&Us(co(i),{segmentUrls:r,initialization:co(l)}),base:n&&Us(co(n),{initialization:co(l)})};return Object.keys(c).forEach(function(e){c[e]||delete c[e]}),c},yo=function(e){return e.reduce(function(e,t){var i=co(t),r=fo[i.schemeIdUri];if(r){e[r]={attributes:i};var s=oo(t,"cenc:pssh")[0];if(s){var o=ao(s),a=o&&function(e){for(var t=n.atob(e),i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(o);e[r].pssh=a}}return e},{})},vo=function(e,t,i){return function(r){var n=co(r),s=mo(t,oo(r,"BaseURL")),o=oo(r,"Role")[0],a={role:co(o)},l=Us(e,n,a),u=yo(oo(r,"ContentProtection"));Object.keys(u).length&&(l=Us(l,{contentProtection:u}));var c=go(r),d=oo(r,"Representation"),h=Us(i,c);return qs(d.map(function(e,t,i){return function(r){var n=oo(r,"BaseURL"),s=mo(t,n),o=Us(e,co(r)),a=go(r);return s.map(function(e){return{segmentInfo:Us(i,a),attributes:Us(o,{baseUrl:e})}})}}(l,s,h)))}},bo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.manifestUri,r=void 0===i?"":i,n=t.NOW,s=void 0===n?Date.now():n,o=t.clientOffset,a=void 0===o?0:o,l=oo(e,"Period");if(1!==l.length)throw new Error(Ks);var u=co(e),c=mo([r],oo(e,"BaseURL"));return u.sourceDuration=u.mediaPresentationDuration||0,u.NOW=s,u.clientOffset=a,qs(l.map(function(e,t){return function(i,r){var n=mo(t,oo(i,"BaseURL")),s=co(i),o=Us(e,s,{periodIndex:r}),a=oo(i,"AdaptationSet"),l=go(i);return qs(a.map(vo(o,n,l)))}}(u,c)))},_o=function(e){if(""===e)throw new Error(Zs);var t=(new n.DOMParser).parseFromString(e,"application/xml"),i=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(Js);return i},To=function(e,t){return Bs(bo(_o(e),t).map(so))},So=function(e){return function(e){var t=oo(e,"UTCTiming")[0];if(!t)return null;var i=co(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(io)}return i}(_o(e))},wo={toUnsigned:function(e){return e>>>0}},Co=wo.toUnsigned,ko=Object.freeze({default:wo,__moduleExports:wo,toUnsigned:Co}),Eo=(ko&&wo||ko).toUnsigned;ho=function(e,t){var i,r,n,s,o,a=[];if(!t.length)return null;for(i=0;i<e.byteLength;)r=Eo(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),n=po(e.subarray(i+4,i+8)),s=r>1?i+r:e.byteLength,n===t[0]&&(1===t.length?a.push(e.subarray(i+8,s)):(o=ho(e.subarray(i+8,s),t.slice(1))).length&&(a=a.concat(o))),i=s;return a};po=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])};var jo=function(e){return ho(e,["moov","trak"]).reduce(function(e,t){var i,r,n,s,o;return(i=ho(t,["tkhd"])[0])?(r=i[0],s=Eo(i[n=0===r?12:20]<<24|i[n+1]<<16|i[n+2]<<8|i[n+3]),(o=ho(t,["mdia","mdhd"])[0])?(n=0===(r=o[0])?12:20,e[s]=Eo(o[n]<<24|o[n+1]<<16|o[n+2]<<8|o[n+3]),e):null):null},{})},xo=function(e,t){var i,r,n;return i=ho(t,["moof","traf"]),r=[].concat.apply([],i.map(function(t){return ho(t,["tfhd"]).map(function(i){var r,n;return r=Eo(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),n=e[r]||9e4,(ho(t,["tfdt"]).map(function(e){var t,i;return t=e[0],i=Eo(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(i*=Math.pow(2,32),i+=Eo(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i})[0]||1/0)/n})})),n=Math.min.apply(null,r),isFinite(n)?n:0},Ao={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Po=Ao.H264_STREAM_TYPE,Oo=Ao.ADTS_STREAM_TYPE,Io=Ao.METADATA_STREAM_TYPE,Lo=Object.freeze({default:Ao,__moduleExports:Ao,H264_STREAM_TYPE:Po,ADTS_STREAM_TYPE:Oo,METADATA_STREAM_TYPE:Io}),Do=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var r;return!!e[t]&&(r=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var i,r,n,s;if(i=e[t])if(2===arguments.length)for(n=i.length,r=0;r<n;++r)i[r].call(this,arguments[1]);else{for(s=[],r=arguments.length,r=1;r<arguments.length;++r)s.push(arguments[r]);for(n=i.length,r=0;r<n;++r)i[r].apply(this,s)}},this.dispose=function(){e={}}}};Do.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},Do.prototype.push=function(e){this.trigger("data",e)},Do.prototype.flush=function(e){this.trigger("done",e)};var Mo=Do,Ro=Object.freeze({default:Mo,__moduleExports:Mo}),Bo=function(e,t){var i=1;for(e>t&&(i=-1);Math.abs(t-e)>4294967296;)e+=8589934592*i;return e},No=function e(t){var i,r;e.prototype.init.call(this),this.type_=t,this.push=function(e){e.type===this.type_&&(void 0===r&&(r=e.dts),e.dts=Bo(e.dts,r),e.pts=Bo(e.pts,r),i=e.dts,this.trigger("data",e))},this.flush=function(){r=i,this.trigger("done")},this.discontinuity=function(){r=void 0,i=void 0}};No.prototype=new(Ro&&Mo||Ro);var Uo={TimestampRolloverStream:No,handleRollover:Bo},$o=Uo.TimestampRolloverStream,Fo=Uo.handleRollover,zo=Object.freeze({default:Uo,__moduleExports:Uo,TimestampRolloverStream:$o,handleRollover:Fo}),Ho=Lo&&Ao||Lo,qo=function(e){var t=31&e[1];return t<<=8,t|=e[2]},Vo=function(e){return!!(64&e[1])},Wo=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Qo=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Go={parseType:function(e,t){var i=qo(e);return 0===i?"pat":i===t?"pmt":t?"pes":null},parsePat:function(e){var t=Vo(e),i=4+Wo(e);return t&&(i+=e[i]+1),(31&e[i+10])<<8|e[i+11]},parsePmt:function(e){var t={},i=Vo(e),r=4+Wo(e);if(i&&(r+=e[r]+1),1&e[r+5]){var n;n=3+((15&e[r+1])<<8|e[r+2])-4;for(var s=12+((15&e[r+10])<<8|e[r+11]);s<n;){var o=r+s;t[(31&e[o+1])<<8|e[o+2]]=e[o],s+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:Vo,parsePesType:function(e,t){switch(t[qo(e)]){case Ho.H264_STREAM_TYPE:return"video";case Ho.ADTS_STREAM_TYPE:return"audio";case Ho.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Vo(e))return null;var t=4+Wo(e);if(t>=e.byteLength)return null;var i,r=null;return 192&(i=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&i&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+Wo(e),i=e.subarray(t),r=0,n=0,s=!1;n<i.byteLength-3;n++)if(1===i[n+2]){r=n+5;break}for(;r<i.byteLength;)switch(i[r]){case 0:if(0!==i[r-1]){r+=2;break}if(0!==i[r-2]){r++;break}n+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===Qo(31&i[n+3])&&(s=!0);do{r++}while(1!==i[r]&&r<i.length);n=r-2,r+=3;break;case 1:if(0!==i[r-1]||0!==i[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Qo(31&i[n+3])&&(s=!0),n=r-2,r+=3;break;default:r+=3}return i=i.subarray(n),r-=n,n=0,i&&i.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Qo(31&i[n+3])&&(s=!0),s}},Yo=Go.parseType,Xo=Go.parsePat,Ko=Go.parsePmt,Zo=Go.parsePayloadUnitStartIndicator,Jo=Go.parsePesType,ea=Go.parsePesTime,ta=Go.videoPacketContainsKeyFrame,ia=Object.freeze({default:Go,__moduleExports:Go,parseType:Yo,parsePat:Xo,parsePmt:Ko,parsePayloadUnitStartIndicator:Zo,parsePesType:Jo,parsePesTime:ea,videoPacketContainsKeyFrame:ta}),ra=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],na=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},sa={parseId3TagSize:function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},parseAdtsSize:function(e,t){var i=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|i},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return ra[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,i,r;t=10,64&e[5]&&(t+=4,t+=na(e.subarray(10,14)));do{if((i=na(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+i+10);for(var n=0;n<r.byteLength;n++)if(0===r[n]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,i){var r,n="";for(r=t;r<i;r++)n+="%"+("00"+e[r].toString(16)).slice(-2);return n}(r,0,n))){var s=r.subarray(n+1),o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return o*=4,o+=3&s[7]}break}}t+=10,t+=i}while(t<e.byteLength);return null}},oa=sa.parseId3TagSize,aa=sa.parseAdtsSize,la=sa.parseType,ua=sa.parseSampleRate,ca=sa.parseAacTimestamp,da=Object.freeze({default:sa,__moduleExports:sa,parseId3TagSize:oa,parseAdtsSize:aa,parseType:la,parseSampleRate:ua,parseAacTimestamp:ca}),ha=ia&&Go||ia,pa=da&&sa||da,fa=(zo&&Uo||zo).handleRollover,ma={};ma.ts=ha,ma.aac=pa;var ga=function(e,t,i){for(var r,n,s,o,a=0,l=188,u=!1;l<e.byteLength;)if(71!==e[a]||71!==e[l])a++,l++;else{switch(r=e.subarray(a,l),ma.ts.parseType(r,t.pid)){case"pes":n=ma.ts.parsePesType(r,t.table),s=ma.ts.parsePayloadUnitStartIndicator(r),"audio"===n&&s&&(o=ma.ts.parsePesTime(r))&&(o.type="audio",i.audio.push(o),u=!0)}if(u)break;a+=188,l+=188}for(a=(l=e.byteLength)-188,u=!1;a>=0;)if(71!==e[a]||71!==e[l])a--,l--;else{switch(r=e.subarray(a,l),ma.ts.parseType(r,t.pid)){case"pes":n=ma.ts.parsePesType(r,t.table),s=ma.ts.parsePayloadUnitStartIndicator(r),"audio"===n&&s&&(o=ma.ts.parsePesTime(r))&&(o.type="audio",i.audio.push(o),u=!0)}if(u)break;a-=188,l-=188}},ya=function(e,t,i){for(var r,n,s,o,a,l,u,c=0,d=188,h=!1,p={data:[],size:0};d<e.byteLength;)if(71!==e[c]||71!==e[d])c++,d++;else{switch(r=e.subarray(c,d),ma.ts.parseType(r,t.pid)){case"pes":if(n=ma.ts.parsePesType(r,t.table),s=ma.ts.parsePayloadUnitStartIndicator(r),"video"===n&&(s&&!h&&(o=ma.ts.parsePesTime(r))&&(o.type="video",i.video.push(o),h=!0),!i.firstKeyFrame)){if(s&&0!==p.size){for(a=new Uint8Array(p.size),l=0;p.data.length;)u=p.data.shift(),a.set(u,l),l+=u.byteLength;ma.ts.videoPacketContainsKeyFrame(a)&&(i.firstKeyFrame=ma.ts.parsePesTime(a),i.firstKeyFrame.type="video"),p.size=0}p.data.push(r),p.size+=r.byteLength}}if(h&&i.firstKeyFrame)break;c+=188,d+=188}for(c=(d=e.byteLength)-188,h=!1;c>=0;)if(71!==e[c]||71!==e[d])c--,d--;else{switch(r=e.subarray(c,d),ma.ts.parseType(r,t.pid)){case"pes":n=ma.ts.parsePesType(r,t.table),s=ma.ts.parsePayloadUnitStartIndicator(r),"video"===n&&s&&(o=ma.ts.parsePesTime(r))&&(o.type="video",i.video.push(o),h=!0)}if(h)break;c-=188,d-=188}},va=function(e){var t={pid:null,table:null},i={};for(var r in function(e,t){for(var i,r=0,n=188;n<e.byteLength;)if(71!==e[r]||71!==e[n])r++,n++;else{switch(i=e.subarray(r,n),ma.ts.parseType(i,t.pid)){case"pat":t.pid||(t.pid=ma.ts.parsePat(i));break;case"pmt":t.table||(t.table=ma.ts.parsePmt(i))}if(t.pid&&t.table)return;r+=188,n+=188}}(e,t),t.table){if(t.table.hasOwnProperty(r))switch(t.table[r]){case Ho.H264_STREAM_TYPE:i.video=[],ya(e,t,i),0===i.video.length&&delete i.video;break;case Ho.ADTS_STREAM_TYPE:i.audio=[],ga(e,t,i),0===i.audio.length&&delete i.audio}}return i},ba=function(e,t){var i,r;return(r=(i=e)[0]==="I".charCodeAt(0)&&i[1]==="D".charCodeAt(0)&&i[2]==="3".charCodeAt(0)?function(e){for(var t,i=!1,r=0,n=null,s=null,o=0,a=0;e.length-a>=3;){switch(ma.aac.parseType(e,a)){case"timed-metadata":if(e.length-a<10){i=!0;break}if((o=ma.aac.parseId3TagSize(e,a))>e.length){i=!0;break}null===s&&(t=e.subarray(a,a+o),s=ma.aac.parseAacTimestamp(t)),a+=o;break;case"audio":if(e.length-a<7){i=!0;break}if((o=ma.aac.parseAdtsSize(e,a))>e.length){i=!0;break}null===n&&(t=e.subarray(a,a+o),n=ma.aac.parseSampleRate(t)),r++,a+=o;break;default:a++}if(i)return null}if(null===n||null===s)return null;var l=9e4/n;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*r*l,pts:s+1024*r*l}]}}(e):va(e))&&(r.audio||r.video)?(function(e,t){if(e.audio&&e.audio.length){var i=t;void 0===i&&(i=e.audio[0].dts),e.audio.forEach(function(e){e.dts=fa(e.dts,i),e.pts=fa(e.pts,i),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})}if(e.video&&e.video.length){var r=t;if(void 0===r&&(r=e.video[0].dts),e.video.forEach(function(e){e.dts=fa(e.dts,r),e.pts=fa(e.pts,r),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),e.firstKeyFrame){var n=e.firstKeyFrame;n.dts=fa(n.dts,r),n.pts=fa(n.pts,r),n.dtsTime=n.dts/9e4,n.ptsTime=n.dts/9e4}}}(r,t),r):null};var _a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Ta=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Sa=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":y(t))&&"function"!=typeof t?e:t},wa=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],r=t[4],n=i[4],s=void 0,o=void 0,a=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(s=0;s<256;s++)u[(l[s]=s<<1^283*(s>>7))^s]=s;for(o=a=0;!r[o];o^=c||1,a=u[a]||1)for(h=(h=a^a<<1^a<<2^a<<3^a<<4)>>8^255&h^99,r[o]=h,n[h]=o,f=16843009*l[d=l[c=l[o]]]^65537*d^257*c^16843008*o,p=257*l[h]^16843008*h,s=0;s<4;s++)t[s][o]=p=p<<24^p>>>8,i[s][h]=f=f<<24^f>>>8;for(s=0;s<5;s++)t[s]=t[s].slice(0),i[s]=i[s].slice(0);return e},Ca=null,ka=function(){function e(t){_a(this,e),Ca||(Ca=wa()),this._tables=[[Ca[0][0].slice(),Ca[0][1].slice(),Ca[0][2].slice(),Ca[0][3].slice(),Ca[0][4].slice()],[Ca[1][0].slice(),Ca[1][1].slice(),Ca[1][2].slice(),Ca[1][3].slice(),Ca[1][4].slice()]];var i=void 0,r=void 0,n=void 0,s=void 0,o=void 0,a=this._tables[0][4],l=this._tables[1],u=t.length,c=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size");for(s=t.slice(0),o=[],this._key=[s,o],i=u;i<4*u+28;i++)n=s[i-1],(i%u==0||8===u&&i%u==4)&&(n=a[n>>>24]<<24^a[n>>16&255]<<16^a[n>>8&255]<<8^a[255&n],i%u==0&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),s[i]=s[i-u]^n;for(r=0;i;r++,i--)n=s[3&r?i:i-4],o[r]=i<=4||r<4?n:l[0][a[n>>>24]]^l[1][a[n>>16&255]]^l[2][a[n>>8&255]]^l[3][a[255&n]]}return e.prototype.decrypt=function(e,t,i,r,n,s){var o=this._key[1],a=e^o[0],l=r^o[1],u=i^o[2],c=t^o[3],d=void 0,h=void 0,p=void 0,f=o.length/4-2,m=void 0,g=4,y=this._tables[1],v=y[0],b=y[1],_=y[2],T=y[3],S=y[4];for(m=0;m<f;m++)d=v[a>>>24]^b[l>>16&255]^_[u>>8&255]^T[255&c]^o[g],h=v[l>>>24]^b[u>>16&255]^_[c>>8&255]^T[255&a]^o[g+1],p=v[u>>>24]^b[c>>16&255]^_[a>>8&255]^T[255&l]^o[g+2],c=v[c>>>24]^b[a>>16&255]^_[l>>8&255]^T[255&u]^o[g+3],g+=4,a=d,l=h,u=p;for(m=0;m<4;m++)n[(3&-m)+s]=S[a>>>24]<<24^S[l>>16&255]<<16^S[u>>8&255]<<8^S[255&c]^o[g++],d=a,a=l,l=u,u=c,c=d},e}(),Ea=function(){function e(){_a(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),i>-1},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,r=0;r<i;++r)t[r].call(this,arguments[1]);else for(var n=Array.prototype.slice.call(arguments,1),s=t.length,o=0;o<s;++o)t[o].apply(this,n)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),ja=function(e){function t(){_a(this,t);var i=Sa(this,e.call(this,Ea));return i.jobs=[],i.delay=1,i.timeout_=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":y(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},t.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(Ea),xa=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},Aa=function(e,t,i){var r=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),n=new ka(Array.prototype.slice.call(t)),s=new Uint8Array(e.byteLength),o=new Int32Array(s.buffer),a=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,p=void 0,f=void 0,m=void 0;for(a=i[0],l=i[1],u=i[2],c=i[3],m=0;m<r.length;m+=4)d=xa(r[m]),h=xa(r[m+1]),p=xa(r[m+2]),f=xa(r[m+3]),n.decrypt(d,h,p,f,o,m),o[m]=xa(o[m]^a),o[m+1]=xa(o[m+1]^l),o[m+2]=xa(o[m+2]^u),o[m+3]=xa(o[m+3]^c),a=d,l=h,u=p,c=f;return s},Pa=function(){function e(t,i,r,n){_a(this,e);var s=e.STEP,o=new Int32Array(t.buffer),a=new Uint8Array(t.byteLength),l=0;for(this.asyncStream_=new ja,this.asyncStream_.push(this.decryptChunk_(o.subarray(l,l+s),i,r,a)),l=s;l<o.length;l+=s)r=new Uint32Array([xa(o[l-4]),xa(o[l-3]),xa(o[l-2]),xa(o[l-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(l,l+s),i,r,a));this.asyncStream_.push(function(){var e;n(null,(e=a).subarray(0,e.byteLength-e[e.byteLength-1]))})}return e.prototype.decryptChunk_=function(e,t,i,r){return function(){var n=Aa(e,t,i);r.set(n,e.byteOffset)}},Ta(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),Oa=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=ks.buildAbsoluteURL(n.location.href,e)),ks.buildAbsoluteURL(e,t))},Ia=Ss.mergeOptions,La=Ss.EventTarget,Da=Ss.log,Ma=function(e,t){["AUDIO","SUBTITLES"].forEach(function(i){for(var r in e.mediaGroups[i])for(var n in e.mediaGroups[i][r]){var s=e.mediaGroups[i][r][n];t(s,i,r,n)}})},Ra=function(e,t){var i=Ia(e,{}),r=i.playlists[t.uri];if(!r)return null;if(r.segments&&t.segments&&r.segments.length===t.segments.length&&r.mediaSequence===t.mediaSequence)return null;var n=Ia(r,t);r.segments&&(n.segments=function(e,t,i){var r=t.slice();i=i||0;for(var n=Math.min(e.length,t.length+i),s=i;s<n;s++)r[s-i]=Ia(e[s],r[s-i]);return r}(r.segments,t.segments,t.mediaSequence-r.mediaSequence)),n.segments.forEach(function(e){!function(e,t){e.resolvedUri||(e.resolvedUri=Oa(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Oa(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Oa(t,e.map.uri))}(e,n.resolvedUri)});for(var s=0;s<i.playlists.length;s++)i.playlists[s].uri===t.uri&&(i.playlists[s]=n);return i.playlists[t.uri]=n,i},Ba=function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];e.playlists[i.uri]=i,i.resolvedUri=Oa(e.uri,i.uri),i.id=t,i.attributes||(i.attributes={},Da.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},Na=function(e){Ma(e,function(t){t.uri&&(t.resolvedUri=Oa(e.uri,t.uri))})},Ua=function(e,t){var i=e.segments[e.segments.length-1];return t&&i&&i.duration?1e3*i.duration:500*(e.targetDuration||10)},$a=function(e){function t(i,r,n){v(this,t);var s=_(this,e.call(this));if(s.srcUrl=i,s.hls_=r,s.withCredentials=n,!s.srcUrl)throw new Error("A non-empty playlist URL is required");return s.state="HAVE_NOTHING",s.on("mediaupdatetimeout",function(){"HAVE_METADATA"===s.state&&(s.state="HAVE_CURRENT_METADATA",s.request=s.hls_.xhr({uri:Oa(s.master.uri,s.media().uri),withCredentials:s.withCredentials},function(e,t){if(s.request)return e?s.playlistRequestError(s.request,s.media().uri,"HAVE_METADATA"):void s.haveMetadata(s.request,s.media().uri)}))}),s}return b(t,e),t.prototype.playlistRequestError=function(e,t,i){this.request=null,i&&(this.state=i),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},t.prototype.haveMetadata=function(e,t){var i=this;this.request=null,this.state="HAVE_METADATA";var r=new Ds;r.push(e.responseText),r.end(),r.manifest.uri=t,r.manifest.attributes=r.manifest.attributes||{};var s=Ra(this.master,r.manifest);this.targetDuration=r.manifest.targetDuration,s?(this.master=s,this.media_=this.master.playlists[r.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(n.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=n.setTimeout(function(){i.trigger("mediaupdatetimeout")},Ua(this.media(),!!s))),this.trigger("loadedplaylist")},t.prototype.dispose=function(){this.stopRequest(),n.clearTimeout(this.mediaUpdateTimeout)},t.prototype.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},t.prototype.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var r=!this.media_||e.uri!==this.media_.uri;if(this.master.playlists[e.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r){if(this.state="SWITCHING_MEDIA",this.request){if(Oa(this.master.uri,e.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:Oa(this.master.uri,e.uri),withCredentials:this.withCredentials},function(r,n){if(t.request){if(r)return t.playlistRequestError(t.request,e.uri,i);t.haveMetadata(n,e.uri),"HAVE_MASTER"===i?t.trigger("loadedmetadata"):t.trigger("mediachange")}})}},t.prototype.pause=function(){this.stopRequest(),n.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},t.prototype.load=function(e){var t=this;n.clearTimeout(this.mediaUpdateTimeout);var i=this.media();if(e){var r=i?i.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=n.setTimeout(function(){return t.load()},r)}else this.started?i&&!i.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},t.prototype.start=function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"HLS playlist request error at URL: "+e.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");var r=new Ds;return r.push(i.responseText),r.end(),e.state="HAVE_MASTER",r.manifest.uri=e.srcUrl,r.manifest.playlists?(e.master=r.manifest,Ba(e.master),Na(e.master),e.trigger("loadedplaylist"),void(e.request||e.media(r.manifest.playlists[0]))):(e.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:n.location.href,playlists:[{uri:e.srcUrl,id:0}]},e.master.playlists[e.srcUrl]=e.master.playlists[0],e.master.playlists[0].resolvedUri=e.srcUrl,e.master.playlists[0].attributes=e.master.playlists[0].attributes||{},e.haveMetadata(i,e.srcUrl),e.trigger("loadedmetadata"))}})},t}(La),Fa=Ss.createTimeRange,za=function(e,t,i){var r,n;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(r=function(e,t){var i=0,r=t-e.mediaSequence,n=e.segments[r];if(n){if(void 0!==n.start)return{result:n.start,precise:!0};if(void 0!==n.end)return{result:n.end-n.duration,precise:!0}}for(;r--;){if(void 0!==(n=e.segments[r]).end)return{result:i+n.end,precise:!0};if(i+=n.duration,void 0!==n.start)return{result:i+n.start,precise:!0}}return{result:i,precise:!1}}(e,t)).precise?r.result:(n=function(e,t){for(var i=0,r=void 0,n=t-e.mediaSequence;n<e.segments.length;n++){if(void 0!==(r=e.segments[n]).start)return{result:r.start-i,precise:!0};if(i+=r.duration,void 0!==r.end)return{result:r.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t)).precise?n.result:r.result+i},Ha=function(e,t,i){if(!e)return 0;if("number"!=typeof i&&(i=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return n.Infinity}return za(e,t,i)},qa=function(e,t,i){var r=0;if(t>i){var n=[i,t];t=n[0],i=n[1]}if(t<0){for(var s=t;s<Math.min(0,i);s++)r+=e.targetDuration;t=0}for(var o=t;o<i;o++)r+=e.segments[o].duration;return r},Va=function(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,i=e.segments[t].duration||e.targetDuration,r=i+2*e.targetDuration;t--&&!((i+=e.segments[t].duration)>=r););return Math.max(0,t)},Wa=function(e,t,i){if(!e||!e.segments)return null;if(e.endList)return Ha(e);if(null===t)return null;t=t||0;var r=i?Va(e):e.segments.length;return za(e,e.mediaSequence+r,t)},Qa=function(e){return e-Math.floor(e)==0},Ga=function(e,t){if(Qa(t))return t+.1*e;for(var i=t.toString().split(".")[1].length,r=1;r<=i;r++){var n=Math.pow(10,r),s=t*n;if(Qa(s)||r===i)return(s+e)/n}},Ya=Ga.bind(null,1),Xa=Ga.bind(null,-1),Ka=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Za=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Ja=function(e){var t=Ka(e);return!e.disabled&&!t},el=function(e,t){return t.attributes&&t.attributes[e]},tl=function(e,t){if(1===e.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!Ja(e)&&(e.attributes.BANDWIDTH||0)<i}).length},il={duration:Ha,seekable:function(e,t){var i=t||0,r=Wa(e,t,!0);return null===r?Fa():Fa(i,r)},safeLiveIndex:Va,getMediaInfoForTime:function(e,t,i,r){var n=void 0,s=void 0,o=e.segments.length,a=t-r;if(a<0){if(i>0)for(n=i-1;n>=0;n--)if(s=e.segments[n],(a+=Xa(s.duration))>0)return{mediaIndex:n,startTime:r-qa(e,i,n)};return{mediaIndex:0,startTime:t}}if(i<0){for(n=i;n<0;n++)if((a-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};i=0}for(n=i;n<o;n++)if(s=e.segments[n],(a-=Ya(s.duration))<0)return{mediaIndex:n,startTime:r+qa(e,i,n)};return{mediaIndex:o-1,startTime:t}},isEnabled:Ja,isDisabled:function(e){return e.disabled},isBlacklisted:Ka,isIncompatible:Za,playlistEnd:Wa,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:el,estimateSegmentRequestTime:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return el("BANDWIDTH",i)?(e*i.attributes.BANDWIDTH-8*r)/t:NaN},isLowestEnabledRendition:tl},rl=Ss.xhr,nl=Ss.mergeOptions,sl=function(){return function e(t,i){t=nl({timeout:45e3},t);var r=e.beforeRequest||Ss.Hls.xhr.beforeRequest;if(r&&"function"==typeof r){var n=r(t);n&&(t=n)}var s=rl(t,function(e,t){var r=s.response;!e&&r&&(s.responseTime=Date.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=r.byteLength||r.length,s.bandwidth||(s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3))),t.headers&&(s.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(s.timedout=!0),e||s.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(s&&(r||s.responseText)))),i(e,s)}),o=s.abort;return s.abort=function(){return s.aborted=!0,o.apply(s,arguments)},s.uri=t.uri,s.requestTime=Date.now(),s}},ol=function(e,t){return e.start(t)+"-"+e.end(t)},al=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},ll=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},ul=function(e){var t={};return Object.keys(e).forEach(function(i){var r=e[i];ArrayBuffer.isView(r)?t[i]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[i]=r}),t},cl=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},dl=function(e){for(var t=Array.prototype.slice.call(e),i="",r=0;r<t.length/16;r++)i+=t.slice(16*r,16*r+16).map(al).join("")+" "+t.slice(16*r,16*r+16).map(ll).join("")+"\n";return i},hl=Object.freeze({createTransferableMessage:ul,initSegmentId:cl,hexDump:dl,tagDump:function(e){var t=e.bytes;return dl(t)},textRanges:function(e){var t="",i=void 0;for(i=0;i<e.length;i++)t+=ol(e,i)+" ";return t}}),pl=function(e,t){var i=[],r=void 0;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&i.push([e.start(r),e.end(r)]);return Ss.createTimeRanges(i)},fl=function(e,t){return pl(e,function(e,i){return e-1/30<=t&&i+1/30>=t})},ml=function(e,t){return pl(e,function(e){return e-1/30>=t})},gl=function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},yl=function(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},vl=function(e,t,i){var r=void 0,n=void 0;if(i&&i.cues)for(r=i.cues.length;r--;)(n=i.cues[r]).startTime<=t&&n.endTime>=e&&i.removeCue(n)},bl=function(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e},_l=function(e,t,i){var r=n.WebKitDataCue||n.VTTCue;if(t&&t.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),i){var s=bl(e.mediaSource_.duration);if(i.forEach(function(e){var t=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var i=new r(t,t,e.value||e.url||e.data||"");i.frame=e,i.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return Ss.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Ss.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Ss.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(i),this.metadataTrack_.addCue(i)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var o=e.metadataTrack_.cues,a=[],l=0;l<o.length;l++)o[l]&&a.push(o[l]);var u=a.reduce(function(e,t){var i=e[t.startTime]||[];return i.push(t),e[t.startTime]=i,e},{}),c=Object.keys(u).sort(function(e,t){return Number(e)-Number(t)});c.forEach(function(e,t){var i=u[e],r=Number(c[t+1])||s;i.forEach(function(e){e.endTime=r})})}}},Tl="undefined"!=typeof window?window:{},Sl="undefined"==typeof Symbol?"__target":Symbol(),wl="application/javascript",Cl=Tl.BlobBuilder||Tl.WebKitBlobBuilder||Tl.MozBlobBuilder||Tl.MSBlobBuilder,kl=Tl.URL||Tl.webkitURL||kl&&kl.msURL,El=Tl.Worker;function jl(e,t){return function(i){var r=this;if(!t)return new El(e);if(El&&!i){var n=Ol(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[Sl]=new El(n),function(e,t){if(!e||!t)return;var i=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&kl.revokeObjectURL(e.objURL),i.call(e)}}(this[Sl],n),this[Sl]}var s={postMessage:function(e){r.onmessage&&setTimeout(function(){r.onmessage({data:e,target:s})})}};t.call(s),this.postMessage=function(e){setTimeout(function(){s.onmessage({data:e,target:r})})},this.isThisThread=!0}}if(El){var xl,Al=Ol("self.onmessage = function () {}"),Pl=new Uint8Array(1);try{(xl=new El(Al)).postMessage(Pl,[Pl.buffer])}catch(e){El=null}finally{kl.revokeObjectURL(Al),xl&&xl.terminate()}}function Ol(e){try{return kl.createObjectURL(new Blob([e],{type:wl}))}catch(i){var t=new Cl;return t.append(e),kl.createObjectURL(t.getBlob(type))}}var Il=new jl("./transmuxer-worker.worker.js",function(e,t){var i=this;!function(){var t,r,n,s,o,a,l,u,c,d,h,p,f,m,g,y,v,b,_,T,S,w,C,k,E,j,x,A,P,O,I,L,D,M,R,B,N,U,$,F,z=void 0!==e?e:"undefined"!=typeof global?global:void 0!==i?i:{},H=void 0!==e?e:void 0!==z?z:void 0!==i?i:{},q=Math.pow(2,32)-1;!function(){var e;if(w={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in w)w.hasOwnProperty(e)&&(w[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),E=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),k=new Uint8Array([0,0,0,1]),j=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),x=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:j,audio:x},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),D=L,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),R=L,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,i,r=[],n=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)n+=r[t].byteLength;for(i=new Uint8Array(n+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,n=8;t<r.length;t++)i.set(r[t],n),n+=r[t].byteLength;return i},r=function(){return t(w.dinf,t(w.dref,I))},n=function(e){return t(w.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(w.hdlr,A[e])},m=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(i[12]=e.samplerate>>>24&255,i[13]=e.samplerate>>>16&255,i[14]=e.samplerate>>>8&255,i[15]=255&e.samplerate),t(w.mdhd,i)},f=function(e){return t(w.mdia,m(e),g(e.type),a(e))},o=function(e){return t(w.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},a=function(e){return t(w.minf,"video"===e.type?t(w.vmhd,P):t(w.smhd,O),r(),v(e))},l=function(e,i){for(var r=[],n=i.length;n--;)r[n]=_(i[n]);return t.apply(null,[w.moof,o(e)].concat(r))},u=function(e){for(var i=e.length,r=[];i--;)r[i]=h(e[i]);return t.apply(null,[w.moov,d(4294967295)].concat(r).concat(c(e)))},c=function(e){for(var i=e.length,r=[];i--;)r[i]=T(e[i]);return t.apply(null,[w.mvex].concat(r))},d=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(w.mvhd,i)},y=function(e){var i,r,n=e.samples||[],s=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)i=n[r].flags,s[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t(w.sdtp,s)},v=function(e){return t(w.stbl,b(e),t(w.stts,R),t(w.stsc,D),t(w.stsz,M),t(w.stco,L))},b=function(e){return t(w.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?B(e):N(e))},B=function(e){var i,r=e.sps||[],n=e.pps||[],s=[],o=[];for(i=0;i<r.length;i++)s.push((65280&r[i].byteLength)>>>8),s.push(255&r[i].byteLength),s=s.concat(Array.prototype.slice.call(r[i]));for(i=0;i<n.length;i++)o.push((65280&n[i].byteLength)>>>8),o.push(255&n[i].byteLength),o=o.concat(Array.prototype.slice.call(n[i]));return t(w.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(w.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length]).concat(s).concat([n.length]).concat(o))),t(w.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},N=function(e){return t(w.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),n(e))},p=function(e){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(w.tkhd,i)},_=function(e){var i,r,n,s,o,a;return i=t(w.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/(q+1)),a=Math.floor(e.baseMediaDecodeTime%(q+1)),r=t(w.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),92,"audio"===e.type?(n=S(e,92),t(w.traf,i,r,n)):(s=y(e),n=S(e,s.length+92),t(w.traf,i,r,n,s))},h=function(e){return e.duration=e.duration||4294967295,t(w.trak,p(e),f(e))},T=function(e){var i=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(i[i.length-1]=0),t(w.trex,i)},F=function(e,t){var i=0,r=0,n=0,s=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(n=4),void 0!==e[0].compositionTimeOffset&&(s=8)),[0,0,i|r|n|s,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},$=function(e,i){var r,n,s,o;for(i+=20+16*(n=e.samples||[]).length,r=F(n,i),o=0;o<n.length;o++)s=n[o],r=r.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size,s.flags.isLeading<<2|s.flags.dependsOn,s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,61440&s.flags.degradationPriority,15&s.flags.degradationPriority,(4278190080&s.compositionTimeOffset)>>>24,(16711680&s.compositionTimeOffset)>>>16,(65280&s.compositionTimeOffset)>>>8,255&s.compositionTimeOffset]);return t(w.trun,new Uint8Array(r))},U=function(e,i){var r,n,s,o;for(i+=20+8*(n=e.samples||[]).length,r=F(n,i),o=0;o<n.length;o++)s=n[o],r=r.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size]);return t(w.trun,new Uint8Array(r))},S=function(e,t){return"audio"===e.type?U(e,t):$(e,t)};var V={ftyp:s=function(){return t(w.ftyp,C,k,C,E)},mdat:function(e){return t(w.mdat,e)},moof:l,moov:u,initSegment:function(e){var t,i=s(),r=u(e);return(t=new Uint8Array(i.byteLength+r.byteLength)).set(i),t.set(r,i.byteLength),t}},W=function(){this.init=function(){var e={};this.on=function(t,i){e[t]||(e[t]=[]),e[t]=e[t].concat(i)},this.off=function(t,i){var r;return!!e[t]&&(r=e[t].indexOf(i),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var i,r,n,s;if(i=e[t])if(2===arguments.length)for(n=i.length,r=0;r<n;++r)i[r].call(this,arguments[1]);else{for(s=[],r=arguments.length,r=1;r<arguments.length;++r)s.push(arguments[r]);for(n=i.length,r=0;r<n;++r)i[r].apply(this,s)}},this.dispose=function(){e={}}}};W.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},W.prototype.push=function(e){this.trigger("data",e)},W.prototype.flush=function(e){this.trigger("done",e)};var Q=W,G=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new J(0,0),new J(0,1),new J(1,0),new J(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};(G.prototype=new Q).push=function(e){var t,i;if("sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},r=0,n=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)n+=255,t++;if(n+=e[t++],!i.payload&&4===r){i.payloadType=r,i.payloadSize=n,i.payload=e.subarray(t,t+n);break}t+=n,r=0,n=0}return i}(e.escapedRBSP)).payloadType&&(i=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));this.captionPackets_=this.captionPackets_.concat(function(e,t){var i,r,n,s,o=[];if(!(64&t[0]))return o;for(r=31&t[0],i=0;i<r;i++)s={type:3&t[2+(n=3*i)],pts:e},4&t[n+2]&&(s.ccData=t[n+3]<<8|t[n+4],o.push(s));return o}(e.pts,i)),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},G.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},G.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},G.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},G.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},G.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var Y={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},X=function(e){return null===e?"":(e=Y[e]||e,String.fromCharCode(e))},K=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Z=function(){for(var e=[],t=15;t--;)e.push("");return e},J=function e(t,i){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,r,n,s;if((t=32639&e.ccData)!==this.lastControlCode_)if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,n=255&t,t===this.PADDING_);else if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.topRow_=13,this.mode_="rollUp";else if(t===this.ROLL_UP_3_ROWS_)this.topRow_=12,this.mode_="rollUp";else if(t===this.ROLL_UP_4_ROWS_)this.topRow_=11,this.mode_="rollUp";else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Z();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Z();else if(t===this.RESUME_DIRECT_CAPTIONING_)this.mode_="paintOn";else if(this.isSpecialCharacter(r,n))s=X((r=(3&r)<<8)|n),this[this.mode_](e.pts,s),this.column_++;else if(this.isExtCharacter(r,n))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1),s=X((r=(3&r)<<8)|n),this[this.mode_](e.pts,s),this.column_++;else if(this.isMidRowCode(r,n))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&n)&&this.addFormatting(e.pts,["i"]),1==(1&n)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,n))this.column_+=3&n;else if(this.isPAC(r,n)){var o=K.indexOf(7968&t);o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&n&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(n)&&14==(14&n)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===n&&(n=null),s=X(r),s+=X(n),this[this.mode_](e.pts,s),this.column_+=s.length);else this.lastControlCode_=null}};J.prototype=new Q,J.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},J.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Z(),this.nonDisplayed_=Z(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.formatting_=[]},J.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},J.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},J.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},J.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},J.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},J.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},J.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},J.prototype.isNormalChar=function(e){return e>=32&&e<=127},J.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},J.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},J.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},J.prototype.rollUp=function(e,t){var i=this.displayed_[14];i+=t,this.displayed_[14]=i},J.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.topRow_;e<14;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[14]=""},J.prototype.paintOn=function(){};var ee={CaptionStream:G,Cea608Stream:J},te={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},ie=function(e,t){var i=1;for(e>t&&(i=-1);Math.abs(t-e)>4294967296;)e+=8589934592*i;return e},re=function e(t){var i,r;e.prototype.init.call(this),this.type_=t,this.push=function(e){e.type===this.type_&&(void 0===r&&(r=e.dts),e.dts=ie(e.dts,r),e.pts=ie(e.pts,r),i=e.dts,this.trigger("data",e))},this.flush=function(){r=i,this.trigger("done")},this.discontinuity=function(){r=void 0,i=void 0}};re.prototype=new Q;var ne,se=re,oe=function(e,t,i){var r,n="";for(r=t;r<i;r++)n+="%"+("00"+e[r].toString(16)).slice(-2);return n},ae=function(e,t,i){return decodeURIComponent(oe(e,t,i))},le=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},ue={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=ae(e.data,1,t),e.value=ae(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=ae(e.data,1,t),e.url=ae(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,i;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(i=e.data,unescape(oe(i,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(ne=function(e){var t,i={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},r=0,n=[],s=0;if(ne.prototype.init.call(this),this.dispatchType=te.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(t=0;t<i.descriptor.length;t++)this.dispatchType+=("00"+i.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,o,a,l,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(s=0,n.length=0),0===n.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))i.debug&&console.log("Skipping unrecognized metadata packet");else if(n.push(e),s+=e.data.byteLength,1===n.length&&(r=le(e.data.subarray(6,10)),r+=10),!(s<r)){for(t={data:new Uint8Array(r),frames:[],pts:n[0].pts,dts:n[0].dts},u=0;u<r;)t.data.set(n[0].data.subarray(0,r-u),u),u+=n[0].data.byteLength,s-=n[0].data.byteLength,n.shift();o=10,64&t.data[5]&&(o+=4,o+=le(t.data.subarray(10,14)),r-=le(t.data.subarray(16,20)));do{if((a=le(t.data.subarray(o+4,o+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((l={id:String.fromCharCode(t.data[o],t.data[o+1],t.data[o+2],t.data[o+3]),data:t.data.subarray(o+10,o+a+10)}).key=l.id,ue[l.id]&&(ue[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var c=l.data,d=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;d*=4,d+=3&c[7],l.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),o+=10,o+=a}while(o<r);this.trigger("data",t)}}}).prototype=new Q;var ce,de,he,pe=ne,fe=se;(ce=function(){var e=new Uint8Array(188),t=0;ce.prototype.init.call(this),this.push=function(i){var r,n=0,s=188;for(t?((r=new Uint8Array(i.byteLength+t)).set(e.subarray(0,t)),r.set(i,t),t=0):r=i;s<r.byteLength;)71!==r[n]||71!==r[s]?(n++,s++):(this.trigger("data",r.subarray(n,s)),n+=188,s+=188);n<r.byteLength&&(e.set(r.subarray(n),0),t=r.byteLength-n)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")}}).prototype=new Q,(de=function(){var e,t,i,r;de.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var n=0;r.payloadUnitStartIndicator&&(n+=e[n]+1),"pat"===r.type?t(e.subarray(n),r):i(e.subarray(n),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},i=function(e,t){var i,n;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,n=12+((15&e[10])<<8|e[11]);n<i;){var s=e[n],o=(31&e[n+1])<<8|e[n+2];s===te.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=o:s===te.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=o:s===te.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][o]=s),n+=5+((15&e[n+3])<<8|e[n+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var i={},r=4;if(i.payloadUnitStartIndicator=!!(64&t[1]),i.pid=31&t[1],i.pid<<=8,i.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===i.pid)i.type="pat",e(t.subarray(r),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",e(t.subarray(r),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,i]):this.processPes_(t,r,i)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=te.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=te.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new Q,de.STREAM_TYPES={h264:27,adts:15},(he=function(){var e=this,t={data:[],size:0},i={data:[],size:0},r={data:[],size:0},n=function(t,i,r){var n,s,o=new Uint8Array(t.size),a={type:i},l=0,u=0;if(t.data.length&&!(t.size<9)){for(a.trackId=t.data[0].pid,l=0;l<t.data.length;l++)s=t.data[l],o.set(s.data,u),u+=s.data.byteLength;var c,d,h;c=o,(d=a).packetLength=6+(c[4]<<8|c[5]),d.dataAlignmentIndicator=0!=(4&c[6]),192&(h=c[7])&&(d.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,d.pts*=4,d.pts+=(6&c[13])>>>1,d.dts=d.pts,64&h&&(d.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,d.dts*=4,d.dts+=(6&c[18])>>>1)),d.data=c.subarray(9+c[8]),n="video"===i||a.packetLength<=t.size,(r||n)&&(t.size=0,t.data.length=0),n&&e.trigger("data",a)}};he.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,o;switch(s.streamType){case te.H264_STREAM_TYPE:case te.H264_STREAM_TYPE:e=t,o="video";break;case te.ADTS_STREAM_TYPE:e=i,o="audio";break;case te.METADATA_STREAM_TYPE:e=r,o="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&n(e,o,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},i=s.programMapTable;null!==i.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"}),null!==i.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"}),e.trigger("data",t)}})[s.type]()},this.flush=function(){n(t,"video"),n(i,"audio"),n(r,"timed-metadata"),this.trigger("done")}}).prototype=new Q;var me={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:ce,TransportParseStream:de,ElementaryStream:he,TimestampRolloverStream:fe,CaptionStream:ee.CaptionStream,Cea608Stream:ee.Cea608Stream,MetadataStream:pe};for(var ge in te)te.hasOwnProperty(ge)&&(me[ge]=te[ge]);var ye,ve=me,be=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(ye=function(){var e;ye.prototype.init.call(this),this.push=function(t){var i,r,n,s,o,a,l=0,u=0;if("audio"===t.type)for(e?(s=e,(e=new Uint8Array(s.byteLength+t.data.byteLength)).set(s),e.set(t.data,s.byteLength)):e=t.data;l+5<e.length;)if(255===e[l]&&240==(246&e[l+1])){if(r=2*(1&~e[l+1]),i=(3&e[l+3])<<11|e[l+4]<<3|(224&e[l+5])>>5,a=9e4*(o=1024*(1+(3&e[l+6])))/be[(60&e[l+2])>>>2],n=l+i,e.byteLength<n)return;if(this.trigger("data",{pts:t.pts+u*a,dts:t.dts+u*a,sampleCount:o,audioobjecttype:1+(e[l+2]>>>6&3),channelcount:(1&e[l+2])<<2|(192&e[l+3])>>>6,samplerate:be[(60&e[l+2])>>>2],samplingfrequencyindex:(60&e[l+2])>>>2,samplesize:16,data:e.subarray(l+7+r,n)}),e.byteLength===n)return void(e=void 0);u++,e=e.subarray(n)}else l++},this.flush=function(){this.trigger("done")}}).prototype=new Q;var _e,Te,Se,we=ye,Ce=function(e){var t=e.byteLength,i=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var n=e.byteLength-t,s=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");s.set(e.subarray(n,n+o)),i=new DataView(s.buffer).getUint32(0),r=8*o,t-=o},this.skipBits=function(e){var n;r>e?(i<<=e,r-=e):(e-=r,e-=8*(n=Math.floor(e/8)),t-=n,this.loadWord(),i<<=e,r-=e)},this.readBits=function(e){var n=Math.min(r,e),s=i>>>32-n;return(r-=n)>0?i<<=n:t>0&&this.loadWord(),(n=e-n)>0?s<<n|this.readBits(n):s},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!=(i&2147483648>>>e))return i<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(Te=function(){var e,t,i=0;Te.prototype.init.call(this),this.push=function(r){var n;for(t?((n=new Uint8Array(t.byteLength+r.data.byteLength)).set(t),n.set(r.data,t.byteLength),t=n):t=r.data;i<t.byteLength-3;i++)if(1===t[i+2]){e=i+5;break}for(;e<t.byteLength;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}i+3!==e-2&&this.trigger("data",t.subarray(i+3,e-2));do{e++}while(1!==t[e]&&e<t.length);i=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(i+3,e-2)),i=e-2,e+=3;break;default:e+=3}t=t.subarray(i),e-=i,i=0},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(i+3)),t=null,i=0,this.trigger("done")}}).prototype=new Q,Se={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(_e=function(){var e,t,i,r,n,s,o,a=new Te;_e.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,i=e.pts,r=e.dts,a.push(e))},a.on("data",function(o){var a={trackId:t,pts:i,dts:r,data:o};switch(31&o[0]){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=n(o.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=n(o.subarray(1)),a.config=s(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",a)}),a.on("done",function(){e.trigger("done")}),this.flush=function(){a.flush()},o=function(e,t){var i,r=8,n=8;for(i=0;i<e;i++)0!==n&&(n=(r+t.readExpGolomb()+256)%256),r=0===n?r:n},n=function(e){for(var t,i,r=e.byteLength,n=[],s=1;s<r-2;)0===e[s]&&0===e[s+1]&&3===e[s+2]?(n.push(s+2),s+=2):s++;if(0===n.length)return e;t=r-n.length,i=new Uint8Array(t);var o=0;for(s=0;s<t;o++,s++)o===n[0]&&(o++,n.shift()),i[s]=e[o];return i},s=function(e){var t,i,r,n,s,a,l,u,c,d,h,p,f,m=0,g=0,y=0,v=0,b=1;if(i=(t=new Ce(e)).readUnsignedByte(),n=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Se[i]&&(3===(s=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==s?8:12,f=0;f<h;f++)t.readBoolean()&&o(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(a=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===a)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),l=t.readUnsignedExpGolomb(),f=0;f<l;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}p&&(b=p[0]/p[1])}return{profileIdc:i,levelIdc:r,profileCompatibility:n,width:Math.ceil((16*(u+1)-2*m-2*g)*b),height:(2-d)*(c+1)*16-2*y-2*v}}}).prototype=new Q;var ke,Ee={H264Stream:_e,NalByteStream:Te};(ke=function(){var e=new Uint8Array,t=0;ke.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.parseId3TagSize=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},this.parseAdtsSize=function(e,t){var i=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|i},this.push=function(i){var r,n,s,o,a=0,l=0;for(e.length?(o=e.length,(e=new Uint8Array(i.byteLength+o)).set(e.subarray(0,o)),e.set(i,o)):e=i;e.length-l>=3;)if(e[l]!=="I".charCodeAt(0)||e[l+1]!=="D".charCodeAt(0)||e[l+2]!=="3".charCodeAt(0))if(!0&e[l]&&240==(240&e[l+1])){if(e.length-l<7)break;if((a=this.parseAdtsSize(e,l))>e.length)break;s={type:"audio",data:e.subarray(l,l+a),pts:t,dts:t},this.trigger("data",s),l+=a}else l++;else{if(e.length-l<10)break;if((a=this.parseId3TagSize(e,l))>e.length)break;n={type:"timed-metadata",data:e.subarray(l,l+a)},this.trigger("data",n),l+=a}r=e.length-l,e=r>0?e.subarray(l):new Uint8Array}}).prototype=new Q;var je,xe,Ae,Pe,Oe,Ie,Le,De=ke,Me=[33,16,5,32,164,27],Re=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Be=function(e){for(var t=[];e--;)t.push(0);return t},Ne={96000:[Me,[227,64],Be(154),[56]],88200:[Me,[231],Be(170),[56]],64000:[Me,[248,192],Be(240),[56]],48000:[Me,[255,192],Be(268),[55,148,128],Be(54),[112]],44100:[Me,[255,192],Be(268),[55,163,128],Be(84),[112]],32000:[Me,[255,192],Be(268),[55,234],Be(226),[112]],24000:[Me,[255,192],Be(268),[55,255,128],Be(268),[111,112],Be(126),[224]],16000:[Me,[255,192],Be(268),[55,255,128],Be(268),[111,255],Be(269),[223,108],Be(195),[1,192]],12000:[Re,Be(268),[3,127,248],Be(268),[6,255,240],Be(268),[13,255,224],Be(268),[27,253,128],Be(259),[56]],11025:[Re,Be(268),[3,127,248],Be(268),[6,255,240],Be(268),[13,255,224],Be(268),[27,255,192],Be(268),[55,175,128],Be(108),[112]],8000:[Re,Be(268),[3,121,16],Be(47),[7]]},Ue=(je=Ne,Object.keys(je).reduce(function(e,t){return e[t]=new Uint8Array(je[t].reduce(function(e,t){return e.concat(t)},[])),e},{}));Ie=function(e,t){return xe(Oe(e,t))},Le=function(e,t){return Ae(Pe(e),t)};xe=function(e){return 9e4*e},Ae=function(e,t){return e*t},Pe=function(e){return e/9e4},Oe=function(e,t){return e/t};var $e,Fe,ze,He,qe,Ve,We,Qe,Ge,Ye,Xe=Ie,Ke=Le,Ze=Ee.H264Stream,Je=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],et=["width","height","profileIdc","levelIdc","profileCompatibility"];qe=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},Ge=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},Ye=function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i},(Fe=function(e,t){var i=[],r=0,n=0,s=0,o=1/0;t=t||{},Fe.prototype.init.call(this),this.push=function(t){Ve(e,t),e&&Je.forEach(function(i){e[i]=t[i]}),i.push(t)},this.setEarliestDts=function(t){n=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){s=e},this.flush=function(){var n,s,o,a;0!==i.length?(n=this.trimAdtsFramesByEarliestDts_(i),e.baseMediaDecodeTime=Qe(e,t.keepOriginalTimestamps),this.prefixWithSilence_(e,n),e.samples=this.generateSampleTable_(n),o=V.mdat(this.concatenateFrameData_(n)),i=[],s=V.moof(r,[e]),a=new Uint8Array(s.byteLength+o.byteLength),r++,a.set(s),a.set(o,s.byteLength),We(e),this.trigger("data",{track:e,boxes:a}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var i,r,n,a,l=0,u=0,c=0;if(t.length&&(i=Xe(e.baseMediaDecodeTime,e.samplerate),r=Math.ceil(9e4/(e.samplerate/1024)),s&&o&&(l=i-Math.max(s,o),c=(u=Math.floor(l/r))*r),!(u<1||c>45e3))){for((n=Ue[e.samplerate])||(n=t[0].data),a=0;a<u;a++)t.splice(a,0,{data:n});e.baseMediaDecodeTime-=Math.floor(Ke(c,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(t){return e.minSegmentDts>=n?t:(e.minSegmentDts=1/0,t.filter(function(t){return t.dts>=n&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)}))},this.generateSampleTable_=function(e){var t,i,r=[];for(t=0;t<e.length;t++)i=e[t],r.push({size:i.data.byteLength,duration:1024});return r},this.concatenateFrameData_=function(e){var t,i,r=0,n=new Uint8Array(Ye(e));for(t=0;t<e.length;t++)i=e[t],n.set(i.data,r),r+=i.data.byteLength;return n}}).prototype=new Q,($e=function(e,t){var i,r,n=0,s=[],o=[];t=t||{},$e.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){Ve(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],et.forEach(function(t){e[t]=i[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),s.push(t)},this.flush=function(){for(var i,r,a,l,u,c;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=this.groupNalsIntoFrames_(s),(a=this.groupFramesIntoGops_(i))[0][0].keyFrame||((r=this.getGopForFusion_(s[0],e))?(a.unshift(r),a.byteLength+=r.byteLength,a.nalCount+=r.nalCount,a.pts=r.pts,a.dts=r.dts,a.duration+=r.duration):a=this.extendFirstKeyFrame_(a)),o.length){var d;if(!(d=t.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a)))return this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");We(e),a=d}Ve(e,a),e.samples=this.generateSampleTable_(a),u=V.mdat(this.concatenateNalData_(a)),e.baseMediaDecodeTime=Qe(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=V.moof(n,[e]),c=new Uint8Array(l.byteLength+u.byteLength),n++,c.set(l),c.set(u,l.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){We(e),i=void 0,r=void 0},this.getGopForFusion_=function(t){var i,r,n,s,o,a=1/0;for(o=0;o<this.gopCache_.length;o++)n=(s=this.gopCache_[o]).gop,e.pps&&Ge(e.pps[0],s.pps[0])&&e.sps&&Ge(e.sps[0],s.sps[0])&&(n.dts<e.timelineStartInfo.dts||(i=t.dts-n.dts-n.duration)>=-1e4&&i<=45e3&&(!r||a>i)&&(r=s,a=i));return r?r.gop:null},this.extendFirstKeyFrame_=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},this.groupNalsIntoFrames_=function(e){var t,i,r=[],n=[];for(r.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(r.length&&(r.duration=i.dts-r.dts,n.push(r)),(r=[i]).byteLength=i.data.byteLength,r.pts=i.pts,r.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(r.keyFrame=!0),r.duration=i.dts-r.dts,r.byteLength+=i.data.byteLength,r.push(i));return n.length&&(!r.duration||r.duration<=0)&&(r.duration=n[n.length-1].duration),n.push(r),n},this.groupFramesIntoGops_=function(e){var t,i,r=[],n=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(r.length&&(n.push(r),n.byteLength+=r.byteLength,n.nalCount+=r.nalCount,n.duration+=r.duration),(r=[i]).nalCount=i.length,r.byteLength=i.byteLength,r.pts=i.pts,r.dts=i.dts,r.duration=i.duration):(r.duration+=i.duration,r.nalCount+=i.length,r.byteLength+=i.byteLength,r.push(i));return n.length&&r.duration<=0&&(r.duration=n[n.length-1].duration),n.byteLength+=r.byteLength,n.nalCount+=r.nalCount,n.duration+=r.duration,n.push(r),n},this.generateSampleTable_=function(e,t){var i,r,n,s,o,a=t||0,l=[];for(i=0;i<e.length;i++)for(s=e[i],r=0;r<s.length;r++)o=s[r],(n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}).dataOffset=a,n.compositionTimeOffset=o.pts-o.dts,n.duration=o.duration,n.size=4*o.length,n.size+=o.byteLength,o.keyFrame&&(n.flags.dependsOn=2),a+=n.size,l.push(n);return l},this.concatenateNalData_=function(e){var t,i,r,n,s,o,a=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(n=e[t],i=0;i<n.length;i++)for(s=n[i],r=0;r<s.length;r++)o=s[r],d.setUint32(a,o.data.byteLength),a+=4,c.set(o.data,a),a+=o.data.byteLength;return c},this.alignGopsAtStart_=function(e){var t,i,r,n,s,a,l,u;for(s=e.byteLength,a=e.nalCount,l=e.duration,t=i=0;t<o.length&&i<e.length&&(r=o[t],n=e[i],r.pts!==n.pts);)n.pts>r.pts?t++:(i++,s-=n.byteLength,a-=n.nalCount,l-=n.duration);return 0===i?e:i===e.length?null:((u=e.slice(i)).byteLength=s,u.duration=l,u.nalCount=a,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,i,r,n,s,a,l;for(t=o.length-1,i=e.length-1,s=null,a=!1;t>=0&&i>=0;){if(r=o[t],n=e[i],r.pts===n.pts){a=!0;break}r.pts>n.pts?t--:(t===o.length-1&&(s=i),i--)}if(!a&&null===s)return null;if(0===(l=a?i:s))return e;var u=e.slice(l),c=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){o=e}}).prototype=new Q,Ve=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},We=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Qe=function(e,t){var i,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=r,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/9e4,i=Math.floor(i)),i},(He=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,He.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new Q,He.prototype.flush=function(e){var t,i,r,n,s=0,o={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,et.forEach(function(e){o.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,Je.forEach(function(e){o.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,r=V.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),n=0;n<this.pendingBoxes.length;n++)o.data.set(this.pendingBoxes[n],s),s+=this.pendingBoxes[n].byteLength;for(n=0;n<this.pendingCaptions.length;n++)(t=this.pendingCaptions[n]).startTime=t.startPts-a,t.startTime/=9e4,t.endTime=t.endPts-a,t.endTime/=9e4,o.captionStreams[t.stream]=!0,o.captions.push(t);for(n=0;n<this.pendingMetadata.length;n++)(i=this.pendingMetadata[n]).cueTime=i.pts-a,i.cueTime/=9e4,o.metadata.push(i);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(ze=function(e){var t,i,r=this,n=!0;ze.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="aac",t.metadataStream=new ve.MetadataStream,t.aacStream=new De,t.audioTimestampRolloverStream=new ve.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new ve.TimestampRolloverStream("timed-metadata"),t.adtsStream=new we,t.coalesceStream=new He(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(n){"timed-metadata"!==n.type||t.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new Fe(i,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};this.transmuxPipeline_=n,n.type="ts",n.metadataStream=new ve.MetadataStream,n.packetStream=new ve.TransportPacketStream,n.parseStream=new ve.TransportParseStream,n.elementaryStream=new ve.ElementaryStream,n.videoTimestampRolloverStream=new ve.TimestampRolloverStream("video"),n.audioTimestampRolloverStream=new ve.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new ve.TimestampRolloverStream("timed-metadata"),n.adtsStream=new we,n.h264Stream=new Ze,n.captionStream=new ve.CaptionStream,n.coalesceStream=new He(e,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream),n.elementaryStream.pipe(n.videoTimestampRolloverStream).pipe(n.h264Stream),n.elementaryStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.elementaryStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(s){var o;if("metadata"===s.type){for(o=s.tracks.length;o--;)t||"video"!==s.tracks[o].type?i||"audio"!==s.tracks[o].type||((i=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(t=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;t&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new $e(t,e),n.videoSegmentStream.on("timelineStartInfo",function(e){i&&(i.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts))}),n.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(e){i&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),i&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new Fe(i,e),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream))}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var r=this.transmuxPipeline_;this.baseMediaDecodeTime=e,i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,We(i),i.timelineStartInfo.baseMediaDecodeTime=e,r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[],r.videoTimestampRolloverStream.discontinuity()),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,We(t),r.captionStream.reset(),t.timelineStartInfo.baseMediaDecodeTime=e),r.timedMetadataTimestampRolloverStream&&r.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){i&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(n){var t=qe(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new Q;var tt={Transmuxer:ze,VideoSegmentStream:$e,AudioSegmentStream:Fe,AUDIO_PROPERTIES:Je,VIDEO_PROPERTIES:et},it={generator:V,Transmuxer:tt.Transmuxer,AudioSegmentStream:tt.AudioSegmentStream,VideoSegmentStream:tt.VideoSegmentStream},rt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},nt=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),st=function(){function e(t){rt(this,e),this.options=t||{},this.init()}return nt(e,[{key:"init",value:function(){var e;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new it.Transmuxer(this.options),(e=this.transmuxer).on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var i=e.data;e.data=i.buffer,H.postMessage({action:"data",segment:e,byteOffset:i.byteOffset,byteLength:i.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){H.postMessage({action:"caption",data:e})}),e.on("done",function(e){H.postMessage({action:"done"})}),e.on("gopInfo",function(e){H.postMessage({action:"gopInfo",gopInfo:e})})}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}();new function(e){e.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new st(e.data.options):(this.messageHandlers||(this.messageHandlers=new st),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}(i)}()}),Ll=function(e){return/mp4a\.\d+.\d+/i.test(e)},Dl=function(e){return/avc1\.[\da-f]+/i.test(e)},Ml=function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})})},Rl=function(e,t,i){if(!t||!e.length)return[];var r=Math.ceil(9e4*(t.currentTime()-i+3)),n=void 0;for(n=0;n<e.length&&!(e[n].pts>r);n++);return e.slice(n)},Bl=function(e){function t(i,r){v(this,t);var n=_(this,e.call(this,Ss.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=i,n.codecs_=r,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=Ss.browser.IE_VERSION>=11;var s={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(e){Ll(e)?n.audioCodec_=e:Dl(e)&&(n.videoCodec_=e)}),n.transmuxer_=new Il,n.transmuxer_.postMessage({action:"init",options:s}),n.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):void 0},Object.defineProperty(n,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(n,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function(){var e=null,t=null,i=0,r=[],n=[];if(!this.videoBuffer_&&!this.audioBuffer_)return Ss.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return Ss.createTimeRange();for(var s=this.videoBuffer_.buffered,o=this.audioBuffer_.buffered,a=s.length;a--;)r.push({time:s.start(a),type:"start"}),r.push({time:s.end(a),type:"end"});for(a=o.length;a--;)r.push({time:o.start(a),type:"start"}),r.push({time:o.end(a),type:"end"});for(r.sort(function(e,t){return e.time-t.time}),a=0;a<r.length;a++)"start"===r[a].type?2===++i&&(e=r[a].time):"end"===r[a].type&&1===--i&&(t=r[a].time),null!==e&&null!==t&&(n.push([e,t]),e=null,t=null);return Ss.createTimeRanges(n)}}),n}return b(t,e),t.prototype.data_=function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,i){var r=t.player_;if(i.captions&&i.captions.length)for(var n in e.inbandTextTracks_||(e.inbandTextTracks_={}),i.captionStreams)if(!e.inbandTextTracks_[n]){r.tech_.trigger({type:"usage",name:"hls-608"});var s=r.textTracks().getTrackById(n);e.inbandTextTracks_[n]=s||r.addRemoteTextTrack({kind:"captions",id:n,label:n},!1).track}i.metadata&&i.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)},t.prototype.done_=function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0},t.prototype.createRealSourceBuffers_=function(){var e=this,t=["audio","video"];t.forEach(function(i){if(e[i+"Codec_"]&&!e[i+"Buffer_"]){var r=null;if(e.mediaSource_[i+"Buffer_"])(r=e.mediaSource_[i+"Buffer_"]).updating=!1;else{var n=i+'/mp4;codecs="'+e[i+"Codec_"]+'"';r=function(e,t){var i=e.addSourceBuffer(t),r=Object.create(null);r.updating=!1,r.realBuffer_=i;var n=function(e){"function"==typeof i[e]?r[e]=function(){return i[e].apply(i,arguments)}:void 0===r[e]&&Object.defineProperty(r,e,{get:function(){return i[e]},set:function(t){return i[e]=t}})};for(var s in i)n(s);return r}(e.mediaSource_.nativeMediaSource_,n),e.mediaSource_[i+"Buffer_"]=r}e[i+"Buffer_"]=r,["update","updatestart","updateend"].forEach(function(n){r.addEventListener(n,function(){if("audio"!==i||!e.audioDisabled_)return"updateend"===n&&(e[i+"Buffer_"].updating=!1),t.every(function(t){return!("audio"!==t||!e.audioDisabled_)||(i===t||!e[t+"Buffer_"]||!e[t+"Buffer_"].updating)})?e.trigger(n):void 0})})}})},t.prototype.appendBuffer=function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:Rl(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})},t.prototype.appendGopInfo_=function(e){this.gopBuffer_=function(e,t,i){if(!t.length)return e;if(i)return t.slice();for(var r=t[0].pts,n=0;n<e.length&&!(e[n].pts>=r);n++);return e.slice(0,n).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)},t.prototype.remove=function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=function(e,t,i,r){for(var n=Math.ceil(9e4*(t-r)),s=Math.ceil(9e4*(i-r)),o=e.slice(),a=e.length;a--&&!(e[a].pts<=s););if(-1===a)return o;for(var l=a+1;l--&&!(e[l].pts<=n););return l=Math.max(l,0),o.splice(l,a-l+1),o}(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),vl(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)vl(e,t,this.inbandTextTracks_[i])},t.prototype.processPendingSegments_=function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var i=t.type,r=t.data,n=t.initSegment;return e[i].segments.push(r),e[i].bytes+=r.byteLength,e[i].initSegment=n,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[i].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),_l(this,e.captions,e.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1},t.prototype.concatAndAppendSegments_=function(e,t){var i=0,r=void 0;if(e.bytes){r=new Uint8Array(e.bytes),e.segments.forEach(function(e){r.set(e,i),i+=e.byteLength});try{t.updating=!0,t.appendBuffer(r)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}},t.prototype.abort=function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1},t}(Ss.EventTarget),Nl=function(e){function t(){v(this,t);var i=_(this,e.call(this)),r=void 0;for(r in i.nativeMediaSource_=new n.MediaSource,i.nativeMediaSource_)r in t.prototype||"function"!=typeof i.nativeMediaSource_[r]||(i[r]=i.nativeMediaSource_[r].bind(i.nativeMediaSource_));return i.duration_=NaN,Object.defineProperty(i,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){this.duration_=e,e!==1/0&&(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(i,"seekable",{get:function(){return this.duration_===1/0?Ss.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(i,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(i,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),i.sourceBuffers=[],i.activeSourceBuffers_=[],i.updateActiveSourceBuffers_=function(){if(i.activeSourceBuffers_.length=0,1===i.sourceBuffers.length){var e=i.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void i.activeSourceBuffers_.push(e)}for(var t=!1,r=!0,n=0;n<i.player_.audioTracks().length;n++){var s=i.player_.audioTracks()[n];if(s.enabled&&"main"!==s.kind){t=!0,r=!1;break}}i.sourceBuffers.forEach(function(e,n){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=t;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,r=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=n?r:!r,e.audioDisabled_))return;i.activeSourceBuffers_.push(e)})},i.onPlayerMediachange_=function(){i.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},i.onHlsReset_=function(){i.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},i.onHlsSegmentTimeMapping_=function(e){i.sourceBuffers.forEach(function(t){return t.timeMapping_=e.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},i),i.on("sourceopen",function(e){var t=u.querySelector('[src="'+i.url_+'"]');t&&(i.player_=Ss(t.parentNode),i.player_.tech_.on("hls-reset",i.onHlsReset_),i.player_.tech_.on("hls-segment-time-mapping",i.onHlsSegmentTimeMapping_),i.player_.audioTracks&&i.player_.audioTracks()&&(i.player_.audioTracks().on("change",i.updateActiveSourceBuffers_),i.player_.audioTracks().on("addtrack",i.updateActiveSourceBuffers_),i.player_.audioTracks().on("removetrack",i.updateActiveSourceBuffers_)),i.player_.on("mediachange",i.onPlayerMediachange_))}),i.on("sourceended",function(e){for(var t=bl(i.duration),r=0;r<i.sourceBuffers.length;r++){var n=i.sourceBuffers[r],s=n.metadataTrack_&&n.metadataTrack_.cues;s&&s.length&&(s[s.length-1].endTime=t)}}),i.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),i}return b(t,e),t.prototype.addSeekableRange_=function(e,t){var i=void 0;if(this.duration!==1/0)throw(i=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",i.code=11,i;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)},t.prototype.addSourceBuffer=function(e){var t=void 0,i=function(e){var t={type:"",parameters:{}},i=e.trim().split(";");return t.type=i.shift().trim(),i.forEach(function(e){var i=e.trim().split("=");if(i.length>1){var r=i[0].replace(/"/g,"").trim(),n=i[1].replace(/"/g,"").trim();t.parameters[r]=n}}),t}(e);if(/^(video|audio)\/mp2t$/i.test(i.type)){var r=[];i.parameters&&i.parameters.codecs&&(r=i.parameters.codecs.split(","),r=(r=Ml(r)).filter(function(e){return Ll(e)||Dl(e)})),0===r.length&&(r=["avc1.4d400d","mp4a.40.2"]),t=new Bl(this,r),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t},t}(Ss.EventTarget),Ul=0;Ss.mediaSources={};var $l=function(e,t){var i=Ss.mediaSources[e];if(!i)throw new Error("Media Source not found (Video.js)");i.trigger({type:"sourceopen",swfId:t})},Fl=function(){return!!n.MediaSource&&!!n.MediaSource.isTypeSupported&&n.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},zl=function(){if(this.MediaSource={open:$l,supportsNativeMediaSources:Fl},Fl())return new Nl;throw new Error("Cannot use create a virtual MediaSource for this video")};zl.open=$l,zl.supportsNativeMediaSources=Fl;var Hl={createObjectURL:function(e){var t=void 0;return e instanceof Nl?(t=n.URL.createObjectURL(e.nativeMediaSource_),e.url_=t,t):e instanceof Nl?(t="blob:vjs-media-source/"+Ul,Ul++,Ss.mediaSources[t]=e,t):(t=n.URL.createObjectURL(e),e.url_=t,t)}};Ss.MediaSource=zl,Ss.URL=Hl;var ql=Ss.EventTarget,Vl=Ss.mergeOptions,Wl=function(e,t){for(var i=Vl(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),r=0;r<t.playlists.length;r++){var n=Ra(i,t.playlists[r]);n&&(i=n)}return Ma(t,function(e,t,r,n){if(e.playlists&&e.playlists.length){var s=e.playlists[0].uri,o=Ra(i,e.playlists[0]);o&&((i=o).mediaGroups[t][r][n].playlists[0]=i.playlists[s])}}),i},Ql=function(e){function t(i,r,s,o){v(this,t);var a=_(this,e.call(this));if(a.hls_=r,a.withCredentials=s,!i)throw new Error("A non-empty playlist URL or playlist is required");return a.on("minimumUpdatePeriod",function(){a.refreshXml_()}),a.on("mediaupdatetimeout",function(){a.refreshMedia_()}),"string"==typeof i?(a.srcUrl=i,a.state="HAVE_NOTHING",_(a)):(a.masterPlaylistLoader_=o,a.state="HAVE_METADATA",a.started=!0,a.media(i),n.setTimeout(function(){a.trigger("loadedmetadata")},0),a)}return b(t,e),t.prototype.dispose=function(){this.stopRequest(),n.clearTimeout(this.mediaUpdateTimeout)},t.prototype.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},t.prototype.media=function(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var t=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var i=!this.media_||e.uri!==this.media_.uri;this.state="HAVE_METADATA",i&&(this.media_&&this.trigger("mediachanging"),this.media_=e,this.refreshMedia_(),"HAVE_MASTER"!==t&&this.trigger("mediachange"))},t.prototype.pause=function(){this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1)},t.prototype.load=function(){this.started?this.trigger("loadedplaylist"):this.start()},t.prototype.parseMasterXml=function(){var e=To(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});e.uri=this.srcUrl;for(var t=0;t<e.playlists.length;t++){var i="placeholder-uri-"+t;e.playlists[t].uri=i,e.playlists[i]=e.playlists[t]}return Ma(e,function(t,i,r,n){if(t.playlists&&t.playlists.length){var s="placeholder-uri-"+i+"-"+r+"-"+n;t.playlists[0].uri=s,e.playlists[s]=t.playlists[0]}}),Ba(e),Na(e),e},t.prototype.start=function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?e.masterLoaded_=Date.parse(i.responseHeaders.date):e.masterLoaded_=Date.now(),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}})},t.prototype.syncClientServerClock_=function(e){var t=this,i=So(this.masterXml_);return null===i?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===i.method?(this.clientOffset_=i.value-Date.now(),e()):void(this.request=this.hls_.xhr({uri:Oa(this.srcUrl,i.value),method:i.method,withCredentials:this.withCredentials},function(r,n){if(t.request){if(r)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var s=void 0;s="HEAD"===i.method?n.responseHeaders&&n.responseHeaders.date?Date.parse(n.responseHeaders.date):t.masterLoaded_:Date.parse(n.responseText),t.clientOffset_=s-Date.now(),e()}}))},t.prototype.onClientServerClockSync_=function(){var e=this;this.master=this.parseMasterXml(),this.state="HAVE_MASTER",this.trigger("loadedplaylist"),this.media_||this.media(this.master.playlists[0]),n.setTimeout(function(){e.trigger("loadedmetadata")},0),this.master.minimumUpdatePeriod&&n.setTimeout(function(){e.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)},t.prototype.refreshXml_=function(){var e=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(t,i){if(e.request){if(e.request=null,t)return e.error={status:i.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:i.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=i.responseText;var r=e.parseMasterXml();e.master=Wl(e.master,r),n.setTimeout(function(){e.trigger("minimumUpdatePeriod")},e.master.minimumUpdatePeriod)}})},t.prototype.refreshMedia_=function(){var e=this,t=void 0,i=void 0;this.masterPlaylistLoader_?(t=this.masterPlaylistLoader_.master,i=this.masterPlaylistLoader_.parseMasterXml()):(t=this.master,i=this.parseMasterXml());var r=Wl(t,i);r?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=r:this.master=r,this.media_=r.playlists[this.media_.uri]):this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=n.setTimeout(function(){e.trigger("mediaupdatetimeout")},Ua(this.media(),!!r))),this.trigger("loadedplaylist")},t}(ql),Gl=function(e){return Ss.log.debug?Ss.log.debug.bind(Ss,"VHS:",e+" >"):function(){}};function Yl(){}var Xl=function(){function e(t,i,r,n){v(this,e),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=r,this.mimeType_=i,this.logger_=Gl("SourceUpdater["+r+"]["+i+"]"),"closed"===t.readyState?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,i,n)):this.createSourceBuffer_(i,n)}return e.prototype.createSourceBuffer_=function(e,t){var i=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",function(){i.start_()}):this.start_()},e.prototype.start_=function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.logger_("buffered ["+gl(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()},e.prototype.abort=function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)},e.prototype.appendBuffer=function(e,t){var i=this;this.processedAppend_=!0,this.queueCallback_(function(){i.sourceBuffer_.appendBuffer(e)},t)},e.prototype.buffered=function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:Ss.createTimeRanges()},e.prototype.remove=function(e,t){var i=this;this.processedAppend_&&this.queueCallback_(function(){i.logger_("remove ["+e+" => "+t+"]"),i.sourceBuffer_.remove(e,t)},Yl)},e.prototype.updating=function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_},e.prototype.timestampOffset=function(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e}),this.timestampOffset_=e),this.timestampOffset_},e.prototype.queueCallback_=function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()},e.prototype.runCallback_=function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())},e.prototype.dispose=function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()},e}(),Kl={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Zl=2,Jl=-101,eu=-102,tu=function(e){var t,i,r={};return e.byterange&&(r.Range=(t=e.byterange,i=t.offset+t.length-1,"bytes="+t.offset+"-"+i)),r},iu=function(e){e.forEach(function(e){e.abort()})},ru=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Jl,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:eu,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Zl,xhr:t}:null},nu=function(e,t,i){var r=[],n=0;return function(s,o){if(s&&(iu(e),r.push(s)),(n+=1)===e.length){if(o.endOfAllRequests=Date.now(),r.length>0){var a=function(e){return e.reduce(function(e,t){return t.code>e.code?t:e})}(r);return i(a,o)}return o.encryptedBytes?function(e,t,i){e.addEventListener("message",function r(n){if(n.data.source===t.requestId){e.removeEventListener("message",r);var s=n.data.decrypted;return t.bytes=new Uint8Array(s.bytes,s.byteOffset,s.byteLength),i(null,t)}}),e.postMessage(ul({source:t.requestId,encrypted:t.encryptedBytes,key:t.key.bytes,iv:t.key.iv}),[t.encryptedBytes.buffer,t.key.bytes.buffer])}(t,o,i):i(null,o)}}},su=function(e,t){return function(i){var r,n,s;return e.stats=Ss.mergeOptions(e.stats,(n=(r=i).target,(s={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-n.requestTime||0}).bytesReceived=r.loaded,s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3),s)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(i,e)}},ou=function(e,t,i,r,n,s){var o=[],a=nu(o,i,s);if(r.key){var l=e(Ss.mergeOptions(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),function(e,t){return function(i,r){var n=r.response,s=ru(i,r);if(s)return t(s,e);if(16!==n.byteLength)return t({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Zl,xhr:r},e);var o=new DataView(n);return e.key.bytes=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),t(null,e)}}(r,a));o.push(l)}if(r.map&&!r.map.bytes){var u=e(Ss.mergeOptions(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:tu(r.map)}),function(e,t){return function(i,r){var n=r.response,s=ru(i,r);return s?t(s,e):0===n.byteLength?t({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Zl,xhr:r},e):(e.map.bytes=new Uint8Array(r.response),t(null,e))}}(r,a));o.push(u)}var c=e(Ss.mergeOptions(t,{uri:r.resolvedUri,responseType:"arraybuffer",headers:tu(r)}),function(e,t){return function(i,r){var n=r.response,s=ru(i,r);return s?t(s,e):0===n.byteLength?t({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:Zl,xhr:r},e):(e.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),e.key?e.encryptedBytes=new Uint8Array(r.response):e.bytes=new Uint8Array(r.response),t(null,e))}}(r,a));return c.addEventListener("progress",su(r,n)),o.push(c),function(){return iu(o)}},au={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},lu=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i={codecCount:0};return i.codecCount=t.split(",").length,i.codecCount=i.codecCount||2,(e=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t))&&(i.videoCodec=e[2],i.videoObjectTypeIndicator=e[3]),i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t),i.audioProfile=i.audioProfile&&i.audioProfile[2],i},uu=function(e,t,i){return e+"/"+t+'; codecs="'+i.filter(function(e){return!!e}).join(", ")+'"'},cu=function(e,t){var i=function(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"}(t),r=function(e){var t=e.attributes||{};return t.CODECS?lu(t.CODECS):au}(t),n=t.attributes||{},s=!0,o=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&n.AUDIO){var a=e.mediaGroups.AUDIO[n.AUDIO];if(a)for(var l in o=!0,s=!1,a)if(!a[l].uri&&!a[l].playlists){s=!0;break}}o&&!r.audioProfile&&(s||(r.audioProfile=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var r in i){var n=i[r];if(n.default&&n.playlists)return lu(n.playlists[0].attributes.CODECS).audioProfile}return null}(e,n.AUDIO)),r.audioProfile||(Ss.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),r.audioProfile=au.audioProfile));var u={};r.videoCodec&&(u.video=""+r.videoCodec+r.videoObjectTypeIndicator),r.audioProfile&&(u.audio="mp4a.40."+r.audioProfile);var c=uu("audio",i,[u.audio]),d=uu("video",i,[u.video]),h=uu("video",i,[u.video,u.audio]);return o?!s&&u.video?[d,c]:s||u.video?[h,c]:[c,c]:u.video?[h]:[c]},du=function(e,t){var i;return e&&(i=n.getComputedStyle(e))?i[t]:""},hu=function(e,t){var i=e.slice();e.sort(function(e,r){var n=t(e,r);return 0===n?i.indexOf(e)-i.indexOf(r):n})},pu=function(e,t){var i=void 0,r=void 0;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||n.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),i-(r=r||n.Number.MAX_VALUE)},fu=function(e,t,i){if(!e||!t)return!1;var r=i===e.segments.length;return e.endList&&"open"===t.readyState&&r},mu=function(e){return"number"==typeof e&&isFinite(e)},gu=function(e){function t(i){v(this,t);var r=_(this,e.call(this));if(!i)throw new TypeError("Initialization settings are required");if("function"!=typeof i.currentTime)throw new TypeError("No currentTime getter specified");if(!i.mediaSource)throw new TypeError("No MediaSource specified");return r.bandwidth=i.bandwidth,r.throughput={rate:0,count:0},r.roundTrip=NaN,r.resetStats_(),r.mediaIndex=null,r.hasPlayed_=i.hasPlayed,r.currentTime_=i.currentTime,r.seekable_=i.seekable,r.seeking_=i.seeking,r.duration_=i.duration,r.mediaSource_=i.mediaSource,r.hls_=i.hls,r.loaderType_=i.loaderType,r.startingMedia_=void 0,r.segmentMetadataTrack_=i.segmentMetadataTrack,r.goalBufferLength_=i.goalBufferLength,r.sourceType_=i.sourceType,r.state_="INIT",r.checkBufferTimeout_=null,r.error_=void 0,r.currentTimeline_=-1,r.pendingSegment_=null,r.mimeType_=null,r.sourceUpdater_=null,r.xhrOptions_=null,r.activeInitSegmentId_=null,r.initSegments_={},r.decrypter_=i.decrypter,r.syncController_=i.syncController,r.syncPoint_={segmentIndex:0,time:0},r.syncController_.on("syncinfoupdate",function(){return r.trigger("syncinfoupdate")}),r.mediaSource_.addEventListener("sourceopen",function(){return r.ended_=!1}),r.fetchAtBuffer_=!1,r.logger_=Gl("SegmentLoader["+r.loaderType_+"]"),Object.defineProperty(r,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),r}return b(t,e),t.prototype.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0},t.prototype.dispose=function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()},t.prototype.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},t.prototype.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null},t.prototype.error=function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_},t.prototype.endOfStream=function(){this.ended_=!0,this.pause(),this.trigger("ended")},t.prototype.buffered_=function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():Ss.createTimeRanges()},t.prototype.initSegment=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=cl(e),r=this.initSegments_[i];return t&&!r&&e.bytes&&(this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes}),r||e},t.prototype.couldBeginLoading_=function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()},t.prototype.load=function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},t.prototype.init_=function(){return this.state="READY",this.sourceUpdater_=new Xl(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()},t.prototype.playlist=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var i=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var n=i?i.id:null;if(this.logger_("playlist update ["+n+" => "+e.id+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(i&&i.uri===e.uri){var s=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+s+"]"),null!==this.mediaIndex&&(this.mediaIndex-=s),r&&(r.mediaIndex-=s,r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}else null!==this.mediaIndex&&this.resyncLoader()}},t.prototype.pause=function(){this.checkBufferTimeout_&&(n.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},t.prototype.paused=function(){return null===this.checkBufferTimeout_},t.prototype.mimeType=function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())},t.prototype.resetEverything=function(){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_()),this.trigger("reseteverything")},t.prototype.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},t.prototype.resyncLoader=function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()},t.prototype.remove=function(e,t){this.sourceUpdater_&&this.sourceUpdater_.remove(e,t),vl(e,t,this.segmentMetadataTrack_)},t.prototype.monitorBuffer_=function(){this.checkBufferTimeout_&&n.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=n.setTimeout(this.monitorBufferTick_.bind(this),1)},t.prototype.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&n.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=n.setTimeout(this.monitorBufferTick_.bind(this),500)},t.prototype.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e)fu(this.playlist_,this.mediaSource_,e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment),this.loadSegment_(e))}},t.prototype.checkBuffer_=function(e,t,i,r,n,s){var o=0,a=void 0;e.length&&(o=e.end(e.length-1));var l=Math.max(0,o-n);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!r&&l>=1)return null;if(null===s)return i=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,i,null,!0);if(null!==i){var u=t.segments[i];return a=u&&u.end?u.end:o,this.generateSegmentInfo_(t,i+1,a,!1)}if(this.fetchAtBuffer_){var c=il.getMediaInfoForTime(t,o,s.segmentIndex,s.time);i=c.mediaIndex,a=c.startTime}else{var d=il.getMediaInfoForTime(t,n,s.segmentIndex,s.time);i=d.mediaIndex,a=d.startTime}return this.generateSegmentInfo_(t,i,a,!1)},t.prototype.getSyncSegmentCandidate_=function(e){var t=this;if(-1===this.currentTimeline_)return 0;var i=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return i.length?i[Math.min(i.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)},t.prototype.generateSegmentInfo_=function(e,t,i,r){if(t<0||t>=e.segments.length)return null;var n=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:n.resolvedUri,mediaIndex:t,isSyncRequest:r,startOfSegment:i,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:n.timeline,duration:n.duration,segment:n}},t.prototype.abortRequestEarly_=function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),i=e.bandwidth,r=this.pendingSegment_.duration,n=il.estimateSegmentRequestTime(r,i,this.playlist_,e.bytesReceived),s=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return((e.length?e.end(e.length-1):0)-t)/i}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(n<=s)return!1;var o=function(e){var t=e.master,i=e.currentTime,r=e.bandwidth,n=e.duration,s=e.segmentDuration,o=e.timeUntilRebuffer,a=e.currentTimeline,l=e.syncController,u=t.playlists.filter(function(e){return!il.isIncompatible(e)}),c=u.filter(il.isEnabled);c.length||(c=u.filter(function(e){return!il.isDisabled(e)}));var d=c.filter(il.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=l.getSyncPoint(e,n,a,i)?1:2;return{playlist:e,rebufferingImpact:il.estimateSegmentRequestTime(s,r,e)*t-o}}),h=d.filter(function(e){return e.rebufferingImpact<=0});return hu(h,function(e,t){return pu(t.playlist,e.playlist)}),h.length?h[0]:(hu(d,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),d[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var a=n-s-o.rebufferingImpact,l=.5;return s<=1/30&&(l=1),!o.playlist||o.playlist.uri===this.playlist_.uri||a<l?!1:(this.bandwidth=o.playlist.attributes.BANDWIDTH*Kl.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}},t.prototype.handleProgress_=function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")},t.prototype.loadSegment_=function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=ou(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))},t.prototype.trimBackBuffer_=function(e){var t=function(e,t,i){var r=void 0;return r=e.length&&e.start(0)>0&&e.start(0)<t?e.start(0):t-30,Math.min(r,t-i)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},t.prototype.createSimplifiedSegmentObj_=function(e){var t=e.segment,i={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var r=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key={resolvedUri:t.key.resolvedUri,iv:r}}return t.map&&(i.map=this.initSegment(t.map)),i},t.prototype.segmentRequestFinished_=function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===eu?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Jl?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1},t.prototype.processSegmentResponse_=function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,this.handleSegment_()},t.prototype.handleSegment_=function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,i=t.segment,r=this.syncController_.probeSegmentInfo(t);void 0===this.startingMedia_&&r&&(r.containsAudio||r.containsVideo)&&(this.startingMedia_={containsAudio:r.containsAudio,containsVideo:r.containsVideo});var n,s,o,a=(n=this.loaderType_,s=this.startingMedia_,o=r,"main"===n&&s&&o?o.containsAudio||o.containsVideo?s.containsVideo&&!o.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!s.containsVideo&&o.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(a)return this.error({message:a,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset"));var l=this.syncController_.mappingForTimeline(t.timeline);if(null!==l&&this.trigger({type:"segmenttimemapping",mapping:l}),this.state="APPENDING",i.map){var u=cl(i.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==u){var c=this.initSegment(i.map);this.sourceUpdater_.appendBuffer(c.bytes,function(){e.activeInitSegmentId_=u})}}t.byteLength=t.bytes.byteLength,"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration,this.logger_(function(e){var t=e.segment,i=t.start,r=t.end,n=e.playlist,s=n.mediaSequence,o=n.id,a=n.segments,l=void 0===a?[]:a,u=e.mediaIndex,c=e.timeline;return["appending ["+u+"] of ["+s+", "+(s+l.length)+"] from playlist ["+o+"]","["+i+" => "+r+"] in timeline ["+c+"]"].join(" ")}(t)),this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"},t.prototype.handleUpdateEnd_=function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,i=null!==this.mediaIndex;(this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration)?this.resetEverything():(i&&this.trigger("bandwidthupdate"),this.trigger("progress"),fu(e.playlist,this.mediaSource_,e.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())},t.prototype.recordThroughput_=function(e){var t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count},t.prototype.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,i=t.start,r=t.end;if(mu(i)&&mu(r)){vl(i,r,this.segmentMetadataTrack_);var s=n.WebKitDataCue||n.VTTCue,o={bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:i,end:r},a=new s(i,r,JSON.stringify(o));a.value=o,this.segmentMetadataTrack_.addCue(a)}}},t}(Ss.EventTarget),yu=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),vu=function(e){return String.fromCharCode.apply(null,e)},bu=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,t);var n=_(this,e.call(this,i,r));return n.mediaSource_=null,n.subtitlesTrack_=null,n}return b(t,e),t.prototype.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Ss.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return Ss.createTimeRanges([[t,i]])},t.prototype.initSegment=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var i=cl(e),r=this.initSegments_[i];if(t&&!r&&e.bytes){var n=yu.byteLength+e.bytes.byteLength,s=new Uint8Array(n);s.set(e.bytes),s.set(yu,e.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:s}}return r||e},t.prototype.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},t.prototype.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.prototype.track=function(e){return void 0===e?this.subtitlesTrack_:(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},t.prototype.remove=function(e,t){vl(e,t,this.subtitlesTrack_)},t.prototype.fillBuffer_=function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}},t.prototype.skipEmptySegments_=function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e},t.prototype.handleSegment_=function(){var e=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var t=this.pendingSegment_,i=t.segment;if("function"!=typeof n.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var r=function(){e.handleSegment_()};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",r),void this.subtitlesTrack_.tech_.one("vttjserror",function(){e.subtitlesTrack_.tech_.off("vttjsloaded",r),e.error({message:"Error loading vtt.js"}),e.state="READY",e.pause(),e.trigger("error")})}i.requested=!0;try{this.parseVTTCues_(t)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(t,this.syncController_.timelines[t.timeline],this.playlist_),t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");t.byteLength=t.bytes.byteLength,this.mediaSecondsLoaded+=i.duration,t.cues.length&&this.remove(t.cues[0].endTime,t.cues[t.cues.length-1].endTime),t.cues.forEach(function(t){e.subtitlesTrack_.addCue(t)}),this.handleUpdateEnd_()}else this.state="READY"},t.prototype.parseVTTCues_=function(e){var t=void 0,i=!1;"function"==typeof n.TextDecoder?t=new n.TextDecoder("utf8"):(t=n.WebVTT.StringDecoder(),i=!0);var r=new n.WebVTT.Parser(n,n.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=function(t){return e.timestampmap=t},r.onparsingerror=function(e){Ss.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var s=e.segment.map.bytes;i&&(s=vu(s)),r.parse(s)}var o=e.bytes;i&&(o=vu(o)),r.parse(o),r.flush()},t.prototype.updateTimeMapping_=function(e,t,i){var r=e.segment;if(t)if(e.cues.length){var n=e.timestampmap,s=n.MPEGTS/9e4-n.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=s,e.endTime+=s}),!i.syncInfo){var o=e.cues[0].startTime,a=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(o,a-r.duration)}}}else r.empty=!0},t}(gu),_u=function(e,t){for(var i=e.cues,r=0;r<i.length;r++){var n=i[r];if(t>=n.adStartTime&&t<=n.adEndTime)return n}return null},Tu=ba,Su=[{name:"VOD",run:function(e,t,i,r,n){if(i!==1/0){return{time:0,segmentIndex:0}}return null}},{name:"ProgramDateTime",run:function(e,t,i,r,n){if(!e.datetimeToDisplayTime)return null;var s=t.segments||[],o=null,a=null;n=n||0;for(var l=0;l<s.length;l++){var u=s[l];if(u.dateTimeObject){var c=u.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(n-c);if(null!==a&&a<d)break;a=d,o={time:c,segmentIndex:l}}}return o}},{name:"Segment",run:function(e,t,i,r,n){var s=t.segments||[],o=null,a=null;n=n||0;for(var l=0;l<s.length;l++){var u=s[l];if(u.timeline===r&&void 0!==u.start){var c=Math.abs(n-u.start);if(null!==a&&a<c)break;(!o||null===a||a>=c)&&(a=c,o={time:u.start,segmentIndex:l})}}return o}},{name:"Discontinuity",run:function(e,t,i,r,n){var s=null;if(n=n||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,a=0;a<t.discontinuityStarts.length;a++){var l=t.discontinuityStarts[a],u=t.discontinuitySequence+a+1,c=e.discontinuities[u];if(c){var d=Math.abs(n-c.time);if(null!==o&&o<d)break;(!s||null===o||o>=d)&&(o=d,s={time:c.time,segmentIndex:l})}}return s}},{name:"Playlist",run:function(e,t,i,r,n){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],wu=function(e){function t(){v(this,t);var i=_(this,e.call(this));return i.inspectCache_=void 0,i.timelines=[],i.discontinuities=[],i.datetimeToDisplayTime=null,i.logger_=Gl("SyncController"),i}return b(t,e),t.prototype.getSyncPoint=function(e,t,i,r){var n=this.runStrategies_(e,t,i,r);return n.length?this.selectSyncPoint_(n,{key:"time",value:r}):null},t.prototype.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;var r=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+qa(e,r.segmentIndex,0))},t.prototype.runStrategies_=function(e,t,i,r){for(var n=[],s=0;s<Su.length;s++){var o=Su[s],a=o.run(this,e,t,i,r);a&&(a.strategy=o.name,n.push({strategy:o.name,syncPoint:a}))}return n},t.prototype.selectSyncPoint_=function(e,t){for(var i=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),n=e[0].strategy,s=1;s<e.length;s++){var o=Math.abs(e[s].syncPoint[t.key]-t.value);o<r&&(r=o,i=e[s].syncPoint,n=e[s].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+n+"]: [time:"+i.time+", segmentIndex:"+i.segmentIndex+"]"),i},t.prototype.saveExpiredSegmentInfo=function(e,t){for(var i=t.mediaSequence-e.mediaSequence-1;i>=0;i--){var r=e.segments[i];if(r&&void 0!==r.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:r.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},t.prototype.setDateTimeMapping=function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}},t.prototype.reset=function(){this.inspectCache_=void 0},t.prototype.probeSegmentInfo=function(e){var t=e.segment,i=e.playlist,r=void 0;return(r=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,r)&&(this.saveDiscontinuitySyncInfo_(e),i.syncInfo||(i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:t.start})),r},t.prototype.probeMp4Segment_=function(e){var t=e.segment,i=jo(t.map.bytes),r=xo(i,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=r),{start:r,end:r+t.duration}},t.prototype.probeTsSegment_=function(e){var t=Tu(e.bytes,this.inspectCache_),i=void 0,r=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,i=t.video[0].dtsTime,r=t.video[1].dtsTime):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,i=t.audio[0].dtsTime,r=t.audio[1].dtsTime),{start:i,end:r,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null},t.prototype.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},t.prototype.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},t.prototype.calculateSegmentTimeMapping_=function(e,t){var i=e.segment,r=this.timelines[e.timeline];if(null!==e.timestampOffset)r={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=r,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+r.time+"] [mapping: "+r.mapping+"]"),i.start=e.startOfSegment,i.end=t.end+r.mapping;else{if(!r)return!1;i.start=t.start+r.mapping,i.end=t.end+r.mapping}return!0},t.prototype.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var r=0;r<t.discontinuityStarts.length;r++){var n=t.discontinuityStarts[r],s=t.discontinuitySequence+r+1,o=n-e.mediaIndex,a=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>a){var l=void 0;l=o<0?i.start-qa(t,e.mediaIndex,n):i.end+qa(t,e.mediaIndex+1,n),this.discontinuities[s]={time:l,accuracy:a}}}},t}(Ss.EventTarget),Cu=new jl("./decrypter-worker.worker.js",function(e,t){var i=this;!function(){var t=void 0!==e?e:"undefined"!=typeof global?global:void 0!==i?i:{},r=void 0!==e?e:void 0!==t?t:void 0!==i?i:{};var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":y(t))&&"function"!=typeof t?e:t},a=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],r=t[4],n=i[4],s=void 0,o=void 0,a=void 0,l=[],u=[],c=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(s=0;s<256;s++)u[(l[s]=s<<1^283*(s>>7))^s]=s;for(o=a=0;!r[o];o^=c||1,a=u[a]||1)for(h=(h=a^a<<1^a<<2^a<<3^a<<4)>>8^255&h^99,r[o]=h,n[h]=o,f=16843009*l[d=l[c=l[o]]]^65537*d^257*c^16843008*o,p=257*l[h]^16843008*h,s=0;s<4;s++)t[s][o]=p=p<<24^p>>>8,i[s][h]=f=f<<24^f>>>8;for(s=0;s<5;s++)t[s]=t[s].slice(0),i[s]=i[s].slice(0);return e},l=null,u=function(){function e(t){n(this,e),l||(l=a()),this._tables=[[l[0][0].slice(),l[0][1].slice(),l[0][2].slice(),l[0][3].slice(),l[0][4].slice()],[l[1][0].slice(),l[1][1].slice(),l[1][2].slice(),l[1][3].slice(),l[1][4].slice()]];var i=void 0,r=void 0,s=void 0,o=void 0,u=void 0,c=this._tables[0][4],d=this._tables[1],h=t.length,p=1;if(4!==h&&6!==h&&8!==h)throw new Error("Invalid aes key size");for(o=t.slice(0),u=[],this._key=[o,u],i=h;i<4*h+28;i++)s=o[i-1],(i%h==0||8===h&&i%h==4)&&(s=c[s>>>24]<<24^c[s>>16&255]<<16^c[s>>8&255]<<8^c[255&s],i%h==0&&(s=s<<8^s>>>24^p<<24,p=p<<1^283*(p>>7))),o[i]=o[i-h]^s;for(r=0;i;r++,i--)s=o[3&r?i:i-4],u[r]=i<=4||r<4?s:d[0][c[s>>>24]]^d[1][c[s>>16&255]]^d[2][c[s>>8&255]]^d[3][c[255&s]]}return e.prototype.decrypt=function(e,t,i,r,n,s){var o=this._key[1],a=e^o[0],l=r^o[1],u=i^o[2],c=t^o[3],d=void 0,h=void 0,p=void 0,f=o.length/4-2,m=void 0,g=4,y=this._tables[1],v=y[0],b=y[1],_=y[2],T=y[3],S=y[4];for(m=0;m<f;m++)d=v[a>>>24]^b[l>>16&255]^_[u>>8&255]^T[255&c]^o[g],h=v[l>>>24]^b[u>>16&255]^_[c>>8&255]^T[255&a]^o[g+1],p=v[u>>>24]^b[c>>16&255]^_[a>>8&255]^T[255&l]^o[g+2],c=v[c>>>24]^b[a>>16&255]^_[l>>8&255]^T[255&u]^o[g+3],g+=4,a=d,l=h,u=p;for(m=0;m<4;m++)n[(3&-m)+s]=S[a>>>24]<<24^S[l>>16&255]<<16^S[u>>8&255]<<8^S[255&c]^o[g++],d=a,a=l,l=u,u=c,c=d},e}(),c=function(){function e(){n(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),i>-1},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var i=t.length,r=0;r<i;++r)t[r].call(this,arguments[1]);else for(var n=Array.prototype.slice.call(arguments,1),s=t.length,o=0;o<s;++o)t[o].apply(this,n)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),d=function(e){function t(){n(this,t);var i=o(this,e.call(this,c));return i.jobs=[],i.delay=1,i.timeout_=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":y(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},t.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(c),h=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},p=function(){function e(t,i,r,s){n(this,e);var o=e.STEP,a=new Int32Array(t.buffer),l=new Uint8Array(t.byteLength),u=0;for(this.asyncStream_=new d,this.asyncStream_.push(this.decryptChunk_(a.subarray(u,u+o),i,r,l)),u=o;u<a.length;u+=o)r=new Uint32Array([h(a[u-4]),h(a[u-3]),h(a[u-2]),h(a[u-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(u,u+o),i,r,l));this.asyncStream_.push(function(){var e;s(null,(e=l).subarray(0,e.byteLength-e[e.byteLength-1]))})}return e.prototype.decryptChunk_=function(e,t,i,r){return function(){var n=function(e,t,i){var r=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),n=new u(Array.prototype.slice.call(t)),s=new Uint8Array(e.byteLength),o=new Int32Array(s.buffer),a=void 0,l=void 0,c=void 0,d=void 0,p=void 0,f=void 0,m=void 0,g=void 0,y=void 0;for(a=i[0],l=i[1],c=i[2],d=i[3],y=0;y<r.length;y+=4)p=h(r[y]),f=h(r[y+1]),m=h(r[y+2]),g=h(r[y+3]),n.decrypt(p,f,m,g,o,y),o[y]=h(o[y]^a),o[y+1]=h(o[y+1]^l),o[y+2]=h(o[y+2]^c),o[y+3]=h(o[y+3]^d),a=p,l=f,c=m,d=g;return s}(e,t,i);r.set(n,e.byteOffset)}},s(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}();new function(e){e.onmessage=function(e){var t=e.data,i=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),n=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),s=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new p(i,n,s,function(e,i){var n,s;r.postMessage((n={source:t.source,decrypted:i},s={},Object.keys(n).forEach(function(e){var t=n[e];ArrayBuffer.isView(t)?s[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:s[e]=t}),s),[i.buffer])})}}(i)}()}),ku=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Eu=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},ju=function(e,t){t.activePlaylistLoader=e,e.load()},xu={AUDIO:function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e],n=t.blacklistCurrentPlaylist;Eu(i,r);var s=r.activeTrack(),o=r.activeGroup(),a=(o.filter(function(e){return e.default})[0]||o[0]).id,l=r.tracks[a];if(s!==l){for(var u in Ss.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),r.tracks)r.tracks[u].enabled=r.tracks[u]===l;r.onTrackChanged()}else n({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e];Ss.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Eu(i,r);var n=r.activeTrack();n&&(n.mode="disabled"),r.onTrackChanged()}}},Au={AUDIO:function(e,t,i){if(t){var r=i.tech,n=i.requestOptions,s=i.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();s.playlist(e,n),(!r.paused()||e.endList&&"none"!==r.preload())&&s.load()}),t.on("loadedplaylist",function(){s.playlist(t.media(),n),r.paused()||s.load()}),t.on("error",xu[e](e,i))}},SUBTITLES:function(e,t,i){var r=i.tech,n=i.requestOptions,s=i.segmentLoaders[e],o=i.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();s.playlist(e,n),s.track(o.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&s.load()}),t.on("loadedplaylist",function(){s.playlist(t.media(),n),r.paused()||s.load()}),t.on("error",xu[e](e,i))}},Pu=function(e,t){return function(i){return i.attributes[e]===t}},Ou=function(e){return function(t){return t.resolvedUri===e}},Iu={AUDIO:function(e,t){var i=t.hls,r=t.sourceType,n=t.segmentLoaders[e],s=t.requestOptions.withCredentials,o=t.master,a=o.mediaGroups,l=o.playlists,u=t.mediaTypes[e],c=u.groups,d=u.tracks,h=t.masterPlaylistLoader;for(var p in a[e]&&0!==Object.keys(a[e]).length||(a[e]={main:{default:{default:!0}}}),a[e]){c[p]||(c[p]=[]);var f=l.filter(Pu(e,p));for(var m in a[e][p]){var g=a[e][p][m];f.filter(Ou(g.resolvedUri)).length&&delete g.resolvedUri;var y=void 0;if(y=g.resolvedUri?new $a(g.resolvedUri,i,s):g.playlists&&"dash"===r?new Ql(g.playlists[0],i,s,h):null,g=Ss.mergeOptions({id:m,playlistLoader:y},g),Au[e](e,g.playlistLoader,t),c[p].push(g),void 0===d[m]){var v=new Ss.AudioTrack({id:m,kind:ku(g),enabled:!1,language:g.language,default:g.default,label:m});d[m]=v}}}n.on("error",xu[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,r=t.hls,n=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions.withCredentials,a=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.masterPlaylistLoader;for(var h in a[e])for(var p in u[h]||(u[h]=[]),a[e][h])if(!a[e][h][p].forced){var f=a[e][h][p],m=void 0;if("hls"===n?m=new $a(f.resolvedUri,r,o):"dash"===n&&(m=new Ql(f.playlists[0],r,o,d)),f=Ss.mergeOptions({id:p,playlistLoader:m},f),Au[e](e,f.playlistLoader,t),u[h].push(f),void 0===c[p]){var g=i.addRemoteTextTrack({id:p,kind:"subtitles",enabled:!1,language:f.language,label:p},!1).track;c[p]=g}}s.on("error",xu[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,r=t.master.mediaGroups,n=t.mediaTypes[e],s=n.groups,o=n.tracks;for(var a in r[e])for(var l in s[a]||(s[a]=[]),r[e][a]){var u=r[e][a][l];if(u.instreamId.match(/CC\d/)&&(s[a].push(Ss.mergeOptions({id:l},u)),void 0===o[l])){var c=i.addRemoteTextTrack({id:u.instreamId,kind:"captions",enabled:!1,language:u.language,label:l},!1).track;o[l]=c}}}},Lu={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var r in i)if(i[r].enabled)return i[r];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var r in i)if("showing"===i[r].mode)return i[r];return null}}},Du=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){Iu[t](t,e)});var t=e.mediaTypes,i=e.masterPlaylistLoader,r=e.tech,n=e.hls;["AUDIO","SUBTITLES"].forEach(function(i){t[i].activeGroup=function(e,t){return function(i){var r=t.masterPlaylistLoader,n=t.mediaTypes[e].groups,s=r.media();if(!s)return null;var o=null;return s.attributes[e]&&(o=n[s.attributes[e]]),o=o||n.main,void 0===i?o:null===i?null:o.filter(function(e){return e.id===i.id})[0]||null}}(i,e),t[i].activeTrack=Lu[i](i,e),t[i].onGroupChanged=function(e,t){return function(){var i=t.segmentLoaders,r=i[e],n=i.main,s=t.mediaTypes[e],o=s.activeTrack(),a=s.activeGroup(o),l=s.activePlaylistLoader;Eu(r,s),a&&(a.playlistLoader?(r.resyncLoader(),ju(a.playlistLoader,s)):l&&n.resetEverything())}}(i,e),t[i].onTrackChanged=function(e,t){return function(){var i=t.segmentLoaders,r=i[e],n=i.main,s=t.mediaTypes[e],o=s.activeTrack(),a=s.activeGroup(o),l=s.activePlaylistLoader;Eu(r,s),a&&(a.playlistLoader?l!==a.playlistLoader?(r.track&&r.track(o),r.resetEverything(),ju(a.playlistLoader,s)):ju(a.playlistLoader,s):n.resetEverything())}}(i,e)});var s=t.AUDIO.activeGroup(),o=(s.filter(function(e){return e.default})[0]||s[0]).id;t.AUDIO.tracks[o].enabled=!0,t.AUDIO.onTrackChanged(),i.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return t[e].onGroupChanged()})});var a=function(){t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"hls-audio-change"})};for(var l in r.audioTracks().addEventListener("change",a),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),n.on("dispose",function(){r.audioTracks().removeEventListener("change",a),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),r.clearTracks("audio"),t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[l])},Mu=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Yl,activeTrack:Yl,onGroupChanged:Yl,onTrackChanged:Yl}}),e},Ru=void 0,Bu=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Nu=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Uu=function(e){function t(i){v(this,t);var r=_(this,e.call(this)),n=i.url,s=i.withCredentials,o=i.tech,a=i.bandwidth,l=i.externHls,u=i.useCueTags,c=i.blacklistDuration,d=i.enableLowInitialPlaylist,h=i.sourceType;if(!n)throw new Error("A non-empty playlist URL is required");Ru=l,r.withCredentials=s,r.tech_=o,r.hls_=o.hls,r.sourceType_=h,r.useCueTags_=u,r.blacklistDuration=c,r.enableLowInitialPlaylist=d,r.useCueTags_&&(r.cueTagsTrack_=r.tech_.addTextTrack("metadata","ad-cues"),r.cueTagsTrack_.inBandMetadataTrackDispatchType=""),r.requestOptions_={withCredentials:r.withCredentials,timeout:null},r.mediaTypes_=Mu(),r.mediaSource=new Ss.MediaSource,r.mediaSource.addEventListener("sourceopen",r.handleSourceOpen_.bind(r)),r.seekable_=Ss.createTimeRanges(),r.hasPlayed_=function(){return!1},r.syncController_=new wu(i),r.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,r.decrypter_=new Cu;var p={hls:r.hls_,mediaSource:r.mediaSource,currentTime:r.tech_.currentTime.bind(r.tech_),seekable:function(){return r.seekable()},seeking:function(){return r.tech_.seeking()},duration:function(){return r.mediaSource.duration},hasPlayed:function(){return r.hasPlayed_()},goalBufferLength:function(){return r.goalBufferLength()},bandwidth:a,syncController:r.syncController_,decrypter:r.decrypter_,sourceType:r.sourceType_};return r.masterPlaylistLoader_="dash"===r.sourceType_?new Ql(n,r.hls_,r.withCredentials):new $a(n,r.hls_,r.withCredentials),r.setupMasterPlaylistLoaderListeners_(),r.mainSegmentLoader_=new gu(Ss.mergeOptions(p,{segmentMetadataTrack:r.segmentMetadataTrack_,loaderType:"main"}),i),r.audioSegmentLoader_=new gu(Ss.mergeOptions(p,{loaderType:"audio"}),i),r.subtitleSegmentLoader_=new bu(Ss.mergeOptions(p,{loaderType:"vtt"}),i),r.setupSegmentLoaderListeners_(),Bu.forEach(function(e){r[e+"_"]=Nu.bind(r,e)}),r.logger_=Gl("MPC"),r.masterPlaylistLoader_.load(),r}return b(t,e),t.prototype.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*e.masterPlaylistLoader_.targetDuration*1e3;tl(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),Du({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t);try{e.setupSourceBuffers_()}catch(t){return Ss.log.warn("Failed to create SourceBuffers",t),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),e.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=e.masterPlaylistLoader_.media();if(!t){e.excludeUnsupportedVariants_();var i=void 0;return e.enableLowInitialPlaylist&&(i=e.selectInitialPlaylist()),i||(i=e.selectPlaylist()),e.initialMedia_=i,void e.masterPlaylistLoader_.media(e.initialMedia_)}if(e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||e.mainSegmentLoader_.load(),!t.endList){var r=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))};if(e.duration()!==1/0){e.tech_.one("durationchange",function t(){e.duration()===1/0?r():e.tech_.one("durationchange",t)})}else r()}}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),i=1.5*e.masterPlaylistLoader_.targetDuration*1e3;tl(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=i,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},t.prototype.triggerPresenceUsage_=function(e,t){var i=e.mediaGroups||{},r=!0,n=Object.keys(i.AUDIO);for(var s in i.AUDIO)for(var o in i.AUDIO[s]){i.AUDIO[s][o].uri||(r=!1)}r&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),Ru.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),Ru.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),n.length&&Object.keys(i.AUDIO[n[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})},t.prototype.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var t=e.selectPlaylist(),i=e.masterPlaylistLoader_.media(),r=e.tech_.buffered(),n=r.length?r.end(r.length-1)-e.tech_.currentTime():0,s=e.bufferLowWaterLine();(!i.endList||e.duration()<Kl.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<i.attributes.BANDWIDTH||n>=s)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){e.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(t){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})}),this.audioSegmentLoader_.on("ended",function(){e.onEndOfStream()})},t.prototype.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},t.prototype.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},t.prototype.fastQualityChange_=function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())},t.prototype.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},t.prototype.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var i=this.seekable();if(!i.length)return!1;if(Ss.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(i.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(i.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0},t.prototype.handleSourceOpen_=function(){try{this.setupSourceBuffers_()}catch(e){return Ss.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")},t.prototype.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e&&this.mediaSource.endOfStream()},t.prototype.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var i=Ru.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),n=this.tech_.buffered();if(!n.length)return i-r<=.1;var s=n.end(n.length-1);return s-r<=.1&&i-s<=.1},t.prototype.blacklistCurrentPlaylist=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],r=void 0;if(r=t.playlist||this.masterPlaylistLoader_.media(),i=i||t.blacklistDuration||this.blacklistDuration,!r){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var n=1===this.masterPlaylistLoader_.master.playlists.filter(Ja).length;return n?(Ss.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(n)):(r.excludeUntil=Date.now()+1e3*i,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),e=this.selectPlaylist(),Ss.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(e))},t.prototype.pauseLoading=function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()},t.prototype.setCurrentTime=function(e){var t=fl(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},t.prototype.duration=function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:Ru.Playlist.duration(this.masterPlaylistLoader_.media()):0},t.prototype.seekable=function(){return this.seekable_},t.prototype.onSyncInfoUpdate_=function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var i=this.masterPlaylistLoader_.media();if(i){var r=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(null!==r&&0!==(e=Ru.Playlist.seekable(i,r)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(i=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(r=this.syncController_.getExpiredTime(i,this.mediaSource.duration)))return;if(0===(t=Ru.Playlist.seekable(i,r)).length)return}t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=Ss.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.logger_("seekable updated ["+gl(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")}}}},t.prototype.updateDuration=function(){var e=this,t=this.mediaSource.duration,i=Ru.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered(),n=function t(){e.mediaSource.duration=i,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)};r.length>0&&(i=Math.max(i,r.end(r.length-1))),t!==i&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",n):n())},t.prototype.dispose=function(){var e=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(t){var i=e.mediaTypes_[t].groups;for(var r in i)i[r].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()},t.prototype.master=function(){return this.masterPlaylistLoader_.master},t.prototype.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},t.prototype.setupSourceBuffers_=function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=cu(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}},t.prototype.configureLoaderMimeTypes_=function(e){var t=e.length>1&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new Ss.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)},t.prototype.excludeUnsupportedVariants_=function(){this.master().playlists.forEach(function(e){var t;e.attributes.CODECS&&n.MediaSource&&n.MediaSource.isTypeSupported&&!n.MediaSource.isTypeSupported('video/mp4; codecs="'+(t=e.attributes.CODECS,t.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return Ml([e])[0]}))+'"')&&(e.excludeUntil=1/0)})},t.prototype.excludeIncompatibleVariants_=function(e){var t=2,i=null,r=void 0;e.attributes.CODECS&&(r=lu(e.attributes.CODECS),i=r.videoCodec,t=r.codecCount),this.master().playlists.forEach(function(e){var r={codecCount:2,videoCodec:null};e.attributes.CODECS&&(r=lu(e.attributes.CODECS)),r.codecCount!==t&&(e.excludeUntil=1/0),r.videoCodec!==i&&(e.excludeUntil=1/0)})},t.prototype.updateAdCues_=function(e){var t=0,i=this.seekable();i.length&&(t=i.start(0)),function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.segments)for(var r=i,s=void 0,o=0;o<e.segments.length;o++){var a=e.segments[o];if(s||(s=_u(t,r+a.duration/2)),s){if("cueIn"in a){s.endTime=r,s.adEndTime=r,r+=a.duration,s=null;continue}if(r<s.endTime){r+=a.duration;continue}s.endTime+=a.duration}else if("cueOut"in a&&((s=new n.VTTCue(r,r+a.duration,a.cueOut)).adStartTime=r,s.adEndTime=r+parseFloat(a.cueOut),t.addCue(s)),"cueOutCont"in a){var l,u,c=a.cueOutCont.split("/").map(parseFloat);l=c[0],u=c[1],(s=new n.VTTCue(r,r+a.duration,"")).adStartTime=r-l,s.adEndTime=s.adStartTime+u,t.addCue(s)}r+=a.duration}}(e,this.cueTagsTrack_,t)},t.prototype.goalBufferLength=function(){var e=this.tech_.currentTime(),t=Kl.GOAL_BUFFER_LENGTH,i=Kl.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,Kl.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,r)},t.prototype.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=Kl.BUFFER_LOW_WATER_LINE,i=Kl.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,Kl.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,r)},t}(Ss.EventTarget),$u=function e(t,i,r){v(this,e);var n,s,o,a=t.masterPlaylistController_.fastQualityChange_.bind(t.masterPlaylistController_);if(i.attributes.RESOLUTION){var l=i.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=i.attributes.BANDWIDTH,this.id=r,this.enabled=(n=t.playlists,s=i.uri,o=a,function(e){var t=n.master.playlists[s],i=Za(t),r=Ja(t);return void 0===e?r:(e?delete t.disabled:t.disabled=!0,e===r||i||(o(),e?n.trigger("renditionenabled"):n.trigger("renditiondisabled")),e)})},Fu=["seeking","seeked","pause","playing","error"],zu=function(){function e(t){var i=this;v(this,e),this.tech_=t.tech,this.seekable=t.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Gl("PlaybackWatcher"),this.logger_("initialize");var r=function(){return i.monitorCurrentTime_()},s=function(){return i.techWaiting_()},o=function(){return i.cancelTimer_()},a=function(){return i.fixesBadSeeks_()};this.tech_.on("seekablechanged",a),this.tech_.on("waiting",s),this.tech_.on(Fu,o),this.tech_.on("canplay",r),this.dispose=function(){i.logger_("dispose"),i.tech_.off("seekablechanged",a),i.tech_.off("waiting",s),i.tech_.off(Fu,o),i.tech_.off("canplay",r),i.checkCurrentTimeTimeout_&&n.clearTimeout(i.checkCurrentTimeTimeout_),i.cancelTimer_()}}return e.prototype.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&n.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=n.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.prototype.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},e.prototype.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.prototype.fixesBadSeeks_=function(){var e=this.tech_.seeking(),t=this.seekable(),i=this.tech_.currentTime(),r=void 0;e&&this.afterSeekableWindow_(t,i)&&(r=t.end(t.length-1));e&&this.beforeSeekableWindow_(t,i)&&(r=t.start(0)+.1);return void 0!==r&&(this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+gl(t)+". Seeking to "+r+"."),this.tech_.setCurrentTime(r),!0)},e.prototype.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),i=fl(t,e);i.length&&e+3<=i.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+i.start(0)+" -> "+i.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}},e.prototype.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var i=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.buffered(),n=ml(r,t);if(this.videoUnderflow_(n,r,t))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(n.length>0){var s=n.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+n.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1},e.prototype.afterSeekableWindow_=function(e,t){return!!e.length&&t>e.end(e.length-1)+.1},e.prototype.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-.1)},e.prototype.videoUnderflow_=function(e,t,i){if(0===e.length){var r=this.gapFromVideoUnderflow_(t,i);if(r)return this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+i),!0}return!1},e.prototype.skipTheGap_=function(e){var t=this.tech_.buffered(),i=this.tech_.currentTime(),r=ml(t,i);this.cancelTimer_(),0!==r.length&&i===e&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+1/30),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.prototype.gapFromVideoUnderflow_=function(e,t){for(var i=function(e){if(e.length<2)return Ss.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var r=e.end(i-1),n=e.start(i);t.push([r,n])}return Ss.createTimeRanges(t)}(e),r=0;r<i.length;r++){var n=i.start(r),s=i.end(r);if(t-n<4&&t-n>2)return{start:n,end:s}}return null},e}(),Hu={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},qu=function(e){!function e(t,i){var r=0,n=0,s=Ss.mergeOptions(Hu,i);t.ready(function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var o=function(){n&&t.currentTime(n)},a=function(e){null!=e&&(n=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",o),t.src(e),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){if(Date.now()-r<1e3*s.errorInterval)t.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(s.getSource&&"function"==typeof s.getSource)return r=Date.now(),s.getSource.call(t,a);Ss.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function e(){t.off("loadedmetadata",o),t.off("error",l),t.off("dispose",e)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=function(i){u(),e(t,i)}}(this,e)},Vu={PlaylistLoader:$a,Playlist:il,Decrypter:Pa,AsyncStream:ja,decrypt:Aa,utils:hl,STANDARD_PLAYLIST_SELECTOR:function(){return function(e,t,i,r){var s=e.playlists.map(function(e){var t,i;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,{bandwidth:e.attributes.BANDWIDTH||n.Number.MAX_VALUE,width:t,height:i,playlist:e}});hu(s,function(e,t){return e.bandwidth-t.bandwidth});var o=(s=s.filter(function(e){return!il.isIncompatible(e.playlist)})).filter(function(e){return il.isEnabled(e.playlist)});o.length||(o=s.filter(function(e){return!il.isDisabled(e.playlist)}));var a=o.filter(function(e){return e.bandwidth*Kl.BANDWIDTH_VARIANCE<t}),l=a[a.length-1],u=a.filter(function(e){return e.bandwidth===l.bandwidth})[0],c=a.filter(function(e){return e.width&&e.height});hu(c,function(e,t){return e.width-t.width});var d=c.filter(function(e){return e.width===i&&e.height===r});l=d[d.length-1];var h=d.filter(function(e){return e.bandwidth===l.bandwidth})[0],p=void 0,f=void 0,m=void 0;h||(f=(p=c.filter(function(e){return e.width>i||e.height>r})).filter(function(e){return e.width===p[0].width&&e.height===p[0].height}),l=f[f.length-1],m=f.filter(function(e){return e.bandwidth===l.bandwidth})[0]);var g=m||h||u||o[0]||s[0];return g?g.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(du(this.tech_.el(),"width"),10),parseInt(du(this.tech_.el(),"height"),10))},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(il.isEnabled);return hu(e,function(e,t){return pu(e,t)}),e.filter(function(e){return lu(e.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:pu,comparePlaylistResolution:function(e,t){var i=void 0,r=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||n.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),i===(r=r||n.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-r},xhr:sl()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(e){Object.defineProperty(Vu,e,{get:function(){return Ss.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),Kl[e]},set:function(t){Ss.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?Ss.log.warn("value of Hls."+e+" must be greater than or equal to 0"):Kl[e]=t}})});var Wu=function(e){if(/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e))return"hls";return/^application\/dash\+xml/i.test(e)?"dash":null},Qu=function(e,t){for(var i=t.media(),r=-1,n=0;n<e.length;n++)if(e[n].id===i.uri){r=n;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})};Vu.canPlaySource=function(){return Ss.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Gu=function(e){if("dash"===e.options_.sourceType){var t=Ss.players[e.tech_.options_.playerId];if(t.eme){var i=function(e,t,i){if(!e)return e;var r={};for(var n in e)r[n]={audioContentType:'audio/mp4; codecs="'+i.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[n]&&t.contentProtection[n].pssh&&(r[n].pssh=t.contentProtection[n].pssh),"string"==typeof e[n]&&(r[n].url=e[n]);return Ss.mergeOptions(e,r)}(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());i&&(t.currentSource().keySystems=i)}}};Vu.supportsNativeHls=function(){var e=u.createElement("video");if(!Ss.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),Vu.supportsNativeDash=!!Ss.getTech("Html5").isSupported()&&/maybe|probably/i.test(u.createElement("video").canPlayType("application/dash+xml")),Vu.supportsTypeNatively=function(e){return"hls"===e?Vu.supportsNativeHls:"dash"===e&&Vu.supportsNativeDash},Vu.isSupported=function(){return Ss.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Yu=function(e){function t(i,r,n){v(this,t);var s=_(this,e.call(this,r,n.hls));if(r.options_&&r.options_.playerId){var o=Ss(r.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return Ss.log.warn("player.hls is deprecated. Use player.tech_.hls instead."),r.trigger({type:"usage",name:"hls-player-access"}),s}}),o.vhs=s,o.dash=s}if(s.tech_=r,s.source_=i,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(u,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=u.fullscreenElement||u.webkitFullscreenElement||u.mozFullScreenElement||u.msFullscreenElement;t&&t.contains(s.tech_.el())&&s.masterPlaylistController_.fastQualityChange_()}),s.on(s.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}return b(t,e),t.prototype.setOptions_=function(){var e=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth,["withCredentials","bandwidth"].forEach(function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])}),this.bandwidth=this.options_.bandwidth},t.prototype.src=function(e,t){var i=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Vu,this.options_.sourceType=Wu(t),this.masterPlaylistController_=new Uu(this.options_),this.playbackWatcher_=new zu(Ss.mergeOptions(this.options_,{seekable:function(){return i.seekable()}})),this.masterPlaylistController_.on("error",function(){Ss.players[i.tech_.options_.playerId].error(i.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Vu.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Vu.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){Ss.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return yl(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return yl(i.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return i.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e,t;t=(e=i).playlists,e.representations=function(){return t.master.playlists.filter(function(e){return!Za(e)}).map(function(t,i){return new $u(e,t,t.uri)})},Gu(i)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return i.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(Ss.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))},t.prototype.setupQualityLevels_=function(){var e=this,t=Ss.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,i;t=e.qualityLevels_,(i=e).representations().forEach(function(e){t.addQualityLevel(e)}),Qu(t,i.playlists)}),this.playlists.on("mediachange",function(){Qu(e.qualityLevels_,e.playlists)}))},t.prototype.play=function(){this.masterPlaylistController_.play()},t.prototype.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},t.prototype.duration=function(){return this.masterPlaylistController_.duration()},t.prototype.seekable=function(){return this.masterPlaylistController_.seekable()},t.prototype.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),e.prototype.dispose.call(this)},t}(Ss.getComponent("Component")),Xu={name:"videojs-http-streaming",VERSION:"1.0.0",canHandleSource:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Ss.mergeOptions(Ss.options,t);return Xu.canPlayType(e.type,i)},handleSource:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Ss.mergeOptions(Ss.options,i);return t.hls=new Yu(e,t,r),t.hls.xhr=sl(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Ss.mergeOptions(Ss.options,t).hls.overrideNative,r=Wu(e);return r&&(!Vu.supportsTypeNatively(r)||i)?"maybe":""}};return void 0!==Ss.MediaSource&&void 0!==Ss.URL||(Ss.MediaSource=zl,Ss.URL=Hl),zl.supportsNativeMediaSources()&&Ss.getTech("Html5").registerSourceHandler(Xu,0),Ss.HlsHandler=Yu,Ss.HlsSourceHandler=Xu,Ss.Hls=Vu,Ss.use||Ss.registerComponent("Hls",Vu),Ss.options.hls=Ss.options.hls||{},Ss.registerPlugin?Ss.registerPlugin("reloadSourceOnError",qu):Ss.plugin("reloadSourceOnError",qu),Ss}),function(e,t){void 0===e.HTMLVideoElement&&(t.createElement("video"),t.createElement("audio"),t.createElement("track")),function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t():e.returnExports=t()}(this,function(){var t,i=Array,r=i.prototype,n=Object,s=n.prototype,o=Function.prototype,a=String,l=a.prototype,u=Number,c=u.prototype,d=r.slice,h=r.splice,p=r.push,f=r.unshift,m=r.concat,g=o.call,y=o.apply,v=Math.max,b=Math.min,_=s.toString,T="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.toStringTag),S=Function.prototype.toString;t=function(e){if("function"!=typeof e)return!1;if(T)return function(e){try{return S.call(e),!0}catch(e){return!1}}(e);var t=_.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t};var w,C=RegExp.prototype.exec;w=function(e){return"object"==_typeof2(e)&&(T?function(e){try{return C.call(e),!0}catch(e){return!1}}(e):"[object RegExp]"===_.call(e))};var k,E=String.prototype.valueOf;k=function(e){return"string"==typeof e||"object"==_typeof2(e)&&(T?function(e){try{return E.call(e),!0}catch(e){return!1}}(e):"[object String]"===_.call(e))};var j=n.defineProperty&&function(){try{var e={};for(var t in n.defineProperty(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),x=function(e){var t;return t=j?function(e,t,i,r){!r&&t in e||n.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:i})}:function(e,t,i,r){!r&&t in e||(e[t]=i)},function(i,r,n){for(var s in r)e.call(r,s)&&t(i,s,r[s],n)}}(s.hasOwnProperty),A=function(e){var t=_typeof2(e);return null===e||"object"!==t&&"function"!==t},P=u.isNaN||function(e){return e!=e},O=function(e){var t=+e;return P(t)?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},I=function(e){var i,r,n;if(A(e))return e;if(r=e.valueOf,t(r)&&(i=r.call(e),A(i)))return i;if(n=e.toString,t(n)&&(i=n.call(e),A(i)))return i;throw new TypeError},L=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return n(e)},D=function(e){return e>>>0},M=function(){};x(o,{bind:function(e){var i=this;if(!t(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var r,s=d.call(arguments,1),o=v(0,i.length-s.length),a=[],l=0;o>l;l++)p.call(a,"$"+l);return r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof r){var t=i.apply(this,m.call(s,d.call(arguments)));return n(t)===t?t:this}return i.apply(e,m.call(s,d.call(arguments)))}),i.prototype&&(M.prototype=i.prototype,r.prototype=new M,M.prototype=null),r}});var R=g.bind(s.hasOwnProperty),B=g.bind(s.toString),N=g.bind(d),U=y.bind(d),$=g.bind(l.slice),F=g.bind(l.split),z=g.bind(l.indexOf),H=g.bind(p),q=g.bind(s.propertyIsEnumerable),V=g.bind(r.sort),W=i.isArray||function(e){return"[object Array]"===B(e)},Q=1!==[].unshift(0);x(r,{unshift:function(){return f.apply(this,arguments),this.length}},Q),x(i,{isArray:W});var G=n("a"),Y="a"!==G[0]||!(0 in G),X=function(e){var t=!0,i=!0,r=!1;if(e)try{e.call("foo",function(e,i,r){"object"!=_typeof2(r)&&(t=!1)}),e.call([1],function(){"use strict";i="string"==typeof this},"x")}catch(e){r=!0}return!!e&&!r&&t&&i};x(r,{forEach:function(e){var i,r=L(this),n=Y&&k(this)?F(this,""):r,s=-1,o=D(n.length);if(arguments.length>1&&(i=arguments[1]),!t(e))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++s<o;)s in n&&(void 0===i?e(n[s],s,r):e.call(i,n[s],s,r))}},!X(r.forEach)),x(r,{map:function(e){var r,n=L(this),s=Y&&k(this)?F(this,""):n,o=D(s.length),a=i(o);if(arguments.length>1&&(r=arguments[1]),!t(e))throw new TypeError("Array.prototype.map callback must be a function");for(var l=0;o>l;l++)l in s&&(a[l]=void 0===r?e(s[l],l,n):e.call(r,s[l],l,n));return a}},!X(r.map)),x(r,{filter:function(e){var i,r,n=L(this),s=Y&&k(this)?F(this,""):n,o=D(s.length),a=[];if(arguments.length>1&&(r=arguments[1]),!t(e))throw new TypeError("Array.prototype.filter callback must be a function");for(var l=0;o>l;l++)l in s&&(i=s[l],(void 0===r?e(i,l,n):e.call(r,i,l,n))&&H(a,i));return a}},!X(r.filter)),x(r,{every:function(e){var i,r=L(this),n=Y&&k(this)?F(this,""):r,s=D(n.length);if(arguments.length>1&&(i=arguments[1]),!t(e))throw new TypeError("Array.prototype.every callback must be a function");for(var o=0;s>o;o++)if(o in n&&!(void 0===i?e(n[o],o,r):e.call(i,n[o],o,r)))return!1;return!0}},!X(r.every)),x(r,{some:function(e){var i,r=L(this),n=Y&&k(this)?F(this,""):r,s=D(n.length);if(arguments.length>1&&(i=arguments[1]),!t(e))throw new TypeError("Array.prototype.some callback must be a function");for(var o=0;s>o;o++)if(o in n&&(void 0===i?e(n[o],o,r):e.call(i,n[o],o,r)))return!0;return!1}},!X(r.some));var K=!1;r.reduce&&(K="object"==_typeof2(r.reduce.call("es5",function(e,t,i,r){return r}))),x(r,{reduce:function(e){var i=L(this),r=Y&&k(this)?F(this,""):i,n=D(r.length);if(!t(e))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===n&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var s,o=0;if(arguments.length>=2)s=arguments[1];else for(;;){if(o in r){s=r[o++];break}if(++o>=n)throw new TypeError("reduce of empty array with no initial value")}for(;n>o;o++)o in r&&(s=e(s,r[o],o,i));return s}},!K);var Z=!1;r.reduceRight&&(Z="object"==_typeof2(r.reduceRight.call("es5",function(e,t,i,r){return r}))),x(r,{reduceRight:function(e){var i=L(this),r=Y&&k(this)?F(this,""):i,n=D(r.length);if(!t(e))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===n&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var s,o=n-1;if(arguments.length>=2)s=arguments[1];else for(;;){if(o in r){s=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>o)return s;do{o in r&&(s=e(s,r[o],o,i))}while(o--);return s}},!Z);var J=r.indexOf&&-1!==[0,1].indexOf(1,2);x(r,{indexOf:function(e){var t=Y&&k(this)?F(this,""):L(this),i=D(t.length);if(0===i)return-1;var r=0;for(arguments.length>1&&(r=O(arguments[1])),r=r>=0?r:v(0,i+r);i>r;r++)if(r in t&&t[r]===e)return r;return-1}},J);var ee=r.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);x(r,{lastIndexOf:function(e){var t=Y&&k(this)?F(this,""):L(this),i=D(t.length);if(0===i)return-1;var r=i-1;for(arguments.length>1&&(r=b(r,O(arguments[1]))),r=r>=0?r:i-Math.abs(r);r>=0;r--)if(r in t&&e===t[r])return r;return-1}},ee);var te=function(){var e=[1,2],t=e.splice();return 2===e.length&&W(t)&&0===t.length}();x(r,{splice:function(e,t){return 0===arguments.length?[]:h.apply(this,arguments)}},!te);var ie=function(){var e={};return r.splice.call(e,0,0,1),1===e.length}();x(r,{splice:function(e,t){if(0===arguments.length)return[];var i=arguments;return this.length=v(O(this.length),0),arguments.length>0&&"number"!=typeof t&&((i=N(arguments)).length<2?H(i,this.length-e):i[1]=O(t)),h.apply(this,i)}},!ie);var re=function(){var e=new i(1e5);return e[8]="x",e.splice(1,1),7===e.indexOf("x")}(),ne=function(){var e=[];return e[256]="a",e.splice(257,0,"b"),"a"===e[256]}();x(r,{splice:function(e,t){for(var i,r=L(this),n=[],s=D(r.length),o=O(e),l=0>o?v(s+o,0):b(o,s),u=b(v(O(t),0),s-l),c=0;u>c;)i=a(l+c),R(r,i)&&(n[c]=r[i]),c+=1;var d,h=N(arguments,2),p=h.length;if(u>p){for(c=l;s-u>c;)i=a(c+u),d=a(c+p),R(r,i)?r[d]=r[i]:delete r[d],c+=1;for(c=s;c>s-u+p;)delete r[c-1],c-=1}else if(p>u)for(c=s-u;c>l;)i=a(c+u-1),d=a(c+p-1),R(r,i)?r[d]=r[i]:delete r[d],c-=1;c=l;for(var f=0;f<h.length;++f)r[c]=h[f],c+=1;return r.length=s-u+p,n}},!re||!ne);var se,oe=r.join;try{se="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){se=!0}se&&x(r,{join:function(e){var t=void 0===e?",":e;return oe.call(k(this)?F(this,""):this,t)}},se);var ae="1,2"!==[1,2].join(void 0);ae&&x(r,{join:function(e){var t=void 0===e?",":e;return oe.call(this,t)}},ae);var le=function(e){for(var t=L(this),i=D(t.length),r=0;r<arguments.length;)t[i+r]=arguments[r],r+=1;return t.length=i+r,i+r},ue=function(){var e={};return 1!==Array.prototype.push.call(e,void 0)||1!==e.length||void 0!==e[0]||!R(e,0)}();x(r,{push:function(e){return W(this)?p.apply(this,arguments):le.apply(this,arguments)}},ue);var ce=function(){var e=[];return 1!==e.push(void 0)||1!==e.length||void 0!==e[0]||!R(e,0)}();x(r,{push:le},ce),x(r,{slice:function(e,t){var i=k(this)?F(this,""):this;return U(i,arguments)}},Y);var de=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(e){}return!1}(),he=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),pe=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();x(r,{sort:function(e){if(void 0===e)return V(this);if(!t(e))throw new TypeError("Array.prototype.sort callback must be a function");return V(this,e)}},de||!pe||!he);var fe=!{toString:null}.propertyIsEnumerable("toString"),me=function(){}.propertyIsEnumerable("prototype"),ge=!R("x","0"),ye=function(e){var t=e.constructor;return t&&t.prototype===e},ve={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},be=function(){if(void 0===e)return!1;for(var t in e)try{!ve["$"+t]&&R(e,t)&&null!==e[t]&&"object"==_typeof2(e[t])&&ye(e[t])}catch(e){return!0}return!1}(),_e=function(t){if(void 0===e||!be)return ye(t);try{return ye(t)}catch(e){return!1}},Te=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Se=Te.length,we=function(e){return"[object Arguments]"===B(e)},Ce=we(arguments)?we:function(e){return null!==e&&"object"==_typeof2(e)&&"number"==typeof e.length&&e.length>=0&&!W(e)&&t(e.callee)};x(n,{keys:function(e){var i=t(e),r=Ce(e),n=null!==e&&"object"==_typeof2(e),s=n&&k(e);if(!n&&!i&&!r)throw new TypeError("Object.keys called on a non-object");var o=[],l=me&&i;if(s&&ge||r)for(var u=0;u<e.length;++u)H(o,a(u));if(!r)for(var c in e)l&&"prototype"===c||!R(e,c)||H(o,a(c));if(fe)for(var d=_e(e),h=0;Se>h;h++){var p=Te[h];d&&"constructor"===p||!R(e,p)||H(o,p)}return o}});var ke=n.keys&&function(){return 2===n.keys(arguments).length}(1,2),Ee=n.keys&&function(){var e=n.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),je=n.keys;x(n,{keys:function(e){return je(Ce(e)?N(e):e)}},!ke||Ee);var xe,Ae,Pe=0!==new Date(-0xc782b5b342b24).getUTCMonth(),Oe=new Date(-0x55d318d56a724),Ie=new Date(14496624e5),Le="Mon, 01 Jan -45875 11:59:59 GMT"!==Oe.toUTCString();-720>Oe.getTimezoneOffset()?(xe="Tue Jan 02 -45875"!==Oe.toDateString(),Ae=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Ie.toString())):(xe="Mon Jan 01 -45875"!==Oe.toDateString(),Ae=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Ie.toString()));var De=g.bind(Date.prototype.getFullYear),Me=g.bind(Date.prototype.getMonth),Re=g.bind(Date.prototype.getDate),Be=g.bind(Date.prototype.getUTCFullYear),Ne=g.bind(Date.prototype.getUTCMonth),Ue=g.bind(Date.prototype.getUTCDate),$e=g.bind(Date.prototype.getUTCDay),Fe=g.bind(Date.prototype.getUTCHours),ze=g.bind(Date.prototype.getUTCMinutes),He=g.bind(Date.prototype.getUTCSeconds),qe=g.bind(Date.prototype.getUTCMilliseconds),Ve=["Sun","Mon","Tue","Wed","Thu","Fri"],We=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Qe=function(e,t){return Re(new Date(t,e,0))};x(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=De(this);return 0>e&&Me(this)>11?e+1:e},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=De(this),t=Me(this);return 0>e&&t>11?0:t},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=De(this),t=Me(this),i=Re(this);return 0>e&&t>11?12===t?i:Qe(0,e+1)-i+1:i},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Be(this);return 0>e&&Ne(this)>11?e+1:e},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Be(this),t=Ne(this);return 0>e&&t>11?0:t},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Be(this),t=Ne(this),i=Ue(this);return 0>e&&t>11?12===t?i:Qe(0,e+1)-i+1:i}},Pe),x(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=$e(this),t=Ue(this),i=Ne(this),r=Be(this),n=Fe(this),s=ze(this),o=He(this);return Ve[e]+", "+(10>t?"0"+t:t)+" "+We[i]+" "+r+" "+(10>n?"0"+n:n)+":"+(10>s?"0"+s:s)+":"+(10>o?"0"+o:o)+" GMT"}},Pe||Le),x(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),i=this.getMonth(),r=this.getFullYear();return Ve[e]+" "+We[i]+" "+(10>t?"0"+t:t)+" "+r}},Pe||xe),(Pe||Ae)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),i=this.getMonth(),r=this.getFullYear(),n=this.getHours(),s=this.getMinutes(),o=this.getSeconds(),a=this.getTimezoneOffset(),l=Math.floor(Math.abs(a)/60),u=Math.floor(Math.abs(a)%60);return Ve[e]+" "+We[i]+" "+(10>t?"0"+t:t)+" "+r+" "+(10>n?"0"+n:n)+":"+(10>s?"0"+s:s)+":"+(10>o?"0"+o:o)+" GMT"+(a>0?"-":"+")+(10>l?"0"+l:l)+(10>u?"0"+u:u)},j&&n.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var Ge=-621987552e5,Ye="-000001",Xe=Date.prototype.toISOString&&-1===new Date(Ge).toISOString().indexOf(Ye),Ke=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString();x(Date.prototype,{toISOString:function(){if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var e=Be(this),t=Ne(this);e+=Math.floor(t/12);var i=[(t=(t%12+12)%12)+1,Ue(this),Fe(this),ze(this),He(this)];e=(0>e?"-":e>9999?"+":"")+$("00000"+Math.abs(e),e>=0&&9999>=e?-4:-6);for(var r=0;r<i.length;++r)i[r]=$("00"+i[r],-2);return e+"-"+N(i,0,2).join("-")+"T"+N(i,2).join(":")+"."+$("000"+qe(this),-3)+"Z"}},Xe||Ke),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(Ge).toJSON().indexOf(Ye)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}()||(Date.prototype.toJSON=function(e){var i=n(this),r=I(i);if("number"==typeof r&&!isFinite(r))return null;var s=i.toISOString;if(!t(s))throw new TypeError("toISOString property is not callable");return s.call(i)});var Ze=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),Je=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||Je||!Ze){var et=Math.pow(2,31)-1,tt=P(new Date(1970,0,1,0,0,0,et+1).getTime());Date=function(e){var t=function t(i,r,n,s,o,l,u){var c,d=arguments.length;if(this instanceof e){var h=l,p=u;if(tt&&d>=7&&u>et){var f=Math.floor(u/et)*et,m=Math.floor(f/1e3);h+=m,p-=1e3*m}c=1===d&&a(i)===i?new e(t.parse(i)):d>=7?new e(i,r,n,s,o,h,p):d>=6?new e(i,r,n,s,o,h):d>=5?new e(i,r,n,s,o):d>=4?new e(i,r,n,s):d>=3?new e(i,r,n):d>=2?new e(i,r):d>=1?new e(i):new e}else c=e.apply(this,arguments);return A(c)||x(c,{constructor:t},!0),c},i=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),r=[0,31,59,90,120,151,181,212,243,273,304,334,365],n=function(e,t){var i=t>1?1:0;return r[t]+Math.floor((e-1969+i)/4)-Math.floor((e-1901+i)/100)+Math.floor((e-1601+i)/400)+365*(e-1970)};for(var s in e)R(e,s)&&(t[s]=e[s]);x(t,{now:e.now,UTC:e.UTC},!0),t.prototype=e.prototype,x(t.prototype,{constructor:t},!0);return x(t,{parse:function(t){var r=i.exec(t);if(r){var s,o=u(r[1]),a=u(r[2]||1)-1,l=u(r[3]||1)-1,c=u(r[4]||0),d=u(r[5]||0),h=u(r[6]||0),p=Math.floor(1e3*u(r[7]||0)),f=Boolean(r[4]&&!r[8]),m="-"===r[9]?1:-1,g=u(r[10]||0),y=u(r[11]||0);return(d>0||h>0||p>0?24:25)>c&&60>d&&60>h&&1e3>p&&a>-1&&12>a&&24>g&&60>y&&l>-1&&l<n(o,a+1)-n(o,a)&&(s=1e3*(60*((s=60*(24*(n(o,a)+l)+c+g*m))+d+y*m)+h)+p,f&&(s=function(t){var i=0,r=t;if(tt&&r>et){var n=Math.floor(r/et)*et,s=Math.floor(n/1e3);i+=s,r-=1e3*s}return u(new e(1970,0,1,0,0,i,r))}(s)),s>=-864e13&&864e13>=s)?s:NaN}return e.parse.apply(this,arguments)}}),t}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var it=c.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),rt={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var i=-1,r=t;++i<rt.size;)r+=e*rt.data[i],rt.data[i]=r%rt.base,r=Math.floor(r/rt.base)},divide:function(e){for(var t=rt.size,i=0;--t>=0;)i+=rt.data[t],rt.data[t]=Math.floor(i/e),i=i%e*rt.base},numToString:function(){for(var e=rt.size,t="";--e>=0;)if(""!==t||0===e||0!==rt.data[e]){var i=a(rt.data[e]);""===t?t=i:t+=$("0000000",0,7-i.length)+i}return t},pow:function e(t,i,r){return 0===i?r:i%2==1?e(t,i-1,r*t):e(t*t,i/2,r)},log:function(e){for(var t=0,i=e;i>=4096;)t+=12,i/=4096;for(;i>=2;)t+=1,i/=2;return t}};x(c,{toFixed:function(e){var t,i,r,n,s,o,l,c;if(t=u(e),0>(t=P(t)?0:Math.floor(t))||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(i=u(this),P(i))return"NaN";if(-1e21>=i||i>=1e21)return a(i);if(r="",0>i&&(r="-",i=-i),n="0",i>1e-21)if(o=0>(s=rt.log(i*rt.pow(2,69,1))-69)?i*rt.pow(2,-s,1):i/rt.pow(2,s,1),o*=4503599627370496,(s=52-s)>0){for(rt.multiply(0,o),l=t;l>=7;)rt.multiply(1e7,0),l-=7;for(rt.multiply(rt.pow(10,l,1),0),l=s-1;l>=23;)rt.divide(1<<23),l-=23;rt.divide(1<<l),rt.multiply(1,1),rt.divide(2),n=rt.numToString()}else rt.multiply(0,o),rt.multiply(1<<-s,0),n=rt.numToString()+$("0.00000000000000000000",2,2+t);return n=t>0?t>=(c=n.length)?r+$("0.0000000000000000000",0,t-c+2)+n:r+$(n,0,c-t)+"."+$(n,c-t):r+n,n}},it);var nt=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),st=c.toPrecision;x(c,{toPrecision:function(e){return void 0===e?st.call(this):st.call(this,e)}},nt),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=void 0===/()??/.exec("")[1],t=Math.pow(2,32)-1;l.split=function(i,r){var n=String(this);if(void 0===i&&0===r)return[];if(!w(i))return F(this,i,r);var s,o,a,l,u=[],c=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(i.sticky?"y":""),d=0,h=new RegExp(i.source,c+"g");e||(s=new RegExp("^"+h.source+"$(?!\\s)",c));var f=void 0===r?t:D(r);for(o=h.exec(n);o&&!((a=o.index+o[0].length)>d&&(H(u,$(n,d,o.index)),!e&&o.length>1&&o[0].replace(s,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)}),o.length>1&&o.index<n.length&&p.apply(u,N(o,1)),l=o[0].length,d=a,u.length>=f));)h.lastIndex===o.index&&h.lastIndex++,o=h.exec(n);return d===n.length?(l||!h.test(""))&&H(u,""):H(u,$(n,d)),u.length>f?$(u,0,f):u}}():"0".split(void 0,0).length&&(l.split=function(e,t){return void 0===e&&0===t?[]:F(this,e,t)});var ot=l.replace;(function(){var e=[];return"x".replace(/x(.)?/g,function(t,i){H(e,i)}),1===e.length&&void 0===e[0]})()||(l.replace=function(e,i){var r=t(i),n=w(e)&&/\)[*?]/.test(e.source);if(r&&n){return ot.call(this,e,function(t){var r=arguments.length,n=e.lastIndex;e.lastIndex=0;var s=e.exec(t)||[];return e.lastIndex=n,H(s,arguments[r-2],arguments[r-1]),i.apply(this,s)})}return ot.call(this,e,i)});var at=l.substr,lt="".substr&&"b"!=="0b".substr(-1);x(l,{substr:function(e,t){var i=e;return 0>e&&(i=v(this.length+e,0)),at.call(this,i,t)}},lt);var ut="\t\n\v\f\r  ??       ?????? \u2028\u2029\ufeff",ct="["+ut+"]",dt=new RegExp("^"+ct+ct+"*"),ht=new RegExp(ct+ct+"*$"),pt=l.trim&&(ut.trim()||!"?".trim());x(l,{trim:function(){if(null==this)throw new TypeError("can't convert "+this+" to object");return a(this).replace(dt,"").replace(ht,"")}},pt);var ft=g.bind(String.prototype.trim),mt=l.lastIndexOf&&-1!=="abc??".lastIndexOf("??",2);x(l,{lastIndexOf:function(e){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var t=a(this),i=a(e),r=arguments.length>1?u(arguments[1]):NaN,n=P(r)?1/0:O(r),s=b(v(n,0),t.length),o=i.length,l=s+o;l>0;){l=v(0,l-o);var c=z($(t,l,s+o),i);if(-1!==c)return l+c}return-1}},mt);var gt=l.lastIndexOf;if(x(l,{lastIndexOf:function(e){return gt.apply(this,arguments)}},1!==l.lastIndexOf.length),(8!==parseInt(ut+"08")||22!==parseInt(ut+"0x16"))&&(parseInt=function(e){var t=/^[\-+]?0[xX]/;return function(i,r){var n=ft(i),s=u(r)||(t.test(n)?16:10);return e(n,s)}}(parseInt)),1/parseFloat("-0")!=-1/0&&(parseFloat=function(e){return function(t){var i=ft(t),r=e(i);return 0===r&&"-"===$(i,0,1)?-0:r}}(parseFloat)),"RangeError: test"!==String(new RangeError("test"))){Error.prototype.toString=function(){if(null==this)throw new TypeError("can't convert "+this+" to object");var e=this.name;void 0===e?e="Error":"string"!=typeof e&&(e=a(e));var t=this.message;return void 0===t?t="":"string"!=typeof t&&(t=a(t)),e?t?e+": "+t:e:t}}if(j){var yt=function(e,t){if(q(e,t)){var i=Object.getOwnPropertyDescriptor(e,t);i.enumerable=!1,Object.defineProperty(e,t,i)}};yt(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),yt(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){RegExp.prototype.toString=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e}}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t():e.returnExports=t()}(this,function(){var e,i,r,n,s=Function.call,o=Object.prototype,a=s.bind(o.hasOwnProperty),l=s.bind(o.propertyIsEnumerable),u=s.bind(o.toString),c=a(o,"__defineGetter__");c&&(e=s.bind(o.__defineGetter__),i=s.bind(o.__defineSetter__),r=s.bind(o.__lookupGetter__),n=s.bind(o.__lookupSetter__)),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){var t=e.__proto__;return t||null===t?t:"[object Function]"===u(e.constructor)?e.constructor.prototype:e instanceof Object?o:null});var d=function(e){try{return e.sentinel=0,0===Object.getOwnPropertyDescriptor(e,"sentinel").value}catch(e){return!1}};if(Object.defineProperty){var h=d({});if(!(void 0===t||d(t.createElement("div")))||!h)var p=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||p){Object.getOwnPropertyDescriptor=function(e,t){if("object"!=_typeof2(e)&&"function"!=typeof e||null===e)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+e);if(p)try{return p.call(Object,e,t)}catch(e){}var i;if(!a(e,t))return i;if(i={enumerable:l(e,t),configurable:!0},c){var s=e.__proto__,u=e!==o;u&&(e.__proto__=o);var d=r(e,t),h=n(e,t);if(u&&(e.__proto__=s),d||h)return d&&(i.get=d),h&&(i.set=h),i}return i.value=e[t],i.writable=!0,i}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),!Object.create){var f,m=!({__proto__:null}instanceof Object),g=function(){if(!t.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(e){return!1}},y=function(){var e,i=t.createElement("iframe"),r=t.body||t.documentElement;return i.style.display="none",r.appendChild(i),i.src="javascript:",e=i.contentWindow.Object.prototype,r.removeChild(i),i=null,e};f=m||void 0===t?function(){return{__proto__:null}}:function(){var e=g()?function(){var e,t;return(t=new ActiveXObject("htmlfile")).write("<script><\/script>"),t.close(),e=t.parentWindow.Object.prototype,t=null,e}():y();delete e.constructor,delete e.hasOwnProperty,delete e.propertyIsEnumerable,delete e.isPrototypeOf,delete e.toLocaleString,delete e.toString,delete e.valueOf;var t=function(){};return t.prototype=e,f=function(){return new t},new t},Object.create=function(e,t){var i,r=function(){};if(null===e)i=f();else{if("object"!=_typeof2(e)&&"function"!=typeof e)throw new TypeError("Object prototype may only be an Object or null");r.prototype=e,(i=new r).__proto__=e}return void 0!==t&&Object.defineProperties(i,t),i}}var v=function(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(e){return!1}};if(Object.defineProperty){var b=v({}),_=void 0===t||v(t.createElement("div"));if(!b||!_)var T=Object.defineProperty,S=Object.defineProperties}if(!Object.defineProperty||T){Object.defineProperty=function(t,s,a){if("object"!=_typeof2(t)&&"function"!=typeof t||null===t)throw new TypeError("Object.defineProperty called on non-object: "+t);if("object"!=_typeof2(a)&&"function"!=typeof a||null===a)throw new TypeError("Property description must be an object: "+a);if(T)try{return T.call(Object,t,s,a)}catch(e){}if("value"in a)if(c&&(r(t,s)||n(t,s))){var l=t.__proto__;t.__proto__=o,delete t[s],t[s]=a.value,t.__proto__=l}else t[s]=a.value;else{if(!c&&("get"in a||"set"in a))throw new TypeError("getters & setters can not be defined on this javascript engine");"get"in a&&e(t,s,a.get),"set"in a&&i(t,s,a.set)}return t}}(!Object.defineProperties||S)&&(Object.defineProperties=function(e,t){if(S)try{return S.call(Object,e,t)}catch(e){}return Object.keys(t).forEach(function(i){"__proto__"!==i&&Object.defineProperty(e,i,t[i])}),e}),Object.seal||(Object.seal=function(e){if(Object(e)!==e)throw new TypeError("Object.seal can only be called on Objects.");return e}),Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw new TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(e){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(e){if(Object(e)!==e)throw new TypeError("Object.preventExtensions can only be called on Objects.");return e}),Object.isSealed||(Object.isSealed=function(e){if(Object(e)!==e)throw new TypeError("Object.isSealed can only be called on Objects.");return!1}),Object.isFrozen||(Object.isFrozen=function(e){if(Object(e)!==e)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)!==e)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var t="";a(e,t);)t+="?";e[t]=!0;var i=a(e,t);return delete e[t],i})})}(window,document),videojs.options.controlBar={volumePanel:{inline:!1,vertical:!0},children:["liveDisplay","playToggle","currentTimeDisplay","remainingTimeDisplay","progressControl","durationDisplay","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","volumePanel","fullscreenToggle"]},videojs.options.techOrder=["youtube","html5"];var skins=["chrome","party","treso"];if("undefined"==typeof jQuery){var headTag=document.getElementsByTagName("head")[0],jqTag=document.createElement("script");jqTag.type="text/javascript",jqTag.src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js",headTag.appendChild(jqTag)}var treso_skin=!1,skin=document.createElement("div");for(var k in document.body.appendChild(skin),skins)skin.className="vjs-"+skins[k],13==skin.offsetWidth&&("treso"==skins[k]?(treso_skin=!0,videojs.options.controlBar={children:["progressControl","playToggle","liveDisplay","remainingTimeDisplay","currentTimeDisplay","durationDisplay","volumePanel","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]}):"chrome"==skins[k]?videojs.options.controlBar={children:["playToggle","liveDisplay","remainingTimeDisplay","currentTimeDisplay","timeDivider","durationDisplay","progressControl","volumePanel","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]}:"party"==skins[k]?videojs.options.controlBar={children:["playToggle","liveDisplay","remainingTimeDisplay","progressControl","currentTimeDisplay","timeDivider","durationDisplay","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","volumePanel","fullscreenToggle"]}:"roundal"==skins[k]&&(videojs.options.controlBar={volumePanel:{inline:!1,vertical:!0},children:["playToggle","liveDisplay","remainingTimeDisplay","currentTimeDisplay","timeDivider","durationDisplay","progressControl","volumePanel","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]}));document.body.removeChild(skin);var nuevo_yt=!1;function loadYt(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),e.onload=function(){nuevo_yt=!0},e.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||(nuevo_yt=!0)},e.src=""}loadYt(),"ontouchstart"in document.documentElement||(document.documentElement.className+=" no-touch");var jskey=!0,dm=document.location.hostname.toLowerCase(),dom="firahsitanas";function setup_resolution(e){var t;jQuery(e).find(".vjs-resolution-button").bind("touchstart click",function(i){$(this).find(".vjs-resolution-menu").hasClass("vjs-hidden")?(jQuery(e).find(".vjs-resolution-menu").css("display","block"),jQuery(e).find(".vjs-resolution-menu").removeClass("vjs-hidden"),jQuery(e).find(".vjs-menu-settings").addClass("vjs-hidden")):jQuery(e).find(".vjs-resolution-menu").addClass("vjs-hidden"),clearTimeout(t),t=setTimeout(function(){jQuery(e).find(".vjs-resolution-button").find(".vjs-menu").addClass("vjs-hidden")},4e3),i.preventDefault(),i.stopImmediatePropagation()}),jQuery(e).find(".vjs-resolution-button").find("li").bind("touchstart click",function(i){jQuery(e).find(".vjs-resolution-button").find(".vjs-menu").addClass("vjs-hidden"),jQuery(e).find(".vjs-resolution-button").find(".vjs-menu").attr("class"),i.preventDefault(),i.stopImmediatePropagation(),clearTimeout(t)})}dom=dom.split("").reverse().join(""),dm.indexOf(dom)<0&&(jskey=!1),function(){var videojs=null;videojs=void 0===window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(window,videojs){var defaults={},nuevoPlugin,currentResolution={},menuItemsHolder={},logo="",logoalpha=100,logocontrolbar="",logoposition="LT",logooffsetX=10,logoofssetY=10,logourl="",logotitle="",related={};function setSourcesSanitized(e,t,i,r){return currentResolution={label:i,sources:t},"function"==typeof r?r(e,t,i):(e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}})),e)}var MenuItem=videojs.getComponent("MenuItem"),ResolutionMenuItem=videojs.extend(MenuItem,{constructor:function(e,t,i,r){this.onClickListener=i,this.label=r,MenuItem.call(this,e,t),this.src=t.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAsLabel(),this.selected(!0),this.addClass("vjs-selected"))},showAsLabel:function(e){if(this.label){var t=this.options_.label,i=t.replace("p","");i=parseInt(i),this.label.innerHTML=i>0?i>719?i+'p<span class="vjs-hd-icon">HD</span>':i+"p":t}},onClick:function(e){this.onClickListener(this),this.options_.label.replace("p",""),this.player_.trigger("resolutionchange",{label:this.options_.label});var t=this.player_.currentTime(),i=this.player_.paused();this.showAsLabel(),this.addClass("vjs-selected"),i||this.player_.bigPlayButton.hide(),"function"!=typeof e&&"function"==typeof this.options_.customSourcePicker&&(e=this.options_.customSourcePicker);var r="loadeddata";"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&(r="timeupdate"),setSourcesSanitized(this.player_,this.src,this.options_.label,e).one(r,function(){this.player_.currentTime(t),this.player_.handleTechSeeked_(),i||(this.player_.play(),this.player_.handleTechSeeked_())})}}),MenuButton=videojs.getComponent("MenuButton"),ResolutionMenuButton=videojs.extend(MenuButton,{constructor:function(e,t,i,r){if(this.sources=t.sources,this.label=r,this.label.innerHTML=t.initialySelectedLabel,MenuButton.call(this,e,t,i),this.controlText("Quality"),i.dynamicLabel)this.el().appendChild(r);else{var n=document.createElement("span");videojs.dom.addClass(n,"vjs-resolution-button-staticlabel"),this.el().appendChild(n)}},createItems:function(){var e=[],t=this.sources&&this.sources.label||{},i=function(t){e.map(function(e){e.selected(e===t),e.removeClass("vjs-selected")})};for(var r in t)t.hasOwnProperty(r)&&(e.push(new ResolutionMenuItem(this.player_,{label:r,src:t[r],initialySelected:r===this.options_.initialySelectedLabel,customSourcePicker:this.options_.customSourcePicker},i,this.label)),menuItemsHolder[r]=e[e.length-1]);return e}});nuevoPlugin=function nuevoPlugin(options){if(1==jskey){var def={settingsButton:!0,videoInfo:!1,zoomMenu:!0,relatedMenu:!0,rateMenu:!0,shareMenu:!0,zoomNav:!0,zoomScroll:!1,zoomReset:!0,mirrorButton:!1,contextMenu:!1,timetooltip:!0,mousedisplay:!0,errordisplay:!0,related:{},logo:"",logoalpha:100,logocontrolbar:"",logoposition:"LT",logooffsetX:10,logooffsetY:10,logourl:"",shareUrl:"",shareTitle:"",shareEmebed:"",endAction:"",pubid:"",slideImage:"",thumbWidth:192,thumbHeight:108,slideWidth:192,slideHeight:108,slideType:"vertical",sharemethod:"auto",limit:0,limiturl:"",limitimage:"",limitmessage:"Watch full video on",youtuberesolution:!1},player=this,tech=this.tech_,settings=videojs.mergeOptions(defaults,options),player=this,label=document.createElement("span"),groupedSrc={};settings=videojs.mergeOptions(def,options),settings.related.length>1||(settings.lang_menu_related=""),videojs.dom.addClass(label,"vjs-resolution-button-label"),videojs.dom.addClass(label,"vjs-resolution-type"),settings.dynamicLabel=!0,player.updateSrc=function(e){if(!e)return player.src();player.controlBar.resolutionSwitcher&&(player.controlBar.resolutionSwitcher.dispose(),delete player.controlBar.resolutionSwitcher),e=e.sort(compareResolutions);var t=chooseSrc(groupedSrc=bucketSources(e),e),i=new ResolutionMenuButton(player,{sources:groupedSrc,initialySelectedLabel:t.label,initialySelectedRes:t.res,customSourcePicker:settings.customSourcePicker},settings,label);videojs.dom.addClass(i.el(),"vjs-resolution-button"),player.controlBar.resolutionSwitcher=player.controlBar.el_.insertBefore(i.el_,player.controlBar.getChild("fullscreenToggle").el_),player.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)};var r=player.el();return jQuery(r).find(".vjs-resolution-button").attr("title",player.localize("Quality")),jQuery(r).find(".vjs-resolution-button").find(".vjs-menu-button").remove(),jQuery(r).find(".vjs-resolution-button").find(".vjs-menu").addClass("vjs-hidden"),jQuery(r).find(".vjs-resolution-button").find(".vjs-menu").addClass("vjs-resolution-menu"),setup_resolution(r),setSourcesSanitized(player,t.sources,t.label)},player.currentResolution=function(e,t){return null==e?currentResolution:(null!=menuItemsHolder[e]&&menuItemsHolder[e].onClick(t),player)},player.getGroupedSrc=function(){return groupedSrc};var pobject=player.el();1!=settings.errordisplay&&jQuery(pobject).find(".vjs-error-display").css("display","none!important"),1!=settings.timetooltip&&jQuery(pobject).find(".vjs-time-tooltip").addClass("vjs-abs-hidden"),1!=settings.mousedisplay&&jQuery(pobject).find(".vjs-mouse-display").addClass("vjs-abs-hidden vjs-out"),settings.mousedisplay&&1!=settings.timetooltip&&jQuery(pobject).find(".vjs-mouse-display").find(".vjs-time-tooltip").removeClass("vjs-abs-hidden"),player.ready(function(){settings.isAddon=!1,settings.newstate=4,settings.oldstate=4,settings.events={};var playerid=player.id(),pobject=player.el(),volumeSupport=!0,resSwitcher=!1,currentThumb=0,firstplay=!1,slideOffset=0,tech=player.$(".vjs-tech"),pauseLock=!1,thiso=this,isfixed=!1,pp=!1;function is_touch_device(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}var isTouchDevice=is_touch_device();function setStyle(e){var t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),t.appendChild(i)}if(1!=settings.contextMenu&&jQuery(pobject).bind("contextmenu",function(){return!1}),settings.logocontrolbar){var imgbar=document.createElement("img"),err=!1;imgbar.src=settings.logocontrolbar,imgbar.onload=function(){if("naturalHeight"in this?this.naturalHeight+this.naturalWidth===0&&(err=!0):this.width+this.height==0&&(err=!0),1!=err){var e=document.createElement("div");if(e.className="vjs-logo-bar",""!==settings.logourl){var t=document.createElement("a");t.href=settings.logourl,t.target="_blank",settings.logotitle&&t.setAttribute("title",settings.logotitle),t.appendChild(imgbar),e.appendChild(t),e.style.cursor="pointer"}else e.appendChild(img);player.controlBar.el().insertBefore(e,player.controlBar.getChild("fullscreenToggle").el_)}}}if(settings.logo){var img=document.createElement("img");img.src=settings.logo;var logodiv=document.createElement("div");logodiv.className="vjs-logo",pobject.appendChild(logodiv),img.onload=function(){if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void pobject.removeChild(logodiv)}else if(this.width+this.height==0)return void pobject.removeChild(logodiv);var e=settings.logooffsetX;if(settings.logooffsetY,"RT"==settings.logoposition?(logodiv.style.right=e+"px",logodiv.style.top=e+"px"):(logodiv.style.left=e+"px",logodiv.style.top=e+"px"),""!==settings.logourl){var t=document.createElement("a");t.href=settings.logourl,t.target="_blank",settings.logotitle&&t.setAttribute("title",settings.logotitle),t.appendChild(img),logodiv.appendChild(t),logodiv.style.cursor="pointer",(i=parseInt(settings.logoalpha))>0&&i<100&&jQuery(img).fadeTo(0,i/100)}else{var i;logodiv.appendChild(img),(i=parseInt(settings.logoalpha))>0&&i<100&&jQuery(img).fadeTo(0,i/100)}},img.onerror=function(){pobject.removeChild(logodiv)}}treso_skin&&(jQuery(".vjs-current-time").detach().prependTo(".vjs-progress-control"),jQuery(".vjs-duration").detach().appendTo(".vjs-progress-control")),jQuery(pobject).find("video").attr("controls",!1),jQuery(pobject).find("video").attr("preload","auto");var hls_ready=!1,hls_levels=new Array;function hls_resolution(e){hls_levels=(hls_levels=function(e,t){return e.sort(function(e,i){var r=e[t],n=i[t];return r<n?-1:r>n?1:0})}(hls_levels,"height"==e?"height":"bandwidth")).reverse(),player.controlBar.hlsButton=player.controlBar.addChild("button",{el:videojs.dom.createEl("div",{text:"Qualities",className:"vjs-menu-button vjs-menu-button-popup vjs-control vjs-button vjs-resolution-button"},{role:"menuitem","aria-live":"polite","aria-expanded":"false","aria-haspopup":"true"})}),player.controlBar.hlsButton.addClass("vjs-resolution-button"),player.controlBar.el_.insertBefore(player.controlBar.hlsButton.el_,player.controlBar.getChild("fullscreenToggle").el_);for(var t='<div class="vjs-menu vjs-resolution-menu vjs-hidden"><ul class="vjs-menu-content" role="menu">',i=0,r=hls_levels.length;i<r;i++)t="height"==e?t+'<li id="'+hls_levels[i].height+'" class="vjs-menu-item vjs-hls-resolution" tabindex="-1" role="menuitem" aria-live="polite" aria-disabled="false">'+hls_levels[i].height+'p<span class="vjs-control-text"></span></li>':t+'<li id="'+hls_levels[i].bandwidth+'" class="vjs-menu-item vjs-hls-resolution" tabindex="-1" role="menuitem" aria-live="polite" aria-disabled="false">'+hls_levels[i].bandwidth+' kbps<span class="vjs-control-text"></span></li>';t+="</ul></div>",t+='<span class="vjs-resolution-button-label vjs-resolution-type">Auto</span>',player.controlBar.hlsButton.el().innerHTML=t,jQuery(pobject).find(".vjs-resolution-button").attr("title",player.localize("Quality")),jQuery(pobject).find(".vjs-hls-resolution").on(setEvent("click"),function(t){t.preventDefault();var i=jQuery(this).attr("id"),r=this;jQuery(pobject).find(".vjs-hls-resolution").removeClass("vjs-selected"),player.tech_.hls.representations().forEach(function(t){"height"==e?t.height==i?(jQuery(r).addClass("vjs-selected"),jQuery(pobject).find(".vjs-resolution-type").html(i+"p")):t.enabled(!1):parseInt(t.bandwidth/1e3)==i?(jQuery(r).addClass("vjs-selected"),jQuery(pobject).find(".vjs-resolution-type").html(i+" kB")):t.enabled(!1)})}),setup_resolution(pobject)}var resolution_levels=new Array,bandwidth_levels=new Array,hls_rep_type="height";this.on("loadedmetadata",function(){if(1!=hls_ready){try{player.tech_.hls.representations().forEach(function(e){var t=new Object;t={id:"",width:"",height:""},e.width>0&&e.height>0&&(hls_rep_type="height",t.id=e.id,t.width=e.width,t.height=e.height,resolution_levels.push(t)),e.bandwidth>0&&(t.id=e.id,t.bandwidth=parseInt(e.bandwidth/1e3),bandwidth_levels.push(t))})}catch(e){}(resolution_levels.length>1||bandwidth_levels.length>1)&&(bandwidth_levels>resolution_levels?(hls_rep_type="bandwidth",hls_levels=bandwidth_levels):(hls_rep_type="height",hls_levels=resolution_levels),hls_resolution(hls_rep_type))}});var s=document.createElement("div");pobject.appendChild(s),jQuery(s).attr("class","vjs-skin");var pos=jQuery(s).css("position");if("absolute"!=pos&&(settings.themeColor=""),pobject.removeChild(s),jQuery(pobject).find(".vjs-play-control").insertBefore(jQuery(pobject).find(".vjs-live-control")),settings.videoInfo&&settings.shareTitle){var infoDiv=document.createElement("span");infoDiv.className="vjs-info",infoDiv.innerHTML=settings.shareTitle,pobject.appendChild(infoDiv);var uri=settings.shareUrl||document.location.href;jQuery(infoDiv).on("click",function(){window.open(uri,"_blank")})}this.pauseLock=!1,jQuery(pobject).find(".vjs-load-progress").css("opacity",.3),this.on("timeupdate",function(){player.paused()||dispatch(pobject,"TIME")}),this.on("ended",function(){settings.newstate=3,""!=settings.endAction&&("share"==settings.endAction&&settings.settingsButton&&settings.shareMenu?(jQuery(pobject).find(".vjs-sharing-overlay"),jQuery(pobject).find(".vjs-share-button").click()):"related"==settings.endAction&&settings.settingsButton&&settings.relatedMenu&&settings.related.length>2&&(jQuery(pobject).find(".vjs-grid"),jQuery(pobject).find(".vjs-related-button").click()))}),this.on("waiting",function(){1==settings.oldstate&&(settings.oldstate=2,settings.newstate=2)}),this.on("playing",function(){1!=videojs.options.ytnoload&&"Youtube"===player.techName_&&initResolutionForYt(player),1!=firstplay&&(videojs.trigger(this.el_,{type:"firstplay",target:this.el_}),firstplay=!0),2!=settings.oldstate&&1!=settings.oldstate&&(settings.newstate=1,dispatch(pobject,"STATE"),settings.oldstate=1)}),this.on("pause",function(e){thiso.pauseLock||0!=settings.oldstate&&(settings.newstate=0,dispatch(pobject,"STATE"),settings.oldstate=0)});var vl=this.volume();try{var perc=100*vl;perc=perc,jQuery(pobject).find(".vjs-volume-level").css("height",perc+"%"),jQuery(pobject).find(".vjs-volume-bar").attr("aria-valuenow",perc)}catch(e){}function dispatch(e,t,i){var r=new Array("PAUSED","PLAYING","BUFFERING","COMPLETED","IDLE");switch(t){case"TIME":var n=player.currentTime(),s=player.duration();n=n.toFixed(2),s=s.toFixed(2);try{updateEvent("TIME",n,s,playerid)}catch(e){}break;case"VOLUME":try{updateEvent("VOLUME",player.volume().toFixed(2),0,playerid)}catch(e){}break;case"STATE":if(settings.isAddon)return;try{updateEvent("STATE",settings.newstate,0,playerid)}catch(e){}}if(settings.events&&settings.events[t]){var o=settings.events[t];switch(t){case"TIME":n=player.currentTime(),s=player.duration(),o[0]=n,o.position=n,o.duration=s,o[1]=s,o.id=playerid,o[2]=playerid;try{updateEvent("TIME",n,s,playerid)}catch(e){}break;case"VOLUME":var a=player.volume();o.percentage=a.toFixed(2),o[0]=a.toFixed(2),o.id,o[2];try{updateEvent("VOLUME",a.toFixed(2),0,playerid)}catch(e){}break;case"STATE":if(settings.isAddon)return;settings.newstate,settings.oldstate,o.newstate=r[settings.newstate],o.oldstate=r[settings.oldstate],o.id;try{updateEvent("STATE",o.newstate,o.oldstate,playerid)}catch(e){}}document.createEventObject?pobject.fireEvent("on"+o,evt):pobject.dispatchEvent(o)}}pobject.addModelListener=function(evname,evfunction){if("string"==typeof evname){var ename=evname.toUpperCase();if(("TIME"==ename||"STATE"==ename||"SEEK"==ename)&&document.createEvent){var newEvent=document.createEvent("Event");if(newEvent.initEvent(ename,!0,!0),settings.events[ename]=newEvent,"string"==typeof evfunction){var fn=eval(evfunction);try{pobject.addEventListener(ename,fn,!1)}catch(e){}}else try{pobject.addEventListener(ename,evfunction,!1)}catch(e){}try{dispatch(pobject,ename)}catch(e){}}}},pobject.removeModelListener=function(e,t){if("string"==typeof e){var i=e.toUpperCase();pobject.removeEventListener(i,t,!1);try{delete pobject.options.events[i]}catch(e){}}},pobject.sendEvent=function(e,t){if("string"==typeof e)switch(e=e.toLowerCase()){case"play":player.paused()&&player.play();break;case"mute":player.muted(!0);break;case"unmute":player.muted(!1);break;case"volume":if(t>=0&&t<=100){player.volume(t/100);break}case"pause":1!=player.paused()&&player.pause()}};var obi={id:playerid};try{playerReady(obi)}catch(e){}if(jQuery(pobject).css("visibility","visible"),settings.newstate=4,dispatch(pobject,"STATE"),player.on("userinactive",function(){isTouchDevice&&(jQuery(".vjs-menu").hide(),jQuery(".vjs-resolution-button").find(".vjs-menu").addClass("vjs-hidden"),jQuery(".vjs-resolution-button").find(".vjs-menu").show())}),player.on("useractive",function(){jQuery(pobject).find("video").attr("controls",!1)}),player.on("loadedmetadata",function(){var e=jQuery(pobject).attr("slideImage");e&&(settings.slideImage=e)}),player.on("contentupdate",function(){var e=jQuery(pobject).find(".vjs-tech");jQuery(e).css({"-webkit-transform":"scale(1)","-moz-transform":"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)",transform:"scale(1)",top:"0px",left:"0px"})}),player.on("firstplay",function(){if(jQuery(pobject).find("video").attr("controls",!1),settings.limit>0&&(""!=settings.limiturl||""!=settings.shareUrl)){var e=!1;player.on("timeupdate",function(){if(player.currentTime()>settings.limit&&(player.pause(),jQuery(pobject).find(".vjs-big-play-button").css("display","none"),1!=e)){var t=function(){var e=document.createElement("span");e.style.lineHeight="1.5em";var t=settings.limitmessage;e.innerHTML=t+'<span style="color:#fff;">'+settings.limiturl+"</span>",r.appendChild(e)};e=!0,jQuery(pobject).find(".vjs-tech").fadeTo("fast",.33);var i=document.createElement("div");i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="1999";var r=document.createElement("a");if(r.className="vjs-limit",r.href=settings.limiturl,r.target="_blank",r.style.textDecoration="none",i.appendChild(r),""==settings.limiturl&&(settings.limiturl=settings.shareUrl),""!=settings.limitimage){var n=document.createElement("img");n.src=settings.limitimage,n.onload=function(){r.innerHTML='<img src="'+settings.limitimage+'" />'},n.onerror=function(){t()}}else t();player.el().appendChild(i)}})}if(!firstplay){var t=jQuery(pobject).attr("slideImage");t&&(settings.slideImage=t);var i=player.$(".vjs-tech");if(player.$(".vjs-tech"),i&&(i.removeAttribute("poster"),i.removeAttribute("slideImage")),settings.slideImage&&1!=isTouchDevice){var r=document.createElement("div");r.className="vjs-progress-slide";var n=document.createElement("div"),s=document.createElement("div");n.className="vjs-thumb",s.className="vjs-thumb-duration";var o=document.createElement("img");o.src=settings.slideImage,"horizontal"==settings.slideType?(o.style.height=settings.thumbHeight+"px",o.style.width="auto",o.style.top="0"):(o.style.height="auto",o.style.width=settings.thumbWidth+"px",o.style.top="0"),n.appendChild(o),n.appendChild(s),r.appendChild(n),n.style.left="-96px",jQuery(pobject).find(".vjs-progress-control").append(r),jQuery(r).css("left","-1000px");var a=new Image;a.src=settings.slideImage,a.onload=function(){jQuery(pobject).find(".vjs-time-tooltip").addClass("vjs-abs-hidden"),jQuery(pobject).find(".vjs-mouse-display").addClass("vjs-abs-hidden");var e=this.width,t=this.height,i=e/settings.slideWidth;"horizontal"!=settings.slideType&&(i=t/settings.slideHeight),jQuery(pobject).find(".vjs-progress-holder").bind(setEvent("mousemove"),function(e){parseInt(player.duration());var t=jQuery(pobject).find(".vjs-progress-holder").width(),a=parseInt(jQuery(pobject).find(".vjs-mouse-display").css("left"));if("auto"==a){var l=jQuery(pobject).find(".vjs-mouse-display")[0].style.left;a=parseInt(l)}var u=a/t,c=jQuery(pobject).find(".vjs-mouse-display").find(".vjs-time-tooltip").html();treso_skin&&(a+=$(jQuery(pobject).find(".vjs-progress-holder")).position().left),parseInt(player.duration());var d=parseInt(u*i);if("horizontal"==settings.slideType){var h=d*settings.thumbWidth;o.style.left="-"+h+"px"}else h=d*settings.thumbHeight,o.style.top="-"+h+"px";a<0&&(a=0),a>t&&(a=t),jQuery(s).html(c),jQuery(r).css("left",a),jQuery(n).css("opacity","1")}),jQuery(pobject).find(".vjs-progress-holder").bind(setEvent("mouseout"),function(e){jQuery(n).css("opacity","0"),jQuery(r).css("left","-1000px")})}}}}),player.options_.sources.length>1){var step=0,res_len=0;for(step=0;step<player.options_.sources.length;step++)(player.options_.sources[step].res||player.options_.sources[step].label)&&res_len++;res_len>1&&player.updateSrc(player.options_.sources)}"Youtube"===player.techName_&&initResolutionForYt(player);var menus=!1;if((settings.relatedMenu||settings.shareMenu||settings.rateMenu||settings.zoomMenu)&&(menus=!0),0!=settings.settingsButton&&menus){player.controlBar.settingsButton=player.controlBar.addChild("button",{el:videojs.dom.createEl("div",{title:player.localize("Settings"),text:player.localize("Settings"),id:"settings_button",className:"vjs-menu-button vjs-menu-button-popup vjs-control vjs-button vjs-cog-menu-button"},{role:"menuitem","aria-live":"polite","aria-expanded":"false","aria-haspopup":"true"})}),player.controlBar.settingsButton.addClass("vjs-cog-menu-button"),player.controlBar.el_.insertBefore(player.controlBar.settingsButton.el_,player.controlBar.getChild("fullscreenToggle").el_);var firstplay=!1;if(settings.zoomMenu){var zoominfo=jQuery("<div class='vjs-zoom-info vjs-hidden'>");jQuery("#"+playerid).append(zoominfo)}player.on("firstplay",function(){if(!firstplay){var e;firstplay=!0,jQuery(pobject).find(".vjs-poster").addClass("vjs-hidden");var t='<ul class="vjs-menu-content">';settings.rateMenu&&(t=t+'<li class="vjs-settings-item vjs-extend">'+player.localize("Speed")+'<div class="vjs-extend-menu vjs-hidden"><ul class="vjs-extend-content"><li class="vjs-speed">x 0.5</li><li class="vjs-speed vjs-current">x 1</li><li class="vjs-speed">x 1.5</li><li class="vjs-speed">x 2</li></ul></div></li>',isRate=!0),settings.zoomMenu&&(t=t+'<li class="vjs-settings-item vjs-extend">'+player.localize("Zoom")+'<div class="vjs-extend-menu vjs-zoom-menu vjs-hidden" id="vjs-zoom_menu"><div id="vjs-zoom-slider" class="vjs-zoom-slider"><div class="vjs-zoom-back"></div><div class="vjs-zoom-level theme-color"></div></div><div class="vjs-zoom-reset">RESET</div></div></li>'),settings.shareMenu&&(t=t+'<li class="vjs-settinsg-item vjs-share-button">'+player.localize("Share")+"</li>"),settings.relatedMenu&&(t=t+'<li class="vjs-settings-item vjs-related-button">'+player.localize("Related")+"</li></ul>");var i=document.createElement("div");if(i.className="vjs-menu-settings vjs-hidden",i.innerHTML=t,jQuery(pobject).find(".vjs-control-bar").append(i),jQuery(pobject).find(".vjs-extend").bind("touchstart click",function(e){e.preventDefault(),e.stopImmediatePropagation(),$(this).find(".vjs-extend-menu").hasClass("vjs-hidden")&&(jQuery(pobject).find(".vjs-extend-menu").addClass("vjs-hidden"),jQuery(pobject).find(".vjs-settings-item").removeClass("vjs-current"),jQuery(this).addClass("vjs-current"),jQuery(this).find(".vjs-extend-menu").removeClass("vjs-hidden"))}),jQuery(pobject).find(".vjs-cog-menu-button").bind("touchstart click",function(t){t.preventDefault(),t.stopImmediatePropagation(),clearTimeout(e),e=setTimeout(function(){jQuery(i).addClass("vjs-hidden")},4e3),$(i).hasClass("vjs-hidden")?jQuery(i).removeClass("vjs-hidden"):jQuery(i).addClass("vjs-hidden"),jQuery(pobject).find(".vjs-settings-item").removeClass("vjs-current"),jQuery(pobject).find(".vjs-resolution-button").find(".vjs-menu").addClass("vjs-hidden")}),jQuery(i).bind("touchstart touchmove mouseenter",function(t){clearTimeout(e)}),jQuery(i).bind("mouseleave touchend",function(t){clearTimeout(e),e=setTimeout(function(){jQuery(i).addClass("vjs-hidden")},4e3)}),settings.related.length>2&&settings.relatedMenu&&settings.settingsButton){var r=document.createElement("div");r.className="vjs-grid vjs-hidden";var n=document.createElement("div"),s=document.createElement("div");s.className="vjs-close-btn",n.className="vjs-grid-box",r.appendChild(n),r.appendChild(s),pobject.appendChild(r);var o=settings.related.length;o>12&&(o=12);for(var a=0;a<o;a+=1){var l=document.createElement("div");l.className=o>6?"vjs-grid-item grid-4":"vjs-grid-item";var u='<a href="'+settings.related[a].url+'" target="blank"><span class="vjs-grid-img"><span class="vjs-bg" style="background-image:url('+settings.related[a].thumb+')"></span><label>'+settings.related[a].title+"</label>";""!=settings.related[a].duration&&void 0!==settings.related[a].duration&&(u+="<i>"+settings.related[a].duration+"</i>"),u+="</a>",l.innerHTML=u,n.appendChild(l)}isTouchDevice&&(jQuery(pobject).find(".vjs-grid-img label").css("opacity","1"),jQuery(pobject).find(".vjs-grid-img i").css("opacity","1"),jQuery(pobject).find(".vjs-grid-img label").fadeIn(0),jQuery(pobject).find(".vjs-grid-img i").fadeIn(0)),jQuery(pobject).find(".vjs-grid-img a").bind(setEvent("click"),function(e){e.stopImmediatePropagation()}),jQuery(pobject).find(".vjs-related-button").bind(setEvent("touchstart click"),function(e){e.preventDefault(),e.stopImmediatePropagation(),thiso.pauseLock=!0,jQuery(pobject).find(".vjs-menu-settings").addClass("vjs-hidden"),jQuery(pobject).find(".vjs-extend-menu").addClass("vjs-hidden"),jQuery(r).removeClass("vjs-hidden"),jQuery(r).show(),r.style.opacity=1,settings.isAddon=!0,jQuery(pobject).find(".vjs-logo").addClass("vjs-hidden"),jQuery(pobject).find(".vjs-big-play-button").addClass("vjs-hidden"),jQuery(pobject).find(".vjs-control-bar").addClass("vjs-hidden");var t=player.paused();player.pause(),jQuery(s).bind(setEvent("click"),function(e){e.preventDefault(),jQuery(pobject).find(".vjs-logo").removeClass("vjs-hidden"),jQuery(pobject).find(".vjs-big-play-button").removeClass("vjs-hidden"),jQuery(pobject).find(".vjs-control-bar").removeClass("vjs-hidden"),settings.isAddon=!1,thiso.pauseLock=!1,1==t&&3!=settings.newstate||player.play(),jQuery(r).addClass("vjs-hidden")})})}else jQuery(pobject).find(".vjs-related-button").remove(),jQuery(pobject).find(".vjs-extend-menu").css("top","-30px");if(settings.shareMenu&&settings.settingsButton){var c=document.createElement("div");c.className="vjs-sharing-overlay vjs-hidden";var d=document.createElement("div");d.className="vjs-sharing-container";var h=document.createElement("div");h.className="vjs-sharing-body",jQuery(pobject).attr("shareUrl")&&(settings.shareUrl=jQuery(pobject).attr("shareUrl"));var p=settings.shareUrl||document.location.href;jQuery(pobject).attr("shareEmbed")&&(settings.shareEmbed=jQuery(pobject).attr("shareEmbed"));var f=settings.shareEmbed||"N/A";jQuery(pobject).attr("shareTitle")&&(settings.shareTitle=jQuery(pobject).attr("shareTitle"));var m=document.createElement("div");m.className="vjs-close-btn vjs-share-close";var g=(g='<div class="vjs-inputs-body"><h2>'+player.localize("Link")+'</h2><input type="text" value="'+p+'" /><h2>'+player.localize("Embed")+'</h2><input class="embed-code" type="text" value="" /></div>')+'<div class="vjs-inputs-body"><h2>'+player.localize("Social")+"</h2></div>";g+='<div class="vjs-share-block"><i title="Dacebook" id="share_facebook" class="vjs-share-icon nv vjs-facebook-square" role="button" aria-live="polite" tabindex="0"></i>',g+='<i title="Twitter" id="share_twitter" class="vjs-share-icon nv vjs-twitter-square" role="button" aria-live="polite" tabindex="0"></i>',g+='<i title="Pinterest" id="share_pinterest" class="vjs-share-icon nv vjs-pinterest-square" role="button" aria-live="polite" tabindex="0"></i>',g+='<i title="Google+" id="share_google" class="vjs-share-icon nv vjs-google-plus-square" role="button" aria-live="polite" tabindex="0"></i></div>',h.innerHTML=g,d.appendChild(h),c.appendChild(m),c.appendChild(d),player.el().appendChild(c),jQuery(c).css("opacity","0"),jQuery(pobject).find(".embed-code").val(f),jQuery(pobject).find(".vjs-share-button").bind(setEvent("click"),function(e){e.preventDefault(),e.stopImmediatePropagation(),jQuery(pobject).find(".vjs-menu-settings").addClass("vjs-hidden"),jQuery(pobject).find(".vjs-extend-menu").addClass("vjs-hidden"),jQuery(c).removeClass("vjs-hidden"),jQuery(c).show(),jQuery(c).css("opacity","1"),thiso.pauseLock=!0,jQuery(pobject).find(".vjs-big-play-button").addClass("vjs-hidden"),settings.isAddon=!0;var t=player.paused();if(1!=t&&player.pause(),"auto"==settings.sharemethod)var i={url:settings.shareUrl||document.location.href};else i={url:settings.shareUrl||document.location.href,title:settings.shareTitle||document.title,description:player.localize("Check out this cool video on")+" "+settings.shareUrl,pubid:settings.pubid||null};jQuery(pobject).find("[id*='share_']").on(setEvent("click"),function(e){e.preventDefault(),e.stopImmediatePropagation();var t="";switch(jQuery(this).attr("id").split("_")[1]){case"facebook":t="facebook";break;case"twitter":t="twitter";break;case"pinterest":t="pinterest";break;case"google":t="googleplus"}window.open("http://api.addthis.com/oexchange/0.8/forward/"+t+"/offer?"+function(e){var t=[];for(var i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")}(i),"AddThis","height=450,width=550,modal=yes,alwaysRaised=yes")}),jQuery(pobject).find(".vjs-inputs-body").bind(setEvent("click"),function(e){e.preventDefault(),e.stopImmediatePropagation()}),jQuery(pobject).find(".vjs-inputs-body input").bind(setEvent("click"),function(e){this.select()}),jQuery(window).bind(setEvent("click"),function(e){e.preventDefault(),jQuery(window).unbind(setEvent("click")),jQuery(c).addClass("vjs-hidden"),jQuery(pobject).find(".vjs-big-play-button").removeClass("vjs-hidden"),settings.isAddon=!1,thiso.pauseLock=!1,1==t&&3!=settings.newstate||player.play()})})}if(settings.rateMenu&&jQuery(pobject).find(".vjs-speed").on(setEvent("click"),function(e){e.preventDefault(),e.stopImmediatePropagation();var t=jQuery(this).html();t=t.replace("x ",""),parseFloat(t)>0&&(player.playbackRate(t),jQuery(".vjs-speed").removeClass("vjs-current"),jQuery(this).addClass("vjs-current"))}),settings.zoomMenu){var y,v,b=function(e){player.id();var t=jQuery(pobject).find(".vjs-tech");zoomObject(t,e),jQuery(pobject).find(".vjs-zoom-info").html(player.localize("ZOOM")+": "+parseInt(100*e)+" %<span>"+player.localize("Use +/- key and arrow keys to scroll zoomed area")+"</span>"),e>1?(videojs.options.blockKeys=!0,jQuery(pobject).find(".vjs-zoom-parent").removeClass("vjs-zoom-hidden")):(videojs.options.blockKeys=!1,jQuery(pobject).find(".vjs-zoom-parent").addClass("vjs-zoom-hidden"),jQuery(t).css("left","0"),jQuery(t).css("top","0"));var i=(e-1)/4;i=parseInt(100*i),jQuery(pobject).find(".vjs-zoom-level").css("height",i+"%")},_=function(e){var t=jQuery(pobject).find(".vjs-zoom-slider")[0];if("ontouchstart"in document)var i=(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageY;else i=e.pageY;var r=i-findPosY(t);r>70&&(r=70),r<0&&(r=0);var n=parseInt(100-r/70*100);jQuery(pobject).find(".vjs-zoom-level").css("height",n+"%");var s=1+4*n/100;k=s,player.id(),zoomObject(jQuery(pobject).find(".vjs-tech"),s),jQuery(pobject).find(".vjs-zoom-info").html(player.localize("ZOOM")+": "+parseInt(100*s)+" %<span>"+player.localize("Use +/- key and arrow keys to scroll zoomed area")+"</span>"),s>1?(videojs.options.blockKeys=!0,jQuery(pobject).find(".vjs-zoom-parent").removeClass("vjs-zoom-hidden")):(videojs.options.blockKeys=!1,jQuery(pobject).find(".vjs-zoom-parent").addClass("vjs-zoom-hidden"))},T=function(){var e=jQuery(pobject).find(".vjs-tech"),t=parseInt(jQuery(e).css("top")),i=parseInt(jQuery(e).css("left"));"down"==C&&(t+=5),"up"==C&&(t-=5),"left"==C&&(i-=5),"right"==C&&(i+=5),jQuery(e).css("left",i+"px"),jQuery(e).css("top",t+"px")},S=!1,w=!1,C="",k=1;if(settings.zoomReset){if(this.zoom_panel=document.createElement("div"),this.zoom_panel.className="vjs-zoom-parent vjs-zoom-hidden",this.zoom_button=document.createElement("div"),this.zoom_button.className="vjs-reset-zoom",this.zoom_button.innerHTML=player.localize("ZOOM RESET"),this.zoom_panel.appendChild(this.zoom_button),1!=isTouchDevice){this.zoom_info=document.createElement("div"),this.zoom_info.className="vjs-reset-info",this.zoom_menu=document.createElement("div"),this.zoom_menu.className="vjs-reset-menu";var E='<div class="vjs-reset-header">'+player.localize("Keyboard control")+"</div>";E=(E=(E=(E=(E=E+'<div><span class="s1">+/-</span>'+player.localize("zoom area")+"</div>")+'<div><span class="s1">&larr;</span>'+player.localize("scroll left")+"</div>")+'<div><span class="s1">&rarr;</span>'+player.localize("scroll right")+"</div>")+'<div><span class="s1">&uarr;</span>'+player.localize("scroll up")+"</div>")+'<div><span class="s1">&darr;</span>'+player.localize("scroll down")+"</div>",this.zoom_menu.innerHTML=E,this.zoom_panel.appendChild(this.zoom_menu),this.zoom_panel.appendChild(this.zoom_info)}jQuery(pobject).find(".vjs-control-bar").append(this.zoom_panel)}var j=player.el();j.hasAttribute("tabIndex")||j.setAttribute("tabIndex","-1"),j.style.outline="none",settings.zoomScroll&&jQuery(pobject).bind("mousewheel DOMMouseScroll",function(e){e.preventDefault(),e=window.event||e,Math.max(-1,Math.min(1,e.wheelDelta||-e.detail))>0?(k+=.1)>5&&(k=5):(k-=.1)<1&&(k=1),b(k)}),jQuery(document).bind("keydown",function(e){var t=e.keyCode;if(k>1&&36==t){e.preventDefault(),player.id();var i=jQuery(pobject).find(".vjs-tech");jQuery(i).css("left","0"),jQuery(i).css("top","0")}if(k>1&&(40==t||38==t||37==t||39==t||176==t||177==t)){if(e.preventDefault(),S)return;S=!0,C="",clearInterval(y),40==t&&(C="down"),38==t&&(C="up"),37!=t&&176!=t||(C="left"),39!=t&&177!=t||(C="right"),""!=C&&(jQuery(document).bind("keyup",function(){S=!1,clearInterval(y),jQuery(document).unbind("keyup")}),y=setInterval(T,25))}if((107==t||109==t)&&1==firstplay){if(e.preventDefault(),w)return;w=!0,clearInterval(v),jQuery(document).bind("keyup",function(){w=!1,clearInterval(v),jQuery(document).unbind("keyup")}),v=setInterval(function(){107==t&&(k+=.1),109==t&&(k-=.1),k>5&&(k=5),k<1&&(k=1),b(k)},50)}}),settings.zoomReset&&(jQuery(pobject).find(".vjs-reset-info").bind("mouseenter",function(e){jQuery(pobject).find(".vjs-reset-menu").slideDown(200)}),jQuery(pobject).find(".vjs-reset-info").bind("mouseleave",function(e){jQuery(pobject).find(".vjs-reset-menu").slideUp(200)}),jQuery(pobject).find(".vjs-reset-zoom").bind(setEvent("click"),function(e){reset_zoom(),e.preventDefault(),e.stopImmediatePropagation()})),jQuery(pobject).find(".vjs-zoom-reset").bind(setEvent("click"),function(e){reset_zoom(),e.preventDefault(),e.stopImmediatePropagation()}),jQuery(pobject).find(".vjs-zoom-slider").bind("click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),jQuery(pobject).find(".vjs-zoom-slider").bind(setEvent("mousedown"),function(e){e.preventDefault(),blockTextSelection(),jQuery(pobject).find("#setting_menu").addClass("vjs-show"),jQuery(pobject).find("#vjs-zoom_menu").addClass("vjs-visible"),_(e),1!=isTouchDevice&&jQuery(pobject).find(".vjs-zoom-info").removeClass("vjs-hidden"),jQuery(document).bind(setEvent("mousemove"),function(e){e.preventDefault(),_(e)}),jQuery(document).bind(setEvent("mouseup"),function(e){e&&e.preventDefault(),unblockTextSelection(),jQuery(pobject).find(".vjs-zoom-info").addClass("vjs-hidden"),jQuery(pobject).find("#setting_menu").removeClass("vjs-show"),jQuery(pobject).find("#vjs-zoom_menu").removeClass("vjs-visible"),jQuery(document).unbind(setEvent("mouseup")),jQuery(document).unbind(setEvent("mousemove"))})})}}})}function reset_zoom(){videojs.options.blockKeys=!1,currentZoom=1,isKey=!1,jQuery(document).unbind(setEvent("keyup")),jQuery(pobject).find(".vjs-zoom-level").css("height","0");var e=jQuery(pobject).find(".vjs-tech");zoomObject(e,1),jQuery(e).css("top","0px"),jQuery(e).css("left","0px"),jQuery(pobject).find(".vjs-zoom-info").addClass("vjs-hidden"),jQuery(pobject).find(".vjs-zoom-parent").addClass("vjs-zoom-hidden")}0!=settings.mirrorButton&&(player.controlBar.mirrorButton=player.controlBar.addChild("button",{el:videojs.dom.createEl("div",{title:player.localize("Mirror view"),text:"Mirror view",className:"vjs-mirror-button vjs-control vjs-button"},{role:"button","aria-live":"polite","aria-disabled":"false"})}),0!=settings.settingsButton?player.controlBar.el_.insertBefore(player.controlBar.mirrorButton.el_,player.controlBar.getChildById("settings_button").el_):player.controlBar.el_.insertBefore(player.controlBar.mirrorButton.el_,player.controlBar.getChild("fullscreenToggle").el_),jQuery(pobject).find(".vjs-mirror-button").bind("touchstart click",function(e){e.preventDefault(),jQuery(pobject).hasClass("vjs-has-started"),jQuery(pobject).hasClass("vjs-ended"),jQuery(pobject).hasClass("vjs-has-started")&&!jQuery(pobject).hasClass("vjs-ended")&&(jQuery(this).hasClass("vjs-mirrored")?(jQuery(this).removeClass("vjs-mirrored"),jQuery(pobject).find(".vjs-tech").css("transform","rotateY(0)")):(jQuery(this).addClass("vjs-mirrored"),jQuery(pobject).find(".vjs-tech").css("transform","rotateY(180deg)")))})),player.trigger("nuevoReady")})}function defer(e){window.jQuery?e():setTimeout(function(){defer(e)},50)}function compareResolutions(e,t){return e.res&&t.res?+t.res-+e.res:0}function bucketSources(e){var t={label:{},res:{},type:{},first:{}};return e.map(function(e){e.default?e.first="yes":e.first="no",initResolutionKey(t,"label",e),initResolutionKey(t,"res",e),initResolutionKey(t,"type",e),initResolutionKey(t,"first",e),appendSourceToKey(t,"label",e),appendSourceToKey(t,"res",e),appendSourceToKey(t,"type",e),appendSourceToKey(t,"first",e)}),t}function initResolutionKey(e,t,i){null==e[t][i[t]]&&(e[t][i[t]]=[])}function appendSourceToKey(e,t,i){e[t][i[t]].push(i)}function chooseSrc(e,t){for(var i=settings.default,r="",n=0;n<t.length;n++)if("yes"==t[n].first){i=t[n].res,r=t[n].label;break}return""==r&&(i=t[0].res,r=t[0].label),settings.resolutionLabel=!0,{res:i,label:r,sources:e.res[i]}}function initResolutionForYt(e){if(1==settings.youtuberesolution){e.tech_.ytPlayer.setPlaybackQuality("large");var t=e.el();jQuery(t).attr("slideImage",""),settings.slideImage="",e.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(){e.trigger("resolutionchange")}),e.one("play",function(){jQuery(t).find(".vjs-progress-slide").remove(),jQuery(t).find(".vjs-resolution-button").remove();try{for(var i=e.tech_.ytPlayer.getAvailableQualityLevels(),r=e.tech_.ytPlayer.getPlaybackQuality(),n=new Array,s=0;s<i.length;s+=1)"auto"!=i[s]&&n.push(i[s]);var o={hd1080:{res:"1080p",label:"1080",yt:"hd1080"},hd720:{res:"720p",label:"720p",yt:"hd720"},large:{res:"480p",label:"480p",yt:"large"},medium:{res:"360p",label:"360p",yt:"medium"},small:{res:"240p",label:"240p",yt:"small"},tiny:{res:"144p",label:"144p",yt:"tiny"},auto:{res:"auto",label:"auto",yt:"default"}},a=[];n.map(function(t){a.push({src:e.src().src,type:e.src().type,label:o[t].label,res:o[t].res,_yt:o[t].yt})});var l=(groupedSrc=bucketSources(a)).label.large,u="480p";"highres"==r&&(u="1080p",l=groupedSrc.label.highres),"hd1080"==r&&(u="1080p",l=groupedSrc.label.hd1080),"hd720"==r&&(u="720p",l=groupedSrc.label.hd720),"large"==r&&(u="480p",l=groupedSrc.label.large),"medium"==r&&(u="360p",l=groupedSrc.label.medium),"small"==r&&(u="240p",l=groupedSrc.label.small),"tiny"==r&&(u="144p",l=groupedSrc.label.tiny);var c={label:u,res:u,sources:l},d=new ResolutionMenuButton(e,{sources:groupedSrc,initialySelectedLabel:c.label,initialySelectedRes:c.res,customSourcePicker:function(t,i,r){var n=e.tech_.ytPlayer.getPlayerState(),s=e.tech_.ytPlayer.getCurrentTime();return e.tech_.ytPlayer.stopVideo(),e.tech_.ytPlayer.setPlaybackQuality(i[0]._yt),e.tech_.ytPlayer.seekTo(s,!0),1==n&&e.tech_.ytPlayer.playVideo(),e}},settings,label);d.el().classList.add("vjs-resolution-button"),e.controlBar.settingsButton?e.controlBar.resolutionSwitcher=e.controlBar.el_.insertBefore(d.el_,e.controlBar.settingsButton.el_):e.controlBar.resolutionSwitcher=e.controlBar.el_.insertBefore(d.el_,e.controlBar.getChild("fullscreenToggle").el_),videojs.options.ytnoload=!0,videojs.options.ytSource=e.currentSrc(),jQuery(h).find(".vjs-resolution-button").attr("title",e.localize("Quality")),jQuery(t).find(".vjs-resolution-button").find(".vjs-menu-item").css("height","30px"),jQuery(t).find(".vjs-resolution-button").find(".vjs-menu-item").css("line-height","30px");var h=e.el();jQuery(h).find(".vjs-resolution-button").find(".vjs-menu-button").remove(),jQuery(h).find(".vjs-resolution-button").find(".vjs-menu").addClass("vjs-hidden"),jQuery(h).find(".vjs-resolution-button").find(".vjs-menu").addClass("vjs-resolution-menu"),setup_resolution(h)}catch(e){}})}}function zoomObject(e,t){jQuery(e).css({"-webkit-transform":"scale("+t+")","-moz-transform":"scale("+t+")","-ms-transform":"scale("+t+")","-o-transform":"scale("+t+")",transform:"scale("+t+")"})}function findPosY(e){for(var t=e.offsetTop;e=e.offsetParent;)t+=e.offsetTop;return t}function blockTextSelection(){jQuery(document).css("-webkit-user-select","none"),jQuery(document).css("-moz-user-select","none"),jQuery("body").css("-webkit-user-select","none"),jQuery("body").css("-moz-user-select","none"),document.body.focus(),document.onselectstart=function(){return!1}}function unblockTextSelection(){jQuery(document).css("-webkit-user-select","text"),jQuery(document).css("-moz-user-select","text"),jQuery("body").css("-webkit-user-select","text"),jQuery("body").css("-moz-user-select","text"),document.onselectstart=function(){return!0}}function setEvent(e){if("ontouchstart"in document.documentElement)switch(e){case"click":e="touchend";break;case"mousedown":e="touchstart";break;case"mousemove":e="touchmove";break;case"mouseup":e="touchend"}return e}},videojs.registerPlugin("nuevoPlugin",nuevoPlugin)}(window,videojs)}(),function(e,t){1==jskey&&("object"==("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["videojs"],function(i){return e.Youtube=t(i)}):e.Youtube=t(e.videojs))}(this,function(e){"use strict";var t=e.getComponent("Tech"),i=e.extend(t,{constructor:function(e,r){t.call(this,e,r),this.setPoster(e.poster),this.setSrc(this.options_.source,!0),this.ytplaying=!1,setTimeout(function(){try{this.el_.parentNode.className+=" vjs-youtube"}catch(e){}a&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),i.isApiReady?this.initYTPlayer():i.apiReadyQueue.push(this)}.bind(this))},dispose:function(){this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile",""),jQuery(this.el_).remove()},createEl:function(){var e=document.createElement("div");e.setAttribute("id",this.options_.techId),e.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute"),e.setAttribute("class","vjs-tech");var t=document.createElement("div");if(t.appendChild(e),!a&&!this.options_.ytControls){var i=document.createElement("div");i.setAttribute("class","vjs-iframe-blocker"),i.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),i.onclick=function(){this.pause()}.bind(this),t.appendChild(i)}return t},initYTPlayer:function(){var e={controls:0,modestbranding:1,iv_load_policy:3,rel:0,showinfo:0,loop:this.options_.loop?1:0};void 0!==this.options_.autohide&&(e.autohide=this.options_.autohide),void 0!==this.options_.cc_load_policy&&(e.cc_load_policy=this.options_.cc_load_policy),void 0!==this.options_.ytControls&&(e.controls=this.options_.ytControls),void 0!==this.options_.disablekb&&(e.disablekb=this.options_.disablekb),void 0!==this.options_.end&&(e.end=this.options_.end),void 0!==this.options_.color&&(e.color=this.options_.color),e.controls?void 0!==this.options_.fs&&(e.fs=this.options_.fs):e.fs=0,void 0!==this.options_.end&&(e.end=this.options_.end),void 0!==this.options_.hl?e.hl=this.options_.hl:void 0!==this.options_.language&&(e.hl=this.options_.language.substr(0,2)),void 0!==this.options_.iv_load_policy&&(e.iv_load_policy=this.options_.iv_load_policy),void 0!==this.options_.list?e.list=this.options_.list:this.url&&void 0!==this.url.listId&&(e.list=this.url.listId),void 0!==this.options_.listType&&(e.listType=this.options_.listType),void 0!==this.options_.modestbranding&&(e.modestbranding=this.options_.modestbranding),void 0!==this.options_.playlist&&(e.playlist=this.options_.playlist),void 0!==this.options_.playsinline&&(e.playsinline=this.options_.playsinline),void 0!==this.options_.rel&&(e.rel=this.options_.rel),void 0!==this.options_.showinfo&&(e.showinfo=this.options_.showinfo),void 0!==this.options_.start&&(e.start=this.options_.start),void 0!==this.options_.theme&&(e.theme=this.options_.theme),this.activeVideoId=this.url?this.url.videoId:null,this.activeList=e.list,this.ytPlayer=new YT.Player(this.options_.techId,{videoId:this.activeVideoId,playerVars:e,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onError:this.onPlayerError.bind(this)}})},onPlayerReady:function(){this.playerReady_=!0,this.triggerReady(),e.options.wasPreroll&&(this.playOnReady=!0),this.playOnReady?this.play():this.cueOnReady&&(this.ytPlayer.cueVideoById(this.url.videoId),this.activeVideoId=this.url.videoId)},onPlayerPlaybackQualityChange:function(){},onPlayerStateChange:function(e){var t=e.data;if(t!==this.lastState&&!this.errorNumber)switch(this.lastState=t,t){case-1:this.trigger("loadstart"),this.trigger("loadedmetadata"),this.trigger("durationchange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:jQuery(".vjs-iframe-blocker").css("background-color","transparent"),this.trigger("timeupdate"),this.trigger("durationchange"),this.trigger("playing"),this.trigger("play");var i=jQuery(".vjs-youtube").parent();jQuery(i).find(".ytspinner").addClass("vjs-abs-hidden"),jQuery(i).find(".vjs-loading-spinner").addClass("vjs-abs-hidden"),this.ytplaying=!0,this.isSeeking&&this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay"),this.isSeeking?this.onSeeked():this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting")}},onPlayerError:function(e){this.errorNumber=e.data,this.trigger("error"),this.ytPlayer.stopVideo(),this.ytPlayer.destroy(),this.ytPlayer=null},error:function(){switch(this.errorNumber){case 5:return{code:"Error while trying to play the video"};case 2:case 100:case 150:return{code:"Unable to find the video"};case 101:return{code:"Playback on other Websites has been disabled by the video owner."}}return{code:"YouTube unknown error ("+this.errorNumber+")"}},src:function(e){return e&&this.setSrc({src:e}),this.source},poster:function(){return a?null:this.poster_},setPoster:function(e){this.poster_=e},setSrc:function(e){e&&e.src&&(delete this.errorNumber,this.source=e,this.url=i.parseUrl(e.src),this.options_.poster||this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay&&!a?this.isReady_?this.play():this.playOnReady=!0:this.activeVideoId!==this.url.videoId&&(this.isReady_?(this.ytPlayer.cueVideoById(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(e){this.options_.autoplay=e},loop:function(){return this.options_.loop},setLoop:function(e){this.options_.loop=e},play:function(){if(1!=this.ytplaying){var e=jQuery(".vjs-youtube").parent();jQuery(e).find(".ytspinner").removeClass("vjs-hidden"),jQuery(e).find(".vjs-big-play-button").addClass("vjs-hidden"),this.ytplaying=!0}this.url&&this.url.videoId&&(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():(this.ytPlayer.loadPlaylist(this.url.listId),this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?this.ytPlayer.playVideo():(this.ytPlayer.loadVideoById(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))},pause:function(){if(this.ytPlayer){this.ytPlayer.pauseVideo();var e=jQuery(".vjs-youtube").parent();jQuery(e).find(".vjs-big-play-button").removeClass("vjs-hidden")}},paused:function(){return!this.ytPlayer||this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING},currentTime:function(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0},setCurrentTime:function(e){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime()),this.isSeeking||(this.wasPausedBeforeSeek=this.paused()),this.ytPlayer.seekTo(e,!0),this.trigger("timeupdate"),this.trigger("seeking"),this.isSeeking=!0,this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==e&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},seeking:function(){return this.isSeeking},seekable:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}};var e=this.ytPlayer.getDuration();return{length:this.ytPlayer.getDuration(),start:function(){return 0},end:function(){return e}}},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval),this.isSeeking=!1,this.wasPausedBeforeSeek&&this.pause(),this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1},setPlaybackRate:function(e){this.ytPlayer&&(this.ytPlayer.setPlaybackRate(e),this.trigger("ratechange"))},duration:function(){return this.ytPlayer?this.ytPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return!!this.ytPlayer&&this.lastState===YT.PlayerState.ENDED},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(e){this.ytPlayer&&(this.ytPlayer.setVolume(100*e),this.setTimeout(function(){this.trigger("volumechange")},50))},muted:function(){return!!this.ytPlayer&&this.ytPlayer.isMuted()},setMuted:function(e){this.ytPlayer&&(this.muted(!0),e?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout(function(){this.trigger("volumechange")},50))},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}};var e=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return{length:this.ytPlayer.getDuration(),start:function(){return 0},end:function(){return e}}},preload:function(){},load:function(){},reset:function(){},supportsFullScreen:function(){return!0},checkHighResPoster:function(){var e="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var t=new Image;t.onload=function(){if("naturalHeight"in t){if(t.naturalHeight<=90||t.naturalWidth<=120)return}else if(t.height<=90||t.width<=120)return;this.poster_=e,this.trigger("posterchange")}.bind(this),t.onerror=function(){},t.src=e}catch(e){}}});i.isSupported=function(){return!0},i.canPlaySource=function(e){return i.canPlayType(e.type)},i.canPlayType=function(e){return"video/youtube"===e};var r,n,s,o,a=e.browser.IS_IOS||(r=window.navigator.userAgent.match(/applewebkit\/(\d*).*Version\/(\d*.\d*)/i),e.browser.IS_ANDROID&&e.browser.ANDROID_VERSION<5&&r&&r[2]>0);i.parseUrl=function(e){var t={videoId:null},i=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return i&&11===i[2].length&&(t.videoId=i[2]),(i=e.match(/[?&]list=([^#\&\?]+)/))&&i[1]&&(t.listId=i[1]),t},i.apiReadyQueue=[],void 0!==e.registerTech?e.registerTech("Youtube",i):e.registerComponent("Youtube",i),function e(){1!=nuevo_yt?setTimeout(e,100):YT.ready(function(){i.isApiReady=!0;for(var e=0;e<i.apiReadyQueue.length;++e)i.apiReadyQueue[e].initYTPlayer()})}(),n=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }",s=document.head||document.getElementsByTagName("head")[0],(o=document.createElement("style")).type="text/css",o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n)),s.appendChild(o)}),function(e,t){"use strict";var i,r={src:"",id:void 0,href:"",target:"_blank",allowSkip:!0,skipTime:0,repeatAd:!1,adsOptions:{}};i=function(i){function n(e,t){var i=jQuery(e).find(".vjs-control-bar"),r=jQuery(i).children();1==t?(jQuery(i).find(".vjs-fullscreen-control").css("position","absolute"),jQuery(i).find(".vjs-fullscreen-control").css("right","0")):jQuery(i).find(".vjs-fullscreen-control").css("position","relative");for(var n=0;n<r.length;n+=1){var s=r[n].className;(s.indexOf("vjs-fullscreen-control")||s.indexOf("vjs-preroll-info")||s.indexOf("vjs-remaining-time"))&&(1==t?(jQuery(e).find(".vjs-fullscreen-control").addClass("vjs-preroll-spec"),jQuery(e).find(".vjs-preroll-info").addClass("vjs-preroll-spec"),jQuery(e).find(".vjs-remaining-time").addClass("vjs-preroll-spec")):(jQuery(e).find(".vjs-fullscreen-control").removeClass("vjs-preroll-spec"),jQuery(e).find(".vjs-preroll-info").removeClass("vjs-preroll-spec"),jQuery(e).find(".vjs-remaining-time").removeClass("vjs-preroll-spec"))),s.indexOf("vjs-fullscreen-control")<0&&s.indexOf("vjs-play-control")<0&&s.indexOf("vjs-preroll-info")<0&&s.indexOf("vjs-remaining-time")&&(1==t?(jQuery(r[n]).addClass("vjs-hidden-plus"),jQuery(i).find(".vjs-remaining-time-display").show(),jQuery(i).addClass("vjs-visible"),jQuery(e).find(".vjs-poster").addClass("vjs-hidden"),jQuery(e).find(".ytspinner").addClass("vjs-hidden-plus")):(jQuery(r[n]).removeClass("vjs-hidden-plus"),jQuery(i).find(".vjs-remaining-time-display").hide(),jQuery(i).removeClass("vjs-visible"),jQuery(e).find(".ytspinner").removeClass("vjs-hidden-plus")))}}var s=t.mergeOptions(r,i),o=this;o.ads(s.adsOptions),o.preroll={adDone:!1},o.on("contentupdate",function(){o.preroll.shouldPlayPreroll()?o.trigger("adsready"):o.trigger("adscanceled")}),o.on("readyforpreroll",function(){if(o.preroll.shouldPlayPreroll()){o.ads.startLinearAdMode(),o.src(s.src),o.one("durationchange",function(){o.play()}),o.one("progress",function(){}),o.one("adloadstart",function(){o.play()});var t=document.createElement("div");if(t.className="vjs-preroll-info",t.innerHTML=o.localize("Advertisement"),o.preroll.adinfo=t,o.controlBar.el_.insertBefore(t,o.controlBar.getChild("remainingTimeDisplay").el_),n(o.el(),1),""!==s.href){var i=document.createElement("a");i.className="preroll-blocker",i.href=s.href,i.target=s.target||"_blank",i.onclick=function(){null!=s.id?player_.trigger("adclick",{id:s.id}):o.trigger("adclick")},o.preroll.blocker=i,o.el().insertBefore(i,o.controlBar.el())}if(!1!==s.allowSkip){var r=document.createElement("div");r.className="preroll-skip-button",o.preroll.skipButton=r,o.el().appendChild(r),r.onclick=function(t){var i=i||e.Event;if((" "+o.preroll.skipButton.className+" ").indexOf(" enabled ")>=0&&o.preroll.exitPreroll(),void 0===i.prototype.stopPropagation)return!1;t.stopPropagation()},o.on("adtimeupdate",o.preroll.timeupdate)}o.one("adended",o.preroll.exitPreroll),o.one("error",o.preroll.prerollError)}else o.trigger("adscanceled")}),o.preroll.shouldPlayPreroll=function(){return""!==s.src&&!0!==o.preroll.adDone},o.preroll.exitPreroll=function(){void 0!==o.preroll.skipButton&&o.preroll.skipButton.parentNode.removeChild(o.preroll.skipButton),o.preroll.adinfo.parentNode.removeChild(o.preroll.adinfo),n(o.el(),0),void 0!==o.preroll.blocker&&o.preroll.blocker.parentNode.removeChild(o.preroll.blocker),o.off("adended",o.preroll.exitPreroll),o.off("error",o.preroll.prerollError),!0!==s.repeatAd&&(o.preroll.adDone=!0),t.options.wasPreroll=!0,o.ads.endLinearAdMode()},o.preroll.timeupdate=function(e){o.loadingSpinner.el().style.display="none";var t=Math.ceil(s.skipTime-o.currentTime());if(t>0){var i="",r="";try{r=o.el().getAttribute("poster")}catch(e){}""!=r&&null!=r&&(i='<img src="'+r+'" />'),i=i+"<span>"+o.localize("Skip Ad in")+" "+t+" "+o.localize("seconds")+"</span>",o.preroll.skipButton.innerHTML=i}else-1===(" "+o.preroll.skipButton.className+" ").indexOf(" enabled ")&&(o.preroll.skipButton.className+=" enabled",o.preroll.skipButton.innerHTML="<span>"+o.localize("Skip Now!")+'</span><i class="circle"></i>')},o.preroll.prerollError=function(e){o.preroll.exitPreroll()},o.ready(function(){if(o.currentSrc()){var i=!1,r=o.currentSrc().match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);r&&11===r[2].length&&("ontouchstart"in e||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(i=!0),o.preroll.shouldPlayPreroll()&&1!=i?o.trigger("adsready"):(t.options.ytnoload=!0,t.options.autoplay=!0,o.trigger("adscanceled"))}})},t.registerPlugin("preroll",i)}(window,window.videojs);
