function getFormData(e){var t=e.serializeArray(),i={};return $.map(t,function(e,t){i[e.name]=e.value}),i}function updateUserCompletionProgress(e){$(".userCompletion-progress-bar").attr("aria-valuenow",e),$(".userCompletion-progress-bar").css({width:e+"%"}),$(".userCompletion-percent-text").html(e),$(".userCompletion-progress-bar").removeClass("bg-danger").removeClass("bg-warning").removeClass("bg-info").removeClass("bg-success"),e=parseInt(e),e<=25?$(".userCompletion-progress-bar").addClass("bg-danger"):e>25&&e<=50?$(".userCompletion-progress-bar").addClass("bg-warning"):e>50&&e<=75||(e>75&&e<100?$(".userCompletion-progress-bar").addClass("bg-info"):100===e&&$(".userCompletion-progress-bar").addClass("bg-success"))}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){"use strict";e.fn.fileinputLocales={},e.fn.fileinputThemes={},String.prototype.setTokens=function(e){var t,i,a=this.toString();for(t in e)e.hasOwnProperty(t)&&(i=new RegExp("{"+t+"}","g"),a=a.replace(i,e[t]));return a};var t,i;t={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",OBJECT_PARAMS:'<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],logMessages:{ajaxError:"{status}: {error}. Error Details: {text}.",badDroppedFiles:"Error scanning dropped files!",badExifParser:"Error loading the piexif.js library. {details}",badInputType:'The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.',exifWarning:"To avoid this warning, either set `autoOrientImage` to `false` OR ensure you have loaded the piexif.js library correctly on your page.",invalidChunkSize:'Invalid "uploadResumableSize" ({chunkSize}). Resumable uploads are disabled.',invalidThumb:'Invalid thumb frame with id: "{id}".',noResumableSupport:"The browser does not support resumable or chunk uploads.",noUploadUrl:'The "uploadUrl" is not set. Ajax uploads and resumable uploads have been disabled.',retryStatus:"Retrying upload for chunk # {chunk} for {filename}... retry # {retry}."},objUrl:window.URL||window.webkitURL,now:function(){return new Date},round:function(e){return e=parseFloat(e),isNaN(e)?0:Math.floor(Math.round(e))},getFileRelativePath:function(e){return String(e.relativePath||e.webkitRelativePath||t.getFileName(e)||null)},getFileId:function(e,i){var a=t.getFileRelativePath(e);return"function"==typeof i?i(e):e&&a?e.size+"_"+a.replace(/\s/gim,"_"):null},getElapsed:function(t){var i=t,a="",n={},r={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};return Object.keys(r).forEach(function(e){n[e]=Math.floor(i/r[e]),i-=n[e]*r[e]}),e.each(n,function(e,t){t>0&&(a+=(a?" ":"")+t+e.substring(0,1))}),a},debounce:function(e,t){var i;return function(){var a=arguments,n=this;clearTimeout(i),i=setTimeout(function(){e.apply(n,a)},t)}},stopEvent:function(e){e.stopPropagation(),e.preventDefault()},getFileName:function(e){return e?e.fileName||e.name||"":""},createObjectURL:function(e){return t.objUrl&&t.objUrl.createObjectURL&&e?t.objUrl.createObjectURL(e):""},revokeObjectURL:function(e){t.objUrl&&t.objUrl.revokeObjectURL&&e&&t.objUrl.revokeObjectURL(e)},compare:function(e,t,i){return void 0!==e&&(i?e===t:e.match(t))},isIE:function(e){var t,i;return"Microsoft Internet Explorer"===navigator.appName&&(10===e?new RegExp("msie\\s"+e,"i").test(navigator.userAgent):(t=document.createElement("div"),t.innerHTML="\x3c!--[if IE "+e+"]> <i></i> <![endif]--\x3e",i=t.getElementsByTagName("i").length,document.body.appendChild(t),t.parentNode.removeChild(t),i))},canAssignFilesToInput:function(){var e=document.createElement("input");try{return e.type="file",e.files=null,!0}catch(e){return!1}},getDragDropFolders:function(e){var t,i,a=e?e.length:0,n=0;if(a>0&&e[0].webkitGetAsEntry())for(t=0;t<a;t++)(i=e[t].webkitGetAsEntry())&&i.isDirectory&&n++;return n},initModal:function(t){var i=e("body");i.length&&t.appendTo(i)},isEmpty:function(t,i){return void 0===t||null===t||0===t.length||i&&""===e.trim(t)},isArray:function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},ifSet:function(e,t,i){return i=i||"",t&&"object"===(void 0===t?"undefined":_typeof(t))&&e in t?t[e]:i},cleanArray:function(e){return e instanceof Array||(e=[]),e.filter(function(e){return void 0!==e&&null!==e})},spliceArray:function(t,i,a){var n,r,o=0,s=[];if(!(t instanceof Array))return[];for(r=e.extend(!0,[],t),a&&r.reverse(),n=0;n<r.length;n++)n!==i&&(s[o]=r[n],o++);return a&&s.reverse(),s},getNum:function(e,t){return t=t||0,"number"==typeof e?e:("string"==typeof e&&(e=parseFloat(e)),isNaN(e)?t:e)},hasFileAPISupport:function(){return!(!window.File||!window.FileReader)},hasDragDropSupport:function(){var e=document.createElement("div");return!t.isIE(9)&&(void 0!==e.draggable||void 0!==e.ondragstart&&void 0!==e.ondrop)},hasFileUploadSupport:function(){return t.hasFileAPISupport()&&window.FormData},hasBlobSupport:function(){try{return!!window.Blob&&Boolean(new Blob)}catch(e){return!1}},hasArrayBufferViewSupport:function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}},hasResumableUploadSupport:function(){return t.hasFileUploadSupport()&&t.hasBlobSupport()&&t.hasArrayBufferViewSupport()&&(!!Blob.prototype.webkitSlice||!!Blob.prototype.mozSlice||!!Blob.prototype.slice||!1)},dataURI2Blob:function(e){var i,a,n,r,o,s,l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,d=t.hasBlobSupport();if(!((d||l)&&window.atob&&window.ArrayBuffer&&window.Uint8Array))return null;for(i=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),a=new ArrayBuffer(i.length),n=new Uint8Array(a),r=0;r<i.length;r+=1)n[r]=i.charCodeAt(r);return o=e.split(",")[0].split(":")[1].split(";")[0],d?new Blob([t.hasArrayBufferViewSupport()?n:a],{type:o}):(s=new l,s.append(a),s.getBlob(o))},arrayBuffer2String:function(e){if(window.TextDecoder)return new TextDecoder("utf-8").decode(e);var t,i,a,n,r=Array.prototype.slice.apply(new Uint8Array(e)),o="",s=0;for(t=r.length;s<t;)switch((i=r[s++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:a=r[s++],o+=String.fromCharCode((31&i)<<6|63&a);break;case 14:a=r[s++],n=r[s++],o+=String.fromCharCode((15&i)<<12|(63&a)<<6|(63&n)<<0)}return o},isHtml:function(e){var t=document.createElement("div");t.innerHTML=e;for(var i=t.childNodes,a=i.length;a--;)if(1===i[a].nodeType)return!0;return!1},isSvg:function(e){return e.match(/^\s*<\?xml/i)&&(e.match(/<!DOCTYPE svg/i)||e.match(/<svg/i))},getMimeType:function(e,t,i){switch(e){case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":return"image/jpeg";case"89504E47":return"image/png";case"47494638":return"image/gif";case"49492a00":return"image/tiff";case"52494646":return"image/webp";case"66747970":return"video/3gp";case"4f676753":return"video/ogg";case"1a45dfa3":return"video/mkv";case"000001ba":case"000001b3":return"video/mpeg";case"3026b275":return"video/wmv";case"25504446":return"application/pdf";case"25215053":return"application/ps";case"504b0304":case"504b0506":case"504b0508":return"application/zip";case"377abcaf":return"application/7z";case"75737461":return"application/tar";case"7801730d":return"application/dmg";default:switch(e.substring(0,6)){case"435753":return"application/x-shockwave-flash";case"494433":return"audio/mp3";case"425a68":return"application/bzip";default:switch(e.substring(0,4)){case"424d":return"image/bmp";case"fffb":return"audio/mp3";case"4d5a":return"application/exe";case"1f9d":case"1fa0":return"application/zip";case"1f8b":return"application/gzip";default:return t&&!t.match(/[^\u0000-\u007f]/)?"application/text-plain":i}}}},addCss:function(e,t){e.removeClass(t).addClass(t)},getElement:function(i,a,n){return t.isEmpty(i)||t.isEmpty(i[a])?n:e(i[a])},uniqId:function(){return Math.round((new Date).getTime())+"_"+Math.round(100*Math.random())},htmlEncode:function(e,t){return void 0===e?t||null:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(t,i){var a=t;return i?(e.each(i,function(e,t){"function"==typeof t&&(t=t()),a=a.split(e).join(t)}),a):a},cleanMemory:function(e){var i=e.is("img")?e.attr("src"):e.find("source").attr("src");t.revokeObjectURL(i)},findFileName:function(e){var t=e.lastIndexOf("/");return-1===t&&(t=e.lastIndexOf("\\")),e.split(e.substring(t,t+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(e){var i=document,a=i.documentElement;a&&e&&!t.checkFullScreen()?a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):i.exitFullscreen?i.exitFullscreen():i.msExitFullscreen?i.msExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen&&i.webkitExitFullscreen()},moveArray:function(t,i,a,n){var r=e.extend(!0,[],t);if(n&&r.reverse(),a>=r.length)for(var o=a-r.length;1+o--;)r.push(void 0);return r.splice(a,0,r.splice(i,1)[0]),n&&r.reverse(),r},cleanZoomCache:function(e){var t=e.closest(".kv-zoom-cache-theme");t.length||(t=e.closest(".kv-zoom-cache")),t.remove()},closeButton:function(e){return'<button type="button" class="'+(e=e?"close "+e:"close")+'" aria-label="Close">\n  <span aria-hidden="true">&times;</span>\n</button>'},getRotation:function(e){switch(e){case 2:return"rotateY(180deg)";case 3:return"rotate(180deg)";case 4:return"rotate(180deg) rotateY(180deg)";case 5:return"rotate(270deg) rotateY(180deg)";case 6:return"rotate(90deg)";case 7:return"rotate(90deg) rotateY(180deg)";case 8:return"rotate(270deg)";default:return""}},setTransform:function(e,t){e&&(e.style.transform=t,e.style.webkitTransform=t,e.style["-moz-transform"]=t,e.style["-ms-transform"]=t,e.style["-o-transform"]=t)},setImageOrientation:function(e,i,a){if(e&&e.length){var n="load.fileinputimageorient";e.off(n).on(n,function(){var n=e.get(0),r=i&&i.length?i.get(0):null,o=n.offsetHeight,s=n.offsetWidth,l=t.getRotation(a);if(e.data("orientation",a),r&&i.data("orientation",a),a<5)return t.setTransform(n,l),void t.setTransform(r,l);var d=Math.atan(s/o),u=Math.sqrt(Math.pow(o,2)+Math.pow(s,2)),c=u?o/Math.cos(Math.PI/2+d)/u:1,h=" scale("+Math.abs(c)+")";t.setTransform(n,l+h),t.setTransform(r,l+h)})}}},i=function(i,a){var n=this;n.$element=e(i),n.$parent=n.$element.parent(),n._validate()&&(n.isPreviewable=t.hasFileAPISupport(),n.isIE9=t.isIE(9),n.isIE10=t.isIE(10),(n.isPreviewable||n.isIE9)&&(n._init(a),n._listen()),n.$element.removeClass("file-loading"))},i.prototype={constructor:i,_cleanup:function(){var e=this;e.reader=null,e.clearFileStack(),e.fileBatchCompleted=!0,e.isError=!1,e.cancelling=!1,e.paused=!1,e.lastProgress=0,e._initAjax()},_initAjax:function(){var e=this;e.ajaxQueue=[],e.ajaxRequests=[],e.ajaxQueueIntervalId=null,e.ajaxCurrentThreads=0,e.ajaxAborted=!1},_init:function(i,a){var n,r,o,s,l=this,d=l.$element;l.options=i,e.each(i,function(e,i){switch(e){case"minFileCount":case"maxFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":l[e]=t.getNum(i);break;default:l[e]=i}}),l.rtl&&(s=l.previewZoomButtonIcons.prev,l.previewZoomButtonIcons.prev=l.previewZoomButtonIcons.next,l.previewZoomButtonIcons.next=s),!isNaN(l.maxAjaxThreads)&&l.maxAjaxThreads<l.resumableUploadOptions.maxThreads&&(l.resumableUploadOptions.maxThreads=l.maxAjaxThreads),l._initFileManager(),"function"==typeof l.autoOrientImage&&(l.autoOrientImage=l.autoOrientImage()),"function"==typeof l.autoOrientImageInitial&&(l.autoOrientImageInitial=l.autoOrientImageInitial()),a||l._cleanup(),l.$form=d.closest("form"),l._initTemplateDefaults(),l.uploadFileAttr=t.isEmpty(d.attr("name"))?"file_data":d.attr("name"),o=l._getLayoutTemplate("progress"),l.progressTemplate=o.replace("{class}",l.progressClass),l.progressInfoTemplate=o.replace("{class}",l.progressInfoClass),l.progressPauseTemplate=o.replace("{class}",l.progressPauseClass),l.progressCompleteTemplate=o.replace("{class}",l.progressCompleteClass),l.progressErrorTemplate=o.replace("{class}",l.progressErrorClass),l.isDisabled=d.attr("disabled")||d.attr("readonly"),l.isDisabled&&d.attr("disabled",!0),l.isClickable=l.browseOnZoneClick&&l.showPreview&&(l.dropZoneEnabled||!t.isEmpty(l.defaultPreviewContent)),l.isAjaxUpload=t.hasFileUploadSupport()&&!t.isEmpty(l.uploadUrl),l.dropZoneEnabled=t.hasDragDropSupport()&&l.dropZoneEnabled,l.isAjaxUpload||(l.dropZoneEnabled=l.dropZoneEnabled&&t.canAssignFilesToInput()),l.slug="function"==typeof i.slugCallback?i.slugCallback:l._slugDefault,l.mainTemplate=l.showCaption?l._getLayoutTemplate("main1"):l._getLayoutTemplate("main2"),l.captionTemplate=l._getLayoutTemplate("caption"),l.previewGenericTemplate=l._getPreviewTemplate("generic"),!l.imageCanvas&&l.resizeImage&&(l.maxImageWidth||l.maxImageHeight)&&(l.imageCanvas=document.createElement("canvas"),l.imageCanvasContext=l.imageCanvas.getContext("2d")),t.isEmpty(d.attr("id"))&&d.attr("id",t.uniqId()),l.namespace=".fileinput_"+d.attr("id").replace(/-/g,"_"),void 0===l.$container?l.$container=l._createContainer():l._refreshContainer(),r=l.$container,l.$dropZone=r.find(".file-drop-zone"),l.$progress=r.find(".kv-upload-progress"),l.$btnUpload=r.find(".fileinput-upload"),l.$captionContainer=t.getElement(i,"elCaptionContainer",r.find(".file-caption")),l.$caption=t.getElement(i,"elCaptionText",r.find(".file-caption-name")),t.isEmpty(l.msgPlaceholder)||(n=d.attr("multiple")?l.filePlural:l.fileSingle,l.$caption.attr("placeholder",l.msgPlaceholder.replace("{files}",n))),l.$captionIcon=l.$captionContainer.find(".file-caption-icon"),l.$previewContainer=t.getElement(i,"elPreviewContainer",r.find(".file-preview")),l.$preview=t.getElement(i,"elPreviewImage",r.find(".file-preview-thumbnails")),l.$previewStatus=t.getElement(i,"elPreviewStatus",r.find(".file-preview-status")),l.$errorContainer=t.getElement(i,"elErrorContainer",l.$previewContainer.find(".kv-fileinput-error")),l._validateDisabled(),t.isEmpty(l.msgErrorClass)||t.addCss(l.$errorContainer,l.msgErrorClass),a?l._errorsExist()||l.$errorContainer.hide():(l.$errorContainer.hide(),l.previewInitId="preview-"+t.uniqId(),l._initPreviewCache(),l._initPreview(!0),l._initPreviewActions(),l.$parent.hasClass("file-loading")&&(l.$container.insertBefore(l.$parent),l.$parent.remove())),l._setFileDropZoneTitle(),d.attr("disabled")&&l.disable(),l._initZoom(),l.hideThumbnailContent&&t.addCss(l.$preview,"hide-content")},_initFileManager:function(){var i=this;i.fileManager={stack:{},processed:[],errors:[],loadedImages:{},totalImages:0,totalFiles:null,totalSize:null,uploadedSize:0,stats:{},initStats:function(e){var a={started:t.now().getTime()};e?i.fileManager.stats[e]=a:i.fileManager.stats=a},getUploadStats:function(e,a,n){var r=i.fileManager,o=e?r.stats[e]&&r.stats[e].started||null:null;o||(o=t.now().getTime());var s=(t.now().getTime()-o)/1e3,l=["B/s","KB/s","MB/s","GB/s","TB/s","PB/s","EB/s","ZB/s","YB/s"],d=s?a/s:0,u=i._getSize(d,l),c=n-a,h={fileId:e,started:o,elapsed:s,loaded:a,total:n,bps:d,bitrate:u,pendingBytes:c};return e?r.stats[e]=h:r.stats=h,h},exists:function(t){return-1!==e.inArray(t,i.fileManager.getIdList())},count:function(){return i.fileManager.getIdList().length},total:function(){var e=i.fileManager;return e.totalFiles||(e.totalFiles=e.count()),e.totalFiles},getTotalSize:function(){var t=i.fileManager;return t.totalSize?t.totalSize:(t.totalSize=0,e.each(i.fileManager.stack,function(e,i){var a=parseFloat(i.size);t.totalSize+=isNaN(a)?0:a}),t.totalSize)},add:function(e,a){a||(a=i.fileManager.getId(e)),a&&(i.fileManager.stack[a]={file:e,name:t.getFileName(e),relativePath:t.getFileRelativePath(e),size:e.size,nameFmt:i._getFileName(e,""),sizeFmt:i._getSize(e.size)})},remove:function(e){var t=e.attr("data-fileid");t&&i.fileManager.removeFile(t)},removeFile:function(e){delete i.fileManager.stack[e],delete i.fileManager.loadedImages[e]},move:function(t,a){var n={},r=i.fileManager.stack;(t||a)&&t!==a&&(e.each(r,function(e,i){e!==t&&(n[e]=i),e===a&&(n[t]=r[t])}),i.fileManager.stack=n)},list:function(){var t=[];return e.each(i.fileManager.stack,function(e,i){i&&i.file&&t.push(i.file)}),t},isPending:function(t){return-1===e.inArray(t,i.fileManager.processed)&&i.fileManager.exists(t)},isProcessed:function(){var t=!0,a=i.fileManager;return e.each(a.stack,function(e){a.isPending(e)&&(t=!1)}),t},clear:function(){var e=i.fileManager;e.totalFiles=null,e.totalSize=null,e.uploadedSize=0,e.stack={},e.errors=[],e.processed=[],e.stats={},e.clearImages()},clearImages:function(){i.fileManager.loadedImages={},i.fileManager.totalImages=0},addImage:function(e,t){i.fileManager.loadedImages[e]=t},removeImage:function(e){delete i.fileManager.loadedImages[e]},getImageIdList:function(){return Object.keys(i.fileManager.loadedImages)},getImageCount:function(){return i.fileManager.getImageIdList().length},getId:function(e){return i._getFileId(e)},getIndex:function(e){return i.fileManager.getIdList().indexOf(e)},getThumb:function(t){var a=null;return i._getThumbs().each(function(){e(this).attr("data-fileid")===t&&(a=e(this))}),a},getThumbIndex:function(e){var t=e.attr("data-fileid");return i.fileManager.getIndex(t)},getIdList:function(){return Object.keys(i.fileManager.stack)},getFile:function(e){return i.fileManager.stack[e]||null},getFileName:function(e,t){var a=i.fileManager.getFile(e);return a?t?a.nameFmt||"":a.name||"":""},getFirstFile:function(){var e=i.fileManager.getIdList(),t=e&&e.length?e[0]:null;return i.fileManager.getFile(t)},setFile:function(e,t){i.fileManager.getFile(e)?i.fileManager.stack[e].file=t:i.fileManager.add(t,e)},setProcessed:function(e){i.fileManager.processed.push(e)},getProgress:function(){var e=i.fileManager.total(),t=i.fileManager.processed.length;return e?Math.ceil(t/e*100):0},setProgress:function(e,t){var a=i.fileManager.getFile(e);!isNaN(t)&&a&&(a.progress=t)}}},_setUploadData:function(i,a){var n=this;e.each(a,function(e,a){var r=n.uploadParamNames[e]||e;t.isArray(a)?i.append(r,a[0],a[1]):i.append(r,a)})},_initResumableUpload:function(){var i=this,a=i.resumableUploadOptions,n=t.logMessages;if(i.enableResumableUpload){if(!1!==a.fallback&&"function"!=typeof a.fallback&&(a.fallback=function(e){e._log(n.noResumableSupport),e.enableResumableUpload=!1}),!t.hasResumableUploadSupport()&&!1!==a.fallback)return void a.fallback(i);if(!i.uploadUrl&&i.enableResumableUpload)return i._log(n.noUploadUrl),void(i.enableResumableUpload=!1);if(a.chunkSize=parseFloat(a.chunkSize),a.chunkSize<=0||isNaN(a.chunkSize))return i._log(n.invalidChunkSize,{chunkSize:a.chunkSize}),void(i.enableResumableUpload=!1);i.resumableManager={init:function(e,t,a){var n=i.resumableManager,r=i.fileManager;n.currThreads=0,n.logs=[],n.stack=[],n.error="",n.chunkIntervalId=null,n.id=e,n.file=t.file,n.fileName=t.name,n.fileIndex=a,n.completed=!1,n.testing=!1,n.lastProgress=0,i.showPreview&&(n.$thumb=r.getThumb(e)||null,n.$progress=n.$btnUpload=n.$btnDelete=null,n.$thumb&&n.$thumb.length&&(n.$progress=n.$thumb.find(".file-thumb-progress"),n.$btnUpload=n.$thumb.find(".kv-file-upload"),n.$btnDelete=n.$thumb.find(".kv-file-remove"))),n.chunkSize=1024*i.resumableUploadOptions.chunkSize,n.chunkCount=n.getTotalChunks()},logAjaxError:function(e,t,a){i.resumableUploadOptions.showErrorLog&&i._log(n.ajaxError,{status:e.status,error:a,text:e.responseText||""})},reset:function(){i.resumableManager.processed={}},setProcessed:function(e){var t,a=i.resumableManager,n=i.fileManager,r=a.id,o=a.$btnUpload,s=a.$thumb,l=a.$progress,d=s&&s.length,u={id:d?s.attr("id"):"",index:n.getIndex(r),fileId:r};a.completed=!0,a.lastProgress=0,n.uploadedSize+=a.file.size,d&&s.removeClass("file-uploading"),"success"===e?(i.showPreview&&(i._setProgress(101,l),i._setThumbStatus(s,"Success"),i._initUploadSuccess(a.processed[r].data,s),o.hide()),i.fileManager.removeFile(r),delete a.processed[r],i._raise("fileuploaded",[u.id,u.index,u.fileId]),n.isProcessed()&&i._setProgress(101)):(i.showPreview&&(i._setThumbStatus(s,"Error"),i._setPreviewError(s,!0),i.retryErrorUploads?o.removeAttr("disabled"):o.hide(),i._setProgress(101,l,i.msgProgressError),i._setProgress(101,i.$progress,i.msgProgressError),i.cancelling=!0),i.$errorContainer.find('li[data-file-id="'+u.fileId+'"]').length||(t=i.msgResumableUploadRetriesExceeded.setTokens({file:a.fileName,max:i.resumableUploadOptions.maxRetries,error:a.error}),i._showFileError(t,u))),n.isProcessed()&&a.reset()},check:function(){var t=i.resumableManager,a=!0;e.each(t.logs,function(e,t){if(!t)return a=!1,!1}),a&&(clearInterval(t.chunkIntervalId),t.setProcessed("success"))},processedResumables:function(){var e,t=i.resumableManager.logs,a=0;if(!t||!t.length)return 0;for(e=0;e<t.length;e++)!0===t[e]&&a++;return a},getUploadedSize:function(){var e=i.resumableManager,t=e.processedResumables()*e.chunkSize;return t>e.file.size?e.file.size:t},getTotalChunks:function(){var e=i.resumableManager,t=parseFloat(e.chunkSize);return!isNaN(t)&&t>0?Math.ceil(e.file.size/t):0},getProgress:function(){var e=i.resumableManager,t=e.processedResumables(),a=e.chunkCount;return 0===a?0:Math.ceil(t/a*100)},checkAborted:function(e){(i.paused||i.cancelling)&&(clearInterval(e),i.unlock())},uploadSingle:function(e){var t,a=i.resumableManager,n=i.fileManager,r="new";t=setInterval(function(){a.checkAborted(t),"new"===r&&(i.lock(),r="processing",n.stack[e]&&(a.init(e,n.stack[e]),a.uploadResumable())),(!n.isPending(e)&&a.completed||n.isProcessed())&&(clearInterval(t),i.unlock())},i.processDelay)},upload:function(){var e,a=i.resumableManager,n=i.fileManager,r=n.getIdList(),o="new";e=setInterval(function(){var s;if(a.checkAborted(e),"new"===o&&(i.lock(),o="processing",s=r.shift(),n.initStats(s),n.stack[s]&&(a.init(s,n.stack[s],n.getIndex(s)),a.testUpload(),a.uploadResumable())),!n.isPending(s)&&a.completed&&(o="new"),n.isProcessed()){var l=i.$preview.find(".file-preview-initial");l.length&&(t.addCss(l,t.SORT_CSS),i._initSortable()),clearInterval(e),i._clearFileInput(),i.unlock(),setTimeout(function(){var e=i.previewCache.data;e&&(i.initialPreview=e.content,i.initialPreviewConfig=e.config,i.initialPreviewThumbTags=e.tags),i._raise("filebatchuploadcomplete",[i.initialPreview,i.initialPreviewConfig,i.initialPreviewThumbTags,i._getExtraData()])},i.processDelay)}},i.processDelay)},uploadResumable:function(){var e,t=i.resumableManager,a=t.chunkCount;for(e=0;e<a;e++)t.logs[e]=!(!t.processed[t.id]||!t.processed[t.id][e]);for(e=0;e<a;e++)t.pushAjax(e,0);t.chunkIntervalId=setInterval(t.loopAjax,i.queueDelay)},testUpload:function(){var a,n,r,o,s,l,d,u=i.resumableManager,c=i.resumableUploadOptions,h=i.fileManager,f=u.id;if(!c.testUrl)return void(u.testing=!1);u.testing=!0,a=new FormData,n=h.stack[f],i._setUploadData(a,{fileId:f,fileName:n.fileName,fileSize:n.size,fileRelativePath:n.relativePath,chunkSize:u.chunkSize,chunkCount:u.chunkCount}),r=function(e){d=i._getOutData(a,e),i._raise("filetestbeforesend",[f,h,u,d])},o=function(n,r,o){d=i._getOutData(a,o,n);var s=i.uploadParamNames,l=s.chunksUploaded||"chunksUploaded",c=[f,h,u,d];n[l]&&t.isArray(n[l])?(u.processed[f]||(u.processed[f]={}),e.each(n[l],function(e,t){u.logs[t]=!0,u.processed[f][t]=!0}),u.processed[f].data=n,i._raise("filetestsuccess",c)):i._raise("filetesterror",c),u.testing=!1},s=function(e,t,n){d=i._getOutData(a,e),i._raise("filetestajaxerror",[f,h,u,d]),u.logAjaxError(e,t,n),u.testing=!1},l=function(){i._raise("filetestcomplete",[f,h,u,i._getOutData(a)]),u.testing=!1},i._ajaxSubmit(r,o,l,s,a,f,u.fileIndex,c.testUrl)},pushAjax:function(e,t){i.resumableManager.stack.push([e,t])},sendAjax:function(e,a){var r,o=i.fileManager,s=i.resumableManager,l=i.resumableUploadOptions,d=s.chunkSize,u=s.id,c=s.file,h=s.$thumb,f=s.$btnUpload,p=s.$btnDelete;if(!s.processed[u]||!s.processed[u][e]){if(s.currThreads++,a>l.maxRetries)return void s.setProcessed("error");var m,v,g,w,y,b,_=c.slice?"slice":c.mozSlice?"mozSlice":c.webkitSlice?"webkitSlice":"slice",k=c[_](d*e,d*(e+1));m=new FormData,r=o.stack[u],i._setUploadData(m,{fileId:u,fileName:s.fileName,fileSize:c.size,fileRelativePath:r.relativePath,fileBlob:[k,s.fileName],chunkIndex:e,chunkSize:d,chunkSizeStart:d*e,chunkCount:s.chunkCount,retryCount:a}),s.$progress&&s.$progress.length&&s.$progress.show(),g=function(n){v=i._getOutData(m,n),i.showPreview&&(h.hasClass("file-preview-success")||(i._setThumbStatus(h,"Loading"),t.addCss(h,"file-uploading")),f.attr("disabled",!0),p.attr("disabled",!0)),i._raise("filechunkbeforesend",[u,e,a,o,s,v])},w=function(t,r,l){v=i._getOutData(m,l,t);var d=i.uploadParamNames,c=d.chunkIndex||"chunkIndex",h=i.resumableUploadOptions,f=[u,e,a,o,s,v];s.currThreads--,t.error?(h.showErrorLog&&i._log(n.retryStatus,{retry:a+1,filename:s.fileName,chunk:e}),s.pushAjax(e,a+1),s.error=t.error,i._raise("filechunkerror",f)):(s.logs[t[c]]=!0,s.processed[u]||(s.processed[u]={}),s.processed[u][t[c]]=!0,s.processed[u].data=t,s.check(),i._raise("filechunksuccess",f))},y=function(t,n,r){v=i._getOutData(m,t),s.currThreads--,s.error=r,s.logAjaxError(t,n,r),i._raise("filechunkajaxerror",[u,e,a,o,s,v]),s.pushAjax(e,a+1)},b=function(){i._raise("filechunkcomplete",[u,e,a,o,s,i._getOutData(m)])},i._ajaxSubmit(g,w,b,y,m,u,s.fileIndex)}},loopAjax:function(){var e=i.resumableManager;if(e.currThreads<i.resumableUploadOptions.maxThreads&&!e.testing){var t,a=e.stack.shift();void 0!==a&&(t=a[0],e.processed[e.id]&&e.processed[e.id][t]?e.processedResumables()>=e.getTotalChunks()&&(e.setProcessed("success"),clearInterval(e.chunkIntervalId)):e.sendAjax(t,a[1]))}}},i.resumableManager.reset()}},_initTemplateDefaults:function(){var i,a,n,r,o,s,l,d,u,c,h,f,p,m,v,g,w,y,b,_,k,x,C,T,P,D,M,S,E,I,F,A,O,$,j,z,U,R,N,B,L,Y=this;i='{preview}\n<div class="kv-upload-progress kv-hidden"></div><div class="clearfix"></div>\n<div class="input-group {class}">\n  {caption}\n<div class="input-group-btn input-group-append">\n      {remove}\n      {cancel}\n      {pause}\n      {upload}\n      {browse}\n    </div>\n</div>',a='{preview}\n<div class="kv-upload-progress kv-hidden"></div>\n<div class="clearfix"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',n='<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',o=t.closeButton("fileinput-remove"),r='<i class="glyphicon glyphicon-file"></i>',s='<div class="file-caption form-control {class}" tabindex="500">\n  <span class="file-caption-icon"></span>\n  <input class="file-caption-name" onkeydown="return false;" onpaste="return false;">\n</div>',l='<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</button>',d='<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>',u='<div tabindex="500" class="{css}" {status}>{icon} {label}</div>',c='<div id="'+t.MODAL_ID+'" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="'+t.MODAL_ID+'Label"></div>',h='<div class="modal-dialog modal-lg{rtl}" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <h5 class="modal-title">{heading}</h5>\n      <span class="kv-zoom-title"></span>\n      <div class="kv-zoom-actions">{toggleheader}{fullscreen}{borderless}{close}</div>\n    </div>\n    <div class="modal-body">\n      <div class="floating-buttons"></div>\n      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n{prev} {next}\n    </div>\n  </div>\n</div>\n',f='<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     </div>\n</div>{stats}',L='<div class="text-info file-upload-stats"><span class="pending-time">{pendingTime}</span> <span class="upload-speed">{uploadSpeed}</span></div>',p=" <samp>({sizeText})</samp>",m='<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">\n        <div class="file-caption-info">{caption}</div>\n        <div class="file-size-info">{size}</div>\n    </div>\n    {progress}\n{indicator}\n{actions}\n</div>',v='<div class="file-actions">\n    <div class="file-footer-buttons">\n        {download} {upload} {delete} {zoom} {other}    </div>\n</div>\n{drag}\n<div class="clearfix"></div>',g='<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n',w='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',y='<a class="kv-file-download {downloadClass}" title="{downloadTitle}" href="{downloadUrl}" download="{caption}" target="_blank">{downloadIcon}</a>',b='<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',_='<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',k='<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>',x='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-fileid="{fileid}" data-template="{template}"',C=x+'><div class="kv-file-content">\n',T=x+' title="{caption}"><div class="kv-file-content">\n',P="</div>{footer}\n</div>\n",D="{content}\n",R=" {style}",M='<div class="kv-preview-data file-preview-html" title="{caption}"'+R+">{data}</div>\n",S='<img src="{data}" class="file-preview-image kv-preview-data" title="{title}" alt="{alt}"'+R+">\n",E='<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly'+R+">{data}</textarea>\n",I='<iframe class="kv-preview-data file-preview-office" src="https://view.officeapps.live.com/op/embed.aspx?src={data}"'+R+"></iframe>",F='<iframe class="kv-preview-data file-preview-gdocs" src="https://docs.google.com/gview?url={data}&embedded=true"'+R+"></iframe>",A='<video class="kv-preview-data file-preview-video" controls'+R+'>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</video>\n",O='\x3c!--suppress ALL --\x3e<audio class="kv-preview-data file-preview-audio" controls'+R+'>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</audio>\n",$='<embed class="kv-preview-data file-preview-flash" src="{data}" type="application/x-shockwave-flash"'+R+">\n",z='<embed class="kv-preview-data file-preview-pdf" src="{data}" type="application/pdf"'+R+">\n",j='<object class="kv-preview-data file-preview-object file-object {typeCss}" data="{data}" type="{type}"'+R+'>\n<param name="movie" value="{caption}" />\n'+t.OBJECT_PARAMS+" "+t.DEFAULT_PREVIEW+"\n</object>\n",U='<div class="kv-preview-data file-preview-other-frame"'+R+">\n"+t.DEFAULT_PREVIEW+"\n</div>\n",N='<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>',B={width:"100%",height:"100%",
"min-height":"480px"},Y._isPdfRendered()&&(z=Y.pdfRendererTemplate.replace("{renderer}",Y._encodeURI(Y.pdfRendererUrl))),Y.defaults={layoutTemplates:{main1:i,main2:a,preview:n,close:o,fileIcon:r,caption:s,modalMain:c,modal:h,progress:f,stats:L,size:p,footer:m,indicator:k,actions:v,actionDelete:g,actionUpload:w,actionDownload:y,actionZoom:b,actionDrag:_,btnDefault:l,btnLink:d,btnBrowse:u,zoomCache:N},previewMarkupTags:{tagBefore1:C,tagBefore2:T,tagAfter:P},previewContentTemplates:{generic:D,html:M,image:S,text:E,office:I,gdocs:F,video:A,audio:O,flash:$,object:j,pdf:z,other:U},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},office:{width:"213px",height:"160px"},gdocs:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"100%",height:"30px"},flash:{width:"213px",height:"160px"},object:{width:"213px",height:"160px"},pdf:{width:"100%",height:"160px"},other:{width:"213px",height:"160px"}},previewSettingsSmall:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"160px"},text:{width:"100%",height:"160px"},office:{width:"100%",height:"160px"},gdocs:{width:"100%",height:"160px"},video:{width:"100%",height:"auto"},audio:{width:"100%",height:"30px"},flash:{width:"100%",height:"auto"},object:{width:"100%",height:"auto"},pdf:{width:"100%",height:"160px"},other:{width:"100%",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:B,text:B,office:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},gdocs:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:B,other:{width:"auto",height:"100%","min-height":"480px"}},mimeTypeAliases:{"video/quicktime":"video/mp4"},fileTypeSettings:{image:function(e,i){return t.compare(e,"image.*")&&!t.compare(e,/(tiff?|wmf)$/i)||t.compare(i,/\.(gif|png|jpe?g)$/i)},html:function(e,i){return t.compare(e,"text/html")||t.compare(i,/\.(htm|html)$/i)},office:function(e,i){return t.compare(e,/(word|excel|powerpoint|office)$/i)||t.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?)$/i)},gdocs:function(e,i){return t.compare(e,/(word|excel|powerpoint|office|iwork-pages|tiff?)$/i)||t.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?|rtf|ods|odt|pages|ai|dxf|ttf|tiff?|wmf|e?ps)$/i)},text:function(e,i){return t.compare(e,"text.*")||t.compare(i,/\.(xml|javascript)$/i)||t.compare(i,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(e,i){return t.compare(e,"video.*")&&(t.compare(e,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||t.compare(i,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(e,i){return t.compare(e,"audio.*")&&(t.compare(i,/(ogg|mp3|mp?g|wav)$/i)||t.compare(i,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(e,i){return t.compare(e,"application/x-shockwave-flash",!0)||t.compare(i,/\.(swf)$/i)},pdf:function(e,i){return t.compare(e,"application/pdf",!0)||t.compare(i,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},fileActionSettings:{showRemove:!0,showUpload:!0,showDownload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",removeErrorClass:"btn btn-sm btn-kv btn-danger",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",uploadTitle:"Upload file",uploadRetryIcon:'<i class="glyphicon glyphicon-repeat"></i>',uploadRetryTitle:"Retry upload",downloadIcon:'<i class="glyphicon glyphicon-download"></i>',downloadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",downloadTitle:"Download file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',zoomClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-move"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-plus-sign text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hourglass text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."}},e.each(Y.defaults,function(t,i){if("allowedPreviewTypes"===t)return void(void 0===Y.allowedPreviewTypes&&(Y.allowedPreviewTypes=i));Y[t]=e.extend(!0,{},i,Y[t])}),Y._initPreviewTemplates()},_initPreviewTemplates:function(){var i,a=this,n=a.previewMarkupTags,r=n.tagAfter;e.each(a.previewContentTemplates,function(e,o){t.isEmpty(a.previewTemplates[e])&&(i=n.tagBefore2,"generic"!==e&&"image"!==e&&"html"!==e&&"text"!==e||(i=n.tagBefore1),a._isPdfRendered()&&"pdf"===e&&(i=i.replace("kv-file-content","kv-file-content kv-pdf-rendered")),a.previewTemplates[e]=i+o+r)})},_initPreviewCache:function(){var i=this;i.previewCache={data:{},init:function(){var e=i.initialPreview;e.length>0&&!t.isArray(e)&&(e=e.split(i.initialPreviewDelimiter)),i.previewCache.data={content:e,config:i.initialPreviewConfig,tags:i.initialPreviewThumbTags}},count:function(e){if(!i.previewCache.data||!i.previewCache.data.content)return 0;if(e){return i.previewCache.data.content.filter(function(e){return null!==e}).length}return i.previewCache.data.content.length},get:function(a,n){var r,o,s,l,d,u,c,h,f="init_"+a,p=i.previewCache.data,m=p.config[a],v=p.content[a],g=i.previewInitId+"-"+f,w=t.ifSet("previewAsData",m,i.initialPreviewAsData),y=m?{title:m.title||null,alt:m.alt||null}:{title:null,alt:null},b=function(e,a,n,o,s,l,d,u,c){return u=" file-preview-initial "+t.SORT_CSS+(u?" "+u:""),r=m&&m.fileId||"file_"+s,i._generatePreviewTemplate(e,a,n,o,s,r,!1,null,u,l,d,c,y,m&&m.zoomData||a)};return v&&v.length?(n=void 0===n||n,l=t.ifSet("type",m,i.initialPreviewFileType||"generic"),u=t.ifSet("filename",m,t.ifSet("caption",m)),c=t.ifSet("filetype",m,l),d=i.previewCache.footer(a,n,m&&m.size||null),h=t.ifSet("frameClass",m),o=w?b(l,v,u,c,g,d,f,h):b("generic",v,u,c,g,d,f,h,l).setTokens({content:p.content[a]}),p.tags.length&&p.tags[a]&&(o=t.replaceTags(o,p.tags[a])),t.isEmpty(m)||t.isEmpty(m.frameAttr)||(s=e(document.createElement("div")).html(o),s.find(".file-preview-initial").attr(m.frameAttr),o=s.html(),s.remove()),o):""},clean:function(e){e.content=t.cleanArray(e.content),e.config=t.cleanArray(e.config),e.tags=t.cleanArray(e.tags),i.previewCache.data=e},add:function(e,a,n,r){var o=i.previewCache.data,s=e.length-1;return e&&e.length?(t.isArray(e)||(e=e.split(i.initialPreviewDelimiter)),r?(s=o.content.push(e[0])-1,o.config[s]=a,o.tags[s]=n):(o.content=e,o.config=a,o.tags=n),i.previewCache.clean(o),s):s},set:function(e,a,n,r){var o,s,l=i.previewCache.data;if(e&&e.length&&(t.isArray(e)||(e=e.split(i.initialPreviewDelimiter)),s=e.filter(function(e){return null!==e}),s.length)){if(void 0===l.content&&(l.content=[]),void 0===l.config&&(l.config=[]),void 0===l.tags&&(l.tags=[]),r){for(o=0;o<e.length;o++)e[o]&&l.content.push(e[o]);for(o=0;o<a.length;o++)a[o]&&l.config.push(a[o]);for(o=0;o<n.length;o++)n[o]&&l.tags.push(n[o])}else l.content=e,l.config=a,l.tags=n;i.previewCache.clean(l)}},unset:function(a){var n=i.previewCache.count(),r=i.reversePreviewOrder;if(n){if(1===n)return i.previewCache.data.content=[],i.previewCache.data.config=[],i.previewCache.data.tags=[],i.initialPreview=[],i.initialPreviewConfig=[],void(i.initialPreviewThumbTags=[]);i.previewCache.data.content=t.spliceArray(i.previewCache.data.content,a,r),i.previewCache.data.config=t.spliceArray(i.previewCache.data.config,a,r),i.previewCache.data.tags=t.spliceArray(i.previewCache.data.tags,a,r);var o=e.extend(!0,{},i.previewCache.data);i.previewCache.clean(o)}},out:function(){var e,t,a,n="",r=i.previewCache.count();if(0===r)return{content:"",caption:""};for(t=0;t<r;t++)a=i.previewCache.get(t),n=i.reversePreviewOrder?a+n:n+a;return e=i._getMsgSelected(r),{content:n,caption:e}},footer:function(e,a,n){var r=i.previewCache.data||{};if(t.isEmpty(r.content))return"";(t.isEmpty(r.config)||t.isEmpty(r.config[e]))&&(r.config[e]={}),a=void 0===a||a;var o,s=r.config[e],l=t.ifSet("caption",s),d=t.ifSet("width",s,"auto"),u=t.ifSet("url",s,!1),c=t.ifSet("key",s,null),h=t.ifSet("fileId",s,null),f=i.fileActionSettings,p=i.initialPreviewShowDelete||!1,m=i.initialPreviewDownloadUrl?i.initialPreviewDownloadUrl+"?key="+c+(h?"&fileId="+h:""):"",v=s.downloadUrl||m,g=s.filename||s.caption||"",w=!!v,y=t.ifSet("showRemove",s,t.ifSet("showRemove",f,p)),b=t.ifSet("showDownload",s,t.ifSet("showDownload",f,w)),_=t.ifSet("showZoom",s,t.ifSet("showZoom",f,!0)),k=t.ifSet("showDrag",s,t.ifSet("showDrag",f,!0)),x=!1===u&&a;return b=b&&!1!==s.downloadUrl&&!!v,o=i._renderFileActions(s,!1,b,y,_,k,x,u,c,!0,v,g),i._getLayoutTemplate("footer").setTokens({progress:i._renderThumbProgress(),actions:o,caption:l,size:i._getSize(n),width:d,indicator:""})}},i.previewCache.init()},_isPdfRendered:function(){var e=this,t=e.usePdfRenderer;return("function"==typeof t?t():!!t)&&e.pdfRendererUrl},_handler:function(e,t,i){var a=this,n=a.namespace,r=t.split(" ").join(n+" ")+n;e&&e.length&&e.off(r).on(r,i)},_encodeURI:function(e){return this.encodeUrl?encodeURI(e):e},_log:function(e,t){var i=this,a=i.$element.attr("id");a&&(e='"'+a+'": '+e),e="bootstrap-fileinput: "+e,"object"===(void 0===t?"undefined":_typeof(t))&&e.setTokens(t),void 0!==window.console.log?window.console.log(e):window.alert(e)},_validate:function(){var e=this,i="file"===e.$element.attr("type");return i||e._log(t.logMessages.badInputType),i},_errorsExist:function(){var t,i=this;return!!i.$errorContainer.find("li").length||(t=e(document.createElement("div")).html(i.$errorContainer.html()),t.find(".kv-error-close").remove(),t.find("ul").remove(),!!e.trim(t.text()).length)},_errorHandler:function(e,t){var i=this,a=e.target.error,n=function(e){i._showError(e.replace("{name}",t))};n(a.code===a.NOT_FOUND_ERR?i.msgFileNotFound:a.code===a.SECURITY_ERR?i.msgFileSecured:a.code===a.NOT_READABLE_ERR?i.msgFileNotReadable:a.code===a.ABORT_ERR?i.msgFilePreviewAborted:i.msgFilePreviewError)},_addError:function(e){var t=this,i=t.$errorContainer;e&&i.length&&(i.html(t.errorCloseButton+e),t._handler(i.find(".kv-error-close"),"click",function(){setTimeout(function(){t.showPreview&&!t.getFrames().length&&t.clear(),i.fadeOut("slow")},t.processDelay)}))},_setValidationError:function(e){var i=this;e=(e?e+" ":"")+"has-error",i.$container.removeClass(e).addClass("has-error"),t.addCss(i.$captionContainer,"is-invalid")},_resetErrors:function(e){var t=this,i=t.$errorContainer;t.isError=!1,t.$container.removeClass("has-error"),t.$captionContainer.removeClass("is-invalid"),i.html(""),e?i.fadeOut("slow"):i.hide()},_showFolderError:function(e){var t,i=this,a=i.$errorContainer;e&&(i.isAjaxUpload||i._clearFileInput(),t=i.msgFoldersNotAllowed.replace("{n}",e),i._addError(t),i._setValidationError(),a.fadeIn(800),i._raise("filefoldererror",[e,t]))},_showFileError:function(e,t,i){var a=this,n=a.$errorContainer,r=i||"fileuploaderror",o=t&&t.fileId||"",s=t&&t.id?'<li data-thumb-id="'+t.id+'" data-file-id="'+o+'">'+e+"</li>":"<li>"+e+"</li>";return 0===n.find("ul").length?a._addError("<ul>"+s+"</ul>"):n.find("ul").append(s),n.fadeIn(800),a._raise(r,[t,e]),a._setValidationError("file-input-new"),!0},_showError:function(e,t,i){var a=this,n=a.$errorContainer,r=i||"fileerror";return t=t||{},t.reader=a.reader,a._addError(e),n.fadeIn(800),a._raise(r,[t,e]),a.isAjaxUpload||a._clearFileInput(),a._setValidationError("file-input-new"),a.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(e){var t=this,i=t.minFileCount>1?t.filePlural:t.fileSingle,a=t.msgFilesTooLess.replace("{n}",t.minFileCount).replace("{files}",i),n=t.$errorContainer;t._addError(a),t.isError=!0,t._updateFileDetails(0),n.fadeIn(800),t._raise("fileerror",[e,a]),t._clearFileInput(),t._setValidationError()},_parseError:function(t,i,a,n){var r,o=this,s=e.trim(a+""),l=void 0!==i.responseJSON&&void 0!==i.responseJSON.error?i.responseJSON.error:i.responseText;return o.cancelling&&o.msgUploadAborted&&(s=o.msgUploadAborted),o.showAjaxErrorDetails&&l&&(l=e.trim(l.replace(/\n\s*\n/g,"\n")),r=l.length?"<pre>"+l+"</pre>":"",s+=s?r:l),s||(s=o.msgAjaxError.replace("{operation}",t)),o.cancelling=!1,n?"<b>"+n+": </b>"+s:s},_parseFileType:function(e,i){var a,n,r,o,s=this,l=s.allowedPreviewTypes||[];if("application/text-plain"===e)return"text";for(o=0;o<l.length;o++)if(r=l[o],a=s.fileTypeSettings[r],n=a(e,i)?r:"",!t.isEmpty(n))return n;return"other"},_getPreviewIcon:function(t){var i,a=this,n=null;return t&&t.indexOf(".")>-1&&(i=t.split(".").pop(),a.previewFileIconSettings&&(n=a.previewFileIconSettings[i]||a.previewFileIconSettings[i.toLowerCase()]||null),a.previewFileExtSettings&&e.each(a.previewFileExtSettings,function(e,t){if(a.previewFileIconSettings[e]&&t(i))return void(n=a.previewFileIconSettings[e])})),n},_parseFilePreviewIcon:function(e,t){var i=this,a=i._getPreviewIcon(t)||i.previewFileIcon,n=e;return n.indexOf("{previewFileIcon}")>-1&&(n=n.setTokens({previewFileIconClass:i.previewFileIconClass,previewFileIcon:a})),n},_raise:function(t,i){var a=this,n=e.Event(t);if(void 0!==i?a.$element.trigger(n,i):a.$element.trigger(n),n.isDefaultPrevented()||!1===n.result)return!1;switch(t){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:a.ajaxAborted||(a.ajaxAborted=n.result)}return!0},_listenFullScreen:function(e){var t,i,a=this,n=a.$modal;n&&n.length&&(t=n&&n.find(".btn-fullscreen"),i=n&&n.find(".btn-borderless"),t.length&&i.length&&(t.removeClass("active").attr("aria-pressed","false"),i.removeClass("active").attr("aria-pressed","false"),e?t.addClass("active").attr("aria-pressed","true"):i.addClass("active").attr("aria-pressed","true"),n.hasClass("file-zoom-fullscreen")?a._maximizeZoomDialog():e?a._maximizeZoomDialog():i.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var i,a=this,n=a.$element,r=a.$form,o=a.$container;a._handler(n,"click",function(e){n.hasClass("file-no-browse")&&(n.data("zoneClicked")?n.data("zoneClicked",!1):e.preventDefault())}),a._handler(n,"change",e.proxy(a._change,a)),a.showBrowse&&a._handler(a.$btnFile,"click",e.proxy(a._browse,a)),a._handler(o.find(".fileinput-remove:not([disabled])"),"click",e.proxy(a.clear,a)),a._handler(o.find(".fileinput-cancel"),"click",e.proxy(a.cancel,a)),a._handler(o.find(".fileinput-pause"),"click",e.proxy(a.pause,a)),a._initDragDrop(),a._handler(r,"reset",e.proxy(a.clear,a)),a.isAjaxUpload||a._handler(r,"submit",e.proxy(a._submitForm,a)),a._handler(a.$container.find(".fileinput-upload"),"click",e.proxy(a._uploadClick,a)),a._handler(e(window),"resize",function(){a._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)}),i="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",a._handler(e(document),i,function(){a._listenFullScreen(t.checkFullScreen())}),a._autoFitContent(),a._initClickable(),a._refreshPreview()},_autoFitContent:function(){var t,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=this,n=i<400?a.previewSettingsSmall||a.defaults.previewSettingsSmall:a.previewSettings||a.defaults.previewSettings;e.each(n,function(e,i){t=".file-preview-frame .file-preview-"+e,a.$preview.find(t+".kv-preview-data,"+t+" .kv-preview-data").css(i)})},_scanDroppedItems:function(e,i,a){a=a||"";var n,r,o,s=this,l=function(e){s._log(t.logMessages.badDroppedFiles),s._log(e)};e.isFile?e.file(function(e){i.push(e)},l):e.isDirectory&&(r=e.createReader(),(o=function(){r.readEntries(function(t){if(t&&t.length>0){for(n=0;n<t.length;n++)s._scanDroppedItems(t[n],i,a+e.name+"/");o()}return null},l)})())},_initDragDrop:function(){var t=this,i=t.$dropZone;t.dropZoneEnabled&&t.showPreview&&(t._handler(i,"dragenter dragover",e.proxy(t._zoneDragEnter,t)),t._handler(i,"dragleave",e.proxy(t._zoneDragLeave,t)),t._handler(i,"drop",e.proxy(t._zoneDrop,t)),t._handler(e(document),"dragenter dragover drop",t._zoneDragDropInit))},_zoneDragDropInit:function(e){e.stopPropagation(),e.preventDefault()},_zoneDragEnter:function(i){var a=this,n=i.originalEvent.dataTransfer,r=e.inArray("Files",n.types)>-1;if(a._zoneDragDropInit(i),a.isDisabled||!r)return i.originalEvent.dataTransfer.effectAllowed="none",void(i.originalEvent.dataTransfer.dropEffect="none");a._raise("fileDragEnter",{sourceEvent:i,files:n.types.Files})&&t.addCss(a.$dropZone,"file-highlighted")},_zoneDragLeave:function(e){var t=this;t._zoneDragDropInit(e),t.isDisabled||t._raise("fileDragLeave",{sourceEvent:e})&&t.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(e){var i,a=this,n=a.$element,r=e.originalEvent.dataTransfer,o=r.files,s=r.items,l=t.getDragDropFolders(s),d=function(){a.isAjaxUpload?a._change(e,o):(a.changeTriggered=!0,n.get(0).files=o,setTimeout(function(){a.changeTriggered=!1,n.trigger("change"+a.namespace)},a.processDelay)),a.$dropZone.removeClass("file-highlighted")};if(e.preventDefault(),!a.isDisabled&&!t.isEmpty(o)&&a._raise("fileDragDrop",{sourceEvent:e,files:o}))if(l>0){if(!a.isAjaxUpload)return void a._showFolderError(l);for(o=[],i=0;i<s.length;i++){var u=s[i].webkitGetAsEntry();u&&a._scanDroppedItems(u,o)}setTimeout(function(){d()},500)}else d()},_uploadClick:function(e){var i,a=this,n=a.$container.find(".fileinput-upload"),r=!n.hasClass("disabled")&&t.isEmpty(n.attr("disabled"));if(!e||!e.isDefaultPrevented()){if(!a.isAjaxUpload)return void(r&&"submit"!==n.attr("type")&&(i=n.closest("form"),i.length&&i.trigger("submit"),e.preventDefault()));e.preventDefault(),r&&a.upload()}},_submitForm:function(){var e=this;return e._isFileSelectionValid()&&!e._abort({})},_clearPreview:function(){var i=this,a=i.$preview;(i.showUploadedThumbs?i.getFrames(":not(.file-preview-success)"):i.getFrames()).each(function(){var i=e(this);i.remove(),t.cleanZoomCache(a.find("#zoom-"+i.attr("id")))}),i.getFrames().length&&i.showPreview||i._resetUpload(),i._validateDefaultPreview()},_initSortable:function(){var i,a=this,n=a.$preview,r="."+t.SORT_CSS,o=a.reversePreviewOrder;window.KvSortable&&0!==n.find(r).length&&(i={handle:".drag-handle-init",dataIdAttr:"data-preview-id",scroll:!1,draggable:r,onSort:function(i){var n=i.oldIndex,r=i.newIndex,s=0;a.initialPreview=t.moveArray(a.initialPreview,n,r,o),a.initialPreviewConfig=t.moveArray(a.initialPreviewConfig,n,r,o),a.previewCache.init(),a.getFrames(".file-preview-initial").each(function(){e(this).attr("data-fileindex","init_"+s),s++}),a._raise("filesorted",{previewId:e(i.item).attr("id"),oldIndex:n,newIndex:r,stack:a.initialPreviewConfig})}},n.data("kvsortable")&&n.kvsortable("destroy"),e.extend(!0,i,a.fileActionSettings.dragSettings),n.kvsortable(i))},_setPreviewContent:function(e){var t=this;t.$preview.html(e),t._autoFitContent()},_initPreviewImageOrientations:function(){var i=this,a=0;i.autoOrientImageInitial&&i.getFrames(".file-preview-initial").each(function(){var n,r,o,s=e(this),l=i.initialPreviewConfig[a];l&&l.exif&&l.exif.Orientation&&(o=s.attr("id"),n=s.find(">.kv-file-content img"),r=i.$preview.find("#zoom-"+o+" >.kv-file-content img"),n&&n.length&&t.setImageOrientation(n,r,l.exif.Orientation)),a++})},_initPreview:function(e){var i,a=this,n=a.initialCaption||"";if(!a.previewCache.count(!0))return a._clearPreview(),void(e?a._setCaption(n):a._initCaption());i=a.previewCache.out(),n=e&&a.initialCaption?a.initialCaption:i.caption,a._setPreviewContent(i.content),a._setInitThumbAttr(),a._setCaption(n),a._initSortable(),t.isEmpty(i.content)||a.$container.removeClass("file-input-new"),a._initPreviewImageOrientations()},_getZoomButton:function(e){var t=this,i=t.previewZoomButtonIcons[e],a=t.previewZoomButtonClasses[e],n=' title="'+(t.previewZoomButtonTitles[e]||"")+'" ',r=n+("close"===e?' data-dismiss="modal" aria-hidden="true"':"");return"fullscreen"!==e&&"borderless"!==e&&"toggleheader"!==e||(r+=' data-toggle="button" aria-pressed="false" autocomplete="off"'),'<button type="button" class="'+a+" btn-"+e+'"'+r+">"+i+"</button>"},_getModalContent:function(){var e=this;return e._getLayoutTemplate("modal").setTokens({rtl:e.rtl?" kv-rtl":"",zoomFrameClass:e.frameClass,heading:e.msgZoomModalHeading,prev:e._getZoomButton("prev"),next:e._getZoomButton("next"),toggleheader:e._getZoomButton("toggleheader"),fullscreen:e._getZoomButton("fullscreen"),borderless:e._getZoomButton("borderless"),close:e._getZoomButton("close")})},_listenModalEvent:function(e){var i=this,a=i.$modal,n=function(e){return{sourceEvent:e,previewId:a.data("previewId"),modal:a}};a.on(e+".bs.modal",function(r){var o=a.find(".btn-fullscreen"),s=a.find(".btn-borderless");i._raise("filezoom"+e,n(r)),"shown"===e&&(s.removeClass("active").attr("aria-pressed","false"),o.removeClass("active").attr("aria-pressed","false"),a.hasClass("file-zoom-fullscreen")&&(i._maximizeZoomDialog(),t.checkFullScreen()?o.addClass("active").attr("aria-pressed","true"):s.addClass("active").attr("aria-pressed","true")))})},_initZoom:function(){var i,a=this,n=a._getLayoutTemplate("modalMain"),r="#"+t.MODAL_ID;a.showPreview&&(a.$modal=e(r),a.$modal&&a.$modal.length||(i=e(document.createElement("div")).html(n).insertAfter(a.$container),a.$modal=e(r).insertBefore(i),i.remove()),t.initModal(a.$modal),a.$modal.html(a._getModalContent()),e.each(t.MODAL_EVENTS,function(e,t){a._listenModalEvent(t)}))},_initZoomButtons:function(){var t,i,a=this,n=a.$modal.data("previewId")||"",r=a.getFrames().toArray(),o=r.length,s=a.$modal.find(".btn-prev"),l=a.$modal.find(".btn-next");if(r.length<2)return s.hide(),void l.hide();s.show(),l.show(),o&&(t=e(r[0]),i=e(r[o-1]),s.removeAttr("disabled"),l.removeAttr("disabled"),t.length&&t.attr("id")===n&&s.attr("disabled",!0),i.length&&i.attr("id")===n&&l.attr("disabled",!0))},_maximizeZoomDialog:function(){var t=this,i=t.$modal,a=i.find(".modal-header:visible"),n=i.find(".modal-footer:visible"),r=i.find(".modal-body"),o=e(window).height(),s=0;i.addClass("file-zoom-fullscreen"),a&&a.length&&(o-=a.outerHeight(!0)),n&&n.length&&(o-=n.outerHeight(!0)),r&&r.length&&(s=r.outerHeight(!0)-r.height(),o-=s),i.find(".kv-zoom-body").height(o)},_resizeZoomDialog:function(e){var i=this,a=i.$modal,n=a.find(".btn-fullscreen"),r=a.find(".btn-borderless");if(a.hasClass("file-zoom-fullscreen"))t.toggleFullScreen(!1),e?n.hasClass("active")||(a.removeClass("file-zoom-fullscreen"),i._resizeZoomDialog(!0),r.hasClass("active")&&r.removeClass("active").attr("aria-pressed","false")):n.hasClass("active")?n.removeClass("active").attr("aria-pressed","false"):(a.removeClass("file-zoom-fullscreen"),i.$modal.find(".kv-zoom-body").css("height",i.zoomModalHeight));else{if(!e)return void i._maximizeZoomDialog();t.toggleFullScreen(!0)}a.focus()},_setZoomContent:function(i,a){var n,r,o,s,l,d,u,c,h,f,p=this,m=i.attr("id"),v=p.$preview.find("#zoom-"+m),g=p.$modal,w=g.find(".btn-fullscreen"),y=g.find(".btn-borderless"),b=g.find(".btn-toggleheader");r=v.attr("data-template")||"generic",n=v.find(".kv-file-content"),o=n.length?n.html():"",h=i.data("caption")||"",f=i.data("size")||"",s=h+" "+f,g.find(".kv-zoom-title").attr("title",e("<div/>").html(s).text()).html(s),l=g.find(".kv-zoom-body"),g.removeClass("kv-single-content"),a?(c=l.addClass("file-thumb-loading").clone().insertAfter(l),l.html(o).hide(),c.fadeOut("fast",function(){l.fadeIn("fast",function(){l.removeClass("file-thumb-loading")}),c.remove()})):l.html(o),u=p.previewZoomSettings[r],u&&(d=l.find(".kv-preview-data"),t.addCss(d,"file-zoom-detail"),e.each(u,function(e,t){d.css(e,t),(d.attr("width")&&"width"===e||d.attr("height")&&"height"===e)&&d.removeAttr(e)})),g.data("previewId",m),p._handler(g.find(".btn-prev"),"click",function(){p._zoomSlideShow("prev",m)}),p._handler(g.find(".btn-next"),"click",function(){p._zoomSlideShow("next",m)}),p._handler(w,"click",function(){p._resizeZoomDialog(!0)}),p._handler(y,"click",function(){p._resizeZoomDialog(!1)}),p._handler(b,"click",function(){var e,t=g.find(".modal-header"),i=g.find(".modal-body .floating-buttons"),a=t.find(".kv-zoom-actions"),n=function(e){var i=p.$modal.find(".kv-zoom-body"),a=p.zoomModalHeight;g.hasClass("file-zoom-fullscreen")&&(a=i.outerHeight(!0),e||(a-=t.outerHeight(!0))),i.css("height",e?a+e:a)};t.is(":visible")?(e=t.outerHeight(!0),t.slideUp("slow",function(){a.find(".btn").appendTo(i),n(e)})):(i.find(".btn").appendTo(a),t.slideDown("slow",function(){n()})),g.focus()}),p._handler(g,"keydown",function(t){var i=t.which||t.keyCode,a=e(this).find(".btn-prev"),n=e(this).find(".btn-next"),r=e(this).data("previewId"),o=p.rtl?39:37,s=p.rtl?37:39;i===o&&a.length&&!a.attr("disabled")&&p._zoomSlideShow("prev",r),i===s&&n.length&&!n.attr("disabled")&&p._zoomSlideShow("next",r)})},_zoomPreview:function(e){var i,a=this,n=a.$modal;if(!e.length)throw"Cannot zoom to detailed preview!";t.initModal(n),n.html(a._getModalContent()),i=e.closest(t.FRAMES),a._setZoomContent(i),n.modal("show"),a._initZoomButtons()},_zoomSlideShow:function(t,i){var a,n,r,o=this,s=o.$modal.find(".kv-zoom-actions .btn-"+t),l=o.getFrames().toArray(),d=l.length;if(!s.attr("disabled")){for(n=0;n<d;n++)if(e(l[n]).attr("id")===i){r="prev"===t?n-1:n+1;break}r<0||r>=d||!l[r]||(a=e(l[r]),a.length&&o._setZoomContent(a,!0),o._initZoomButtons(),o._raise("filezoom"+t,{previewId:i,modal:o.$modal}))}},_initZoomButton:function(){var t=this;t.$preview.find(".kv-file-zoom").each(function(){var i=e(this);t._handler(i,"click",function(){t._zoomPreview(i)})})},_inputFileCount:function(){return this.$element.get(0).files.length},_refreshPreview:function(){var t,i=this;(i._inputFileCount()||i.isAjaxUpload)&&i.showPreview&&i.isPreviewable&&(i.isAjaxUpload&&i.fileManager.count()>0?(t=e.extend(!0,{},i.fileManager.stack),i.fileManager.clear(),i._clearFileInput()):t=i.$element.get(0).files,t&&t.length&&(i.readFiles(t),i._setFileDropZoneTitle()))},_clearObjects:function(t){t.find("video audio").each(function(){this.pause(),e(this).remove()}),t.find("img object div").each(function(){e(this).remove()})},_clearFileInput:function(){var t,i,a,n=this,r=n.$element;n._inputFileCount()&&(t=r.closest("form"),i=e(document.createElement("form")),a=e(document.createElement("div")),r.before(a),t.length?t.after(i):a.after(i),i.append(r).trigger("reset"),a.before(r).remove(),i.remove())},_resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:!0},e.$btnUpload.removeAttr("disabled"),e._setProgress(0),e.$progress.hide(),e._resetErrors(!1),e._initAjax(),e.fileManager.clearImages(),e._resetCanvas(),e.cacheInitialPreview={},e.overwriteInitial&&(e.initialPreview=[],e.initialPreviewConfig=[],e.initialPreviewThumbTags=[],e.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){var e=this;e.canvas&&e.imageCanvasContext&&e.imageCanvasContext.clearRect(0,0,e.canvas.width,e.canvas.height)},_hasInitialPreview:function(){var e=this;return!e.overwriteInitial&&e.previewCache.count(!0)},_resetPreview:function(){var e,t,i=this;i.previewCache.count(!0)?(e=i.previewCache.out(),i._setPreviewContent(e.content),i._setInitThumbAttr(),t=i.initialCaption?i.initialCaption:e.caption,i._setCaption(t)):(i._clearPreview(),i._initCaption()),i.showPreview&&(i._initZoom(),i._initSortable())},_clearDefaultPreview:function(){this.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var e=this;e.showPreview&&!t.isEmpty(e.defaultPreviewContent)&&(e._setPreviewContent('<div class="file-default-preview">'+e.defaultPreviewContent+"</div>"),e.$container.removeClass("file-input-new"),e._initClickable())},_resetPreviewThumbs:function(e){var t,i=this;if(e)return i._clearPreview(),void i.clearFileStack();i._hasInitialPreview()?(t=i.previewCache.out(),i._setPreviewContent(t.content),i._setInitThumbAttr(),i._setCaption(t.caption),i._initPreviewActions()):i._clearPreview()},_getLayoutTemplate:function(e){var i=this,a=i.layoutTemplates[e];return t.isEmpty(i.customLayoutTags)?a:t.replaceTags(a,i.customLayoutTags)},_getPreviewTemplate:function(e){var i=this,a=i.previewTemplates[e];return t.isEmpty(i.customPreviewTags)?a:t.replaceTags(a,i.customPreviewTags)},_getOutData:function(e,t,i,a){var n=this;return t=t||{},i=i||{},a=a||n.fileManager.list(),{formdata:e,files:a,filenames:n.filenames,filescount:n.getFilesCount(),extra:n._getExtraData(),response:i,reader:n.reader,jqXHR:t}},_getMsgSelected:function(e){var t=this,i=1===e?t.fileSingle:t.filePlural;return e>0?t.msgSelected.replace("{n}",e).replace("{files}",i):t.msgNoFilesSelected},_getFrame:function(i){var a=this,n=e("#"+i);return n.length?n:(a._log(t.logMessages.invalidThumb,{id:i}),null)},_getThumbs:function(e){return e=e||"",this.getFrames(":not(.file-preview-initial)"+e)},_getExtraData:function(e,t){var i=this,a=i.uploadExtraData;return"function"==typeof i.uploadExtraData&&(a=i.uploadExtraData(e,t)),a},_initXhr:function(e,i,a){var n=this,r=n.fileManager,o=function(e){var o=0,s=e.total,l=e.loaded||e.position,d=r.getUploadStats(i,l,s);e.lengthComputable&&!n.enableResumableUpload&&(o=t.round(l/s*100)),i?n._setFileUploadStats(i,o,a,d):n._setProgress(o,null,null,n._getStats(d)),n._raise("fileajaxprogress",[d])};return e.upload&&(n.progressDelay&&(o=t.debounce(o,n.progressDelay)),e.upload.addEventListener("progress",o,!1)),e},_initAjaxSettings:function(){var t=this;t._ajaxSettings=e.extend(!0,{},t.ajaxSettings),t._ajaxDeleteSettings=e.extend(!0,{},t.ajaxDeleteSettings)},_mergeAjaxCallback:function(e,t,i){var a,n=this,r=n._ajaxSettings,o=n.mergeAjaxCallbacks;"delete"===i&&(r=n._ajaxDeleteSettings,o=n.mergeAjaxDeleteCallbacks),a=r[e],r[e]=o&&"function"==typeof a?"before"===o?function(){a.apply(this,arguments),t.apply(this,arguments)}:function(){t.apply(this,arguments),a.apply(this,arguments)}:t},_ajaxSubmit:function(t,i,a,n,r,o,s,l){var d,u,c,h,f=this;f._raise("filepreajax",[r,o,s])&&(r.append("initialPreview",JSON.stringify(f.initialPreview)),r.append("initialPreviewConfig",JSON.stringify(f.initialPreviewConfig)),r.append("initialPreviewThumbTags",JSON.stringify(f.initialPreviewThumbTags)),f._initAjaxSettings(),f._mergeAjaxCallback("beforeSend",t),f._mergeAjaxCallback("success",i),f._mergeAjaxCallback("complete",a),f._mergeAjaxCallback("error",n),l=l||f.uploadUrlThumb||f.uploadUrl,"function"==typeof l&&(l=l()),c=f._getExtraData(o,s)||{},"object"===(void 0===c?"undefined":_typeof(c))&&e.each(c,function(e,t){r.append(e,t)}),u={xhr:function(){var t=e.ajaxSettings.xhr();return f._initXhr(t,o,f.fileManager.count())},url:f._encodeURI(l),type:"POST",dataType:"json",data:r,cache:!1,processData:!1,contentType:!1},d=e.extend(!0,{},u,f._ajaxSettings),f.ajaxQueue.push(d),h=function(){var t,i;f.ajaxCurrentThreads<f.maxAjaxThreads&&void 0!==(t=f.ajaxQueue.shift())&&(f.ajaxCurrentThreads++,i=e.ajax(t).done(function(){clearInterval(f.ajaxQueueIntervalId),f.ajaxCurrentThreads--}),f.ajaxRequests.push(i))},f.ajaxQueueIntervalId=setInterval(h,f.queueDelay))},_mergeArray:function(e,i){var a=this,n=t.cleanArray(a[e]),r=t.cleanArray(i);a[e]=n.concat(r)},_initUploadSuccess:function(i,a,n){var r,o,s,l,d,u,c,h,f,p=this;p.showPreview&&"object"===(void 0===i?"undefined":_typeof(i))&&!e.isEmptyObject(i)&&void 0!==i.initialPreview&&i.initialPreview.length>0&&(p.hasInitData=!0,u=i.initialPreview||[],c=i.initialPreviewConfig||[],h=i.initialPreviewThumbTags||[],r=void 0===i.append||i.append,
u.length>0&&!t.isArray(u)&&(u=u.split(p.initialPreviewDelimiter)),u.length&&(p._mergeArray("initialPreview",u),p._mergeArray("initialPreviewConfig",c),p._mergeArray("initialPreviewThumbTags",h)),void 0!==a?n?(f=a.attr("data-fileindex"),p.uploadCache.content[f]=u[0],p.uploadCache.config[f]=c[0]||[],p.uploadCache.tags[f]=h[0]||[],p.uploadCache.append=r):(s=p.previewCache.add(u[0],c[0],h[0],r),o=p.previewCache.get(s,!1),l=e(document.createElement("div")).html(o).hide().insertAfter(a),d=l.find(".kv-zoom-cache"),d&&d.length&&d.insertAfter(a),a.fadeOut("slow",function(){var e=l.find(".file-preview-frame");e&&e.length&&e.insertBefore(a).fadeIn("slow").css("display:inline-block"),p._initPreviewActions(),p._clearFileInput(),t.cleanZoomCache(p.$preview.find("#zoom-"+a.attr("id"))),a.remove(),l.remove(),p._initSortable()})):(p.previewCache.set(u,c,h,r),p._initPreview(),p._initPreviewActions()))},_initSuccessThumbs:function(){var i=this;i.showPreview&&i._getThumbs(t.FRAMES+".file-preview-success").each(function(){var a=e(this),n=i.$preview,r=a.find(".kv-file-remove");r.removeAttr("disabled"),i._handler(r,"click",function(){var e=a.attr("id"),r=i._raise("filesuccessremove",[e,a.attr("data-fileindex")]);t.cleanMemory(a),!1!==r&&a.fadeOut("slow",function(){t.cleanZoomCache(n.find("#zoom-"+e)),a.remove(),i.getFrames().length||i.reset()})})})},_updateInitialPreview:function(){var e,i,a=this,n=a.uploadCache,r=0,o=a.cacheInitialPreview;if(o&&o.content&&(r=o.content.length),a.showPreview){if(a.previewCache.set(n.content,n.config,n.tags,n.append),r){for(e=0;e<n.content.length;e++)i=e+r,o.content[i]=n.content[e],o.config.length&&(o.config[i]=n.config[e]),o.tags.length&&(o.tags[i]=n.tags[e]);a.initialPreview=t.cleanArray(o.content),a.initialPreviewConfig=t.cleanArray(o.config),a.initialPreviewThumbTags=t.cleanArray(o.tags)}else a.initialPreview=n.content,a.initialPreviewConfig=n.config,a.initialPreviewThumbTags=n.tags;a.cacheInitialPreview={},a.hasInitData&&(a._initPreview(),a._initPreviewActions())}},_uploadSingle:function(i,a,n){var r,o,s,l,d,u,c,h,f,p,m,v,g,w=this,y=w.fileManager,b=y.count(),_=new FormData,k=w.previewInitId+"-"+i,x=b>0||!e.isEmptyObject(w.uploadExtraData),C=w.ajaxOperations.uploadThumb,T=y.getFile(a),P=w.resumableManager,D={id:k,index:i,fileId:a},M=w.fileManager.getFileName(a,!0);if(w.enableResumableUpload)return w.paused=!1,w.cancelling=!1,y.initStats(a),void P.uploadSingle(a);w.showPreview&&(o=w.fileManager.getThumb(a),c=o.find(".file-thumb-progress"),l=o.find(".kv-file-upload"),d=o.find(".kv-file-remove"),c.show()),0===b||!x||w.showPreview&&l&&l.hasClass("disabled")||w._abort(D)||(v=function(){u?y.errors.push(a):y.removeFile(a),y.setProcessed(a),y.isProcessed()&&(w.fileBatchCompleted=!0)},s=function(){var e;w.fileBatchCompleted&&setTimeout(function(){var i=0===y.count(),a=y.errors.length;w._updateInitialPreview(),w.unlock(i),i&&w._clearFileInput(),e=w.$preview.find(".file-preview-initial"),w.uploadAsync&&e.length&&(t.addCss(e,t.SORT_CSS),w._initSortable()),w._raise("filebatchuploadcomplete",[y.stack,w._getExtraData()]),w.retryErrorUploads&&0!==a||y.clear(),w._setProgress(101),w.ajaxAborted=!1},w.processDelay)},h=function(s){r=w._getOutData(_,s),y.initStats(a),w.fileBatchCompleted=!1,n||(w.ajaxAborted=!1),w.showPreview&&(o.hasClass("file-preview-success")||(w._setThumbStatus(o,"Loading"),t.addCss(o,"file-uploading")),l.attr("disabled",!0),d.attr("disabled",!0)),n||w.lock(),-1!==y.errors.indexOf(a)&&delete y.errors[a],w._raise("filepreupload",[r,k,i]),e.extend(!0,D,r),w._abort(D)&&(s.abort(),n||(w._setThumbStatus(o,"New"),o.removeClass("file-uploading"),l.removeAttr("disabled"),d.removeAttr("disabled"),w.unlock()),w._setProgressCancelled())},f=function(s,d,h){var f=w.showPreview&&o.attr("id")?o.attr("id"):k;r=w._getOutData(_,h,s),e.extend(!0,D,r),setTimeout(function(){t.isEmpty(s)||t.isEmpty(s.error)?(w.showPreview&&(w._setThumbStatus(o,"Success"),l.hide(),w._initUploadSuccess(s,o,n),w._setProgress(101,c)),w._raise("fileuploaded",[r,f,i]),n?v():w.fileManager.remove(o)):(u=!0,g=w._parseError(C,h,w.msgUploadError,w.fileManager.getFileName(a)),w._showFileError(g,D),w._setPreviewError(o,!0),w.retryErrorUploads||l.hide(),n&&v(),w._setProgress(101,e("#"+f).find(".file-thumb-progress"),w.msgUploadError))},w.processDelay)},p=function(){setTimeout(function(){w.showPreview&&(l.removeAttr("disabled"),d.removeAttr("disabled"),o.removeClass("file-uploading")),n?s():(w.unlock(!1),w._clearFileInput()),w._initSuccessThumbs()},w.processDelay)},m=function(t,i,r){g=w._parseError(C,t,r,w.fileManager.getFileName(a)),u=!0,setTimeout(function(){n&&v(),w.fileManager.setProgress(a,100),w._setPreviewError(o,!0),w.retryErrorUploads||l.hide(),e.extend(!0,D,w._getOutData(_,t)),w._setProgress(101,c,w.msgAjaxProgressError.replace("{operation}",C)),w._setProgress(101,o.find(".file-thumb-progress"),w.msgUploadError),w._showFileError(g,D)},w.processDelay)},_.append(w.uploadFileAttr,T.file,M),w._setUploadData(_,{fileId:a}),w._ajaxSubmit(h,f,p,m,_,a,i))},_uploadBatch:function(){var i,a,n,r,o,s,l=this,d=l.fileManager,u=d.total(),c={},h=u>0||!e.isEmptyObject(l.uploadExtraData),f=new FormData,p=l.ajaxOperations.uploadBatch;if(0!==u&&h&&!l._abort(c)){s=function(){l.fileManager.clear(),l._clearFileInput()},i=function(i){l.lock(),d.initStats();var a=l._getOutData(f,i);l.ajaxAborted=!1,l.showPreview&&l._getThumbs().each(function(){var i=e(this),a=i.find(".kv-file-upload"),n=i.find(".kv-file-remove");i.hasClass("file-preview-success")||(l._setThumbStatus(i,"Loading"),t.addCss(i,"file-uploading")),a.attr("disabled",!0),n.attr("disabled",!0)}),l._raise("filebatchpreupload",[a]),l._abort(a)&&(i.abort(),l._getThumbs().each(function(){var t=e(this),i=t.find(".kv-file-upload"),a=t.find(".kv-file-remove");t.hasClass("file-preview-loading")&&(l._setThumbStatus(t,"New"),t.removeClass("file-uploading")),i.removeAttr("disabled"),a.removeAttr("disabled")}),l._setProgressCancelled())},a=function(i,a,n){var r=l._getOutData(f,n,i),d=0,u=l._getThumbs(":not(.file-preview-success)"),c=t.isEmpty(i)||t.isEmpty(i.errorkeys)?[]:i.errorkeys;t.isEmpty(i)||t.isEmpty(i.error)?(l._raise("filebatchuploadsuccess",[r]),s(),l.showPreview?(u.each(function(){var t=e(this);l._setThumbStatus(t,"Success"),t.removeClass("file-uploading"),t.find(".kv-file-upload").hide().removeAttr("disabled")}),l._initUploadSuccess(i)):l.reset(),l._setProgress(101)):(l.showPreview&&(u.each(function(){var t=e(this);t.removeClass("file-uploading"),t.find(".kv-file-upload").removeAttr("disabled"),t.find(".kv-file-remove").removeAttr("disabled"),0===c.length||-1!==e.inArray(d,c)?(l._setPreviewError(t,!0),l.retryErrorUploads||(t.find(".kv-file-upload").hide(),l.fileManager.remove(t))):(t.find(".kv-file-upload").hide(),l._setThumbStatus(t,"Success"),l.fileManager.remove(t)),t.hasClass("file-preview-error")&&!l.retryErrorUploads||d++}),l._initUploadSuccess(i)),o=l._parseError(p,n,l.msgUploadError),l._showFileError(o,r,"filebatchuploaderror"),l._setProgress(101,l.$progress,l.msgUploadError))},r=function(){l.unlock(),l._initSuccessThumbs(),l._clearFileInput(),l._raise("filebatchuploadcomplete",[l.fileManager.stack,l._getExtraData()])},n=function(t,i,a){var n=l._getOutData(f,t);o=l._parseError(p,t,a),l._showFileError(o,n,"filebatchuploaderror"),l.uploadFileCount=u-1,l.showPreview&&(l._getThumbs().each(function(){var t=e(this);t.removeClass("file-uploading"),l.fileManager.getFile(t.attr("data-fileid"))&&l._setPreviewError(t)}),l._getThumbs().removeClass("file-uploading"),l._getThumbs(" .kv-file-upload").removeAttr("disabled"),l._getThumbs(" .kv-file-delete").removeAttr("disabled"),l._setProgress(101,l.$progress,l.msgAjaxProgressError.replace("{operation}",p)))};var m=0;e.each(l.fileManager.stack,function(e,i){t.isEmpty(i.file)||f.append(l.uploadFileAttr,i.file,i.nameFmt||"untitled_"+m),m++}),l._ajaxSubmit(i,a,r,n,f)}},_uploadExtraOnly:function(){var e,i,a,n,r,o=this,s={},l=new FormData,d=o.ajaxOperations.uploadExtra;o._abort(s)||(e=function(e){o.lock();var t=o._getOutData(l,e);o._raise("filebatchpreupload",[t]),o._setProgress(50),s.data=t,s.xhr=e,o._abort(s)&&(e.abort(),o._setProgressCancelled())},i=function(e,i,a){var n=o._getOutData(l,a,e);t.isEmpty(e)||t.isEmpty(e.error)?(o._raise("filebatchuploadsuccess",[n]),o._clearFileInput(),o._initUploadSuccess(e),o._setProgress(101)):(r=o._parseError(d,a,o.msgUploadError),o._showFileError(r,n,"filebatchuploaderror"))},a=function(){o.unlock(),o._clearFileInput(),o._raise("filebatchuploadcomplete",[o.fileManager.stack,o._getExtraData()])},n=function(e,t,i){var a=o._getOutData(l,e);r=o._parseError(d,e,i),s.data=a,o._showFileError(r,a,"filebatchuploaderror"),o._setProgress(101,o.$progress,o.msgAjaxProgressError.replace("{operation}",d))},o._ajaxSubmit(e,i,a,n,l))},_deleteFileIndex:function(i){var a=this,n=i.attr("data-fileindex"),r=a.reversePreviewOrder;"init_"===n.substring(0,5)&&(n=parseInt(n.replace("init_","")),a.initialPreview=t.spliceArray(a.initialPreview,n,r),a.initialPreviewConfig=t.spliceArray(a.initialPreviewConfig,n,r),a.initialPreviewThumbTags=t.spliceArray(a.initialPreviewThumbTags,n,r),a.getFrames().each(function(){var t=e(this),i=t.attr("data-fileindex");"init_"===i.substring(0,5)&&(i=parseInt(i.replace("init_","")))>n&&(i--,t.attr("data-fileindex","init_"+i))}),(a.uploadAsync||a.enableResumableUpload)&&(a.cacheInitialPreview=a.getPreview()))},_initFileActions:function(){var i=this,a=i.$preview;i.showPreview&&(i._initZoomButton(),i.getFrames(" .kv-file-remove").each(function(){var n,r,o,s,l=e(this),d=l.closest(t.FRAMES),u=d.attr("id"),c=d.attr("data-fileindex");i._handler(l,"click",function(){if(!1===(s=i._raise("filepreremove",[u,c]))||!i._validateMinCount())return!1;n=d.hasClass("file-preview-error"),t.cleanMemory(d),d.fadeOut("slow",function(){t.cleanZoomCache(a.find("#zoom-"+u)),i.fileManager.remove(d),i._clearObjects(d),d.remove(),u&&n&&i.$errorContainer.find('li[data-thumb-id="'+u+'"]').fadeOut("fast",function(){e(this).remove(),i._errorsExist()||i._resetErrors()}),i._clearFileInput();var s,l=i.previewCache.count(!0),h=i.fileManager.count(),f=i.showPreview&&i.getFrames().length;0!==h||0!==l||f?(r=l+h,r>1?o=i._getMsgSelected(r):(s=i.fileManager.getFirstFile(),o=s?s.nameFmt:"_"),i._setCaption(o)):i.reset(),i._raise("fileremoved",[u,c])})})}),i.getFrames(" .kv-file-upload").each(function(){var a=e(this);i._handler(a,"click",function(){var e=a.closest(t.FRAMES),n=e.attr("data-fileid");i.$progress.hide(),e.hasClass("file-preview-error")&&!i.retryErrorUploads||i._uploadSingle(i.fileManager.getIndex(n),n,!1)})}))},_initPreviewActions:function(){var i=this,a=i.$preview,n=i.deleteExtraData||{},r=t.FRAMES+" .kv-file-remove",o=i.fileActionSettings,s=o.removeClass,l=o.removeErrorClass,d=function(){var e=i.isAjaxUpload?i.previewCache.count(!0):i._inputFileCount();i.getFrames().length||e||(i._setCaption(""),i.reset(),i.initialCaption="")};i._initZoomButton(),a.find(r).each(function(){var r,o,u,c,h=e(this),f=h.data("url")||i.deleteUrl,p=h.data("key"),m=i.ajaxOperations.deleteThumb;if(!t.isEmpty(f)&&void 0!==p){"function"==typeof f&&(f=f());var v,g,w,y,b,_=h.closest(t.FRAMES),k=i.previewCache.data,x=_.attr("data-fileindex");x=parseInt(x.replace("init_","")),w=t.isEmpty(k.config)&&t.isEmpty(k.config[x])?null:k.config[x],b=t.isEmpty(w)||t.isEmpty(w.extra)?n:w.extra,y=w.filename||w.caption||"","function"==typeof b&&(b=b()),g={id:h.attr("id"),key:p,extra:b},o=function(e){i.ajaxAborted=!1,i._raise("filepredelete",[p,e,b]),i._abort()?e.abort():(h.removeClass(l),t.addCss(_,"file-uploading"),t.addCss(h,"disabled "+s))},u=function(e,n,o){var u,c;if(!t.isEmpty(e)&&!t.isEmpty(e.error))return g.jqXHR=o,g.response=e,r=i._parseError(m,o,i.msgDeleteError,y),i._showFileError(r,g,"filedeleteerror"),_.removeClass("file-uploading"),h.removeClass("disabled "+s).addClass(l),void d();_.removeClass("file-uploading").addClass("file-deleted"),_.fadeOut("slow",function(){x=parseInt(_.attr("data-fileindex").replace("init_","")),i.previewCache.unset(x),i._deleteFileIndex(_),u=i.previewCache.count(!0),c=u>0?i._getMsgSelected(u):"",i._setCaption(c),i._raise("filedeleted",[p,o,b]),t.cleanZoomCache(a.find("#zoom-"+_.attr("id"))),i._clearObjects(_),_.remove(),d()})},c=function(e,t,a){var n=i._parseError(m,e,a,y);g.jqXHR=e,g.response={},i._showFileError(n,g,"filedeleteerror"),_.removeClass("file-uploading"),h.removeClass("disabled "+s).addClass(l),d()},i._initAjaxSettings(),i._mergeAjaxCallback("beforeSend",o,"delete"),i._mergeAjaxCallback("success",u,"delete"),i._mergeAjaxCallback("error",c,"delete"),v=e.extend(!0,{},{url:i._encodeURI(f),type:"POST",dataType:"json",data:e.extend(!0,{},{key:p},b)},i._ajaxDeleteSettings),i._handler(h,"click",function(){if(!i._validateMinCount())return!1;i.ajaxAborted=!1,i._raise("filebeforedelete",[p,b]),i.ajaxAborted instanceof Promise?i.ajaxAborted.then(function(t){t||e.ajax(v)}):i.ajaxAborted||e.ajax(v)})}})},_hideFileIcon:function(){var e=this;e.overwriteInitial&&e.$captionContainer.removeClass("icon-visible")},_showFileIcon:function(){var e=this;t.addCss(e.$captionContainer,"icon-visible")},_getSize:function(t,i){var a,n,r=this,o=parseFloat(t),s=r.fileSizeGetter;return e.isNumeric(t)&&e.isNumeric(o)?("function"==typeof s?n=s(o):0===o?n="0.00 B":(a=Math.floor(Math.log(o)/Math.log(1024)),i||(i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"]),n=1*(o/Math.pow(1024,a)).toFixed(2)+" "+i[a]),r._getLayoutTemplate("size").replace("{sizeText}",n)):""},_getFileType:function(e){return this.mimeTypeAliases[e]||e},_generatePreviewTemplate:function(i,a,n,r,o,s,l,d,u,c,h,f,p,m){var v,g,w=this,y=w.slug(n),b="",_="",k=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,x=w.preferIconicPreview?"other":i,C=y,T=y,P=c||w._renderFileFooter(i,y,d,"auto",l),D=w._getPreviewIcon(n),M="type-default",S=D&&w.preferIconicPreview,E=D&&w.preferIconicZoomPreview;return v=k<400?w.previewSettingsSmall[x]||w.defaults.previewSettingsSmall[x]:w.previewSettings[x]||w.defaults.previewSettings[x],v&&e.each(v,function(e,t){_+=e+":"+t+";"}),g=function(a,l,d,c){var m=d?"zoom-"+o:o,v=w._getPreviewTemplate(a),g=(u||"")+" "+c;return w.frameClass&&(g=w.frameClass+" "+g),d&&(g=g.replace(" "+t.SORT_CSS,"")),v=w._parseFilePreviewIcon(v,n),"text"===a&&(l=t.htmlEncode(l)),"object"!==i||r||e.each(w.defaults.fileTypeSettings,function(e,t){"object"!==e&&"other"!==e&&t(n,r)&&(M="type-"+e)}),t.isEmpty(p)||(void 0!==p.title&&null!==p.title&&(C=p.title),void 0!==p.alt&&null!==p.alt&&(C=p.alt)),v.setTokens({previewId:m,caption:y,title:C,alt:T,frameClass:g,type:w._getFileType(r),fileindex:h,fileid:s||"",typeCss:M,footer:P,data:l,template:f||i,style:_?'style="'+_+'"':""})},h=h||o.slice(o.lastIndexOf("-")+1),w.fileActionSettings.showZoom&&(b=g(E?"other":i,m||a,!0,"kv-zoom-thumb")),b="\n"+w._getLayoutTemplate("zoomCache").replace("{zoomContent}",b),"function"==typeof w.sanitizeZoomCache&&(b=w.sanitizeZoomCache(b)),g(S?"other":i,a,!1,"kv-preview-thumb")+b},_addToPreview:function(e,t){return this.reversePreviewOrder?e.prepend(t):e.append(t)},_previewDefault:function(i,a,n){var r=this,o=r.$preview;if(r.showPreview){var s,l=t.getFileName(i),d=i?i.type:"",u=i.size||0,c=r._getFileName(i,""),h=!0===n&&!r.isAjaxUpload,f=t.createObjectURL(i),p=r.fileManager.getId(i);r._clearDefaultPreview(),s=r._generatePreviewTemplate("other",f,l,d,a,p,h,u),r._addToPreview(o,s),r._setThumbAttr(a,c,u),!0===n&&r.isAjaxUpload&&r._setThumbStatus(e("#"+a),"Error")}},canPreview:function(e){var i=this;if(!(e&&i.showPreview&&i.$preview&&i.$preview.length))return!1;var a,n,r,o=e.name||"",s=e.type||"",l=(e.size||0)/1e3,d=i._parseFileType(s,o),u=i.allowedPreviewTypes,c=i.allowedPreviewMimeTypes,h=i.allowedPreviewExtensions||[],f=i.disabledPreviewTypes,p=i.disabledPreviewMimeTypes,m=i.disabledPreviewExtensions||[],v=i.maxFilePreviewSize&&parseFloat(i.maxFilePreviewSize)||0,g=new RegExp("\\.("+h.join("|")+")$","i"),w=new RegExp("\\.("+m.join("|")+")$","i");return a=!u||-1!==u.indexOf(d),n=!c||-1!==c.indexOf(s),r=!h.length||t.compare(o,g),!(f&&-1!==f.indexOf(d)||p&&-1!==p.indexOf(s)||m.length&&t.compare(o,w)||v&&!isNaN(v)&&l>v)&&(a||n||r)},_previewFile:function(e,i,a,n,r,o){if(this.showPreview){var s,l=this,d=t.getFileName(i),u=o.type,c=o.name,h=l._parseFileType(u,d),f=l.$preview,p=i.size||0,m="text"===h||"html"===h||"image"===h?a.target.result:r,v=l.fileManager.getId(i);"html"===h&&l.purifyHtml&&window.DOMPurify&&(m=window.DOMPurify.sanitize(m)),s=l._generatePreviewTemplate(h,m,d,u,n,v,!1,p),l._clearDefaultPreview(),l._addToPreview(f,s);var g=f.find("#"+n),w=g.find("img"),y=g.attr("data-fileid");l._validateImageOrientation(w,i,n,y,c,u,p,m),l._setThumbAttr(n,c,p),l._initSortable()}},_setThumbAttr:function(t,i,a){var n=this,r=e("#"+t);r.length&&(a=a&&a>0?n._getSize(a):"",r.data({caption:i,size:a}))},_setInitThumbAttr:function(){var e,i,a,n,r=this,o=r.previewCache.data,s=r.previewCache.count(!0);if(0!==s)for(var l=0;l<s;l++)e=o.config[l],n=r.previewInitId+"-init_"+l,i=t.ifSet("caption",e,t.ifSet("filename",e)),a=t.ifSet("size",e),r._setThumbAttr(n,i,a)},_slugDefault:function(e){return t.isEmpty(e)?"":String(e).replace(/[\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_updateFileDetails:function(e){var i,a,n,r,o,s=this,l=s.$element,d=t.isIE(9)&&t.findFileName(l.val())||l[0].files[0]&&l[0].files[0].name;!d&&s.fileManager.count()>0?(o=s.fileManager.getFirstFile(),i=o.nameFmt):i=d?s.slug(d):"_",a=s.isAjaxUpload?s.fileManager.count():e,r=s.previewCache.count(!0)+a,n=1===a?i:s._getMsgSelected(r),s.isError?(s.$previewContainer.removeClass("file-thumb-loading"),s.$previewStatus.html(""),s.$captionContainer.removeClass("icon-visible")):s._showFileIcon(),s._setCaption(n,s.isError),s.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&s._raise("fileselect",[e,i]),s.previewCache.count(!0)&&s._initPreviewActions()},_setThumbStatus:function(e,t){var i=this;if(i.showPreview){var a="indicator"+t,n=a+"Title",r="file-preview-"+t.toLowerCase(),o=e.find(".file-upload-indicator"),s=i.fileActionSettings;e.removeClass("file-preview-success file-preview-error file-preview-loading"),"Success"===t&&e.find(".file-drag-handle").remove(),o.html(s[a]),o.attr("title",s[n]),e.addClass(r),"Error"!==t||i.retryErrorUploads||e.find(".kv-file-upload").attr("disabled",!0)}},_setProgressCancelled:function(){var e=this;e._setProgress(101,e.$progress,e.msgCancelled)},_setProgress:function(e,i,a,n){var r=this;if(i=i||r.$progress,i.length){var o,s=Math.min(e,100),l=r.progressUploadThreshold,d=e<=100?r.progressTemplate:r.progressCompleteTemplate,u=s<100?r.progressTemplate:a?r.paused?r.progressPauseTemplate:r.progressErrorTemplate:d;e>=100&&(n=""),t.isEmpty(u)||(o=l&&s>l&&e<=100?u.setTokens({percent:l,status:r.msgUploadThreshold}):u.setTokens({percent:s,status:e>100?r.msgUploadEnd:s+"%"}),n=n||"",o=o.setTokens({stats:n}),i.html(o),a&&i.find('[role="progressbar"]').html(a))}},_setFileDropZoneTitle:function(){var e,i=this,a=i.$container.find(".file-drop-zone"),n=i.dropZoneTitle;i.isClickable&&(e=t.isEmpty(i.$element.attr("multiple"))?i.fileSingle:i.filePlural,n+=i.dropZoneClickTitle.replace("{files}",e)),a.find("."+i.dropZoneTitleClass).remove(),!i.showPreview||0===a.length||i.fileManager.count()>0||!i.dropZoneEnabled||!i.isAjaxUpload&&i.$element.files||(0===a.find(t.FRAMES).length&&t.isEmpty(i.defaultPreviewContent)&&a.prepend('<div class="'+i.dropZoneTitleClass+'">'+n+"</div>"),i.$container.removeClass("file-input-new"),t.addCss(i.$container,"file-input-ajax-new"))},_getStats:function(e){var i,a,n=this;return n.showUploadStats&&e&&e.bitrate?(a=n._getLayoutTemplate("stats"),i=e.elapsed&&e.bps?n.msgPendingTime.setTokens({time:t.getElapsed(Math.ceil(e.pendingBytes/e.bps))}):n.msgCalculatingTime,a.setTokens({uploadSpeed:e.bitrate,pendingTime:i})):""},_setResumableProgress:function(e,t,i){var a=this,n=a.resumableManager,r=i?n:a,o=i?i.find(".file-thumb-progress"):null;0===r.lastProgress&&(r.lastProgress=e),e<r.lastProgress&&(e=r.lastProgress),a._setProgress(e,o,null,a._getStats(t)),r.lastProgress=e},_setFileUploadStats:function(i,a,n,r){var o=this,s=o.$progress;if(o.showPreview||s&&s.length){var l,d=o.fileManager,u=d.getThumb(i),c=o.resumableManager,h=0,f=d.getTotalSize(),p=e.extend(!0,{},r);if(o.enableResumableUpload){var m,v=r.loaded,g=c.getUploadedSize(),w=c.file.size;v+=g,m=d.uploadedSize+v,a=t.round(100*v/w),r.pendingBytes=w-g,o._setResumableProgress(a,r,u),l=Math.floor(100*m/f),p.pendingBytes=f-m,o._setResumableProgress(l,p)}else d.setProgress(i,a),s=u&&u.length?u.find(".file-thumb-progress"):null,o._setProgress(a,s,null,o._getStats(r)),e.each(d.stats,function(e,t){h+=t.loaded}),p.pendingBytes=f-h,l=t.round(h/f*100),o._setProgress(l,null,null,o._getStats(p))}},_validateMinCount:function(){var e=this,t=e.isAjaxUpload?e.fileManager.count():e._inputFileCount();return!(e.validateInitialCount&&e.minFileCount>0&&e._getFileCount(t-1)<e.minFileCount)||(e._noFilesError({}),!1)},_getFileCount:function(e){var t=this,i=0;return t.validateInitialCount&&!t.overwriteInitial&&(i=t.previewCache.count(!0),e+=i),e},_getFileId:function(e){return t.getFileId(e,this.generateFileId)},_getFileName:function(e,i){var a=this,n=t.getFileName(e);return n?a.slug(n):i},_getFileNames:function(e){return this.filenames.filter(function(t){return e?void 0!==t:void 0!==t&&null!==t})},_setPreviewError:function(e,t){var i=this,a=i.removeFromPreviewOnError&&!i.retryErrorUploads;if(t&&!a||i.fileManager.remove(e),i.showPreview){if(a)return void e.remove();i._setThumbStatus(e,"Error"),i._refreshUploadButton(e)}},_refreshUploadButton:function(e){var t=this,i=e.find(".kv-file-upload"),a=t.fileActionSettings,n=a.uploadIcon,r=a.uploadTitle;i.length&&(t.retryErrorUploads&&(n=a.uploadRetryIcon,r=a.uploadRetryTitle),i.attr("title",r).html(n))},_checkDimensions:function(e,i,a,n,r,o,s){var l,d,u,c=this,h="Small"===i?"min":"max",f=c[h+"Image"+o];!t.isEmpty(f)&&a.length&&(u=a[0],d="Width"===o?u.naturalWidth||u.width:u.naturalHeight||u.height,("Small"===i?d>=f:d<=f)||(l=c["msgImage"+o+i].setTokens({name:r,size:f}),c._showFileError(l,s),c._setPreviewError(n)))},_getExifObj:function(e){var i=this,a=null,n=t.logMessages.exifWarning;if("data:image/jpeg;base64,"!==e.slice(0,23)&&"data:image/jpg;base64,"!==e.slice(0,22))return void(a=null);try{a=window.piexif?window.piexif.load(e):null}catch(e){a=null,n=e&&e.message||""}return a||i._log(t.logMessages.badExifParser,{details:n}),a},_validateImageOrientation:function(e,i,a,n,r,o,s,l){var d,u,c=this,h=c.autoOrientImage;if(d=e.length&&h?c._getExifObj(l):null,!(u=d?d["0th"][piexif.ImageIFD.Orientation]:null))return void c._validateImage(a,n,r,o,s,l,d);t.setImageOrientation(e,c.$preview.find("#zoom-"+a+" img"),u),c._raise("fileimageoriented",{$img:e,file:i}),c._validateImage(a,n,r,o,s,l,d)},_validateImage:function(t,i,a,n,r,o,s){var l,d,u,c=this,h=c.$preview,f=h.find("#"+t),p=f.attr("data-fileindex"),m=f.find("img");a=a||"Untitled",m.one("load",function(){d=f.width(),u=h.width(),d>u&&m.css("width","100%"),l={ind:p,id:t,fileId:i},c._checkDimensions(p,"Small",m,f,a,"Width",l),c._checkDimensions(p,"Small",m,f,a,"Height",l),c.resizeImage||(c._checkDimensions(p,"Large",m,f,a,"Width",l),c._checkDimensions(p,"Large",m,f,a,"Height",l)),c._raise("fileimageloaded",[t]),c.fileManager.addImage(i,{ind:p,img:m,thumb:f,pid:t,typ:n,siz:r,validated:!1,imgData:o,exifObj:s}),f.data("exif",s),c._validateAllImages()}).one("error",function(){c._raise("fileimageloaderror",[t])}).each(function(){this.complete?e(this).trigger("load"):this.error&&e(this).trigger("error")})},_validateAllImages:function(){var t,i=this,a={val:0},n=i.fileManager.getImageCount(),r=i.resizeIfSizeMoreThan;n===i.fileManager.totalImages&&(i._raise("fileimagesloaded"),i.resizeImage&&e.each(i.fileManager.loadedImages,function(e,o){o.validated||(t=o.siz,t&&t>1e3*r&&i._getResizedImage(e,o,a,n),o.validated=!0)}))},_getResizedImage:function(i,a,n,r){var o,s,l,d,u,c,h,f,p,m,v=this,g=e(a.img)[0],w=g.naturalWidth,y=g.naturalHeight,b=1,_=v.maxImageWidth||w,k=v.maxImageHeight||y,x=!(!w||!y),C=v.imageCanvas,T=v.imageCanvasContext,P=a.typ,D=a.pid,M=a.ind,S=a.thumb,E=a.exifObj;if(u=function(e,t,i){v.isAjaxUpload?v._showFileError(e,t,i):v._showError(e,t,i),v._setPreviewError(S)},f=v.fileManager.getFile(i),p={id:D,index:M,fileId:i},m=[i,D,M],(!f||!x||w<=_&&y<=k)&&(x&&f&&v._raise("fileimageresized",m),n.val++,n.val===r&&v._raise("fileimagesresized"),!x))return void u(v.msgImageResizeError,p,"fileimageresizeerror");P=P||v.resizeDefaultImageType,s=w>_,l=y>k,b="width"===v.resizePreference?s?_/w:l?k/y:1:l?k/y:s?_/w:1,v._resetCanvas(),w*=b,y*=b,C.width=w,C.height=y;try{T.drawImage(g,0,0,w,y),d=C.toDataURL(P,v.resizeQuality),E&&(h=window.piexif.dump(E),d=window.piexif.insert(h,d)),o=t.dataURI2Blob(d),v.fileManager.setFile(i,o),v._raise("fileimageresized",m),n.val++,n.val===r&&v._raise("fileimagesresized",[void 0,void 0]),o instanceof Blob||u(v.msgImageResizeError,p,"fileimageresizeerror")}catch(e){n.val++,n.val===r&&v._raise("fileimagesresized",[void 0,void 0]),c=v.msgImageResizeException.replace("{errors}",e.message),u(c,p,"fileimageresizeexception")}},_initBrowse:function(e){var i=this,a=i.$element;i.showBrowse?i.$btnFile=e.find(".btn-file").append(a):(a.appendTo(e).attr("tabindex",-1),t.addCss(a,"file-no-browse"))},_initClickable:function(){var i,a,n=this;n.isClickable&&(i=n.$dropZone,n.isAjaxUpload||(a=n.$preview.find(".file-default-preview"),a.length&&(i=a)),t.addCss(i,"clickable"),i.attr("tabindex",-1),n._handler(i,"click",function(t){var a=e(t.target);e(n.elErrorContainer+":visible").length||a.parents(".file-preview-thumbnails").length&&!a.parents(".file-default-preview").length||(n.$element.data("zoneClicked",!0).trigger("click"),i.blur())}))},_initCaption:function(){var e=this,i=e.initialCaption||"";return e.overwriteInitial||t.isEmpty(i)?(e.$caption.val(""),!1):(e._setCaption(i),!0)},_setCaption:function(i,a){var n,r,o,s,l,d,u=this;if(u.$caption.length){if(u.$captionContainer.removeClass("icon-visible"),a)n=e("<div>"+u.msgValidationError+"</div>").text(),s=u.fileManager.count(),s?(d=u.fileManager.getFirstFile(),l=1===s&&d?d.nameFmt:u._getMsgSelected(s)):l=u._getMsgSelected(u.msgNo),r=t.isEmpty(i)?l:i,o='<span class="'+u.msgValidationErrorClass+'">'+u.msgValidationErrorIcon+"</span>";else{if(t.isEmpty(i))return;n=e("<div>"+i+"</div>").text(),r=n,o=u._getLayoutTemplate("fileIcon")}u.$captionContainer.addClass("icon-visible"),u.$caption.attr("title",n).val(r),u.$captionIcon.html(o)}},_createContainer:function(){var t=this,i={class:"file-input file-input-new"+(t.rtl?" kv-rtl":"")},a=e(document.createElement("div")).attr(i).html(t._renderMain());return a.insertBefore(t.$element),t._initBrowse(a),t.theme&&a.addClass("theme-"+t.theme),a},_refreshContainer:function(){var e=this,t=e.$container;e.$element.insertAfter(t),t.html(e._renderMain()),e._initBrowse(t),e._validateDisabled()},_validateDisabled:function(){var e=this;e.$caption.attr({readonly:e.isDisabled})},_renderMain:function(){var e=this,t=e.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",i=e.showClose?e._getLayoutTemplate("close"):"",a=e.showPreview?e._getLayoutTemplate("preview").setTokens({class:e.previewClass,dropClass:t}):"",n=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,r=e.captionTemplate.setTokens({class:n+" kv-fileinput-caption"});return e.mainTemplate.setTokens({class:e.mainClass+(!e.showBrowse&&e.showCaption?" no-browse":""),preview:a,close:i,caption:r,upload:e._renderButton("upload"),remove:e._renderButton("remove"),cancel:e._renderButton("cancel"),pause:e._renderButton("pause"),browse:e._renderButton("browse")})},_renderButton:function(e){var i=this,a=i._getLayoutTemplate("btnDefault"),n=i[e+"Class"],r=i[e+"Title"],o=i[e+"Icon"],s=i[e+"Label"],l=i.isDisabled?" disabled":"",d="button";switch(e){case"remove":if(!i.showRemove)return"";break;case"cancel":if(!i.showCancel)return"";n+=" kv-hidden";break;case"pause":if(!i.showPause)return"";n+=" kv-hidden";break;case"upload":if(!i.showUpload)return"";i.isAjaxUpload&&!i.isDisabled?a=i._getLayoutTemplate("btnLink").replace("{href}",i.uploadUrl):d="submit";break;case"browse":if(!i.showBrowse)return"";a=i._getLayoutTemplate("btnBrowse");break;default:return""}return n+="browse"===e?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button",t.isEmpty(s)||(s=' <span class="'+i.buttonLabelClass+'">'+s+"</span>"),a.setTokens({type:d,css:n,title:r,status:l,icon:o,label:s})},_renderThumbProgress:function(){var e=this;return'<div class="file-thumb-progress kv-hidden">'+e.progressInfoTemplate.setTokens({percent:101,status:e.msgUploadBegin,stats:""})+"</div>"},_renderFileFooter:function(e,i,a,n,r){var o,s,l=this,d=l.fileActionSettings,u=d.showRemove,c=d.showDrag,h=d.showUpload,f=d.showZoom,p=l._getLayoutTemplate("footer"),m=l._getLayoutTemplate("indicator"),v=r?d.indicatorError:d.indicatorNew,g=r?d.indicatorErrorTitle:d.indicatorNewTitle,w=m.setTokens({indicator:v,indicatorTitle:g});return a=l._getSize(a),s={type:e,caption:i,size:a,width:n,progress:"",indicator:w},l.isAjaxUpload?(s.progress=l._renderThumbProgress(),s.actions=l._renderFileActions(s,h,!1,u,f,c,!1,!1,!1)):s.actions=l._renderFileActions(s,!1,!1,!1,f,c,!1,!1,!1),o=p.setTokens(s),o=t.replaceTags(o,l.previewThumbTags)},_renderFileActions:function(e,t,i,a,n,r,o,s,l,d,u,c){if(!e.type&&d&&(e.type="image"),"function"==typeof t&&(t=t(e)),"function"==typeof i&&(i=i(e)),"function"==typeof a&&(a=a(e)),"function"==typeof n&&(n=n(e)),"function"==typeof r&&(r=r(e)),!(t||i||a||n||r))return"";var h,f=this,p=!1===s?"":' data-url="'+s+'"',m=!1===l?"":' data-key="'+l+'"',v="",g="",w="",y="",b="",_=f._getLayoutTemplate("actions"),k=f.fileActionSettings,x=f.otherActionButtons.setTokens({dataKey:m,key:l}),C=o?k.removeClass+" disabled":k.removeClass;return a&&(v=f._getLayoutTemplate("actionDelete").setTokens({removeClass:C,removeIcon:k.removeIcon,removeTitle:k.removeTitle,dataUrl:p,dataKey:m,key:l})),t&&(g=f._getLayoutTemplate("actionUpload").setTokens({uploadClass:k.uploadClass,uploadIcon:k.uploadIcon,uploadTitle:k.uploadTitle})),i&&(w=f._getLayoutTemplate("actionDownload").setTokens({downloadClass:k.downloadClass,downloadIcon:k.downloadIcon,downloadTitle:k.downloadTitle,downloadUrl:u||f.initialPreviewDownloadUrl}),w=w.setTokens({filename:c,key:l})),n&&(y=f._getLayoutTemplate("actionZoom").setTokens({zoomClass:k.zoomClass,zoomIcon:k.zoomIcon,zoomTitle:k.zoomTitle})),r&&d&&(h="drag-handle-init "+k.dragClass,b=f._getLayoutTemplate("actionDrag").setTokens({dragClass:h,dragTitle:k.dragTitle,dragIcon:k.dragIcon})),_.setTokens({delete:v,upload:g,download:w,zoom:y,drag:b,other:x})},_browse:function(e){var t=this;e&&e.isDefaultPrevented()||!t._raise("filebrowse")||(t.isError&&!t.isAjaxUpload&&t.clear(),t.$captionContainer.focus())},_change:function(i){var a=this;if(!a.changeTriggered){var n,r,o,s=a.$element,l=arguments.length>1,d=a.isAjaxUpload,u=l?arguments[1]:s.get(0).files,c=!d&&t.isEmpty(s.attr("multiple"))?1:a.maxFileCount,h=a.fileManager.count(),f=t.isEmpty(s.attr("multiple")),p=f&&h>0,m=function(t,i,n,r){var o=e.extend(!0,{},a._getOutData(null,{},{},u),{id:n,index:r}),s={id:n,index:r,file:i,files:u};return d?a._showFileError(t,o):a._showError(t,s)};if(a.reader=null,a._resetUpload(),a._hideFileIcon(),a.dropZoneEnabled&&a.$container.find(".file-drop-zone ."+a.dropZoneTitleClass).remove(),d||(u=i.target&&void 0===i.target.files?i.target.value?[{name:i.target.value.replace(/^.+\\/,"")}]:[]:i.target.files||{}),n=u,t.isEmpty(n)||0===n.length)return d||a.clear(),void a._raise("fileselectnone");if(a._resetErrors(),o=n.length,r=a._getFileCount(d?a.fileManager.count()+o:o),c>0&&r>c){if(!a.autoReplace||o>c)return void function(e,t){var i=a.msgFilesTooMany.replace("{m}",t).replace("{n}",e);a.isError=m(i,null,null,null),a.$captionContainer.removeClass("icon-visible"),a._setCaption("",!0),a.$container.removeClass("file-input-new file-input-ajax-new")}(a.autoReplace&&o>c?o:r,c);r>c&&a._resetPreviewThumbs(d)}else!d||p?(a._resetPreviewThumbs(!1),
p&&a.clearFileStack()):!d||0!==h||a.previewCache.count(!0)&&!a.overwriteInitial||a._resetPreviewThumbs(!0);a.readFiles(n)}},_abort:function(t){var i,a=this;return a.ajaxAborted&&"object"===_typeof(a.ajaxAborted)&&void 0!==a.ajaxAborted.message?(i=e.extend(!0,{},a._getOutData(null),t),i.abortData=a.ajaxAborted.data||{},i.abortMessage=a.ajaxAborted.message,a._setProgress(101,a.$progress,a.msgCancelled),a._showFileError(a.ajaxAborted.message,i,"filecustomerror"),a.cancel(),!0):!!a.ajaxAborted},_resetFileStack:function(){var i=this,a=0;i._getThumbs().each(function(){var n=e(this),r=n.attr("data-fileindex"),o=n.attr("id");"-1"!==r&&-1!==r&&(i.fileManager.getFile(n.attr("data-fileid"))?n.attr({id:"uploaded-"+t.uniqId(),"data-fileindex":"-1"}):(n.attr({id:i.previewInitId+"-"+a,"data-fileindex":a}),a++),i.$preview.find("#zoom-"+o).attr({id:"zoom-"+n.attr("id"),"data-fileindex":n.attr("data-fileindex")}))})},_isFileSelectionValid:function(e){var t=this;return e=e||0,t.required&&!t.getFilesCount()?(t.$errorContainer.html(""),t._showFileError(t.msgFileRequired),!1):!(t.minFileCount>0&&t._getFileCount(e)<t.minFileCount)||(t._noFilesError({}),!1)},clearFileStack:function(){var e=this;return e.fileManager.clear(),e._initResumableUpload(),e.enableResumableUpload?(null===e.showPause&&(e.showPause=!0),null===e.showCancel&&(e.showCancel=!1)):(e.showPause=!1,null===e.showCancel&&(e.showCancel=!0)),e.$element},getFileStack:function(){return this.files.stack},getFileList:function(){return this.files.list()},getFilesCount:function(){var e=this,t=e.isAjaxUpload?e.fileManager.count():e._inputFileCount();return e._getFileCount(t)},readFiles:function(i){this.reader=new FileReader;var a,n=this,r=n.$element,o=n.reader,s=n.$previewContainer,l=n.$previewStatus,d=n.msgLoading,u=n.msgProgress,c=n.previewInitId,h=i.length,f=n.fileTypeSettings,p=n.fileManager.count(),m=n.allowedFileTypes,v=m?m.length:0,g=n.allowedFileExtensions,w=t.isEmpty(g)?"":g.join(", "),y=function(t,r,o,s,l){var d=e.extend(!0,{},n._getOutData(null,{},{},i),{id:o,index:s,fileId:l}),u=e("#"+o),c={id:o,index:s,fileId:l,file:r,files:i};n._previewDefault(r,o,!0),n.isAjaxUpload?setTimeout(function(){a(s+1)},n.processDelay):h=0,n._initFileActions(),u.remove(),n.isError=n.isAjaxUpload?n._showFileError(t,d):n._showError(t,c),n._updateFileDetails(h)};n.fileManager.clearImages(),e.each(i,function(e,t){var i=n.fileTypeSettings.image;i&&i(t.type)&&n.fileManager.totalImages++}),a=function(b){if(t.isEmpty(r.attr("multiple"))&&(h=1),b>=h)return n.isAjaxUpload&&n.fileManager.count()>0?n._raise("filebatchselected",[n.fileManager.stack]):n._raise("filebatchselected",[i]),s.removeClass("file-thumb-loading"),void l.html("");var _,k,x,C,T,P,D,M,S,E,I,F,A,O=p+b,$=c+"-"+O,j=i[b],z=f.text,U=f.image,R=f.html,N=n._getFileName(j,""),B=(j&&j.size||0)/1e3,L="",Y=t.createObjectURL(j),V=0,Z="",H=0,W=function(){var e=u.setTokens({index:b+1,files:h,percent:50,name:N});setTimeout(function(){l.html(e),n._updateFileDetails(h),a(b+1)},n.processDelay),n._raise("fileloaded",[j,$,b,o])};if(j){if(M=n.fileManager.getId(j),v>0)for(k=0;k<v;k++)P=m[k],D=n.msgFileTypes[P]||P,Z+=0===k?D:", "+D;if(!1===N)return void a(b+1);if(0===N.length)return x=n.msgInvalidFileName.replace("{name}",t.htmlEncode(t.getFileName(j),"[unknown]")),void y(x,j,$,b,M);if(t.isEmpty(g)||(L=new RegExp("\\.("+g.join("|")+")$","i")),_=B.toFixed(2),n.maxFileSize>0&&B>n.maxFileSize)return x=n.msgSizeTooLarge.setTokens({name:N,size:_,maxSize:n.maxFileSize}),void y(x,j,$,b,M);if(null!==n.minFileSize&&B<=t.getNum(n.minFileSize))return x=n.msgSizeTooSmall.setTokens({name:N,size:_,minSize:n.minFileSize}),void y(x,j,$,b,M);if(!t.isEmpty(m)&&t.isArray(m)){for(k=0;k<m.length;k+=1)C=m[k],S=f[C],V+=S&&"function"==typeof S&&S(j.type,t.getFileName(j))?1:0;if(0===V)return x=n.msgInvalidFileType.setTokens({name:N,types:Z}),void y(x,j,$,b,M)}if(0===V&&!t.isEmpty(g)&&t.isArray(g)&&!t.isEmpty(L)&&(T=t.compare(N,L),0===(V+=t.isEmpty(T)?0:T.length)))return x=n.msgInvalidFileExtension.setTokens({name:N,extensions:w}),void y(x,j,$,b,M);if(n.isAjaxUpload&&n.fileManager.exists(M))return x=n.msgDuplicateFile.setTokens({name:N,size:_}),void y(x,j,$,b,M);if(!n.canPreview(j))return n.isAjaxUpload&&n.fileManager.add(j),n.showPreview&&(s.addClass("file-thumb-loading"),n._previewDefault(j,$),n._initFileActions()),void setTimeout(function(){n._updateFileDetails(h),a(b+1),n._raise("fileloaded",[j,$,b])},10);E=z(j.type,N),I=R(j.type,N),F=U(j.type,N),l.html(d.replace("{index}",b+1).replace("{files}",h)),s.addClass("file-thumb-loading"),o.onerror=function(e){n._errorHandler(e,N)},o.onload=function(i){var a,r,s,l,d,u,c=[];if(r={name:N,type:j.type},e.each(f,function(e,t){"object"!==e&&"other"!==e&&"function"==typeof t&&t(j.type,N)&&H++}),0===H){for(s=new Uint8Array(i.target.result),k=0;k<s.length;k++)l=s[k].toString(16),c.push(l);if(a=c.join("").toLowerCase().substring(0,8),u=t.getMimeType(a,"",""),t.isEmpty(u)&&(d=t.arrayBuffer2String(o.result),u=t.isSvg(d)?"image/svg+xml":t.getMimeType(a,d,j.type)),r={name:N,type:u},E=z(u,""),I=R(u,""),F=U(u,""),(A=E||I)||F)return void function(e){var t=new FileReader;t.onerror=function(e){n._errorHandler(e,N)},t.onload=function(e){n._previewFile(b,j,e,$,Y,r),n._initFileActions(),W()},e?t.readAsText(j,n.textEncoding):t.readAsDataURL(j)}(A)}n._previewFile(b,j,i,$,Y,r),n._initFileActions(),W()},o.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100,i=Math.ceil(t);x=u.setTokens({index:b+1,files:h,percent:i,name:N}),setTimeout(function(){l.html(x)},n.processDelay)}},E||I?o.readAsText(j,n.textEncoding):F?o.readAsDataURL(j):o.readAsArrayBuffer(j),n.fileManager.add(j)}},a(0),n._updateFileDetails(h,!1)},lock:function(){var e=this,t=e.$container;return e._resetErrors(),e.disable(),t.addClass("is-locked"),e.showCancel&&t.find(".fileinput-cancel").show(),e.showPause&&t.find(".fileinput-pause").show(),e._raise("filelock",[e.fileManager.stack,e._getExtraData()]),e.$element},unlock:function(e){var t=this,i=t.$container;return void 0===e&&(e=!0),t.enable(),i.removeClass("is-locked"),t.showCancel&&i.find(".fileinput-cancel").hide(),t.showPause&&i.find(".fileinput-pause").hide(),e&&t._resetFileStack(),t._raise("fileunlock",[t.fileManager.stack,t._getExtraData()]),t.$element},pause:function(){var t,i=this,a=i.resumableManager,n=i.ajaxRequests,r=n.length;if(i.enableResumableUpload){if(a.chunkIntervalId&&clearInterval(a.chunkIntervalId),i.ajaxQueueIntervalId&&clearInterval(i.ajaxQueueIntervalId),i._raise("fileuploadpaused",[i.fileManager,a]),r>0)for(t=0;t<r;t+=1)i.paused=!0,n[t].abort();return i.showPreview&&(a.$btnUpload.removeAttr("disabled"),i._getThumbs().each(function(){var t=e(this),a=t.attr("data-fileid");t.removeClass("file-uploading"),i.fileManager.getFile(a)||(t.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),t.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled"))})),i._setProgress(101,i.$progress,i.msgPaused),i.$element}},cancel:function(){var t,i=this,a=i.ajaxRequests,n=i.resumableManager,r=a.length;if(i.enableResumableUpload&&n.chunkIntervalId?(clearInterval(n.chunkIntervalId),n.reset(),i._raise("fileuploadcancelled",[i.fileManager,n])):i._raise("fileuploadcancelled",[i.fileManager]),i.ajaxQueueIntervalId&&clearInterval(i.ajaxQueueIntervalId),i._initAjax(),r>0)for(t=0;t<r;t+=1)i.cancelling=!0,a[t].abort();return i._getThumbs().each(function(){var t=e(this),a=t.attr("data-fileid"),n=t.find(".file-thumb-progress");t.removeClass("file-uploading"),i._setProgress(0,n),n.hide(),i.fileManager.getFile(a)||(t.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),t.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),i.unlock()}),setTimeout(function(){i._setProgressCancelled()},i.processDelay),i.$element},clear:function(){var i,a=this;if(a._raise("fileclear"))return a.$btnUpload.removeAttr("disabled"),a._getThumbs().find("video,audio,img").each(function(){t.cleanMemory(e(this))}),a._clearFileInput(),a._resetUpload(),a.clearFileStack(),a._resetErrors(!0),a._hasInitialPreview()?(a._showFileIcon(),a._resetPreview(),a._initPreviewActions(),a.$container.removeClass("file-input-new")):(a._getThumbs().each(function(){a._clearObjects(e(this))}),a.isAjaxUpload&&(a.previewCache.data={}),a.$preview.html(""),i=!a.overwriteInitial&&a.initialCaption.length>0?a.initialCaption:"",a.$caption.attr("title","").val(i),t.addCss(a.$container,"file-input-new"),a._validateDefaultPreview()),0===a.$container.find(t.FRAMES).length&&(a._initCaption()||a.$captionContainer.removeClass("icon-visible")),a._hideFileIcon(),a.$captionContainer.focus(),a._setFileDropZoneTitle(),a._raise("filecleared"),a.$element},reset:function(){var e=this;if(e._raise("filereset"))return e.lastProgress=0,e._resetPreview(),e.$container.find(".fileinput-filename").text(""),t.addCss(e.$container,"file-input-new"),(e.getFrames().length||e.dropZoneEnabled)&&e.$container.removeClass("file-input-new"),e.clearFileStack(),e._setFileDropZoneTitle(),e.$element},disable:function(){var e=this;return e.isDisabled=!0,e._raise("filedisabled"),e.$element.attr("disabled","disabled"),e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),t.addCss(e.$container.find(".btn-file"),"disabled"),e._initDragDrop(),e.$element},enable:function(){var e=this;return e.isDisabled=!1,e._raise("fileenabled"),e.$element.removeAttr("disabled"),e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),e.$container.find(".btn-file").removeClass("disabled"),e._initDragDrop(),e.$element},upload:function(){var i,a,n,r=this,o=r.fileManager,s=o.count(),l=r.resumableManager,d=!e.isEmptyObject(r._getExtraData()),u=r.$progress;if(r.isAjaxUpload&&!r.isDisabled&&r._isFileSelectionValid(s)){if(r.lastProgress=0,r._resetUpload(),0===s&&!d)return void r._showFileError(r.msgUploadEmpty);if(r.cancelling=!1,r.$progress.show(),r.lock(),n=o.count(),0===s&&d)return r._setProgress(2),void r._uploadExtraOnly();if(r.uploadAsync||r.enableResumableUpload){for(a=r._getOutData(null),r._raise("filebatchpreupload",[a]),r.fileBatchCompleted=!1,r.uploadCache={content:[],config:[],tags:[],append:!0},i=0;i<n;i++)r.uploadCache.content[i]=null,r.uploadCache.config[i]=null,r.uploadCache.tags[i]=null;r.$preview.find(".file-preview-initial").removeClass(t.SORT_CSS),r._initSortable(),r.cacheInitialPreview=r.getPreview()}if(r.enableResumableUpload){var c=!1;return r.paused?u.html(r.progressPauseTemplate.setTokens({percent:101,status:r.msgUploadResume,stats:""})):c=!0,r.paused=!1,c&&u.html(r.progressInfoTemplate.setTokens({percent:101,status:r.msgUploadBegin,stats:""})),setTimeout(function(){l.upload()},r.processDelay),r.$element}return r._setProgress(2),(r.hasInitData=!1,r.uploadAsync)?(i=0,void e.each(o.stack,function(e){r._uploadSingle(i,e,!0),i++})):(r._uploadBatch(),r.$element)}},destroy:function(){var t=this,i=t.$form,a=t.$container,n=t.$element,r=t.namespace;return e(document).off(r),e(window).off(r),i&&i.length&&i.off(r),t.isAjaxUpload&&t._clearFileInput(),t._cleanup(),t._initPreviewCache(),n.insertBefore(a).off(r).removeData(),a.off().remove(),n},refresh:function(i){var a=this,n=a.$element;return i="object"!==(void 0===i?"undefined":_typeof(i))||t.isEmpty(i)?a.options:e.extend(!0,{},a.options,i),a._init(i,!0),a._listen(),n},zoom:function(e){var i=this,a=i._getFrame(e),n=i.$modal;a&&(t.initModal(n),n.html(i._getModalContent()),i._setZoomContent(a),n.modal("show"),i._initZoomButtons())},getExif:function(e){var t=this,i=t._getFrame(e);return i&&i.data("exif")||null},getFrames:function(i){var a,n=this;return i=i||"",a=n.$preview.find(t.FRAMES+i),n.reversePreviewOrder&&(a=e(a.get().reverse())),a},getPreview:function(){var e=this;return{content:e.initialPreview,config:e.initialPreviewConfig,tags:e.initialPreviewThumbTags}}},e.fn.fileinput=function(a){if(t.hasFileAPISupport()||t.isIE(9)){var n=Array.apply(null,arguments),r=[];switch(n.shift(),this.each(function(){var o,s=e(this),l=s.data("fileinput"),d="object"===(void 0===a?"undefined":_typeof(a))&&a,u=d.theme||s.data("theme"),c={},h={},f=d.language||s.data("language")||e.fn.fileinput.defaults.language||"en";l||(u&&(h=e.fn.fileinputThemes[u]||{}),"en"===f||t.isEmpty(e.fn.fileinputLocales[f])||(c=e.fn.fileinputLocales[f]||{}),o=e.extend(!0,{},e.fn.fileinput.defaults,h,e.fn.fileinputLocales.en,c,d,s.data()),l=new i(this,o),s.data("fileinput",l)),"string"==typeof a&&r.push(l[a].apply(l,n))}),r.length){case 0:return this;case 1:return r[0];default:return r}}},e.fn.fileinput.defaults={language:"en",showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showUploadStats:!0,showCancel:null,showPause:null,showClose:!0,showUploadedThumbs:!0,browseOnZoneClick:!1,autoReplace:!1,autoOrientImage:function(){var e=window.navigator.userAgent,t=!!e.match(/WebKit/i);return!(!!e.match(/iP(od|ad|hone)/i)&&t&&!e.match(/CriOS/i))},autoOrientImageInitial:!0,required:!1,rtl:!1,hideThumbnailContent:!1,encodeUrl:!0,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,initialPreviewDownloadUrl:"",removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,sanitizeZoomCache:function(t){var i=e(document.createElement("div")).append(t);return i.find("input,select,.file-thumbnail-footer").remove(),i.html()},previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-sm btn-kv btn-default btn-outline-secondary",fullscreen:"btn btn-sm btn-kv btn-default btn-outline-secondary",borderless:"btn btn-sm btn-kv btn-default btn-outline-secondary",close:"btn btn-sm btn-kv btn-default btn-outline-secondary"},previewTemplates:{},previewContentTemplates:{},preferIconicPreview:!1,preferIconicZoomPreview:!1,allowedFileTypes:null,allowedFileExtensions:null,allowedPreviewTypes:void 0,allowedPreviewMimeTypes:null,allowedPreviewExtensions:null,disabledPreviewTypes:void 0,disabledPreviewExtensions:["msi","exe","com","zip","rar","app","vb","scr"],disabledPreviewMimeTypes:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default btn-secondary",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default btn-secondary",pauseIcon:'<i class="glyphicon glyphicon-pause"></i>',pauseClass:"btn btn-default btn-secondary",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default btn-secondary",uploadUrl:null,uploadUrlThumb:null,uploadAsync:!0,uploadParamNames:{chunkIndex:"chunkIndex",chunkCount:"chunkCount",chunkSize:"chunkSize",chunkSizeStart:"chunkSizeStart",chunksUploaded:"chunksUploaded",retryCount:"retryCount",fileId:"fileId",fileRelativePath:"fileRelativePath",fileSize:"fileSize",fileName:"fileName"},maxAjaxThreads:5,processDelay:100,queueDelay:10,progressDelay:0,enableResumableUpload:!1,resumableUploadOptions:{fallback:null,testUrl:null,chunkSize:2048,maxThreads:4,maxRetries:3,showErrorLog:!0},uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-striped active",progressClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressInfoClass:"progress-bar bg-info progress-bar-info progress-bar-striped active",progressCompleteClass:"progress-bar bg-success progress-bar-success",progressPauseClass:"progress-bar bg-primary progress-bar-primary progress-bar-striped active",progressErrorClass:"progress-bar bg-danger progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:t.closeButton("kv-error-close"),slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0,mergeAjaxCallbacks:!1,mergeAjaxDeleteCallbacks:!1,retryErrorUploads:!0,reversePreviewOrder:!1,usePdfRenderer:function(){var e=!!window.MSInputMethodContext&&!!document.documentMode;return!!navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/i)||e},pdfRendererUrl:"",pdfRendererTemplate:'<iframe class="kv-preview-data file-preview-pdf" src="{renderer}?file={data}" {style}></iframe>'},e.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear all unprocessed files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",pauseLabel:"Pause",pauseTitle:"Pause ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgPaused:"Paused",msgPlaceholder:"Select {files}...",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadResume:"Resuming upload...",msgUploadEmpty:"No valid data available for upload.",msgUploadError:"Upload Error",msgDeleteError:"Delete Error",msgProgressError:"Error",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",msgDuplicateFile:'File "{name}" of same size "{size} KB" has already been selected earlier. Skipping duplicate selection.',msgResumableUploadRetriesExceeded:"Upload aborted beyond <b>{max}</b> retries for file <b>{file}</b>! Error Details: <pre>{error}</pre>",msgPendingTime:"{time} remaining",msgCalculatingTime:"calculating time remaining",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}},e.fn.fileinput.Constructor=i,e(document).ready(function(){var t=e("input.file[type=file]");t.length&&t.fileinput()})}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?exports.persianDate=t():e.persianDate=t()}(this,function(){return function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,a){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=i(4).durationUnit,o=function(){function e(){a(this,e)}return n(e,[{key:"toPersianDigit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.toString().replace(/\d+/g,function(e){var i=[],a=[],n=void 0,r=void 0;for(n=0;n<e.length;n+=1)i.push(e.charCodeAt(n));for(r=0;r<i.length;r+=1)a.push(String.fromCharCode(i[r]+(t&&!0===t?1584:1728)));return a.join("")})}},{key:"leftZeroFill",value:function(e,t){for(var i=e+"";i.length<t;)i="0"+i;return i}},{key:"normalizeDuration",value:function(){var e=void 0,t=void 0;return"string"==typeof arguments[0]?(e=arguments[0],t=arguments[1]):(t=arguments[0],e=arguments[1]),r.year.indexOf(e)>-1?e="year":r.month.indexOf(e)>-1?e="month":r.day.indexOf(e)>-1?e="day":r.hour.indexOf(e)>-1?e="hour":r.minute.indexOf(e)>-1?e="minute":r.second.indexOf(e)>-1?e="second":r.millisecond.indexOf(e)>-1&&(e="millisecond"),{unit:e,value:t}}},{key:"absRound",value:function(e){return e<0?Math.ceil(e):Math.floor(e)}},{key:"absFloor",value:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)}}]),e}();e.exports=o},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=i(10),o=i(2),s=i(0),l=i(5),d=(new s).toPersianDigit,u=(new s).leftZeroFill,c=(new s).normalizeDuration,h=i(7),f=i(6),p=function(){function t(e){return a(this,t),this.calendarType=t.calendarType,this.localType=t.localType,this.leapYearMode=t.leapYearMode,this.algorithms=new o(this),this.version="1.0.5",this._utcMode=!1,"fa"!==this.localType?this.formatPersian=!1:this.formatPersian="_default",this.setup(e),this.ON=this.algorithms.ON,this}return n(t,[{key:"setup",value:function(e){if(r.isDate(e))this._gDateToCalculators(e);else if(r.isArray(e))this.algorithmsCalc([e[0],e[1]?e[1]:1,e[2]?e[2]:1,e[3],e[4],e[5],e[6]?e[6]:0]);else if(r.isNumber(e)){var i=new Date(e);this._gDateToCalculators(i)}else if(e instanceof t)this.algorithmsCalc([e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]);else if(e&&"/Date("===e.substring(0,6)){var a=new Date(parseInt(e.substr(6)));this._gDateToCalculators(a)}else{var n=new Date;this._gDateToCalculators(n)}}},{key:"_getSyncedClass",value:function(e){return new(t.toCalendar(this.calendarType).toLocale(this.localType).toLeapYearMode(this.leapYearMode))(e)}},{key:"_gDateToCalculators",value:function(e){this.algorithms.calcGregorian([e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()])}},{key:"rangeName",value:function(){var e=this.calendarType;return"fa"===this.localType?"persian"===e?h.persian:h.gregorian:"persian"===e?f.persian:f.gregorian}},{key:"toLeapYearMode",value:function(e){return this.leapYearMode=e,"astronomical"===e&&"persian"==this.calendarType?this.leapYearMode="astronomical":"algorithmic"===e&&"persian"==this.calendarType&&(this.leapYearMode="algorithmic"),this.algorithms.updateFromGregorian(),this}},{key:"toCalendar",value:function(e){return this.calendarType=e,this.algorithms.updateFromGregorian(),this}},{key:"toLocale",value:function(e){return this.localType=e,"fa"!==this.localType?this.formatPersian=!1:this.formatPersian="_default",this}},{key:"_locale",value:function(){var e=this.calendarType;return"fa"===this.localType?"persian"===e?h.persian:h.gregorian:"persian"===e?f.persian:f.gregorian}},{key:"_weekName",value:function(e){return this._locale().weekdays[e-1]}},{key:"_weekNameShort",value:function(e){return this._locale().weekdaysShort[e-1]}},{key:"_weekNameMin",value:function(e){return this._locale().weekdaysMin[e-1]}},{key:"_dayName",value:function(e){return this._locale().persianDaysName[e-1]}},{key:"_monthName",value:function(e){return this._locale().months[e-1]}},{key:"_monthNameShort",value:function(e){return this._locale().monthsShort[e-1]}},{key:"isPersianDate",value:function(e){return e instanceof t}},{key:"clone",value:function(){return this._getSyncedClass(this.ON.gDate)}},{key:"algorithmsCalc",value:function(e){return this.isPersianDate(e)&&(e=[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]),"persian"===this.calendarType&&"algorithmic"==this.leapYearMode?this.algorithms.calcPersian(e):"persian"===this.calendarType&&"astronomical"==this.leapYearMode?this.algorithms.calcPersiana(e):"gregorian"===this.calendarType?(e[1]=e[1]-1,this.algorithms.calcGregorian(e)):void 0}},{key:"calendar",value:function(){var e=void 0;return"persian"==this.calendarType?"astronomical"==this.leapYearMode?e="persianAstro":"algorithmic"==this.leapYearMode&&(e="persianAlgo"):e="gregorian",this.ON[e]}},{key:"duration",value:function(e,t){return new l(e,t)}},{key:"isDuration",value:function(e){return e instanceof l}},{key:"years",value:function(e){return this.year(e)}},{key:"year",value:function(e){return e||0===e?(this.algorithmsCalc([e,this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]),this):this.calendar().year}},{key:"month",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),e,this.date()]),this):this.calendar().month+1}},{key:"days",value:function(){return this.day()}},{key:"day",value:function(){return this.calendar().weekday}},{key:"dates",value:function(e){return this.date(e)}},{key:"date",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),this.month(),e]),this):this.calendar().day}},{key:"hour",value:function(e){return this.hours(e)}},{key:"hours",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),this.month(),this.date(),e]),this):this.ON.gDate.getHours()}},{key:"minute",value:function(e){return this.minutes(e)}},{key:"minutes",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),this.month(),this.date(),this.hour(),e]),this):this.ON.gDate.getMinutes()}},{key:"second",value:function(e){return this.seconds(e)}},{key:"seconds",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),this.month(),this.date(),this.hour(),this.minute(),e]),this):this.ON.gDate.getSeconds()}},{key:"millisecond",value:function(e){return this.milliseconds(e)}},{key:"milliseconds",value:function(e){return e||0===e?(this.algorithmsCalc([this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),e]),this):this.ON.gregorian.millisecond}},{key:"unix",value:function(e){var t=void 0;if(e)return this._getSyncedClass(1e3*e);var i=this.ON.gDate.valueOf().toString();return t=i.substring(0,i.length-3),parseInt(t)}},{key:"valueOf",value:function(){return this.ON.gDate.valueOf()}},{key:"getFirstWeekDayOfMonth",value:function(e,t){return this._getSyncedClass([e,t,1]).day()}},{key:"diff",value:function(e,t,i){var a=this,n=e,r=a.ON.gDate-n.toDate()-0,o=a.year()-n.year(),s=a.month()-n.month(),l=-1*(a.date()-n.date()),d=void 0;return d="months"===t||"month"===t?12*o+s+l/30:"years"===t||"year"===t?o+(s+l/30)/12:"seconds"===t||"second"===t?r/1e3:"minutes"===t||"minute"===t?r/6e4:"hours"===t||"hour"===t?r/36e5:"days"===t||"day"===t?r/864e5:"weeks"===t||"week"===t?r/6048e5:r,d<0&&(d*=-1),i?d:Math.round(d)}},{key:"startOf",value:function(e){var i=t.toCalendar(this.calendarType).toLocale(this.localType);switch(e){case"years":case"year":return new i([this.year(),1,1]);case"months":case"month":return new i([this.year(),this.month(),1]);case"days":case"day":return new i([this.year(),this.month(),this.date(),0,0,0]);case"hours":case"hour":return new i([this.year(),this.month(),this.date(),this.hours(),0,0]);case"minutes":case"minute":return new i([this.year(),this.month(),this.date(),this.hours(),this.minutes(),0]);case"seconds":case"second":return new i([this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds()]);case"weeks":case"week":return new i([this.year(),this.month(),this.date()-(this.calendar().weekday-1)]);default:return this.clone()}}},{key:"endOf",value:function(e){var i=t.toCalendar(this.calendarType).toLocale(this.localType);switch(e){case"years":case"year":var a=this.isLeapYear()?30:29;return new i([this.year(),12,a,23,59,59]);case"months":case"month":var n=this.daysInMonth(this.year(),this.month());return new i([this.year(),this.month(),n,23,59,59]);case"days":case"day":return new i([this.year(),this.month(),this.date(),23,59,59]);case"hours":case"hour":return new i([this.year(),this.month(),this.date(),this.hours(),59,59]);case"minutes":case"minute":return new i([this.year(),this.month(),this.date(),this.hours(),this.minutes(),59]);case"seconds":case"second":return new i([this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds()]);case"weeks":case"week":var r=this.calendar().weekday;return new i([this.year(),this.month(),this.date()+(7-r)]);default:return this.clone()}}},{key:"sod",value:function(){return this.startOf("day")}},{key:"eod",value:function(){return this.endOf("day")}},{key:"zone",value:function(e){return e||0===e?(this.ON.zone=e,
this):this.ON.zone}},{key:"local",value:function(){var e=void 0;if(this._utcMode){var i=new Date(this.toDate()).getTimezoneOffset(),a=60*i*1e3;e=i<0?this.valueOf()-a:this.valueOf()+a,this.toCalendar(t.calendarType);var n=new Date(e);return this._gDateToCalculators(n),this._utcMode=!1,this.zone(i),this}return this}},{key:"utc",value:function(e){var t=void 0;if(e)return this._getSyncedClass(e).utc();if(this._utcMode)return this;var i=60*this.zone()*1e3;t=this.zone()<0?this.valueOf()+i:this.valueOf()-i;var a=new Date(t),n=this._getSyncedClass(a);return this.algorithmsCalc(n),this._utcMode=!0,this.zone(0),this}},{key:"isUtc",value:function(){return this._utcMode}},{key:"isDST",value:function(){var e=this.month(),t=this.date();return 1==e&&t>1||6==e&&t<31||e<6&&e>=2}},{key:"isLeapYear",value:function(e){return void 0===e&&(e=this.year()),"persian"==this.calendarType&&"algorithmic"===this.leapYearMode?this.algorithms.leap_persian(e):"persian"==this.calendarType&&"astronomical"===this.leapYearMode?this.algorithms.leap_persiana(e):"gregorian"==this.calendarType?this.algorithms.leap_gregorian(e):void 0}},{key:"daysInMonth",value:function(e,t){var i=e||this.year(),a=t||this.month();return"persian"===this.calendarType?a<1||a>12?0:a<7?31:a<12?30:this.isLeapYear(i)?30:29:"gregorian"===this.calendarType?new Date(i,a,0).getDate():void 0}},{key:"toDate",value:function(){return this.ON.gDate}},{key:"toArray",value:function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]}},{key:"formatNumber",value:function(){var t=void 0,i=this;return"_default"===this.formatPersian?t=void 0!==e&&void 0!==e.exports?!1!==i.formatPersian:!1!==window.formatPersian:!0===this.formatPersian?t=!0:!1===this.formatPersian?t=!1:Error('Invalid Config "formatPersian" !!'),t}},{key:"format",value:function(e){function t(e){switch(e){case"a":return r?n.hour>=12?" ":" ":n.hour>=12?"PM":"AM";case"H":return o(n.hour);case"HH":return o(u(n.hour,2));case"h":return o(n.hour%12);case"hh":return o(u(n.hour%12,2));case"m":case"mm":return o(u(n.minute,2));case"s":return o(n.second);case"ss":return o(u(n.second,2));case"D":return o(u(n.date));case"DD":return o(u(n.date,2));case"DDD":var t=i.startOf("year");return o(u(i.diff(t,"days"),3));case"DDDD":var a=i.startOf("year");return o(u(i.diff(a,"days"),3));case"d":return o(i.calendar().weekday);case"ddd":return i._weekNameShort(i.calendar().weekday);case"dddd":return i._weekName(i.calendar().weekday);case"ddddd":return i._dayName(i.calendar().day);case"dddddd":return i._weekNameMin(i.calendar().weekday);case"w":var s=i.startOf("year"),l=parseInt(i.diff(s,"days")/7)+1;return o(l);case"ww":var d=i.startOf("year"),c=u(parseInt(i.diff(d,"days")/7)+1,2);return o(c);case"M":return o(n.month);case"MM":return o(u(n.month,2));case"MMM":return i._monthNameShort(n.month);case"MMMM":return i._monthName(n.month);case"YY":var h=n.year.toString().split("");return o(h[2]+h[3]);case"YYYY":return o(n.year);case"Z":var f="+",p=Math.round(n.timezone/60),m=n.timezone%60;m<0&&(m*=-1),p<0&&(f="-",p*=-1);var v=f+u(p,2)+":"+u(m,2);return o(v);case"ZZ":var g="+",w=Math.round(n.timezone/60),y=n.timezone%60;y<0&&(y*=-1),w<0&&(g="-",w*=-1);var b=g+u(w,2)+""+u(y,2);return o(b);case"X":return i.unix();case"LT":return i.format("H:m a");case"L":return i.format("YYYY/MM/DD");case"l":return i.format("YYYY/M/D");case"LL":return i.format("MMMM DD YYYY");case"ll":return i.format("MMM DD YYYY");case"LLL":return i.format("MMMM YYYY DD   H:m  a");case"lll":return i.format("MMM YYYY DD   H:m  a");case"LLLL":return i.format("dddd D MMMM YYYY  H:m  a");case"llll":return i.format("ddd D MMM YYYY  H:m  a")}}var i=this,a=/([[^[]*])|(\\)?(Mo|MM?M?M?|Do|DD?D?D?|dddddd?|ddddd?|dddd?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|X|LT|ll?l?l?|LL?L?L?)/g,n={year:i.year(),month:i.month(),hour:i.hours(),minute:i.minutes(),second:i.seconds(),date:i.date(),timezone:i.zone(),unix:i.unix()},r=i.formatNumber(),o=function(e){return r?d(e):e};return e?e.replace(a,t):"YYYY-MM-DD HH:mm:ss a".replace(a,t)}},{key:"add",value:function(e,t){var i=new l(e,t)._data,a=c(e,t).unit;if(t=c(e,t).value,"year"===a||"month"===a){if(i.years>0){var n=this.year()+i.years;this.year(n)}if(i.months>0){var r=this.date(),o=this.month()+i.months,s=this.daysInMonth(this.year(),o);r>=s&&(r=s),this.date(r),this.month(o)}}if("day"===a){var d=this.hour(),u=this.valueOf()+24*t*60*60*1e3;return this.unix(u/1e3).hour(d)}if("hour"===a){var h=this.valueOf()+60*t*60*1e3;return this.unix(h/1e3)}if("minute"===a){var f=this.valueOf()+60*t*1e3;return this.unix(f/1e3)}if("second"===a){var p=this.valueOf()+1e3*t;return this.unix(p/1e3)}if("millisecond"===a){var m=this.valueOf()+t;return this.unix(m/1e3)}return this._getSyncedClass(this.valueOf())}},{key:"subtract",value:function(e,t){var i=new l(e,t)._data,a=c(e,t).unit;if(t=c(e,t).value,"year"===a||"month"===a){if(i.years>0){var n=this.year()-i.years;this.year(n)}if(i.months>0){var r=this.date(),o=this.month()-i.months;this.month(o);var s=this.daysInMonth(this.year(),this.month());r>s&&(r=s),this.date(r)}}if("day"===a){var d=this.hour(),u=this.valueOf()-24*t*60*60*1e3;return this.unix(u/1e3).hour(d)}if("hour"===a){var h=this.valueOf()-60*t*60*1e3;return this.unix(h/1e3)}if("minute"===a){var f=this.valueOf()-60*t*1e3;return this.unix(f/1e3)}if("second"===a){var p=this.valueOf()-1e3*t;return this.unix(p/1e3)}if("millisecond"===a){var m=this.valueOf()-t;return this.unix(m/1e3)}return this._getSyncedClass(this.valueOf())}},{key:"isSameDay",value:function(e){return this&&e&&this.date()==e.date()&&this.year()==e.year()&&this.month()==e.month()}},{key:"isSameMonth",value:function(e){return this&&e&&this.year()==this.year()&&this.month()==e.month()}}],[{key:"rangeName",value:function(){var e=t,i=e.calendarType;return"fa"===e.localType?"persian"===i?h.persian:h.gregorian:"persian"===i?f.persian:f.gregorian}},{key:"toLeapYearMode",value:function(e){var i=t;return i.leapYearMode=e,i}},{key:"toCalendar",value:function(e){var i=t;return i.calendarType=e,i}},{key:"toLocale",value:function(e){var i=t;return i.localType=e,"fa"!==i.localType?i.formatPersian=!1:i.formatPersian="_default",i}},{key:"isPersianDate",value:function(e){return e instanceof t}},{key:"duration",value:function(e,t){return new l(e,t)}},{key:"isDuration",value:function(e){return e instanceof l}},{key:"unix",value:function(e){return e?new t(1e3*e):(new t).unix()}},{key:"getFirstWeekDayOfMonth",value:function(e,i){return new t([e,i,1]).day()}},{key:"utc",value:function(e){return e?new t(e).utc():(new t).utc()}},{key:"isSameDay",value:function(e,t){return e&&t&&e.date()==t.date()&&e.year()==t.year()&&e.month()==t.month()}},{key:"isSameMonth",value:function(e,t){return e&&t&&e.year()==t.year()&&e.month()==t.month()}}]),t}();e.exports=p},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=i(3),o=i(9),s=function(){function e(t){a(this,e),this.parent=t,this.ASTRO=new r,this.ON=new o,this.J0000=1721424.5,this.J1970=2440587.5,this.JMJD=2400000.5,this.NormLeap=[!1,!0],this.GREGORIAN_EPOCH=1721425.5,this.PERSIAN_EPOCH=1948320.5}return n(e,[{key:"leap_gregorian",value:function(e){return e%4==0&&!(e%100==0&&e%400!=0)}},{key:"gregorian_to_jd",value:function(e,t,i){return this.GREGORIAN_EPOCH-1+365*(e-1)+Math.floor((e-1)/4)+-Math.floor((e-1)/100)+Math.floor((e-1)/400)+Math.floor((367*t-362)/12+(t<=2?0:this.leap_gregorian(e)?-1:-2)+i)}},{key:"jd_to_gregorian",value:function(e){var t=void 0,i=void 0,a=void 0,n=void 0,r=void 0,o=void 0,s=void 0,l=void 0,d=void 0,u=void 0,c=void 0,h=void 0,f=void 0,p=void 0;return t=Math.floor(e-.5)+.5,i=t-this.GREGORIAN_EPOCH,a=Math.floor(i/146097),n=this.ASTRO.mod(i,146097),r=Math.floor(n/36524),o=this.ASTRO.mod(n,36524),s=Math.floor(o/1461),l=this.ASTRO.mod(o,1461),d=Math.floor(l/365),u=400*a+100*r+4*s+d,4!==r&&4!==d&&u++,c=t-this.gregorian_to_jd(u,1,1),h=t<this.gregorian_to_jd(u,3,1)?0:this.leap_gregorian(u)?1:2,f=Math.floor((12*(c+h)+373)/367),p=t-this.gregorian_to_jd(u,f,1)+1,[u,f,p]}},{key:"tehran_equinox",value:function(e){var t=void 0,i=void 0,a=void 0,n=void 0;return t=this.ASTRO.equinox(e,0),i=t-this.ASTRO.deltat(e)/86400,a=i+this.ASTRO.equationOfTime(t),n=52.5/360,a+n}},{key:"tehran_equinox_jd",value:function(e){var t=void 0;return t=this.tehran_equinox(e),Math.floor(t)}},{key:"persiana_year",value:function(e){var t=this.jd_to_gregorian(e)[0]-2,i=void 0,a=void 0,n=void 0;for(i=this.tehran_equinox_jd(t);i>e;)t--,i=this.tehran_equinox_jd(t);for(a=i-1;!(i<=e&&e<a);)i=a,t++,a=this.tehran_equinox_jd(t);return n=Math.round((i-this.PERSIAN_EPOCH)/this.ASTRO.TropicalYear)+1,[n,i]}},{key:"jd_to_persiana",value:function(e){var t=void 0,i=void 0,a=void 0,n=void 0,r=void 0,o=void 0;return e=Math.floor(e)+.5,n=this.persiana_year(e),t=n[0],r=n[1],a=Math.floor((e-r)/30)+1,o=Math.floor(e)-this.persiana_to_jd(t,1,1)+1,i=o<=186?Math.ceil(o/31):Math.ceil((o-6)/30),a=Math.floor(e)-this.persiana_to_jd(t,i,1)+1,[t,i,a]}},{key:"persiana_to_jd",value:function(e,t,i){var a=void 0,n=void 0,r=void 0;for(r=this.PERSIAN_EPOCH-1+this.ASTRO.TropicalYear*(e-1-1),a=[e-1,0];a[0]<e;)a=this.persiana_year(r),r=a[1]+(this.ASTRO.TropicalYear+2);return n=a[1],n+(t<=7?31*(t-1):30*(t-1)+6)+(i-1)}},{key:"leap_persiana",value:function(e){return this.persiana_to_jd(e+1,1,1)-this.persiana_to_jd(e,1,1)>365}},{key:"leap_persian",value:function(e){return 682*((e-(e>0?474:473))%2820+474+38)%2816<682}},{key:"persian_to_jd",value:function(e,t,i){var a=void 0,n=void 0;return a=e-(e>=0?474:473),n=474+this.ASTRO.mod(a,2820),i+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*n-110)/2816)+365*(n-1)+1029983*Math.floor(a/2820)+(this.PERSIAN_EPOCH-1)}},{key:"jd_to_persian",value:function(e){var t=void 0,i=void 0,a=void 0,n=void 0,r=void 0,o=void 0,s=void 0,l=void 0,d=void 0,u=void 0;return e=Math.floor(e)+.5,n=e-this.persian_to_jd(475,1,1),r=Math.floor(n/1029983),o=this.ASTRO.mod(n,1029983),1029982===o?s=2820:(l=Math.floor(o/366),d=this.ASTRO.mod(o,366),s=Math.floor((2134*l+2816*d+2815)/1028522)+l+1),t=s+2820*r+474,t<=0&&t--,u=e-this.persian_to_jd(t,1,1)+1,i=u<=186?Math.ceil(u/31):Math.ceil((u-6)/30),a=e-this.persian_to_jd(t,i,1)+1,[t,i,a]}},{key:"gWeekDayToPersian",value:function(e){return e+2===8?1:e+2===7?7:e+2}},{key:"updateFromGregorian",value:function(){var e=void 0,t=void 0,i=void 0,a=void 0,n=void 0,r=void 0,o=void 0,s=void 0,l=void 0,d=void 0;t=this.ON.gregorian.year,i=this.ON.gregorian.month,a=this.ON.gregorian.day,n=0,r=0,o=0,this.ON.gDate=new Date(t,i,a,this.ON.gregorian.hour,this.ON.gregorian.minute,this.ON.gregorian.second,this.ON.gregorian.millisecond),!1===this.parent._utcMode&&(this.ON.zone=this.ON.gDate.getTimezoneOffset()),this.ON.gregorian.year=this.ON.gDate.getFullYear(),this.ON.gregorian.month=this.ON.gDate.getMonth(),this.ON.gregorian.day=this.ON.gDate.getDate(),e=this.gregorian_to_jd(t,i+1,a)+Math.floor(o+60*(r+60*n)+.5)/86400,this.ON.julianday=e,this.ON.modifiedjulianday=e-this.JMJD,s=this.ASTRO.jwday(e),this.ON.gregorian.weekday=s+1,this.ON.gregorian.leap=this.NormLeap[this.leap_gregorian(t)?1:0],s=this.ASTRO.jwday(e),"persian"==this.parent.calendarType&&"algorithmic"==this.parent.leapYearMode&&(d=this.jd_to_persian(e),this.ON.persian.year=d[0],this.ON.persian.month=d[1]-1,this.ON.persian.day=d[2],this.ON.persian.weekday=this.gWeekDayToPersian(s),this.ON.persian.leap=this.NormLeap[this.leap_persian(d[0])?1:0]),"persian"==this.parent.calendarType&&"astronomical"==this.parent.leapYearMode&&(d=this.jd_to_persiana(e),this.ON.persianAstro.year=d[0],this.ON.persianAstro.month=d[1]-1,this.ON.persianAstro.day=d[2],this.ON.persianAstro.weekday=this.gWeekDayToPersian(s),this.ON.persianAstro.leap=this.NormLeap[this.leap_persiana(d[0])?1:0]),null!==this.ON.gregserial.day&&(this.ON.gregserial.day=e-this.J0000),l=864e5*(e-this.J1970),this.ON.unixtime=Math.round(l/1e3)}},{key:"calcGregorian",value:function(e){(e[0]||0===e[0])&&(this.ON.gregorian.year=e[0]),(e[1]||0===e[1])&&(this.ON.gregorian.month=e[1]),(e[2]||0===e[2])&&(this.ON.gregorian.day=e[2]),(e[3]||0===e[3])&&(this.ON.gregorian.hour=e[3]),(e[4]||0===e[4])&&(this.ON.gregorian.minute=e[4]),(e[5]||0===e[5])&&(this.ON.gregorian.second=e[5]),(e[6]||0===e[6])&&(this.ON.gregorian.millisecond=e[6]),this.updateFromGregorian()}},{key:"calcJulian",value:function(){var e=void 0,t=void 0;e=this.ON.julianday,t=this.jd_to_gregorian(e),this.ON.gregorian.year=t[0],this.ON.gregorian.month=t[1]-1,this.ON.gregorian.day=t[2],this.updateFromGregorian()}},{key:"setJulian",value:function(e){this.ON.julianday=e,this.calcJulian()}},{key:"calcPersian",value:function(e){e[0]&&(this.ON.persian.year=e[0]),e[1]&&(this.ON.persian.month=e[1]),e[2]&&(this.ON.persian.day=e[2]),e[3]&&(this.ON.gregorian.hour=e[3]),e[4]&&(this.ON.gregorian.minute=e[4]),e[5]&&(this.ON.gregorian.second=e[5]),e[6]&&(this.ON.gregorian.millisecond=e[6]),this.setJulian(this.persian_to_jd(this.ON.persian.year,this.ON.persian.month,this.ON.persian.day))}},{key:"calcPersiana",value:function(e){e[0]&&(this.ON.persianAstro.year=e[0]),e[1]&&(this.ON.persianAstro.month=e[1]),e[2]&&(this.ON.persianAstro.day=e[2]),e[3]&&(this.ON.gregorian.hour=e[3]),e[4]&&(this.ON.gregorian.minute=e[4]),e[5]&&(this.ON.gregorian.second=e[5]),e[6]&&(this.ON.gregorian.millisecond=e[6]),this.setJulian(this.persiana_to_jd(this.ON.persianAstro.year,this.ON.persianAstro.month,this.ON.persianAstro.day+.5))}}]),e}();e.exports=s},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(){function e(){a(this,e),this.J2000=2451545,this.JulianCentury=36525,this.JulianMillennium=10*this.JulianCentury,this.TropicalYear=365.24219878,this.oterms=[-4680.93,-1.55,1999.25,-51.38,-249.67,-39.05,7.12,27.87,5.79,2.45],this.nutArgMult=[0,0,0,0,1,-2,0,0,2,2,0,0,0,2,2,0,0,0,0,2,0,1,0,0,0,0,0,1,0,0,-2,1,0,2,2,0,0,0,2,1,0,0,1,2,2,-2,-1,0,2,2,-2,0,1,0,0,-2,0,0,2,1,0,0,-1,2,2,2,0,0,0,0,0,0,1,0,1,2,0,-1,2,2,0,0,-1,0,1,0,0,1,2,1,-2,0,2,0,0,0,0,-2,2,1,2,0,0,2,2,0,0,2,2,2,0,0,2,0,0,-2,0,1,2,2,0,0,0,2,0,-2,0,0,2,0,0,0,-1,2,1,0,2,0,0,0,2,0,-1,0,1,-2,2,0,2,2,0,1,0,0,1,-2,0,1,0,1,0,-1,0,0,1,0,0,2,-2,0,2,0,-1,2,1,2,0,1,2,2,0,1,0,2,2,-2,1,1,0,0,0,-1,0,2,2,2,0,0,2,1,2,0,1,0,0,-2,0,2,2,2,-2,0,1,2,1,2,0,-2,0,1,2,0,0,0,1,0,-1,1,0,0,-2,-1,0,2,1,-2,0,0,0,1,0,0,2,2,1,-2,0,2,0,1,-2,1,0,2,1,0,0,1,-2,0,-1,0,1,0,0,-2,1,0,0,0,1,0,0,0,0,0,0,1,2,0,-1,-1,1,0,0,0,1,1,0,0,0,-1,1,2,2,2,-1,-1,2,2,0,0,-2,2,2,0,0,3,2,2,2,-1,0,2,2],this.nutArgCoeff=[-171996,-1742,92095,89,-13187,-16,5736,-31,-2274,-2,977,-5,2062,2,-895,5,1426,-34,54,-1,712,1,-7,0,-517,12,224,-6,-386,-4,200,0,-301,0,129,-1,217,-5,-95,3,-158,0,0,0,129,1,-70,0,123,0,-53,0,63,0,0,0,63,1,-33,0,-59,0,26,0,-58,-1,32,0,-51,0,27,0,48,0,0,0,46,0,-24,0,-38,0,16,0,-31,0,13,0,29,0,0,0,29,0,-12,0,26,0,0,0,-22,0,0,0,21,0,-10,0,17,-1,0,0,16,0,-8,0,-16,1,7,0,-15,0,9,0,-13,0,7,0,-12,0,6,0,11,0,0,0,-10,0,5,0,-8,0,3,0,7,0,-3,0,-7,0,0,0,-7,0,3,0,-7,0,3,0,6,0,0,0,6,0,-3,0,6,0,-3,0,-6,0,3,0,-6,0,3,0,5,0,0,0,-5,0,3,0,-5,0,3,0,-5,0,3,0,4,0,0,0,4,0,0,0,4,0,0,0,-4,0,0,0,-4,0,0,0,-4,0,0,0,3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0,-3,0,0,0],this.deltaTtab=[121,112,103,95,88,82,77,72,68,63,60,56,53,51,48,46,44,42,40,38,35,33,31,29,26,24,22,20,18,16,14,12,11,10,9,8,7,7,7,7,7,7,8,8,9,9,9,9,9,10,10,10,10,10,10,10,10,11,11,11,11,11,12,12,12,12,13,13,13,14,14,14,14,15,15,15,15,15,16,16,16,16,16,16,16,16,15,15,14,13,13.1,12.5,12.2,12,12,12,12,12,12,11.9,11.6,11,10.2,9.2,8.2,7.1,6.2,5.6,5.4,5.3,5.4,5.6,5.9,6.2,6.5,6.8,7.1,7.3,7.5,7.6,7.7,7.3,6.2,5.2,2.7,1.4,-1.2,-2.8,-3.8,-4.8,-5.5,-5.3,-5.6,-5.7,-5.9,-6,-6.3,-6.5,-6.2,-4.7,-2.8,-.1,2.6,5.3,7.7,10.4,13.3,16,18.2,20.2,21.1,22.4,23.5,23.8,24.3,24,23.9,23.9,23.7,24,24.3,25.3,26.2,27.3,28.2,29.1,30,30.7,31.4,32.2,33.1,34,35,36.5,38.3,40.2,42.2,44.5,46.5,48.5,50.5,52.2,53.8,54.9,55.8,56.9,58.3,60,61.6,63,65,66.6],this.EquinoxpTerms=[485,324.96,1934.136,203,337.23,32964.467,199,342.08,20.186,182,27.85,445267.112,156,73.14,45036.886,136,171.52,22518.443,77,222.54,65928.934,74,296.72,3034.906,70,243.58,9037.513,58,119.81,33718.147,52,297.17,150.678,50,21.02,2281.226,45,247.54,29929.562,44,325.15,31555.956,29,60.93,4443.417,18,155.12,67555.328,17,288.79,4562.452,16,198.04,62894.029,14,199.76,31436.921,12,95.39,14577.848,12,287.11,31931.756,12,320.81,34777.259,9,227.73,1222.114,8,15.45,16859.074],this.JDE0tab1000=[new Array(1721139.29189,365242.1374,.06134,.00111,-71e-5),new Array(1721233.25401,365241.72562,-.05323,.00907,25e-5),new Array(1721325.70455,365242.49558,-.11677,-.00297,74e-5),new Array(1721414.39987,365242.88257,-.00769,-.00933,-6e-5)],this.JDE0tab2000=[new Array(2451623.80984,365242.37404,.05169,-.00411,-57e-5),new Array(2451716.56767,365241.62603,.00325,.00888,-3e-4),new Array(2451810.21715,365242.01767,-.11575,.00337,78e-5),new Array(2451900.05952,365242.74049,-.06223,-.00823,32e-5)]}return n(e,[{key:"dtr",value:function(e){return e*Math.PI/180}},{key:"rtd",value:function(e){return 180*e/Math.PI}},{key:"fixangle",value:function(e){return e-360*Math.floor(e/360)}},{key:"fixangr",value:function(e){return e-2*Math.PI*Math.floor(e/(2*Math.PI))}},{key:"dsin",value:function(e){return Math.sin(this.dtr(e))}},{key:"dcos",value:function(e){return Math.cos(this.dtr(e))}},{key:"mod",value:function(e,t){return e-t*Math.floor(e/t)}},{key:"jwday",value:function(e){return this.mod(Math.floor(e+1.5),7)}},{key:"obliqeq",value:function(e){var t,i,a,n;if(a=i=(e-this.J2000)/(100*this.JulianCentury),t=23.43929111111111,Math.abs(i)<1)for(n=0;n<10;n++)t+=this.oterms[n]/3600*a,a*=i;return t}},{key:"nutation",value:function(e){var t,i,a,n,r,o,s,l,d=(e-2451545)/36525,u=[],c=0,h=0;for(o=d*(r=d*d),u[0]=this.dtr(297.850363+445267.11148*d-.0019142*r+o/189474),u[1]=this.dtr(357.52772+35999.05034*d-1603e-7*r-o/3e5),u[2]=this.dtr(134.96298+477198.867398*d+.0086972*r+o/56250),u[3]=this.dtr(93.27191+483202.017538*d-.0036825*r+o/327270),u[4]=this.dtr(125.04452-1934.136261*d+.0020708*r+o/45e4),a=0;a<5;a++)u[a]=this.fixangr(u[a]);for(s=d/10,a=0;a<63;a++){for(l=0,n=0;n<5;n++)0!==this.nutArgMult[5*a+n]&&(l+=this.nutArgMult[5*a+n]*u[n]);c+=(this.nutArgCoeff[4*a+0]+this.nutArgCoeff[4*a+1]*s)*Math.sin(l),h+=(this.nutArgCoeff[4*a+2]+this.nutArgCoeff[4*a+3]*s)*Math.cos(l)}return t=c/36e6,i=h/36e6,[t,i]}},{key:"deltat",value:function(e){var t,i,a,n;return e>=1620&&e<=2e3?(a=Math.floor((e-1620)/2),i=(e-1620)/2-a,t=this.deltaTtab[a]+(this.deltaTtab[a+1]-this.deltaTtab[a])*i):(n=(e-2e3)/100,e<948?t=2177+497*n+44.1*n*n:(t=102+102*n+25.3*n*n,e>2e3&&e<2100&&(t+=.37*(e-2100)))),t}},{key:"equinox",value:function(e,t){var i=void 0,a=void 0,n=void 0,r=void 0,o=void 0,s=void 0,l=void 0,d=void 0,u=void 0;for(e<1e3?(o=this.JDE0tab1000,u=e/1e3):(o=this.JDE0tab2000,u=(e-2e3)/1e3),r=o[t][0]+o[t][1]*u+o[t][2]*u*u+o[t][3]*u*u*u+o[t][4]*u*u*u*u,l=(r-2451545)/36525,d=35999.373*l-2.47,i=1+.0334*this.dcos(d)+7e-4*this.dcos(2*d),s=0,a=n=0;a<24;a++)s+=this.EquinoxpTerms[n]*this.dcos(this.EquinoxpTerms[n+1]+this.EquinoxpTerms[n+2]*l),n+=3;return r+1e-5*s/i}},{key:"sunpos",value:function(e){var t=void 0,i=void 0,a=void 0,n=void 0,r=void 0,o=void 0,s=void 0,l=void 0,d=void 0,u=void 0,c=void 0,h=void 0,f=void 0,p=void 0,m=void 0,v=void 0,g=void 0;return t=(e-this.J2000)/this.JulianCentury,i=t*t,a=280.46646+36000.76983*t+3032e-7*i,a=this.fixangle(a),n=357.52911+35999.05029*t+-1537e-7*i,n=this.fixangle(n),r=.016708634+-42037e-9*t+-1.267e-7*i,o=(1.914602+-.004817*t+-14e-6*i)*this.dsin(n)+(.019993-101e-6*t)*this.dsin(2*n)+289e-6*this.dsin(3*n),s=a+o,l=n+o,d=1.000001018*(1-r*r)/(1+r*this.dcos(l)),u=125.04-1934.136*t,c=s+-.00569+-.00478*this.dsin(u),f=this.obliqeq(e),h=f+.00256*this.dcos(u),p=this.rtd(Math.atan2(this.dcos(f)*this.dsin(s),this.dcos(s))),p=this.fixangle(p),m=this.rtd(Math.asin(this.dsin(f)*this.dsin(s))),v=this.rtd(Math.atan2(this.dcos(h)*this.dsin(c),this.dcos(c))),v=this.fixangle(v),g=this.rtd(Math.asin(this.dsin(h)*this.dsin(c))),[a,n,r,o,s,l,d,c,p,m,v,g]}},{key:"equationOfTime",value:function(e){var t=void 0,i=void 0,a=void 0,n=void 0,r=void 0,o=void 0;return o=(e-this.J2000)/this.JulianMillennium,r=280.4664567+360007.6982779*o+.03032028*o*o+o*o*o/49931+-o*o*o*o/15300+-o*o*o*o*o/2e6,r=this.fixangle(r),t=this.sunpos(e)[10],i=this.nutation(e)[0],n=this.obliqeq(e)+this.nutation(e)[1],a=r+-.0057183+-t+i*this.dcos(n),a-=20*Math.floor(a/20),a/=1440}}]),e}();e.exports=r},function(e,t,i){"use strict";e.exports={durationUnit:{year:["y","years","year"],month:["M","months","month"],day:["d","days","day"],hour:["h","hours","hour"],minute:["m","minutes","minute"],second:["s","second","seconds"],millisecond:["ms","milliseconds","millisecond"],week:["w","","weeks","week"]}}},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=i(0),o=(new r).normalizeDuration,s=(new r).absRound,l=(new r).absFloor,d=function(){function e(t,i){a(this,e);var n={},r=this._data={},d=0,u=o(t,i);n[u.unit]=u.value,d=n.milliseconds||n.millisecond||n.ms||0;var c=n.years||n.year||n.y||0,h=n.months||n.month||n.M||0,f=n.weeks||n.w||n.week||0,p=n.days||n.d||n.day||0,m=n.hours||n.hour||n.h||0,v=n.minutes||n.minute||n.m||0,g=n.seconds||n.second||n.s||0;return this._milliseconds=d+1e3*g+6e4*v+36e5*m,this._days=p+7*f,this._months=h+12*c,r.milliseconds=d%1e3,g+=l(d/1e3),r.seconds=g%60,v+=s(g/60),r.minutes=v%60,m+=s(v/60),r.hours=m%24,p+=s(m/24),p+=7*f,r.days=p%30,h+=s(p/30),r.months=h%12,c+=s(h/12),r.years=c,this}return n(e,[{key:"valueOf",value:function(){return this._milliseconds+864e5*this._days+2592e6*this._months}}]),e}();e.exports=d},function(e,t,i){"use strict";e.exports={gregorian:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"]},persian:{months:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Dey","Bahman","Esfand"],monthsShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Dey","Bah","Esf"],weekdays:["Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],persianDaysName:["Urmazd","Bahman","Ordibehesht","Shahrivar","Sepandarmaz","Khurdad","Amordad","Dey-be-azar","Azar","Aban","Khorshid","Mah","Tir","Gush","Dey-be-mehr","Mehr","Sorush","Rashn","Farvardin","Bahram","Ram","Bad","Dey-be-din","Din","Ord","Ashtad","Asman","Zamyad","Mantre-sepand","Anaram","Ziadi"]}}},function(e,t,i){"use strict";e.exports={gregorian:{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_")},persian:{months:["","","","","","","","","","","",""],monthsShort:["","","","","","","","","","","",""],weekdays:["","",""," "," ","",""],weekdaysShort:["","","","","","",""],weekdaysMin:["","","","","","",""],persianDaysName:["","","","","","","","  ","","","","","","","  ","","","","","","","","  ","","","","",""," ","",""]}}},function(e,t,i){"use strict";var a=i(1);a.calendarType="persian",a.leapYearMode="astronomical",a.localType="fa",e.exports=a},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function e(){a(this,e),this.gDate=null,this.modifiedjulianday=0,this.julianday=0,this.gregserial={day:0},this.zone=0,this.gregorian={year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,weekday:0,unix:0,leap:0},this.juliancalendar={year:0,month:0,day:0,leap:0,weekday:0},this.islamic={year:0,month:0,day:0,leap:0,weekday:0},this.persianAlgo=this.persian={year:0,month:0,day:0,leap:0,weekday:0},this.persianAstro={year:0,month:0,day:0,leap:0,weekday:0},this.isoweek={year:0,week:0,day:0},this.isoday={year:0,day:0}};e.exports=n},function(e,t,i){"use strict";e.exports={isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isNumber:function(e){return"number"==typeof e},isDate:function(e){return e instanceof Date}}}])}),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?exports.persianDatepicker=t():e.persianDatepicker=t()}(this,function(){return function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,a){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,i){"use strict";var a={debounce:function(e,t,i){var a;return function(){var n=this,r=arguments,o=function(){a=null,i||e.apply(n,r)},s=i&&!a;clearTimeout(a),a=setTimeout(o,t),s&&e.apply(n,r)}},log:function(e){console.log(e)},isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}(),debug:function(e,t){window.persianDatepickerDebug&&(e.constructor.name?console.log("Debug: "+e.constructor.name+" : "+t):console.log("Debug: "+t))},delay:function(e,t){clearTimeout(window.datepickerTimer),window.datepickerTimer=setTimeout(e,t)}};e.exports=a},function(e,t,i){"use strict"
;e.exports='\n<div id="plotId" class="datepicker-plot-area {{cssClass}}">\n    {{#navigator.enabled}}\n        <div data-navigator class="datepicker-navigator">\n            <div class="pwt-btn pwt-btn-next">{{navigator.text.btnNextText}}</div>\n            <div class="pwt-btn pwt-btn-switch">{{navigator.switch.text}}</div>\n            <div class="pwt-btn pwt-btn-prev">{{navigator.text.btnPrevText}}</div>\n        </div>\n    {{/navigator.enabled}}\n    <div class="datepicker-grid-view" >\n    {{#days.enabled}}\n        {{#days.viewMode}}\n        <div class="datepicker-day-view" >    \n            <div class="month-grid-box">\n                <div class="header">\n                    <div class="title"></div>\n                    <div class="header-row">\n                        {{#weekdays.list}}\n                            <div class="header-row-cell">{{.}}</div>\n                        {{/weekdays.list}}\n                    </div>\n                </div>    \n                <table cellspacing="0" class="table-days">\n                    <tbody>\n                        {{#days.list}}\n                           \n                            <tr>\n                                {{#.}}\n                                    {{#enabled}}\n                                        <td data-date="{{dataDate}}" data-unix="{{dataUnix}}" >\n                                            <span  class="{{#otherMonth}}other-month{{/otherMonth}}">{{title}}</span>\n                                            {{#altCalendarShowHint}}\n                                            <i  class="alter-calendar-day">{{alterCalTitle}}</i>\n                                            {{/altCalendarShowHint}}\n                                        </td>\n                                    {{/enabled}}\n                                    {{^enabled}}\n                                        <td data-date="{{dataDate}}" data-unix="{{dataUnix}}" class="disabled">\n                                            <span class="{{#otherMonth}}other-month{{/otherMonth}}">{{title}}</span>\n                                            {{#altCalendarShowHint}}\n                                            <i  class="alter-calendar-day">{{alterCalTitle}}</i>\n                                            {{/altCalendarShowHint}}\n                                        </td>\n                                    {{/enabled}}\n                                    \n                                {{/.}}\n                            </tr>\n                        {{/days.list}}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        {{/days.viewMode}}\n    {{/days.enabled}}\n    \n    {{#month.enabled}}\n        {{#month.viewMode}}\n            <div class="datepicker-month-view">\n                {{#month.list}}\n                    {{#enabled}}               \n                        <div data-month="{{dataMonth}}" class="month-item {{#selected}}selected{{/selected}}">{{title}}</small></div>\n                    {{/enabled}}\n                    {{^enabled}}               \n                        <div data-month="{{dataMonth}}" class="month-item month-item-disable {{#selected}}selected{{/selected}}">{{title}}</small></div>\n                    {{/enabled}}\n                {{/month.list}}\n            </div>\n        {{/month.viewMode}}\n    {{/month.enabled}}\n    \n    {{#year.enabled }}\n        {{#year.viewMode }}\n            <div class="datepicker-year-view" >\n                {{#year.list}}\n                    {{#enabled}}\n                        <div data-year="{{dataYear}}" class="year-item {{#selected}}selected{{/selected}}">{{title}}</div>\n                    {{/enabled}}\n                    {{^enabled}}\n                        <div data-year="{{dataYear}}" class="year-item year-item-disable {{#selected}}selected{{/selected}}">{{title}}</div>\n                    {{/enabled}}                    \n                {{/year.list}}\n            </div>\n        {{/year.viewMode }}\n    {{/year.enabled }}\n    \n    </div>\n    {{#time}}\n    {{#enabled}}\n    <div class="datepicker-time-view">\n        {{#hour.enabled}}\n            <div class="hour time-segment" data-time-key="hour">\n                <div class="up-btn" data-time-key="hour"></div>\n                <input disabled value="{{hour.title}}" type="text" placeholder="hour" class="hour-input">\n                <div class="down-btn" data-time-key="hour"></div>                    \n            </div>       \n            <div class="divider">\n                <span>:</span>\n            </div>\n        {{/hour.enabled}}\n        {{#minute.enabled}}\n            <div class="minute time-segment" data-time-key="minute" >\n                <div class="up-btn" data-time-key="minute"></div>\n                <input disabled value="{{minute.title}}" type="text" placeholder="minute" class="minute-input">\n                <div class="down-btn" data-time-key="minute"></div>\n            </div>        \n            <div class="divider second-divider">\n                <span>:</span>\n            </div>\n        {{/minute.enabled}}\n        {{#second.enabled}}\n            <div class="second time-segment" data-time-key="second"  >\n                <div class="up-btn" data-time-key="second" ></div>\n                <input disabled value="{{second.title}}"  type="text" placeholder="second" class="second-input">\n                <div class="down-btn" data-time-key="second" ></div>\n            </div>\n            <div class="divider meridian-divider"></div>\n            <div class="divider meridian-divider"></div>\n        {{/second.enabled}}\n        {{#meridian.enabled}}\n            <div class="meridian time-segment" data-time-key="meridian" >\n                <div class="up-btn" data-time-key="meridian"></div>\n                <input disabled value="{{meridian.title}}" type="text" class="meridian-input">\n                <div class="down-btn" data-time-key="meridian"></div>\n            </div>\n        {{/meridian.enabled}}\n    </div>\n    {{/enabled}}\n    {{/time}}\n    \n    {{#toolbox}}\n    {{#enabled}}\n    <div class="toolbox">\n        {{#toolbox.submitButton.enabled}}\n            <div class="pwt-btn-submit">{{submitButtonText}}</div>\n        {{/toolbox.submitButton.enabled}}        \n        {{#toolbox.todayButton.enabled}}\n            <div class="pwt-btn-today">{{todayButtonText}}</div>\n        {{/toolbox.todayButton.enabled}}        \n        {{#toolbox.calendarSwitch.enabled}}\n            <div class="pwt-btn-calendar">{{calendarSwitchText}}</div>\n        {{/toolbox.calendarSwitch.enabled}}\n    </div>\n    {{/enabled}}\n    {{^enabled}}\n        {{#onlyTimePicker}}\n        <div class="toolbox">\n            <div class="pwt-btn-submit">{{submitButtonText}}</div>\n        </div>\n        {{/onlyTimePicker}}\n    {{/enabled}}\n    {{/toolbox}}\n</div>\n'},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=i(11),o=i(12),s=i(13),l=i(6),d=i(3),u=i(7),c=i(8),h=i(10),f=function(){function e(t,i){return a(this,e),this.components(t,i)}return n(e,[{key:"components",value:function(e,t){return this.initialUnix=null,this.inputElement=e,this.options=new c(t,this),this.PersianDate=new h(this),this.state=new r(this),this.api=new d(this),this.input=new l(this,e),this.view=new s(this),this.toolbox=new o(this),this.updateInput=function(e){this.input.update(e)},this.state.setViewDateTime("unix",this.input.getOnInitState()),this.state.setSelectedDateTime("unix",this.input.getOnInitState()),this.view.render(),this.navigator=new u(this),this.api}}]),e}();e.exports=f},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(){function e(t){a(this,e),this.model=t}return n(e,[{key:"show",value:function(){return this.model.view.show(),this.model.options.onShow(this.model),this.model}},{key:"getState",value:function(){return this.model.state}},{key:"hide",value:function(){return this.model.view.hide(),this.model.options.onHide(this.model),this.model}},{key:"toggle",value:function(){return this.model.view.toggle(),this.model.options.onToggle(this.model),this.model}},{key:"destroy",value:function(){this.model&&(this.model.view.destroy(),this.model.options.onDestroy(this.model),delete this.model)}},{key:"setDate",value:function(e){return this.model.state.setSelectedDateTime("unix",e),this.model.state.setViewDateTime("unix",e),this.model.state.setSelectedDateTime("unix",e),this.model.view.render(this.view),this.model.options.onSet(e),this.model}},{key:"options",get:function(){return this.model.options},set:function(e){var t=$.extend(!0,this.model.options,e);this.model.view.destroy(),this.model.components(this.model.inputElement,t)}}]),e}();e.exports=r},function(e,t,i){"use strict";var a=i(0),n={calendarType:"persian",calendar:{persian:{locale:"fa",showHint:!1,leapYearMode:"algorithmic"},gregorian:{locale:"en",showHint:!1}},responsive:!0,inline:!1,initialValue:!0,initialValueType:"gregorian",persianDigit:!0,viewMode:"day",format:"LLLL",formatter:function(e){var t=this;return this.model.PersianDate.date(e).format(t.format)},altField:!1,altFormat:"unix",altFieldFormatter:function(e){var t=this,i=t.altFormat.toLowerCase(),a=void 0;return"gregorian"===i||"g"===i?new Date(e):"unix"===i||"u"===i?e:(a=this.model.PersianDate.date(e),a.format(t.altFormat))},minDate:null,maxDate:null,navigator:{enabled:!0,scroll:{enabled:!0},text:{btnNextText:"<",btnPrevText:">"},onNext:function(e){a.debug(e,"Event: onNext")},onPrev:function(e){a.debug(e,"Event: onPrev")},onSwitch:function(e){a.debug(e,"dayPicker Event: onSwitch")}},toolbox:{enabled:!0,text:{btnToday:""},submitButton:{enabled:a.isMobile,text:{fa:"",en:"submit"},onSubmit:function(e){a.debug(e,"dayPicker Event: onSubmit")}},todayButton:{enabled:!0,text:{fa:"",en:"today"},onToday:function(e){a.debug(e,"dayPicker Event: onToday")}},calendarSwitch:{enabled:!0,format:"MMMM",onSwitch:function(e){a.debug(e,"dayPicker Event: onSwitch")}},onToday:function(e){a.debug(e,"dayPicker Event: onToday")}},onlyTimePicker:!1,onlySelectOnDate:!0,checkDate:function(){return!0},checkMonth:function(){return!0},checkYear:function(){return!0},timePicker:{enabled:!1,step:1,hour:{enabled:!0,step:null},minute:{enabled:!0,step:null},second:{enabled:!0,step:null},meridian:{enabled:!1}},dayPicker:{enabled:!0,titleFormat:"YYYY MMMM",titleFormatter:function(e,t){return this.model.PersianDate.date([e,t]).format(this.model.options.dayPicker.titleFormat)},onSelect:function(e){a.debug(this,"dayPicker Event: onSelect : "+e)}},monthPicker:{enabled:!0,titleFormat:"YYYY",titleFormatter:function(e){return this.model.PersianDate.date(e).format(this.model.options.monthPicker.titleFormat)},onSelect:function(e){a.debug(this,"monthPicker Event: onSelect : "+e)}},yearPicker:{enabled:!0,titleFormat:"YYYY",titleFormatter:function(e){var t=12*parseInt(e/12,10),i=this.model.PersianDate.date([t]),a=this.model.PersianDate.date([t+11]);return i.format(this.model.options.yearPicker.titleFormat)+"-"+a.format(this.model.options.yearPicker.titleFormat)},onSelect:function(e){a.debug(this,"yearPicker Event: onSelect : "+e)}},onSelect:function(e){a.debug(this,"datepicker Event: onSelect : "+e)},onSet:function(e){a.debug(this,"datepicker Event: onSet : "+e)},position:"auto",onShow:function(e){a.debug(e,"Event: onShow ")},onHide:function(e){a.debug(e,"Event: onHide ")},onToggle:function(e){a.debug(e,"Event: onToggle ")},onDestroy:function(e){a.debug(e,"Event: onDestroy ")},autoClose:!1,template:null,observer:!1,inputDelay:800};e.exports=n},function(e,t,i){"use strict";var a=i(2);!function(e){e.fn.persianDatepicker=e.fn.pDatepicker=function(t){var i=Array.prototype.slice.call(arguments),n=null,r=this;return this||e.error("Invalid selector"),e(this).each(function(){var o=[],s=i.concat(o),l=e(this).data("datepicker"),d=null;l&&"string"==typeof s[0]?(d=s[0],n=l[d](s[0])):r.pDatePicker=new a(this,t)}),e(this).data("datepicker",r.pDatePicker),r.pDatePicker}}(jQuery)},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=i(0),o=i(9),s=function(){function e(t,i){return a(this,e),this.model=t,this._firstUpdate=!0,this.elem=i,this.model.options.observer&&this.observe(),this.addInitialClass(),this.initialUnix=null,0==this.model.options.inline&&this._attachInputElementEvents(),this}return n(e,[{key:"addInitialClass",value:function(){$(this.elem).addClass("pwt-datepicker-input-element")}},{key:"parseInput",value:function(e){var t=new o,i=this;if(void 0!==t.parse(e)){var a=this.model.PersianDate.date(t.parse(e)).valueOf();i.model.state.setSelectedDateTime("unix",a),i.model.state.setViewDateTime("unix",a),i.model.view.render()}}},{key:"observe",value:function(){function e(e){t.parseInput(e.val())}var t=this;$(t.elem).bind("paste",function(e){r.delay(function(){t.parseInput(e.target.value)},60)});var i=void 0,a=t.model.options.inputDelay,n=!1,o=[17,91];$(document).keydown(function(e){$.inArray(e.keyCode,o)>0&&(n=!0)}).keyup(function(e){$.inArray(e.keyCode,o)>0&&(n=!1)}),$(t.elem).bind("keyup",function(t){var r=$(this),s=!1;(8===t.keyCode||t.keyCode<105&&t.keyCode>96||t.keyCode<58&&t.keyCode>47||n&&(86==t.keyCode||$.inArray(t.keyCode,o)>0))&&(s=!0),s&&(clearTimeout(i),i=setTimeout(function(){e(r)},a))}),$(t.elem).on("keydown",function(){clearTimeout(i)})}},{key:"_attachInputElementEvents",value:function(){var e=this,t=function t(i){$(i.target).is(e.elem)||$(i.target).is(e.model.view.$container)||0!=$(i.target).closest("#"+e.model.view.$container.attr("id")).length||$(i.target).is($(e.elem).children())||(e.model.api.hide(),$("body").unbind("click",t))};$(this.elem).on("focus click",r.debounce(function(i){return e.model.api.show(),!1===e.model.state.ui.isInline&&$("body").unbind("click",t).bind("click",t),r.isMobile&&$(this).blur(),i.stopPropagation(),!1},200)),$(this.elem).on("keydown",r.debounce(function(t){if(9===t.which)return e.model.api.hide(),!1},200))}},{key:"getInputPosition",value:function(){return $(this.elem).offset()}},{key:"getInputSize",value:function(){return{width:$(this.elem).outerWidth(),height:$(this.elem).outerHeight()}}},{key:"_updateAltField",value:function(e){var t=this.model.options.altFieldFormatter(e);$(this.model.options.altField).val(t)}},{key:"_updateInputField",value:function(e){var t=this.model.options.formatter(e);$(this.elem).val()!=t&&$(this.elem).val(t)}},{key:"update",value:function(e){0==this.model.options.initialValue&&this._firstUpdate?this._firstUpdate=!1:(this._updateInputField(e),this._updateAltField(e))}},{key:"getOnInitState",value:function(){var e=null,t=$(this.elem),i=void 0;if((i="INPUT"===t[0].nodeName?t[0].getAttribute("value"):t.data("date"))&&i.match("^([0-1][0-9]|2[0-3]):([0-5][0-9])(?::([0-5][0-9]))?$")){var a=i.split(":"),n=new Date;n.setHours(a[0]),n.setMinutes(a[1]),a[2]?n.setSeconds(a[2]):n.setSeconds(0),this.initialUnix=n.valueOf()}else{if("persian"===this.model.options.initialValueType&&i){var r=new o,s=new persianDate(r.parse(i)).valueOf();e=new Date(s).valueOf()}else"unix"===this.model.options.initialValueType&&i?e=parseInt(i):i&&(e=new Date(i).valueOf());this.initialUnix=e&&"undefined"!=e?e:(new Date).valueOf()}return this.initialUnix}}]),e}();e.exports=s},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=i(14),o=function(){function e(t){return a(this,e),this.model=t,this.liveAttach(),this._attachEvents(),this}return n(e,[{key:"liveAttach",value:function(){if(this.model.options.navigator.scroll.enabled){var e=this,t=$("#"+e.model.view.id+" .datepicker-grid-view")[0];r(t).wheel(function(t,i){i>0?e.model.state.navigate("next"):e.model.state.navigate("prev"),e.model.view.render(),t.preventDefault()}),this.model.options.timePicker.enabled&&$("#"+e.model.view.id+" .time-segment").each(function(){r(this).wheel(function(t,i){var a=$(t.target),n=a.data("time-key")?a.data("time-key"):a.parents("[data-time-key]").data("time-key");n&&(i>0?e.timeUp(n):e.timeDown(n)),e.model.view.render(),t.preventDefault()})})}}},{key:"timeUp",value:function(e){if(void 0!=this.model.options.timePicker[e]){var t=void 0,i=void 0,a=this;"meridian"==e?(t=12,i="PM"==this.model.state.view.meridian?this.model.PersianDate.date(this.model.state.selected.unixDate).add("hour",t).valueOf():this.model.PersianDate.date(this.model.state.selected.unixDate).subtract("hour",t).valueOf(),this.model.state.meridianToggle()):(t=this.model.options.timePicker[e].step,i=this.model.PersianDate.date(this.model.state.selected.unixDate).add(e,t).valueOf()),this.model.state.setViewDateTime("unix",i),this.model.state.setSelectedDateTime("unix",i),this.model.view.renderTimePartial(),clearTimeout(this.scrollDelayTimeDown),this.scrollDelayTimeUp=setTimeout(function(){a.model.view.markSelectedDay()},300)}}},{key:"timeDown",value:function(e){if(void 0!=this.model.options.timePicker[e]){var t=void 0,i=void 0,a=this;"meridian"==e?(t=12,i="AM"==this.model.state.view.meridian?this.model.PersianDate.date(this.model.state.selected.unixDate).add("hour",t).valueOf():this.model.PersianDate.date(this.model.state.selected.unixDate).subtract("hour",t).valueOf(),this.model.state.meridianToggle()):(t=this.model.options.timePicker[e].step,i=this.model.PersianDate.date(this.model.state.selected.unixDate).subtract(e,t).valueOf()),this.model.state.setViewDateTime("unix",i),this.model.state.setSelectedDateTime("unix",i),this.model.view.renderTimePartial(),clearTimeout(this.scrollDelayTimeDown),this.scrollDelayTimeDown=setTimeout(function(){a.model.view.markSelectedDay()},300)}}},{key:"_attachEvents",value:function(){var e=this;this.model.options.navigator.enabled&&$(document).on("click","#"+e.model.view.id+" .pwt-btn",function(){$(this).is(".pwt-btn-next")?(e.model.state.navigate("next"),e.model.view.render(),e.model.options.navigator.onNext(e.model)):$(this).is(".pwt-btn-switch")?(e.model.state.switchViewMode(),e.model.view.render(),e.model.options.navigator.onSwitch(e.model)):$(this).is(".pwt-btn-prev")&&(e.model.state.navigate("prev"),e.model.view.render(),e.model.options.navigator.onPrev(e.model))}),this.model.options.timePicker.enabled&&($(document).on("click","#"+e.model.view.id+" .up-btn",function(){var t=$(this).data("time-key");e.timeUp(t),e.model.options.onSelect(e.model.state.selected.unixDate)}),$(document).on("click","#"+e.model.view.id+" .down-btn",function(){var t=$(this).data("time-key");e.timeDown(t),e.model.options.onSelect(e.model.state.selected.unixDate)})),this.model.options.dayPicker.enabled&&$(document).on("click","#"+e.model.view.id+" .datepicker-day-view td:not(.disabled)",function(){var t=$(this).data("unix"),i=void 0;e.model.state.setSelectedDateTime("unix",t),i=e.model.state.selected.month!==e.model.state.view.month,e.model.state.setViewDateTime("unix",e.model.state.selected.unixDate),e.model.options.autoClose&&(e.model.view.hide(),e.model.options.onHide(e)),i?e.model.view.render():e.model.view.markSelectedDay(),e.model.options.dayPicker.onSelect(t),e.model.options.onSelect(t)}),this.model.options.monthPicker.enabled&&$(document).on("click","#"+e.model.view.id+" .datepicker-month-view .month-item:not(.month-item-disable)",function(){var t=$(this).data("month");e.model.state.switchViewModeTo("day"),e.model.options.onlySelectOnDate||(e.model.state.setSelectedDateTime("month",t),e.model.options.autoClose&&(e.model.view.hide(),e.model.options.onHide(e))),e.model.state.setViewDateTime("month",t),e.model.view.render(),e.model.options.monthPicker.onSelect(t),e.model.options.onSelect(e.model.state.selected.unixDate)}),this.model.options.yearPicker.enabled&&$(document).on("click","#"+e.model.view.id+" .datepicker-year-view .year-item:not(.year-item-disable)",function(){var t=$(this).data("year");e.model.state.switchViewModeTo("month"),e.model.options.onlySelectOnDate||(e.model.state.setSelectedDateTime("year",t),e.model.options.autoClose&&(e.model.view.hide(),e.model.options.onHide(e))),e.model.state.setViewDateTime("year",t),e.model.view.render(),e.model.options.yearPicker.onSelect(t),e.model.options.onSelect(e.model.state.selected.unixDate)})}}]),e}();e.exports=o},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=i(4),o=i(1),s=function(){function e(t,i){return a(this,e),this.model=i,this._compatibility($.extend(!0,this,r,t))}return n(e,[{key:"_compatibility",value:function(e){e.inline&&(e.toolbox.submitButton.enabled=!1),e.template||(e.template=o),persianDate.toCalendar(e.calendarType),persianDate.toLocale(e.calendar[e.calendarType].locale),e.onlyTimePicker&&(e.dayPicker.enabled=!1,e.monthPicker.enabled=!1,e.yearPicker.enabled=!1,e.navigator.enabled=!1,e.toolbox.enabled=!1,e.timePicker.enabled=!0),null===e.timePicker.hour.step&&(e.timePicker.hour.step=e.timePicker.step),null===e.timePicker.minute.step&&(e.timePicker.minute.step=e.timePicker.step),null===e.timePicker.second.step&&(e.timePicker.second.step=e.timePicker.step),!1===e.dayPicker.enabled&&(e.onlySelectOnDate=!1),e._viewModeList=[],e.dayPicker.enabled&&e._viewModeList.push("day"),e.monthPicker.enabled&&e._viewModeList.push("month"),e.yearPicker.enabled&&e._viewModeList.push("year")}}]),e}();e.exports=s},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(){function e(){a(this,e),this.pattern={iso:/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\.[0-9]+)?(Z)?$/g,jalali:/^[1-4]\d{3}(\/|-|\.)((0?[1-6](\/|-|\.)((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))(\/|-|\.)(30|([1-2][0-9])|(0?[1-9]))))$/g}}return n(e,[{key:"parse",value:function(e){var t=this,i=new RegExp(t.pattern.iso),a=new RegExp(t.pattern.jalali);return String.prototype.toEnglishDigits=function(){var e="".charCodeAt(0);return this.replace(/[-]/g,function(t){return t.charCodeAt(0)-e})},e=e.toEnglishDigits(),a.test(e)?e.split(/\/|-|\,|\./).map(Number):i.test(e)?e.split(/\/|-|\,|\:|\T|\Z/g).map(Number):void 0}}]),e}();e.exports=r},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(){function e(t){return a(this,e),this.model=t,this.model.options.calendar_=this.model.options.calendarType,this.model.options.locale_=this.model.options.calendar[this.model.options.calendarType].locale,this}return n(e,[{key:"date",value:function(e){window.inspdCount||0===window.inspdCount?window.inspdCount++:window.inspdCount=0;var t=this,i=void 0,a=void 0;return a=persianDate.toCalendar(t.model.options.calendar_),this.model.options.calendar[this.model.options.calendarType].leapYearMode&&a.toLeapYearMode(this.model.options.calendar[this.model.options.calendarType].leapYearMode),i=new a(e),i.toLocale(t.model.options.locale_)}}]),e}();e.exports=r},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(){function e(t){return a(this,e),this.model=t,this.filetredDate=this.model.options.minDate||this.model.options.maxDate,this.viewModeList=this.model.options._viewModeList,this.viewMode=this.viewModeList.indexOf(t.options.viewMode)>0?t.options.viewMode:this.viewModeList[0],this.viewModeIndex=this.viewModeList.indexOf(t.options.viewMode)>0?this.viewModeList.indexOf(t.options.viewMode):0,this.filterDate={start:{year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0},end:{year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0}},this.view={year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0,dateObject:null,meridian:"AM"},this.selected={year:0,month:0,date:0,hour:0,hour12:0,minute:0,second:0,unixDate:0,dateObject:null},this.ui={isOpen:!1,isInline:this.model.options.inline},this._setFilterDate(this.model.options.minDate,this.model.options.maxDate),this}return n(e,[{key:"_setFilterDate",value:function(e,t){var i=this;e||(e=-2e15),t||(t=2e15);var a=i.model.PersianDate.date(e);i.filterDate.start.unixDate=e,i.filterDate.start.hour=a.hour(),i.filterDate.start.minute=a.minute(),i.filterDate.start.second=a.second(),i.filterDate.start.month=a.month(),i.filterDate.start.date=a.date(),i.filterDate.start.year=a.year();var n=i.model.PersianDate.date(t);i.filterDate.end.unixDate=t,i.filterDate.end.hour=n.hour(),i.filterDate.end.minute=n.minute(),i.filterDate.end.second=n.second(),i.filterDate.end.month=n.month(),i.filterDate.end.date=n.date(),i.filterDate.end.year=n.year()}},{key:"navigate",value:function(e){if("next"==e){if("year"==this.viewMode&&this.setViewDateTime("year",this.view.year+12),"month"==this.viewMode){var t=this.view.year+1;0===t&&(t=1),this.setViewDateTime("year",t)}if("day"==this.viewMode){var i=this.view.year+1;0===i&&(i=1),this.view.month+1==13?(this.setViewDateTime("year",i),this.setViewDateTime("month",1)):this.setViewDateTime("month",this.view.month+1)}}else{if("year"==this.viewMode&&this.setViewDateTime("year",this.view.year-12),"month"==this.viewMode){var a=this.view.year-1;0===a&&(a=-1),this.setViewDateTime("year",a)}if("day"==this.viewMode)if(this.view.month-1<=0){var n=this.view.year-1;0===n&&(n=-1),this.setViewDateTime("year",n),this.setViewDateTime("month",12)}else this.setViewDateTime("month",this.view.month-1)}}},{key:"switchViewMode",value:function(){return this.viewModeIndex=this.viewModeIndex+1>=this.viewModeList.length?0:this.viewModeIndex+1,this.viewMode=this.viewModeList[this.viewModeIndex]?this.viewModeList[this.viewModeIndex]:this.viewModeList[0],this._setViewDateTimeUnix(),this}},{key:"switchViewModeTo",value:function(e){this.viewModeList.indexOf(e)>=0&&(this.viewMode=e,this.viewModeIndex=this.viewModeList.indexOf(e))}},{key:"setSelectedDateTime",value:function(e,t){var i=this;switch(e){case"unix":i.selected.unixDate=t;var a=this.model.PersianDate.date(t);i.selected.year=a.year(),i.selected.month=a.month(),i.selected.date=a.date(),i.selected.hour=a.hour(),i.selected.hour12=a.format("hh"),i.selected.minute=a.minute(),i.selected.second=a.second();break;case"year":this.selected.year=t;break;case"month":this.selected.month=t;break;case"date":this.selected.date=t;break;case"hour":this.selected.hour=t;break;case"minute":this.selected.minute=t;break;case"second":this.selected.second=t}return i._updateSelectedUnix(),this}},{key:"_updateSelectedUnix",value:function(){return this.selected.dateObject=this.model.PersianDate.date([this.selected.year,this.selected.month,this.selected.date,this.view.hour,this.view.minute,this.view.second]),this.selected.unixDate=this.selected.dateObject.valueOf(),this.model.updateInput(this.selected.unixDate),this}},{key:"_setViewDateTimeUnix",value:function(){return this.view.dateObject=this.model.PersianDate.date([this.view.year,this.view.month,this.view.date,this.view.hour,this.view.minute,this.view.second]),this.view.year=this.view.dateObject.year(),this.view.month=this.view.dateObject.month(),this.view.date=this.view.dateObject.date(),this.view.hour=this.view.dateObject.hour(),this.view.hour12=this.view.dateObject.format("hh"),this.view.minute=this.view.dateObject.minute(),this.view.second=this.view.dateObject.second(),this.view.unixDate=this.view.dateObject.valueOf(),this}},{key:"setViewDateTime",value:function(e,t){var i=this;switch(e){case"unix":var a=this.model.PersianDate.date(t);i.view.year=a.year(),i.view.month=a.month(),i.view.date=a.date(),i.view.hour=a.hour(),i.view.minute=a.minute(),i.view.second=a.second();break;case"year":this.view.year=t;break;case"month":this.view.month=t;break;case"date":this.view.date=t;break;case"hour":this.view.hour=t;break;case"minute":this.view.minute=t;break;case"second":this.view.second=t}return this._setViewDateTimeUnix(),this}},{key:"meridianToggle",value:function(){var e=this;"AM"===e.view.meridian?e.view.meridian="PM":"PM"===e.view.meridian&&(e.view.meridian="AM")}}]),e}();e.exports=r},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(){function e(t){return a(this,e),this.model=t,this._attachEvents(),this}return n(e,[{key:"_toggleCalendartype",value:function(){var e=this;"persian"==e.model.options.calendar_?(e.model.options.calendar_="gregorian",e.model.options.locale_=this.model.options.calendar.gregorian.locale):(e.model.options.calendar_="persian",e.model.options.locale_=this.model.options.calendar.persian.locale)}},{key:"_attachEvents",value:function(){var e=this;$(document).on("click","#"+e.model.view.id+" .pwt-btn-today",function(){e.model.state.setSelectedDateTime("unix",(new Date).valueOf()),e.model.state.setViewDateTime("unix",(new Date).valueOf()),e.model.view.reRender(),e.model.options.toolbox.onToday(e.model),e.model.options.toolbox.todayButton.onToday(e.model)}),$(document).on("click","#"+e.model.view.id+" .pwt-btn-calendar",function(){e._toggleCalendartype(),e.model.state.setSelectedDateTime("unix",e.model.state.selected.unixDate),e.model.state.setViewDateTime("unix",e.model.state.view.unixDate),e.model.view.render(),e.model.options.toolbox.calendarSwitch.onSwitch(e.model)}),$(document).on("click","#"+e.model.view.id+" .pwt-btn-submit",function(){e.model.view.hide(),e.model.options.toolbox.submitButton.onSubmit(e.model),e.model.options.onHide(this)})}}]),e}();e.exports=r},function(e,t,i){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function n(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){var i=[],a=!0,n=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){n=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw r}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),s=i(1),l=i(0),d=i(15),u=function(){function e(t){n(this,e),this.yearsViewCount=12,this.model=t,this.rendered=null,this.$container=null,this.id="persianDateInstance-"+parseInt(1e3*Math.random(100));var i=this;return this.model.state.ui.isInline?this.$container=$('<div  id="'+this.id+'" class="datepicker-container-inline"></div>').appendTo(i.model.inputElement):(this.$container=$('<div  id="'+this.id+'" class="datepicker-container"></div>').appendTo("body"),this.hide(),this.setPickerBoxPosition(),this.addCompatibilityClass()),this}return o(e,[{key:"addCompatibilityClass",value:function(){l.isMobile&&this.model.options.responsive&&this.$container.addClass("pwt-mobile-view")}},{key:"destroy",value:function(){this.$container.remove()}},{key:"setPickerBoxPosition",value:function(){var e=this.model.input.getInputPosition(),t=this.model.input.getInputSize();if(l.isMobile&&this.model.options.responsive)return!1;"auto"===this.model.options.position?this.$container.css({left:e.left+"px",top:t.height+e.top+"px"}):this.$container.css({left:this.model.options.position[1]+e.left+"px",top:this.model.options.position[0]+e.top+"px"})}},{key:"show",value:function(){this.$container.removeClass("pwt-hide"),this.setPickerBoxPosition()}},{key:"hide",value:function(){this.$container.addClass("pwt-hide")}},{key:"toggle",value:function(){this.$container.toggleClass("pwt-hide")}},{key:"_getNavSwitchText",value:function(e){var t=void 0;return"day"==this.model.state.viewMode?t=this.model.options.dayPicker.titleFormatter.call(this,e.year,e.month):"month"==this.model.state.viewMode?t=this.model.options.monthPicker.titleFormatter.call(this,e.dateObject.valueOf()):"year"==this.model.state.viewMode&&(t=this.model.options.yearPicker.titleFormatter.call(this,e.year)),t}},{key:"checkYearAccess",value:function(e){if(this.model.state.filetredDate){var t=this.model.state.filterDate.start.year,i=this.model.state.filterDate.end.year;if(t&&e<t)return!1;if(i&&e>i)return!1}return this.model.options.checkYear(e)}},{key:"_getYearViewModel",value:function(e){var t=this,i=this.model.options.yearPicker.enabled;if(!i)return{enabled:!1};var n=[].concat(a(Array(this.yearsViewCount).keys())).map(function(i){return i+parseInt(e.year/t.yearsViewCount)*t.yearsViewCount}),r=[],o=this.model.PersianDate.date(),s=!0,l=!1,d=void 0;try{for(var u,c=n[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var h=u.value;o.year([h]),r.push({title:o.format("YYYY"),enabled:this.checkYearAccess(h),dataYear:h,selected:this.model.state.selected.year==h})}}catch(e){l=!0,d=e}finally{try{!s&&c.return&&c.return()}finally{if(l)throw d}}return{enabled:i,viewMode:"year"==this.model.state.viewMode,list:r}}},{key:"checkMonthAccess",value:function(e){e+=1;var t=this.model.state.view.year;if(this.model.state.filetredDate){var i=this.model.state.filterDate.start.month,a=this.model.state.filterDate.end.month,n=this.model.state.filterDate.start.year,r=this.model.state.filterDate.end.year;if(i&&a&&(t==r&&e>a||t>r)||t==n&&e<i||t<n)return!1;if(a&&(t==r&&e>a||t>r))return!1;if(i&&(t==n&&e<i||t<n))return!1}return this.model.options.checkMonth(e,t)}},{key:"_getMonthViewModel",value:function(){var e=this.model.options.monthPicker.enabled;if(!e)return{enabled:!1};var t=[],i=this,a=!0,n=!1,o=void 0;try{for(var s,l=i.model.PersianDate.date().rangeName().months.entries()[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var d=r(s.value,2),u=d[0],c=d[1];t.push({title:c,enabled:this.checkMonthAccess(u),year:this.model.state.view.year,dataMonth:u+1,selected:this.model.state.selected.year==this.model.state.view.year&&this.model.state.selected.month==u+1})}}catch(e){n=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}return{enabled:e,viewMode:"month"==this.model.state.viewMode,list:t}}},{key:"checkDayAccess",value:function(e){var t=this;if(t.minDate=this.model.options.minDate,t.maxDate=this.model.options.maxDate,t.model.state.filetredDate)if(t.minDate&&t.maxDate){if(t.minDate=t.model.PersianDate.date(t.minDate).startOf("day").valueOf(),t.maxDate=t.model.PersianDate.date(t.maxDate).endOf("day").valueOf(),!(e>=t.minDate&&e<=t.maxDate))return!1}else if(t.minDate){if(t.minDate=t.model.PersianDate.date(t.minDate).startOf("day").valueOf(),e<=t.minDate)return!1}else if(t.maxDate&&(t.maxDate=t.model.PersianDate.date(t.maxDate).endOf("day").valueOf(),e>=t.maxDate))return!1;return t.model.options.checkDate(e)}},{key:"_getDayViewModel",value:function(){if("day"!=this.model.state.viewMode)return[];var e=this.model.options.dayPicker.enabled;if(!e)return{enabled:!1};var t=this.model.state.view.month,i=this.model.state.view.year,a=this.model.PersianDate.date(),n=a.daysInMonth(i,t),o=a.getFirstWeekDayOfMonth(i,t)-1,s=[],l=0,d=0,u=[["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"]],c=this._getAnotherCalendar(),h=this.model.PersianDate.date(),f=!0,p=!1,m=void 0;try{for(var v,g=u.entries()[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var w=r(v.value,2),y=w[0],b=w[1];s[y]=[];var _=!0,k=!1,x=void 0;try{for(var C,T=b.entries()[Symbol.iterator]();!(_=(C=T.next()).done);_=!0){var P=r(C.value,1),D=P[0],M=void 0,S=void 0;0===y&&D<o?(M=h.unix(this.model.state.view.dateObject.startOf("month").startOf("day").valueOf()/1e3).subtract("days",o-D),S=!0):0===y&&D>=o||y<=5&&l<n?(l+=1,M=h.year(this.model.state.view.year).month(this.model.state.view.month).date(l),S=!1):(d+=1,M=h.unix(this.model.state.view.dateObject.endOf("month").startOf("day").valueOf()/1e3).add("days",d),S=!0),s[y].push({title:M.format("D"),alterCalTitle:new persianDate(M.valueOf()).toCalendar(c[0]).toLocale(c[1]).format("D"),dataDate:[M.year(),M.month(),M.date()].join(","),dataUnix:M.valueOf(),otherMonth:S,enabled:this.checkDayAccess(M.valueOf())})}}catch(e){k=!0,x=e}finally{try{!_&&T.return&&T.return()}finally{if(k)throw x}}}}catch(e){p=!0,m=e}finally{try{!f&&g.return&&g.return()}finally{if(p)throw m}}return{enabled:e,viewMode:"day"==this.model.state.viewMode,list:s}}},{key:"markSelectedDay",value:function(){var e=this.model.state.selected;this.$container.find(".table-days td").each(function(){$(this).data("date")==[e.year,e.month,e.date].join(",")?$(this).addClass("selected"):$(this).removeClass("selected")})}},{key:"markToday",value:function(){var e=new persianDate;this.$container.find(".table-days td").each(function(){$(this).data("date")==[e.year(),e.month(),e.date()].join(",")?$(this).addClass("today"):$(this).removeClass("today")})}},{key:"_getTimeViewModel",value:function(){var e=this.model.options.timePicker.enabled;if(!e)return{enabled:!1};var t=void 0;return t=this.model.options.timePicker.meridian.enabled?this.model.state.view.dateObject.format("hh"):this.model.state.view.dateObject.format("HH"),{enabled:e,hour:{title:t,enabled:this.model.options.timePicker.hour.enabled},minute:{title:this.model.state.view.dateObject.format("mm"),enabled:this.model.options.timePicker.minute.enabled},second:{title:this.model.state.view.dateObject.format("ss"),enabled:this.model.options.timePicker.second.enabled},meridian:{title:this.model.state.view.dateObject.format("a"),enabled:this.model.options.timePicker.meridian.enabled}}}},{key:"_getWeekViewModel",value:function(){return{enabled:!0,list:this.model.PersianDate.date().rangeName().weekdaysMin}}},{key:"getCssClass",value:function(){return[this.model.state.ui.isInline?"datepicker-plot-area-inline-view":"",this.model.options.timePicker.meridian.enabled?"":"datepicker-state-no-meridian",this.model.options.onlyTimePicker?"datepicker-state-only-time":"",this.model.options.timePicker.second.enabled?"":"datepicker-state-no-second","gregorian"==this.model.options.calendar_?"datepicker-gregorian":"datepicker-persian"].join(" ")}},{key:"getViewModel",value:function(e){var t=this._getAnotherCalendar();return{plotId:"",navigator:{enabled:this.model.options.navigator.enabled,switch:{enabled:!0,text:this._getNavSwitchText(e)},text:this.model.options.navigator.text},selected:this.model.state.selected,time:this._getTimeViewModel(e),days:this._getDayViewModel(e),weekdays:this._getWeekViewModel(e),month:this._getMonthViewModel(e),year:this._getYearViewModel(e),toolbox:this.model.options.toolbox,cssClass:this.getCssClass(),onlyTimePicker:this.model.options.onlyTimePicker,altCalendarShowHint:this.model.options.calendar[t[0]].showHint,calendarSwitchText:this.model.state.view.dateObject.toCalendar(t[0]).toLocale(t[1]).format(this.model.options.toolbox.calendarSwitch.format),todayButtonText:this._getButtonText().todayButtontext,submitButtonText:this._getButtonText().submitButtonText}}},{key:"_getButtonText",value:function(){var e={};return"fa"==this.model.options.locale_?(e.todayButtontext=this.model.options.toolbox.todayButton.text.fa,e.submitButtonText=this.model.options.toolbox.submitButton.text.fa):"en"==this.model.options.locale_&&(e.todayButtontext=this.model.options.toolbox.todayButton.text.en,e.submitButtonText=this.model.options.toolbox.submitButton.text.en),e}},{key:"_getAnotherCalendar",value:function(){var e=this,t=void 0,i=void 0;return"persian"==e.model.options.calendar_?(t="gregorian",i=e.model.options.calendar.gregorian.locale):(t="persian",i=e.model.options.calendar.persian.locale),[t,i]}},{key:"renderTimePartial",value:function(){var e=this._getTimeViewModel(this.model.state.view);this.$container.find('[data-time-key="hour"] input').val(e.hour.title),this.$container.find('[data-time-key="minute"] input').val(e.minute.title),this.$container.find('[data-time-key="second"] input').val(e.second.title),this.$container.find('[data-time-key="meridian"] input').val(e.meridian.title)}},{key:"render",value:function(e){e||(e=this.model.state.view),l.debug(this,"render"),d.parse(s),this.rendered=$(d.render(this.model.options.template,this.getViewModel(e))),this.$container.empty().append(this.rendered),this.markSelectedDay(),this.markToday(),this.afterRender()}},{key:"reRender",value:function(){var e=this.model.state.view;this.render(e)}},{key:"afterRender",value:function(){this.model.navigator&&this.model.navigator.liveAttach()}}]),e}();e.exports=u},function(e,t,i){!function(t,i){"use strict";var a=function e(t){return new e.Instance(t)};a.SUPPORT="wheel",a.ADD_EVENT="addEventListener",a.REMOVE_EVENT="removeEventListener",a.PREFIX="",a.READY=!1,a.Instance=function(e){return a.READY||(a.normalise.browser(),a.READY=!0),this.element=e,this.handlers=[],this},a.Instance.prototype={wheel:function(e,t){return a.event.add(this,a.SUPPORT,e,t),"DOMMouseScroll"===a.SUPPORT&&a.event.add(this,"MozMousePixelScroll",e,t),this},unwheel:function(e,t){return void 0===e&&(e=this.handlers.slice(-1)[0])&&(e=e.original),a.event.remove(this,a.SUPPORT,e,t),"DOMMouseScroll"===a.SUPPORT&&a.event.remove(this,"MozMousePixelScroll",e,t),this}},a.event={add:function(e,i,n,r){var o=n;n=function(e){e||(e=t.event);var i=a.normalise.event(e),n=a.normalise.delta(e);return o(i,n[0],n[1],n[2])},e.element[a.ADD_EVENT](a.PREFIX+i,n,r||!1),e.handlers.push({original:o,normalised:n})},remove:function(e,t,i,n){for(var r,o=i,s={},l=0,d=e.handlers.length;l<d;++l)s[e.handlers[l].original]=e.handlers[l];r=s[o],i=r.normalised,e.element[a.REMOVE_EVENT](a.PREFIX+t,i,n||!1);for(var u in e.handlers)if(e.handlers[u]==r){e.handlers.splice(u,1);break}}};var n,r;a.normalise={browser:function(){"onwheel"in i||i.documentMode>=9||(a.SUPPORT=void 0!==i.onmousewheel?"mousewheel":"DOMMouseScroll"),t.addEventListener||(a.ADD_EVENT="attachEvent",a.REMOVE_EVENT="detachEvent",a.PREFIX="on")},event:function(e){var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===e.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){e.stopPropagation?e.stopPropagation():e.cancelBubble=!1}};return e.wheelDelta&&(t.deltaY=-.025*e.wheelDelta),e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX),e.detail&&(t.deltaY=e.detail),t},delta:function(e){var t,i=0,a=0,o=0,s=0,l=0;return e.deltaY&&(o=-1*e.deltaY,i=o),e.deltaX&&(a=e.deltaX,i=-1*a),e.wheelDelta&&(i=e.wheelDelta),e.wheelDeltaY&&(o=e.wheelDeltaY),e.wheelDeltaX&&(a=-1*e.wheelDeltaX),e.detail&&(i=-1*e.detail),0===i?[0,0,0]:(s=Math.abs(i),(!n||s<n)&&(n=s),l=Math.max(Math.abs(o),Math.abs(a)),(!r||l<r)&&(r=l),t=i>0?"floor":"ceil",i=Math[t](i/n),a=Math[t](a/r),o=Math[t](o/r),[i,a,o])}},"function"==typeof t.define&&t.define.amd?t.define("hamster",[],function(){return a}):e.exports=a}(window,window.document)},function(e,t,i){var a,n,r;!function(i,o){"object"===(void 0===t?"undefined":_typeof(t))&&t&&"string"!=typeof t.nodeName?o(t):(n=[t],a=o,void 0!==(r="function"==typeof a?a.apply(t,n):a)&&(e.exports=r))}(0,function(e){function t(e){return"function"==typeof e}function i(e){return v(e)?"array":void 0===e?"undefined":_typeof(e)}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e,t){return null!=e&&"object"===(void 0===e?"undefined":_typeof(e))&&t in e}function r(e,t){return null!=e&&"object"!==(void 0===e?"undefined":_typeof(e))&&e.hasOwnProperty&&e.hasOwnProperty(t)}function o(e,t){return g.call(e,t)}function s(e){return!o(w,e)}function l(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return y[e]})}function d(t,i){function n(e){if("string"==typeof e&&(e=e.split(_,2)),!v(e)||2!==e.length)throw new Error("Invalid tags: "+e);r=new RegExp(a(e[0])+"\\s*"),o=new RegExp("\\s*"+a(e[1])),l=new RegExp("\\s*"+a("}"+e[1]))}if(!t)return[];var r,o,l,d=[],f=[],p=[],m=!1,g=!1;n(i||e.tags);for(var w,y,T,P,D,M,S=new h(t);!S.eos();){if(w=S.pos,T=S.scanUntil(r))for(var E=0,I=T.length;E<I;++E)P=T.charAt(E),s(P)?p.push(f.length):g=!0,f.push(["text",P,w,w+1]),w+=1,"\n"===P&&function(){if(m&&!g)for(;p.length;)delete f[p.pop()];else p=[];m=!1,g=!1}();if(!S.scan(r))break;if(m=!0,y=S.scan(C)||"name",S.scan(b),"="===y?(T=S.scanUntil(k),S.scan(k),S.scanUntil(o)):"{"===y?(T=S.scanUntil(l),S.scan(x),S.scanUntil(o),y="&"):T=S.scanUntil(o),!S.scan(o))throw new Error("Unclosed tag at "+S.pos);if(D=[y,T,w,S.pos],f.push(D),"#"===y||"^"===y)d.push(D);else if("/"===y){if(!(M=d.pop()))throw new Error('Unopened section "'+T+'" at '+w);if(M[1]!==T)throw new Error('Unclosed section "'+M[1]+'" at '+w)}else"name"===y||"{"===y||"&"===y?g=!0:"="===y&&n(T)}if(M=d.pop())throw new Error('Unclosed section "'+M[1]+'" at '+S.pos);return c(u(f))}function u(e){for(var t,i,a=[],n=0,r=e.length;n<r;++n)(t=e[n])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(a.push(t),i=t));return a}function c(e){for(var t,i,a=[],n=a,r=[],o=0,s=e.length;o<s;++o)switch(t=e[o],t[0]){case"#":case"^":n.push(t),r.push(t),n=t[4]=[];break;case"/":i=r.pop(),i[5]=t[2],n=r.length>0?r[r.length-1][4]:a;break;default:n.push(t)}return a}function h(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function p(){this.cache={}}var m=Object.prototype.toString,v=Array.isArray||function(e){return"[object Array]"===m.call(e)},g=RegExp.prototype.test,w=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},b=/\s*/,_=/\s+/,k=/\s*=/,x=/\s*\}/,C=/#|\^|\/|>|\{|&|=|!/;h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},h.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},f.prototype.push=function(e){return new f(e,this)},f.prototype.lookup=function(e){var i,a=this.cache;if(a.hasOwnProperty(e))i=a[e];else{for(var o,s,l,d=this,u=!1;d;){if(e.indexOf(".")>0)for(o=d.view,s=e.split("."),l=0;null!=o&&l<s.length;)l===s.length-1&&(u=n(o,s[l])||r(o,s[l])),o=o[s[l++]];else o=d.view[e],u=n(d.view,e);if(u){i=o;break}d=d.parent}a[e]=i}return t(i)&&(i=i.call(this.view)),i},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(t,i){var a=this.cache,n=t+":"+(i||e.tags).join(":"),r=a[n];return null==r&&(r=a[n]=d(t,i)),r},p.prototype.render=function(e,t,i,a){var n=this.parse(e,a),r=t instanceof f?t:new f(t);return this.renderTokens(n,r,i,e,a)},p.prototype.renderTokens=function(e,t,i,a,n){for(var r,o,s,l="",d=0,u=e.length;d<u;++d)s=void 0,r=e[d],o=r[0],"#"===o?s=this.renderSection(r,t,i,a):"^"===o?s=this.renderInverted(r,t,i,a):">"===o?s=this.renderPartial(r,t,i,n):"&"===o?s=this.unescapedValue(r,t):"name"===o?s=this.escapedValue(r,t):"text"===o&&(s=this.rawValue(r)),void 0!==s&&(l+=s);return l},p.prototype.renderSection=function(e,i,a,n){function r(e){return o.render(e,i,a)}var o=this,s="",l=i.lookup(e[1]);if(l){if(v(l))for(var d=0,u=l.length;d<u;++d)s+=this.renderTokens(e[4],i.push(l[d]),a,n);else if("object"===(void 0===l?"undefined":_typeof(l))||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],i.push(l),a,n);else if(t(l)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");l=l.call(i.view,n.slice(e[3],e[5]),r),null!=l&&(s+=l)}else s+=this.renderTokens(e[4],i,a,n);return s}},p.prototype.renderInverted=function(e,t,i,a){var n=t.lookup(e[1]);if(!n||v(n)&&0===n.length)return this.renderTokens(e[4],t,i,a)},p.prototype.renderPartial=function(e,i,a,n){if(a){var r=t(a)?a(e[1]):a[e[1]];return null!=r?this.renderTokens(this.parse(r,n),i,a,r):void 0}},p.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},p.prototype.escapedValue=function(t,i){var a=i.lookup(t[1]);if(null!=a)return e.escape(a)},p.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="3.0.1",e.tags=["{{","}}"];var T=new p;return e.clearCache=function(){return T.clearCache()},e.parse=function(e,t){return T.parse(e,t)},e.render=function(e,t,a,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+i(e)+'" was given as the first argument for mustache#render(template, view, partials)');return T.render(e,t,a,n)},e.to_html=function(i,a,n,r){var o=e.render(i,a,n);if(!t(r))return o;r(o)},e.escape=l,e.Scanner=h,e.Context=f,e.Writer=p,e})}])}),$(document).ready(function(){function e(e){var t=document.location.href.split("#")[0];t+="#"+e,history.pushState("data to be passed","Title of the page",t)}function t(){e("_"),$(".profileMenuPage.profileMenuPage-filmVaJozve").fadeOut(0),$(".profileMenuPage.profileMenuPage-setting").fadeOut(0),$(".profileMenuPage.profileMenuPage-sabteRotbe").fadeIn(),$([document.documentElement,document.body]).animate({scrollTop:$(".profileMenuPage.profileMenuPage-sabteRotbe").offset().top-$("#m_header").height()-30},500)}function i(){e("_"),$(".profileMenuPage.profileMenuPage-filmVaJozve").fadeOut(0),$(".profileMenuPage.profileMenuPage-sabteRotbe").fadeOut(0),$(".profileMenuPage.profileMenuPage-setting").fadeIn(),$([document.documentElement,document.body]).animate({scrollTop:$(".profileMenuPage.profileMenuPage-setting").offset().top-$("#m_header").height()-30},500)}function a(e){var t="";for(var i in e)for(var a in e[i])isNaN(a)||(t+=e[i][a]+"<br>");return t}function n(){var e=!0,t="",i=$('#profileForm-setting input[name="postalCode"]'),a=$('#profileForm-setting input[name="email"]'),n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return isNaN(i.val())?(e=!1,t+="     .<br>",i.parents(".form-group").addClass("has-danger")):i.val().trim().length>0&&10!==i.val().trim().length?(e=!1,t+="      .<br>",i.parents(".form-group").addClass("has-danger")):i.parents(".form-group").removeClass("has-danger"),n.test(a.val())||0===a.val().trim().length?a.parents(".form-group").removeClass("has-danger"):(e=!1,t+="    .<br>",a.parents(".form-group").addClass("has-danger")),{status:e,message:t}}function r(){var e=!0,t="",i=$('#frmSabteRotbe input[name="rank"]'),a=$('#frmSabteRotbe input[name="reportFile"]');return 0===i.val().trim().length?(e=!1,t+="_  .<br>",i.parents(".form-group").addClass("has-danger")):isNaN(parseInt(i.val().toLocaleString("en").replace(",","")))||isNaN(i.val())?(e=!1,t+="    .<br>",i.parents(".form-group").addClass("has-danger")):i.parents(".form-group").removeClass("has-danger"),0===document.getElementById("reportFile").files.length?(e=!1,t+="    .<br>",a.parents(".form-group").addClass("has-danger")):a.parents(".form-group").removeClass("has-danger"),{status:e,message:t}}$(document).on("click","#btnEditUserPhoto",function(){$("#UserProfilePhoto").trigger("click")}),$(document).on("click","#uploadProfilePhotoAjaxSubmit",function(){$(".profilePhotoUploadProgressBar").fadeIn(),mApp.block(".userProfilePicWraper",{type:"loader",state:"success"});var e=$("#profilePhotoAjaxForm"),t=new FormData(e[0]);$.ajax({url:e.attr("action"),type:"POST",data:t,dataType:"json",mimeType:"multipart/form-data",cache:!1,contentType:!1,processData:!1,success:function(e){if(e.error){var t=e.error.message;toastr.error("    .<br>"+t)}else updateUserCompletionProgress(e.user.info.completion),toastr.success("   ."),1===e.user.lockProfile&&window.location.reload();mApp.unblock(".userProfilePicWraper")},xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;$(".profilePhotoUploadProgressBar .progress-bar").css("width",t+"%")}},!1),e}})});var o=$("#profilePhotoAjaxForm");$("#UserProfilePhoto").fileinput({theme:"fas",showUpload:!1,showCaption:!1,uploadAsync:!1,uploadUrl:o.attr("action"),uploadExtraData:function(){return{updateType:"photo"}},browseClass:"fileinput-btnBrowseUserImage",removeClass:"fileinput-btnRemoveUserImage",captionClass:"fileinput-captionClass",previewClass:"fileinput-previewClass",frameClass:"fileinput-frameClass",mainClass:"fileinput-mainClass",fileType:"any",overwriteInitial:!0,initialPreviewAsData:!0}),$(document).on("change","#UserProfilePhoto",function(e){($(this)[0].files[0].size/1024).toFixed(4)<500?($(".imgUserProfileImage").fadeOut(0),$(".file-input.theme-fas").fadeIn(),$(".submitProfilePic").fadeIn()):(toastr.warning("   500  "),mUtil.scrollTop())}),$("#birthdate").persianDatepicker({observer:!0,format:"YYYY/MM/DD",altField:"#birthdateAlt"}),$(document).on("click","#btnUpdateProfileInfoForm",function(){var e=n();if(!e.status)return toastr.warning(e.message),!1;var t=$("#profileForm-setting"),i=getFormData(t);mApp.block(".profileMenuPage.profileMenuPage-setting",{overlayColor:"#000000",type:"loader",state:"success",message:"  ..."}),$.ajax({type:t.attr("method"),url:t.attr("action"),data:i,dataType:"json",success:function(e){if(e.error){var t=e.error.message;toastr.warning("    .<br>"+t)}else updateUserCompletionProgress(e.user.info.completion),toastr.success("   ."),1===e.user.lockProfile&&window.location.reload();mApp.unblock(".profileMenuPage.profileMenuPage-setting")},error:function(e,t,i){var n="";n="The given data was invalid."===e.responseJSON.message?a(e.responseJSON.errors):"    .",toastr.warning(n),mApp.unblock(".profileMenuPage.profileMenuPage-setting")}})}),$(document).on("click","#btnSabteRotbe1",function(){var e=$("#frmSabteRotbe"),t=getFormData(e);mApp.block(".profileMenuPage.profileMenuPage-sabteRotbe",{overlayColor:"#000000",type:"loader",state:"success",message:"  ..."}),$.ajax({type:e.attr("method"),url:e.attr("action"),data:t,success:function(e){if(e.error){var t=e.error.message;toastr.error("    .<br>"+t)}else toastr.success("   .");mApp.unblock(".profileMenuPage.profileMenuPage-sabteRotbe")},error:function(e,t,i){toastr.error("    ."),mApp.unblock(".SendMobileVerificationCodeWarper")}})}),$(document).on("click","#btnSendMobileVerificationCode",function(){mApp.block(".SendMobileVerificationCodeWarper",{overlayColor:"#000000",type:"loader",state:"success",message:"  ..."}),$.ajax({type:"GET",url:$("#SendMobileVerificationCodeActionUrl").val(),dataType:"json",data:{},success:function(e){if(e.error){var t=e.error.message;toastr.error("    .<br>"+t)}else $("#btnSendMobileVerificationCode").fadeOut(),$(".inputVerificationWarper").fadeIn(),toastr.info("       ."),$(".inputVerificationWarper").removeClass("d-none");mUtil.scrollTo(".SendMobileVerificationCodeWarper",300),mApp.unblock(".SendMobileVerificationCodeWarper")},error:function(e,t,i){var a="";a=429===e.status?"          .       .":"    .",toastr.warning(a),mApp.unblock(".SendMobileVerificationCodeWarper")}})}),$(document).on("click","#btnVerifyMobileVerificationCode",function(){var e=$("#txtMobileVerificationCode").val();if(0===e.trim().length)return toastr.warning("    ."),!1;mApp.block(".SendMobileVerificationCodeWarper",{overlayColor:"#000000",type:"loader",state:"success",message:"  ..."}),$.ajax({type:"POST",url:$("#VerifyMobileVerificationCodeActionUrl").val(),data:{code:e},dataType:"json",success:function(e){if(e.error){var t=e.error.message;toastr.error("    .<br>"+t)}else $(".inputVerificationWarper").fadeOut(),$(".SendMobileVerificationCodeWarper").fadeOut(),$(".mobileUnVerifyMessage").removeClass("d-block"),$(".mobileUnVerifyMessage").addClass("d-none"),$(".mobileVerifyMessage").removeClass("d-none"),$(".mobileVerifyMessage").addClass("d-block"),updateUserCompletionProgress(e.user.info.completion),toastr.success("    ."),1===e.user.lockProfile&&window.location.reload();mApp.unblock(".SendMobileVerificationCodeWarper"),mUtil.scrollTo(".SendMobileVerificationCodeWarper",300)},error:function(e,t,i){var a="";a=403===e.status?"    .":422===e.status?"    .":"    .",toastr.error(a),mApp.unblock(".SendMobileVerificationCodeWarper")}})}),$(document).on("click",".profile-usermenu button",function(){var e=$(this).attr("menu");"profileMenuPage-sabteRotbe"===e?t():"profileMenuPage-filmVaJozve"===e||"profileMenuPage-setting"===e&&i()}),$(document).on("submit","#frmSabteRotbe",function(e){var t=r();if(!t.status)return toastr.warning(t.message),e.preventDefault(),!1});var s=decodeURIComponent(window.location.hash);"#_"===s?(console.log("sabte rotbe"),t()):"#_"===s?(console.log("etelaate shakhsi"),i()):(console.log("else"),i()),$(window).on("hashchange",function(){"#_"===window.location.hash?t():"#_"===window.location.hash&&i()})});
