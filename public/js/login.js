var SnippetLogin=function(){var e=$("#m_login"),i=function(e,i,a){var t=$('<div class="m-alert m-alert--outline alert alert-'+i+' alert-dismissible" role="alert">\t\t\t<button type="button" class="close" data-dismiss="alert" aria-label="Close"></button>\t\t\t<span></span>\t\t</div>');e.find(".alert").remove(),t.prependTo(e),mUtil.animateClass(t[0],"fadeIn animated"),t.find("span").html(a)},a=function(e,i){var a=$('<div class = "form-control-feedback">'+i+"</div>");e.find(".form-control-feedback").remove(),a.appendTo(e),mUtil.animateClass(a[0],"fadeIn animated")},t=function(e){window.location.replace(e)},o=function(){e.removeClass("m-login--forget-password"),e.removeClass("m-login--signin"),e.addClass("m-login--signup"),mUtil.animateClass(e.find(".m-login__signup")[0],"flipInX animated")},n=function(){e.removeClass("m-login--forget-password"),e.removeClass("m-login--signup"),e.addClass("m-login--signin"),mUtil.animateClass(e.find(".m-login__signin")[0],"flipInX animated")},r=function(){e.removeClass("m-login--signin"),e.removeClass("m-login--signup"),e.addClass("m-login--forget-password"),mUtil.animateClass(e.find(".m-login__forget-password")[0],"flipInX animated")},l=function(){$("#m_login_forget_password").click(function(e){e.preventDefault(),r()}),$("#m_login_forget_password_cancel").click(function(e){e.preventDefault(),n()}),$("#m_login_signup").click(function(e){e.preventDefault(),o()}),$("#m_login_signup_cancel").click(function(e){e.preventDefault(),n()})},s=function(){$("#m_login_signin_submit").click(function(e){e.preventDefault();var o=$(this),n=$(this).closest("form"),r=$("#m-login__form_mobile"),l=$("#m-login__form_code");n.validate({rules:{mobile:{required:!0},password:{required:!0}}}),n.valid()&&(o.addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0),n.ajaxSubmit({url:n.attr("action"),success:function(e,i,a,n){setTimeout(function(){o.removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1),1===e.status&&t(e.redirectTo)},2e3)},error:function(e){var t=e.responseJSON.errors;setTimeout(function(){o.removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1),i(n,"danger","خطا در ورود اطلاعات!"),console.debug(t.nationalCode),void 0!==t.nationalCode&&(l.addClass("has-danger"),a(l,t.nationalCode[0])),void 0!==t.mobile&&(r.addClass("has-danger"),a(r,t.mobile[0]))},2e3)}}))})},d=function(){$("#m_login_signup_submit").click(function(a){a.preventDefault();var t=$(this),o=$(this).closest("form");o.validate({rules:{fullname:{required:!0},email:{required:!0,email:!0},password:{required:!0},rpassword:{required:!0},agree:{required:!0}}}),o.valid()&&(t.addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0),o.ajaxSubmit({url:o.attr("action"),success:function(a,r,l,s){setTimeout(function(){t.removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1),o.clearForm(),o.validate().resetForm(),n();var a=e.find(".m-login__signin form");a.clearForm(),a.validate().resetForm(),i(a,"success","Thank you. To complete your registration please check your email.")},2e3)}}))})},m=function(){$("#m_login_forget_password_submit").click(function(a){a.preventDefault();var t=$(this),o=$(this).closest("form");o.validate({rules:{email:{required:!0,email:!0}}}),o.valid()&&(t.addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0),o.ajaxSubmit({url:o.attr("action"),success:function(a,r,l,s){setTimeout(function(){t.removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1),o.clearForm(),o.validate().resetForm(),n();var a=e.find(".m-login__signin form");a.clearForm(),a.validate().resetForm(),i(a,"success","Cool! Password recovery instruction has been sent to your email.")},2e3)}}))})};return{init:function(){l(),s(),d(),m()}}}();jQuery(document).ready(function(){SnippetLogin.init()});
